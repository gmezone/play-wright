"use strict"
define("web-blends/adapters/address",["exports","sfw-services/adapters/address"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/adapters/application",["exports","sfw-services/adapters/application"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/adapters/auth-token",["exports","sfw-services/adapters/auth-token"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/adapters/contact-preference",["exports","sfw-services/adapters/contact-preference"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/adapters/create-rewards-user",["exports","sfw-services/adapters/create-rewards-user"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/adapters/friends-info",["exports","sfw-services/adapters/friends-info"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/adapters/order-line-item",["exports","sfw-services/adapters/order-line-item"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/adapters/order",["exports","sfw-services/adapters/order"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/adapters/payment-instrument",["exports","sfw-services/adapters/payment-instrument"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/adapters/payment-method",["exports","sfw-services/adapters/payment-method"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/adapters/product",["exports","sfw-services/adapters/product"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/adapters/profile",["exports","sfw-services/adapters/profile"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/adapters/reward",["exports","sfw-services/adapters/reward"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/adapters/rewards-claim-promotion",["exports","sfw-services/adapters/rewards-claim-promotion"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/adapters/save-to-cart",["exports","sfw-services/adapters/save-to-cart"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/adapters/token",["exports","sfw-services/adapters/token"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/adapters/warranty",["exports","sfw-services/adapters/warranty"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/app",["exports","ember-load-initializers","web-blends/resolver","web-blends/config/environment","web-blends/modules/back-stack","web-blends/modules/busy","web-blends/services/purchase-tracker","web-blends/utils/constants","web-blends/utils/perf","sfw-messaging/utils/messages","sfw-messaging/utils/post-messages","sfw-services/utils/strings","sfw-telemetry/utils/blend-bi-tracker","sfw-telemetry/utils/flight-config"],function(e,t,n,a,r,s,i,l,o,d,u,c,m,f){Object.defineProperty(e,"__esModule",{value:!0})
var p=Ember.Application.extend({modulePrefix:a.default.modulePrefix,podModulePrefix:a.default.podModulePrefix,Resolver:n.default})
Ember.Application.initializer({name:"main",initialize:function(e){u.default.send(d.default.status({data:"app initializing"})),f.default.setCookieNames(["FlightsWB"]),f.default.setFlightNamePrefix("wb_"),f.default.setExpFlightNamePrefix("exwb_"),e.register("strings:current",c.default,{instantiate:!1,singleton:!0}),e.inject("component","strings","strings:current"),e.inject("controller","strings","strings:current"),e.inject("route","strings","strings:current"),e.register("constants:current",l.default,{instantiate:!1,singleton:!0}),e.inject("component","constants","constants:current"),e.inject("controller","constants","constants:current"),e.inject("route","constants","constants:current"),e.register("service:tracker",i.default),o.default.markOnce(o.default.markerNames.appInit)}})
var g=function(e,t){"production"!==a.default.environment&&console.error(e),s.default.busy()
var n={errorMessage:e.message||JSON.stringify(e),stack:e.stack},r={errorDetail:n,closeBlend:t}
m.default.captureContentPageAction({name:"blendGlobalError"},r),t&&setTimeout(function(){n&&n.errorMessage&&u.default.send(d.default.error({status:"cancel",data:n}))},2e3)}
Ember.onerror=function(e){return g(e,!0)},window.onerror=function(e){f.default.isLoaded()&&f.default.isEnabled("windowonerror")&&g(e,!1)},Ember.Route.reopen({activate:function(e){r.default.push(this.routeName,this.context),this._super(e)},getCurrentModel:function(){return this.modelFor(this.routeName)}}),Ember.TextField.reopen({attributeBindings:["aria-label"]}),(0,t.default)(p,a.default.modulePrefix),e.default=p}),define("web-blends/components/add-payment-instrument-form",["exports","sfw-components/components/add-payment-instrument-form"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/components/address-display-data",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({classNames:["addressDisplayData"],address:null})}),define("web-blends/components/address-summary",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({classNames:["summaryBillingAddress"],isDirectDebit:null,isTaxIdDescription:null,pidlData:null,accountTokenTitle:Ember.computed("pidlData.originalPidl","isDirectDebit",function(){if(this.get("isDirectDebit")){var e=this.get("pidlData.originalPidl"),t=e&&e[0]&&e[0][0]&&e[0][0].data_description&&e[0][0].data_description.details,n=t&&Array.isArray(t)&&t[0]&&t[0].data_description&&t[0].data_description.accountToken
return n&&n.display_name}}),bankCodeTitle:Ember.computed("pidlData.originalPidl","isDirectDebit",function(){if(this.get("isDirectDebit")){var e=this.get("pidlData.originalPidl"),t=e&&e[0]&&e[0][0]&&e[0][0].data_description&&e[0][0].data_description.details,n=t&&Array.isArray(t)&&t[0]&&t[0].data_description&&t[0].data_description.bankCode
return n&&n.display_name}}),taxId:Ember.computed("pidlData.data","pidlData.originalPidl",function(){var e={},t=this.get("pidlData.data")
t&&t.length>1&&this.get("isTaxIdDescription")&&(e=Ember.Object.create(t[1]))
var n=this.get("pidlData.originalPidl")
return n&&Array.isArray(n)&&n.length>1&&n[1]&&n[1].length>0&&n[1][0].data_description&&n[1][0].data_description.value&&n[1][0].data_description.value.display_name&&(e.title=n[1][0].data_description.value.display_name),e})})}),define("web-blends/components/auto-renew-switch",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({checkBoxClicked:!0,actions:{toggle:function(){this.set("checkBoxClicked",!this.get("checkBoxClicked")),this.sendAction()}}})}),define("web-blends/components/auto-renewal-consent",["exports","sfw-telemetry/utils/client","sfw-telemetry/utils/flight-config"],function(e,t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({telemetryBi:Ember.inject.service(),init:function(){this._super.apply(this,arguments),this.get("telemetryBi").setDidStartYearlySubscription(!0)},autoRenewalConsent:Ember.inject.service(),isChecked:Ember.computed("controller.isAutoRenewalCheckboxChecked",function(){return this.get("controller.isAutoRenewalCheckboxChecked")}),autoRenewalConsentError:Ember.computed("autoRenewalConsent.showAutoRenewalConsentError",function(){return this.get("autoRenewalConsent.showAutoRenewalConsentError")}),isMercury:Ember.computed(function(){return t.default.isMercury()}),isModernXboxClient:Ember.computed(function(){return t.default.isModernXboxClient()}),mercuryCheckedClass:Ember.computed("controller.isAutoRenewalCheckboxChecked",function(){return this.get("controller.isAutoRenewalCheckboxChecked")?"":"btn-mercury-checked"}),willDestroyElement:function(){this.get("autoRenewalConsent").setAutoRenewalConsentError(!1)},mercuryAutoRenewalConsentCheckboxText:Ember.computed(function(){return n.default.isEnabled("mrcryoldrenewtxt")?this.get("strings.Auto_Renewal_Consent_Message"):this.get("strings.Mercury_Auto_Renewal_Consent_Message")}),mercuryAutoRenewalConsentRequiredText:Ember.computed(function(){return n.default.isEnabled("mrcryoldrenewtxt")?"":this.get("strings.Mercury_Auto_Renewal_Consent_Required")}),actions:{onChange:function(){this.get("autoRenewalConsent").setAutoRenewalConsentError(!1),this.get("controller").toggleAutoRenewalCheckboxChecked(),this.get("isChecked")&&this.get("telemetryBi").setDidFinishYearlySubscription(!0)}}})}),define("web-blends/components/bullet-list",["exports","sfw-components/components/bullet-list"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/components/button-dropdown",["exports","sfw-components/components/button-dropdown"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/components/call-to-action",["exports","sfw-telemetry/utils/app-globals","web-blends/modules/busy","sfw-messaging/utils/post-messages","sfw-messaging/utils/messages","sfw-telemetry/utils/blend-bi-tracker","sfw-components/utils/order-bi-data","web-blends/modules/flow-stack","sfw-telemetry/utils/start-data","sfw-services/utils/error-equals","sfw-telemetry/utils/flight-config","sfw-telemetry/utils/client","sfw-messaging/utils/open-terms","sfw-services/models/select-pi","sfw-services/utils/map-omex-not-eligible-error","web-blends/utils/perf","web-blends/utils/pidl-sdk","sfw-services/errors/app-error","sfw-services/services/recurrences","sfw-services/utils/get-local-date"],function(e,t,n,a,r,s,i,l,o,d,u,c,m,f,p,g,b,h,y,P){Object.defineProperty(e,"__esModule",{value:!0})
var _=null
e.default=Ember.Component.extend({classNames:["CTAContainer"],order:null,selectedPi:null,selectedBackupPi:null,model:null,includeCancel:!0,controller:null,confirmButtonText:null,cancelButtonTextOverride:null,readyToTakeAction:!1,needToAddPi:!1,needToAddAddress:!1,isAddingBackupPi:!1,handlingChallenge:!1,daUpgradeConsent:!1,profile:null,contactPreference:Ember.inject.service(),user:Ember.inject.service(),paymentIncentive:Ember.inject.service(),creditCardCountry:Ember.inject.service(),autoRenewalConsent:Ember.inject.service(),nextAddPi_bi_name:"NextToAddPi",isDisabled:Ember.computed("readyToTakeAction",function(){return!this.get("readyToTakeAction")}),showAddAddress:Ember.computed("needToAddAddress",function(){return this.get("needToAddAddress")}),showAddBackupPi:Ember.computed("isAddingBackupPi",function(){return this.get("isAddingBackupPi")&&!t.default._addOptionalBackupPiVisited}),showSelectAddressNextButton:Ember.computed("showSelectAddressLink",function(){return this.get("showSelectAddressLink")}),isXboxOne:Ember.computed(function(){return c.default.isXboxOneClient()}),autoConfirmer:Ember.on("init",Ember.observer("isDisabled","controller",function(){this.get("isDisabled")||this.get("controller.autoConfirm")&&(this.get("controller.threeDsSessionId")?this.set("threeDsSessionId",this.get("controller.threeDsSessionId")):this.set("handlingChallenge",!0),this.set("controller.autoConfirm",!1),this.send("purchase"))})),confirm_bi_name:"Confirm",confirm_bi_slot:"1",cancel_bi_name:"Cancel",cancel_bi_slot:"2",threeDsSessionId:null,pidl:Ember.inject.service("pidl"),actions:{displayXPriceAffirmationTooltip:function(){c.default.isModernXboxClient()&&$(".AffirmationTooltip").length&&$(".AffirmationTooltip").css("visibility","visible")},hideXPriceAffirmationTooltip:function(){c.default.isModernXboxClient()&&$(".AffirmationTooltip").length&&$(".AffirmationTooltip").css("visibility","hidden")},redirectForAsyncPi:function(){return s.default.capturePageAction($("#nextButton")),this.get("controller").replaceRoute("purchase.redirectConfirm","asyncPurchase")},addAddress:function(){if(s.default.capturePageAction($("#nextButton")),t.default._selectPiData||(t.default._selectPiData=f.default.create()),t.default._selectPiData.selectedPis=this.get("model.changedPis"),u.default.isEnabled("addresssdk")&&!this.get("model.isAddressMissingForBeneficiary"))return this.get("controller").replaceRoute("paymentAndBilling.addressSdk",{queryParams:{context:"address",puid:"me",isBeneficiaryPurchase:!1}})
this.get("controller").replaceRoute("paymentAndBilling.addName",{queryParams:{context:"addaddress",puid:this.get("model.isAddressMissingForBeneficiary")?this.get("model.order.beneficiaryPuid"):"me"}})},cancel:function(){var e=this;(c.default.isModernXboxClient()||c.default.isModernDesktopClient())&&a.default.send(r.default.action("cancel"))
var t=this
if(!n.default.isBusy()){n.default.busy()
var d=t.get("controller"),m=t.get("order"),f=t.get("selectedPi"),p=t.get("profile"),g={orderInfo:(0,i.default)(m,f,null,!0,p)}
if(!"US".equalsIgnoreCase(o.default.get().Market)||!m.get("billingInformation.soldToAddressId"))return s.default.capturePageAction($("#cancelButton"),g),this.get("paymentIncentive").isUserEligibleToSeeIncentive().then(function(t){e.get("paymentIncentive").isReactiveRewardsFlightEnabled()&&t?d.send("handleTransition","purchase.rewardsReactive"):u.default.isEnabled("savetocart")?(n.default.done(),d.send("handleTransition","purchase.saveToCart")):(s.default.capturePurchaseStatePageAction("Cancelled",g),l.default.clearAndDone("cancel"))})
t.get("user").getDefaultAddress().then(function(a){var r=t.get("user").getAddressZipCodeInfo(a)
return g.addressRegionInRegionList=r.addressRegionInRegionList,s.default.capturePageAction($("#cancelButton"),g),e.get("paymentIncentive").isUserEligibleToSeeIncentive().then(function(t){e.get("paymentIncentive").isReactiveRewardsFlightEnabled()&&t?d.send("handleTransition","purchase.rewardsReactive"):u.default.isEnabled("savetocart")?(n.default.done(),d.send("handleTransition","purchase.saveToCart")):(s.default.capturePurchaseStatePageAction("Cancelled",g),l.default.clearAndDone("cancel"))})})}},purchase:function(){(c.default.isModernXboxClient()||c.default.isModernDesktopClient())&&a.default.send(r.default.action("buy"))
var e=this
if(!e.get("isDisabled")&&!n.default.isBusy()){var t,m=e.get("controller")
if(u.default.isEnabled("challengecheck")){if(!this.get("threeDsSessionId")&&!this.get("handlingChallenge")&&m.get("autoRenewalConsentRequired")&&!m.get("isAutoRenewalCheckboxChecked"))return e.get("autoRenewalConsent").setAutoRenewalConsentError(!0),void(c.default.isSaturnDesktop()||c.default.isModernXboxClient()||c.default.isGamingApp()||Ember.run.scheduleOnce("afterRender",this,function(){$("#autoRenewalConsent").focus()}))}else if(m.get("autoRenewalConsentRequired")&&!m.get("isAutoRenewalCheckboxChecked"))return e.get("autoRenewalConsent").setAutoRenewalConsentError(!0),void(c.default.isSaturnDesktop()||c.default.isModernXboxClient()||c.default.isGamingApp()||Ember.run.scheduleOnce("afterRender",this,function(){$("#autoRenewalConsent").focus()}))
if(n.default.busy(),s.default.captureContentPageAction({name:"startingToPurchase"}),this.set("isDisabled",!0),u.default.isEnabled("skippreview")&&m.get("model.routeToDowngrade")&&m.get("model.downgradeContext"))n.default.done(),m.replaceRoute("purchase.subscriptionDowngrade",{queryParams:m.get("model.downgradeContext")})
else if(m.get("model.mercuryDunningScenario"))m.get("model.mercuryDunningScenario")===this.get("constants").mercuryDunningScenarios.trueDunning?y.default.updatePiAndCharge(e.get("order.firstLineItem.recurrenceId"),e.get("selectedPi.id"),e.get("order.billingInformation.sessionId")).then(function(){y.default.getSubscriptionEvents(e.get("order.firstLineItem.recurrenceId")).then(function(t){var n=e.get("order")
n.set("expirationTime",t.expirationTime),l.default.clearAndDone("success",n)})}):m.get("model.mercuryDunningScenario")===this.get("constants").mercuryDunningScenarios.updatePi&&y.default.updatePi(e.get("order.firstLineItem.recurrenceId"),e.get("selectedPi.id"),e.get("order.billingInformation.sessionId")).then(function(){l.default.clearAndDone("success",e.get("order"))})
else{g.default.markOnce(g.default.markerNames.purchaseStart)
var f=e.get("selectedPi"),h=e.get("order");(m.get("model.checkoutPromise")||(t=Ember.Object.create({isCheckingOut:h&&h.get("isCheckingOut")}),Ember.RSVP.resolve(t))).then(function(t){if(h.get("firstLineItem.product.isXboxUltimate")||h.get("firstLineItem.product.isXboxUltimateFamily"));else if(!(t.get("isCheckingOut")||o.default.get().IsDigitalAttachment))return m.replaceRoute("error","OrderCheckoutFailed")
var y=Ember.RSVP.resolve()
h.get("isPiRequired")&&(y=e.get("user").getProfile().then(function(e){if(e.get("isNew")||e.get("requiredFieldsDirty")||e.get("hasDirtyAttributes"))return e.save()})),y.then(function(){var t=f&&f.get&&f.get("payment_method_type")&&f.get("payment_method_type").toLowerCase&&f.get("payment_method_type").toLowerCase(),y="stored_value"===t,P="alipay_billing_agreement"===t,v=f&&f.id,w=e.get("selectedBackupPi"),C=w&&w.id||h&&h.get&&h.get("selectedBackupPi"),x=f&&f.get("piAccountId"),I=w&&w.get("piAccountId"),k=h.get("firstLineItem.isPreOrder"),T=h.get("firstLineItem.isSubscriptionItem"),A=h.get("firstLineItem.challengePurchaseContext")
o.default.get().selectedPi=f
var S={orderInfo:(0,i.default)(h,f,C,!0)},R=Ember.RSVP.resolve()
"US".equalsIgnoreCase(o.default.get().Market)&&h.get("billingInformation.soldToAddressId")&&(R=e.get("user").getDefaultAddress().then(function(t){var n=e.get("user").getAddressZipCodeInfo(t)
S.addressRegionInRegionList=n.addressRegionInRegionList})),R.then(function(){if(u.default.isEnabled("enableccsmd")){var t=e.get("creditCardCountry").getCountry()||o.default.get().Market
S.piCountry=t,S.isSmd=!t.equalsIgnoreCase(o.default.get().Market)}var R=function(t){var R=arguments.length>1&&void 0!==arguments[1]&&arguments[1]
if(!(h&&h.get("isCheckingOut")||h.get("isPending")||o.default.get().IsDigitalAttachment))return s.default.capturePurchaseStatePageAction("Failed",S),m.replaceRoute("error","InvalidOrderFormat")
s.default.captureContentPageAction({name:"makingPurchase"}),a.default.send(r.default.piSelected(v,"Purchased")),e.get("contactPreference").send("WebBlend").catch(function(){}),h.get("billingInformation")&&o.default.get().tokenizedRiskData&&h.set("billingInformation.tokenizedPaymentInstrumentData",o.default.get().tokenizedRiskData),h.get("billingInformation")&&t&&(h.set("billingInformation.sessionId",t),R&&(S.threeDsChallengeCompleted=!0,h.set("billingInformation.challengeCompletedKind","3DS2"))),h.set("orderState","Purchased"),u.default.isEnabled("daconvertenabled")&&o.default.get().IsDigitalAttachment&&e.get("daUpgradeConsent")&&h.get("firstLineItem").set("userConsent","upgradeWithConsent"),h.save().then(function(){var t=h.get("lineItems"),a={orderId:h.get("orderId"),count:t&&t.length||0,lineItems:t&&t.map(function(e){return e.serialize({full:!0})})}
if(h&&"pending"===h.get("orderState").toLowerCase()){if(s.default.capturePurchaseStatePageAction("Pending",S),P)return n.default.done(),m.replaceRoute("error","ProviderBusy")}else{S.orderInfo=(0,i.default)(h,f,w,!0),h&&"ordered"===h.get("orderState").toLowerCase()?s.default.capturePurchaseStatePageAction("Ordered",S,"PURCHASECOMPLETE"):s.default.capturePurchaseStatePageAction("Purchased",S,"PURCHASECOMPLETE"),g.default.markOnce(g.default.markerNames.purchaseComplete),g.default.capturePurchase({orderId:h.get("orderId")})
var r=h.get("firstLineItem.isCsvPurchase"),d="purchase"
if(h.get("firstLineItem.giftee")?d="gift":u.default.isEnabled("showdlcthankyou")&&e.get("shouldShowDLCConfirmation")&&(d="dlcPurchaseWithThanks"),!c.default.isModernXboxClient()&&(d.equalsIgnoreCase("gift")||d.equalsIgnoreCase("dlcPurchaseWithThanks")||o.default.get().DisplayCompletion))return n.default.done(),m.replaceRoute("purchase.complete",h.id,{queryParams:{scenario:d}})
if(u.default.isEnabled("csvmanualreview")&&r&&"ordered"===h.get("orderState").toLowerCase()&&h.get("isInManualReview"))return s.default.capturePurchaseStatePageAction("InReview",S),m.replaceRoute("error","OrderInProgress")
R&&c.default.isXboxOneClient()?l.default.clearAndDone("success",a):l.default.pop("success",a)}},function(t){if(n.default.done(),u.default.isEnabled("daconvertenabled")&&o.default.get().IsDigitalAttachment&&d.default.userConsentRequired(t)){n.default.done()
var l=h.get("billingInformation")
return h.rollbackAttributes(),e.handlePreconditionFailedForDigitalAttach(t,l)}if(h.rollbackAttributes(),u.default.isEnabled("cleartokenizeddataonerror")&&(o.default.set("tokenizedRiskData",null),h.get("billingInformation.tokenizedPaymentInstrumentData")&&h.set("billingInformation.tokenizedPaymentInstrumentData","")),S.orderInfo=(0,i.default)(h,f,w,!1),S.errorCode=t&&t.code,d.default.isCvvChallengeError(t)){if(s.default.capturePurchaseStatePageAction("NeedCvvRiskChallenge",S),!u.default.isEnabled("pidlsdkcvv"))return m.replaceRoute("purchase.riskChallenge","purchase","Cvv")
var g=m.replaceRoute("purchase.riskChallengeSdk",{queryParams:{context:"challenge",challengeType:"Cvv"}})
g.data.order=h,g.data.selectedPi=f,g.data.selectedBackupPiId=C}else{if(d.default.is3DSRedirectChallengeError(t))return c.default.isXboxOneClient()?(s.default.capturePurchaseStatePageAction("Failed",S),m.replaceRoute("error","RedirectWeb")):(s.default.capturePurchaseStatePageAction("Need3DSRedirectChallenge",S),m.replaceRoute("purchase.redirectConfirm","riskChallenge"))
if(e.enablePsd2()&&d.default.is3DS2ChallengeError(t)){var P=e.get("pidl"),R=C||v,E=I||x,M=P.paymentSessionData(A,o.default.get().Culture,R,E,b.default.pidlSdkPartnerForChallenge(),b.default.challengeWindowSize(),k,T,h.get("orderId"))
if(s.default.captureContentPageAction({name:"need3DS2Challenge"}),c.default.isXboxOneClient()){_=a.default.listen(function(t){e.listenChallengeMessage(t,e)}),n.default.busy(),s.default.captureContentPageAction({name:"sendChallengePostMessage"}),a.default.send(r.default.launch3DsChallenge(M))}else{var B=m.replaceRoute("purchase.riskChallengeSdk",{queryParams:{context:"challenge",challengeType:"threeds2"}})
B.data.order=h,B.data.selectedPi=f,B.data.selectedBackupPiId=C,B.data.paymentSession=M}}else{if(!d.default.isNonSimMobiChallengeError(t)){if(d.default.needsBackupPi(t)&&y)return"on"===h.get("firstLineItem.askToBuySetting")?m.replaceRoute("purchase.askToBuy",{queryParams:{orderId:h.id,selectedPiId:f.id,reason:e.get("constants").askToBuy.reasons.insufficientCsv}}):(s.default.capturePurchaseStatePageAction("NeedsBackupPi",S),m.replaceRoute("purchase.selectPi","backupPi"))
if(d.default.isBlockedByFamilyPolicy(t))return m.replaceRoute("purchase.askToBuy",{queryParams:{orderId:h.id,selectedPiId:f.id,reason:e.get("constants").askToBuy.reasons.askToBuyPolicy}})
if(s.default.capturePurchaseStatePageAction("Failed",S),h.get("isOmexProduct")&&(t=p.default.getError(t)),u.default.isEnabled("enableccsmd")){var D=e.get("creditCardCountry").getCountry()||o.default.get().Market
t.pageDetails={piCountry:D,isSmd:!D.equalsIgnoreCase(o.default.get().Market)}}return m.replaceRoute("error",t)}if(s.default.capturePurchaseStatePageAction("NeedNonSimMobiChallenge",S),!u.default.isEnabled("pidlsdksms"))return m.replaceRoute("purchase.mobiChallenge")
var L=m.replaceRoute("purchase.riskChallengeSdk",{queryParams:{context:"challenge",challengeType:"Sms"}})
L.data.order=h,L.data.selectedPi=f,L.data.selectedBackupPiId=C}}})}
if(e.enablePsd2()){var E=C||v
if(e.get("threeDsSessionId")){s.default.captureContentPageAction({name:"threeDsAutoConfirm"})
var M=e.get("threeDsSessionId"),B=m.get("model.order.sessionId")
c.default.isWebClient()&&B&&B!==M&&m.set("model.order.sessionId",M),e.set("threeDsSessionId",null),R(M,!0)}else if(e.get("handlingChallenge")||o.default.get().tokenizedRiskData)s.default.captureContentPageAction({name:"cvvOrSmsAutoConfirm"}),R()
else if(E){s.default.capturePageAction($("#confirmButton"),S,80)
var D=e.get("pidl")
D.setEnvironment(b.default.sdkEnvironment())
var L=b.default.pidlSdkCreateSessionOptions()
L.returnOptions={callbacks:{success:function(t){if(s.default.captureContentPageAction({name:"challengeCreatePaymentSessionSuccess"}),t&&t.id&&t.isChallengeRequired)if(s.default.captureContentPageAction({name:"need3DS2Challenge"}),c.default.isXboxOneClient())_=a.default.listen(function(t){e.listenChallengeMessage(t,e)}),s.default.captureContentPageAction({name:"sendChallengePostMessage"}),a.default.send(r.default.launch3DsChallenge(t))
else{n.default.done(),c.default.isWebClient()&&m.get("model.order.sessionId")&&m.set("model.order.sessionId",t.id)
var i=m.replaceRoute("purchase.riskChallengeSdk",{queryParams:{context:"challenge",challengeType:"threeds2"}})
i.data.order=h,i.data.selectedPi=f,i.data.selectedBackupPiId=C,i.data.paymentSession=t}else t&&t.id?(s.default.captureContentPageAction({name:"noChallengeRequired"}),R()):(s.default.captureContentPageAction({name:"noChallengeSessionIdFound"}),R())},failure:function(e){s.default.captureContentPageAction({name:"challengeCreatePaymentSessionFailed"},{error:e}),R()}}}
var O=I||x,F=D.paymentSessionData(A,o.default.get().Culture,E,O,b.default.pidlSdkPartnerForChallenge(),b.default.challengeWindowSize(),k,T,h.get("orderId"))
s.default.captureContentPageAction({name:"challengeCreatePaymentSessionCalled"}),D.createPaymentSession(L,F)}else s.default.capturePageAction($("#confirmButton"),S,80),s.default.captureContentPageAction({name:"noPiFreePurchase"}),R()}else s.default.capturePageAction($("#confirmButton"),S,80),R()}).catch(function(){})},function(e){return m.replaceRoute("error",e)})}).catch(function(){})}}},addPi:function(){s.default.capturePageAction($("#nextButton"))
var e=this.get("controller")
if(e&&!e.get("hasPiIfRequired"))return e.get("hasAllowedPaymentInstruments")&&e.get("model.piContainer.hasAsyncPis")?e.send("handleTransition","purchase.selectPi","selectPi"):e.send("handleTransition","paymentAndBilling.selectPaymentInstrumentSdk",{queryParams:{context:"selectpi"}}),!1},addBackupPi:function(){s.default.capturePageAction($("#nextButton"))
var e=this.get("controller")
if(e&&e.get("isAddingBackupPi")){if(e.get("hasAllowedPaymentInstruments")>1)return n.default.done(),e.replaceRoute("purchase.selectPi","backupPi")
if(t.default._selectPiData=f.default.create({selectBackupPi:!0,selectedPis:{id:this.get("selectedPi.id")}}),!t.default._addOptionalBackupPiVisited)return n.default.done(),e.replaceRoute("paymentAndBilling.selectPaymentInstrumentSdk",{queryParams:{context:"selectpi",backupPi:!0}})}},verifyPi:function(){var e=this.get("selectedPi"),t=this.get("controller"),n=e.get("payment_method_family"),a=e.get("payment_method_type"),r={piType:a,piMethod:n}
s.default.capturePageAction($("#verifyButton"),r),"ach"===a||"sepa"===a&&u.default.isEnabled("pidlsdkallpis")?t.send("handleTransition","paymentAndBilling.paymentInstrumentSdk",{queryParams:{context:"challenge",paymentMethodFamily:n,paymentMethodType:a,piId:e.id}}):t.send("handleTransition","paymentAndBilling.directDebitChallenge",{queryParams:{piId:e.id}})},viewTerms:function(){(c.default.isModernXboxClient()||c.default.isModernDesktopClient())&&a.default.send(r.default.action("viewterms"))
s.default.captureContentPageAction({name:"ViewTermsButtonClicked"})
var e="CN".equalsIgnoreCase(o.default.get().Market),t=!1,n=void 0
this.get("isXboxOne")&&e?n="BesTV":e?n="msa":this.get("order.firstLineItem.giftee")?n="gifttermslink":o.default.get().DeviceSerialNumber?(n=this.get("isXboxOne")?"salestou":this.get("order.firstLineItem.isXboxWarrantyLegalTerms")?"xboxWarrantyTermsLink":"surfaceWarrantyTermsLink",t=!0):n="salestou",m.default.open(n,"",t)},selectAddress:function(){s.default.capturePageAction($("#nextButton"))
var e=this.get("controller")
t.default._selectPiData||(t.default._selectPiData=f.default.create()),t.default._selectPiData.selectedPis=this.get("model.changedPis"),e&&e.get("model.isAddressMissingForBeneficiary")?e.send("handleTransition","purchase.selectAddress",this.get("model.order.beneficiaryPuid")):e.send("handleTransition","purchase.selectAddress","me")}},cancelButtonText:Ember.computed("cancelButtonTextOverride",function(){return this.get("cancelButtonTextOverride")||this.get("strings.Shared_Button_Cancel")}),isDirectDebitChallengeRequired:Ember.computed("selectedPi",function(){return this.get("selectedPi.display_info.isDirectDebitChallengeRequired")}),listenChallengeMessage:function(e,t){if(e){var a=e.message
if("challengeCompleted".equalsIgnoreCase(a)){var r=e.status,i=e.paymentSession,o=i&&i.id,d=i&&i.challengeStatus
_&&_.unsubscribe(),s.default.captureContentPageAction({name:"challengeCompletedPostMessage"},{status:e.status,error:e.error,paymentSession:i}),n.default.done()
var u=void 0
"success".equalsIgnoreCase(r)&&o&&("succeeded".equalsIgnoreCase(d)||"notapplicable".equalsIgnoreCase(d))?(s.default.captureContentPageAction({name:"threedsChallengeSuccess"}),t.set("threeDsSessionId",o),t.get("isDisabled")&&t.set("isDisabled",!1),t.send("purchase")):"cancel".equalsIgnoreCase(r)?(n.default.busy(),s.default.capturePurchaseStatePageAction("Cancelled",{threeDsChallengeCancel:!0}),s.default.captureContentPageAction({name:"threedsChallengeCancelled"}),l.default.clearAndDone("cancel")):"failed".equalsIgnoreCase(d)?((u=new h.default("ChallengeFailure")).message={threeDsChallenge:!0},t.get("controller").replaceRoute("error",u)):"timedOut".equalsIgnoreCase(d)?((u=new h.default("ChallengeTimedOut")).message={threeDsChallenge:!0},t.get("controller").replaceRoute("error",u)):"success".equalsIgnoreCase(r)&&"succeeded".equalsIgnoreCase(d)?o||((u=new h.default("NoSessionFound")).message={threeDsChallenge:!0},t.get("controller").replaceRoute("error",u)):((u=new h.default("ChallengeStatusFailure")).message={threeDsChallenge:!0,status:r,challengeStatus:d},t.get("controller").replaceRoute("error",u))}}},enablePsd2:function(){return c.default.isXboxOneClient()&&u.default.isEnabled("psd2xboxenable")||!c.default.isXboxOneClient()&&u.default.isEnabled("psd2enable")},handlePreconditionFailedForDigitalAttach:function(e,t){if(u.default.isEnabled("daconvertenabled")&&o.default.get().IsDigitalAttachment){var n=this.get("controller")
try{var a={orderId:"",selectedBillingInfo:t},r=e.innerError.innererror.message,s=r.indexOf("{"),i=r.lastIndexOf("}"),l=JSON.parse(r.substr(s,i-s+1)).innererror.PurchaseLineItemExceptionContext
if(l&&l.length){var d=l[0]
if(d){var c=d.CurrentSubscriptionDetail
c&&(a.ownedBigId={productId:c.BigId.split("/")[0],skuId:c.BigId.split("/")[1]},a.expirationDate=c.ExpirationDate,a.sharedType=c.SharedType)
var m=d.ConvertibleProducts.find(function(e){return"Prorate"===e.ConversionType})
if(m){var f=m.BigId?m.BigId:d.ProductId+"/"+d.SkuId
a.convertBigId={productId:f.split("/")[0],skuId:f.split("/")[1]}}a.originalBigId={productId:d.ProductId,skuId:d.SkuId},u.default.isEnabled("daproratedynamic")&&(a.newExpirationDate=(0,P.default)(d.NewExpirationDate),a.currentExpirationDate=(0,P.default)(d.CurrentSubscriptionDetail.ExpirationDate))}}return n.replaceRoute("digitalAttach.prorate",JSON.stringify(a))}catch(e){n.replaceRoute("error",e)}}},didInsertElement:function(){var e=$(".btn-primary").filter(":visible:first")[0]||$(".ember-application").find("button").filter(":visible:first")[0]
e&&Ember.run.later(this,function(){e.focus()},200)},isNotAskAPurchaserEligible:Ember.computed(function(){return!c.default.isAskAPurchaserEligible()}),shouldShowDLCConfirmation:Ember.computed("order",function(){var e=this.get("order.firstLineItem.product.ProductKind"),t=this.get("order.firstLineItem.product.ProductFamily")
return!(!e||!t)&&(t.equalsIgnoreCase("games")&&(c.default.isInAppClient()?this.get("constants").dlcThankYouCategories.iap.includes(e.toLowerCase()):this.get("constants").dlcThankYouCategories.other.includes(e.toLowerCase())))}),isMercury:Ember.computed(function(){return c.default.isMercury()}),isModernXboxClient:Ember.computed(function(){return c.default.isModernXboxClient()}),showCancelMercury:Ember.computed("includeCancel",function(){return c.default.isModernXboxClient()&&this.get("includeCancel")}),showCancelNotModernXboxClient:Ember.computed("includeCancel",function(){return!(c.default.isSaturnDesktop()||c.default.isModernXboxClient())&&this.get("includeCancel")}),showBuyFirst:Ember.computed("includeCancel",function(){return(c.default.isSaturnDesktop()||c.default.isModernXboxClient())&&this.get("includeCancel")}),hasXPriceAffirmationString:Ember.computed(function(){return!!o.default.get().XPriceAffirmationString}),getXPriceAffirmationString:Ember.computed(function(){return o.default.get().XPriceAffirmationString})})}),define("web-blends/components/close-button",["exports","web-blends/modules/flow-stack","web-blends/modules/busy","sfw-telemetry/utils/blend-bi-tracker","sfw-components/utils/order-bi-data"],function(e,t,n,a,r){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({isSuccess:!1,order:null,selectedPi:null,controller:null,actions:{closeWithCancel:function(){if(!n.default.isBusy()){n.default.busy()
var e=this.get("order"),s=this.get("selectedPi"),i={orderInfo:(0,r.default)(e,s,null,!0)}
a.default.capturePageAction($("#closeButton"),i),a.default.capturePurchaseStatePageAction("Cancelled",i),t.default.clearAndDone("cancel",i.orderInfo)}},closeWithSuccess:function(){if(!n.default.isBusy()){var e=this.get("order"),a=this.get("selectedPi"),s={orderInfo:(0,r.default)(e,a,null,!0)}
n.default.busy(),t.default.clearAndDone("success-close",s.orderInfo)}}}})}),define("web-blends/components/collapsible-content",["exports","sfw-components/components/collapsible-content"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/components/contact-preference",["exports","sfw-components/components/contact-preference"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/components/credit-card-icons",["exports","sfw-components/components/credit-card-icons"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})})
define("web-blends/components/csv-link",["exports","sfw-telemetry/utils/user-agent","sfw-messaging/utils/post-messages","sfw-messaging/utils/messages","sfw-services/utils/constant-links"],function(e,t,n,a,r){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({classNames:["csvLink","cli_csvLink"],classNameBindings:["csvLinksClass"],type:null,title:null,message:null,icon:null,url:null,dataBiName:null,colClass:null,csvLinksClass:null,customDataForBi:null,init:function(){switch(this._super(),this.get("csvLink.name")){case"games":this.set("title",this.get("strings.Redeem_CSVSuccess_ShopForGamesTitle")),this.set("message",this.get("strings.Redeem_CSVSuccess_ShopForGamesMessage")),this.set("icon","icon-xboxlogo"),this.set("url",r.default.get().xboxGames),this.set("dataBiName","Games")
break
case"apps":this.set("title",this.get("strings.Redeem_CSVSuccess_ShopForAppsTitle")),this.set("message",this.get("strings.Redeem_CSVSuccess_ShopForAppsMessage")),this.set("icon","icon-newstorelogo16"),this.set("url",r.default.get().appStore),this.set("dataBiName","Apps")
break
case"music":this.set("title",this.get("strings.Redeem_CSVSuccess_ShopForMusicTitle")),this.set("message",this.get("strings.Redeem_CSVSuccess_ShopForMusicMessage")),this.set("icon","icon-music"),this.set("url",this.getMusicLink()),this.set("dataBiName","Music")
break
case"movies":this.set("title",this.get("strings.Redeem_CSVSuccess_ShopForMoviesTitle")),this.set("message",this.get("strings.Redeem_CSVSuccess_ShopForMoviesMessage")),this.set("icon","icon-video"),this.set("url",this.getMovieLink()),this.set("dataBiName","Movies")}},getMusicLink:function(){return t.default.isFromThresholdDevice()||t.default.isFromWinPhone10Device()?"ms-windows-store://navigatetopage/?Id=Music":r.default.get().musicStore},getMovieLink:function(){return t.default.isFromThresholdDevice()||t.default.isFromWinPhone10Device()?"ms-windows-store://navigatetopage/?Id=Video":r.default.get().musicAndTvStore},actions:{PostOpenUrlMessage:function(){var e=this.get("url")
if(e&&e.length){var t="CSVLinkClicked_"+this.get("csvLink.name"),r=e.startsWithIgnoreCase("http")
n.default.send(a.default.openUrl(e,t,r,!0))}}}})}),define("web-blends/components/digital-attach-prorate-page",["exports","sfw-telemetry/utils/client","sfw-components/utils/template-tokenizer","sfw-messaging/utils/open-terms","sfw-messaging/utils/open-url","sfw-telemetry/utils/flight-config"],function(e,t,n,a,r,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({downgradeDescription:Ember.computed(function(){return this.get("strings.Subscribe_Downgrade_Description").replace("{convertProductTitle}",this.get("model.convertProductTitle")).replace("{currentProductTitle}",this.get("model.currentProductTitle"))}),prorateTitle:Ember.computed(function(){return this.get("model.isXboxUltimate")?this.get("strings.Ultimate_Prorate_Title"):this.get("strings.Subscribe_Prorate_Title").replace("{currentProductTitle}",this.get("model.currentProductTitle"))}),keepExistingOption:Ember.computed(function(){return this.get("strings.Subscribe_Prorate_Keep_Current").replace("{currentProductTitle}",this.get("model.currentProductTitle"))}),downgradeAllowed:Ember.computed(function(){return this.get("model.isDowngradeAllowed")}),isXboxOne:Ember.computed(function(){return t.default.isXboxOneClient()}),keepCurrentButton:Ember.computed(function(){return this.get("strings.Shared_Button_Continue")}),isProrateDynamicEnabled:Ember.computed(function(){return s.default.isEnabled("daproratedynamic")}),ultimateProrateLegal:Ember.computed(function(){var e=this,t=this.get("model.prorateDescription")
return s.default.isEnabled("daproratedynamic")?n.default.tokenize(t,["xboxGamePassConversionlink"],function(){return e.get("strings.See_Conversion_Info")},function(e){return e.id=e.value+"_tou",e.css="cli_tou",a.default.enhanceToken(e),e}):n.default.tokenize(t,["xboxGamePasslink"],function(){return"xbox.com/gamepass"},function(e){return e.id=e.value+"_tou",e.css="cli_tou",a.default.enhanceToken(e),e})}),actions:{keep:function(){this.sendAction("keep")},cancel:function(){this.sendAction("cancel")},viewTerms:function(){this.sendAction("viewTerms")},viewTermsLink:function(e,t){r.default.open(e,t)}}})}),define("web-blends/components/error-info",["exports","sfw-telemetry/utils/instrumentation","sfw-telemetry/utils/flight-config"],function(e,t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({errorCode:null,mscv:Ember.computed(function(){var e="",n=t.default.correlationVector()
return n&&n.getValue&&(e=n.getValue()),e}),timestamp:Ember.computed(function(){return(new Date).toFormattedUTCString()}),showCvAndTimestamp:Ember.computed(function(){return!n.default.isEnabled("uiregression")})})}),define("web-blends/components/fingerprint-tagging",["exports","sfw-components/components/fingerprint-tagging"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/components/formatted-price",["exports","sfw-components/components/formatted-price"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/components/gift-details",["exports","sfw-telemetry/utils/client","web-blends/modules/busy"],function(e,t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({tagName:"",actions:{changeGift:function(){n.default.busy(),this.sendAction("handleTransition","purchase.gift")}},recipientText:Ember.computed(function(){if(this.get("isMercury")){var e=t.default.mercuryCustomParameters(),n=e.gifteeGamertag||e.gifteeEmail
return""===n&&(n="GamertagProfileId"===this.get("order.firstLineItem.giftee.recipientType")?this.get("order.firstLineItem.giftee.recipient.gamer_tag"):this.get("order.firstLineItem.giftee.recipient.email_address")),this.get("strings.Purchase_Gift_To").replace("{0}",n)}var a="GamertagProfileId"===this.get("order.firstLineItem.giftee.recipientType")?this.get("order.firstLineItem.giftee.recipient.gamer_tag"):this.get("order.firstLineItem.giftee.recipient.email_address")
return this.get("isGamingApp")?a:this.get("strings.Purchase_Gift_To").replace("{0}",a)}),senderText:Ember.computed(function(){if(this.get("isGamingApp"))return this.get("order.firstLineItem.giftee.recipient.sender_name")
if(this.get("isMercury")){var e=t.default.mercuryCustomParameters()
return this.get("strings.Purchase_Gift_From").replace("{0}",e.senderName||this.get("order.firstLineItem.giftee.recipient.sender_name"))}return this.get("strings.Purchase_Gift_From").replace("{0}",this.get("order.firstLineItem.giftee.recipient.sender_name"))}),toLabel:Ember.computed(function(){return this.get("strings.Purchase_Gift_To").replace("{0}","").trim()}),fromLabel:Ember.computed(function(){return this.get("strings.Purchase_Gift_From").replace("{0}","").trim()}),isXboxOne:Ember.computed(function(){return t.default.isXboxOneClient()}),isGamingApp:Ember.computed(function(){return t.default.isGamingApp()}),isMercury:Ember.computed(function(){return t.default.isMercury()}),isModernXboxClient:Ember.computed(function(){return t.default.isModernXboxClient()})})}),define("web-blends/components/item-price-info-monthlyequivalent",["exports","sfw-components/components/item-price-info-monthlyequivalent"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/components/item-price-info-subscription",["exports","sfw-components/components/item-price-info-subscription"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/components/item-price-info",["exports","sfw-components/components/item-price-info"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/components/legal-terms",["exports","sfw-components/components/legal-terms"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/components/message-with-bolded-button-names",["exports","sfw-components/components/message-with-bolded-button-names"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/components/message-with-links",["exports","sfw-components/components/message-with-links"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/components/mobi-terms",["exports","sfw-components/utils/template-tokenizer","sfw-messaging/utils/post-messages","sfw-messaging/utils/messages","sfw-components/utils/more-less"],function(e,t,n,a,r){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({actions:{viewMobiTerms:function(e){n.default.send(a.default.openUrl(e,"mobiTermsAndConditions",!1))},toggleTextView:function(){$("#mobiTermsAndConditionsContainer").toggleClass("more")
var e=this.get("moreLessToggleText")===this.get("strings.Shared_Label_More")?this.get("strings.Shared_Label_Less"):this.get("strings.Shared_Label_More")
this.set("moreLessToggleText",e)}},selectedPi:null,mobiTermParts:Ember.computed("selectedPi",function(){var e=this.get("selectedPi.display_info.termsAndConditions")
return e&&t.default.tokenizeHtml(e,function(e,t){var n="mobiTermsLink"+t
return e.id=n,e.css="cli_"+n,e})||[]}),moreLessToggleText:Ember.computed(function(){return this.get("strings.Shared_Label_More")}),didInsertElement:function(){this._super(arguments),(0,r.default)($("#mobiTermsAndConditionsContainer"),$(".moreMobiLegal"))}})}),define("web-blends/components/payment-instrument-subscription",["exports","web-blends/components/payment-instrument"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({canShowCsvTips:!1,canShowBackupTips:!1,piTips:Ember.computed("canShowCsvTips","canShowBackupTips",function(){return this.get("canShowCsvTips")?this.get("strings.Pi_Csv_Tips"):this.get("canShowBackupTips")?this.get("strings.Pi_Csv_Backup_Tips"):null})})}),define("web-blends/components/payment-instrument",["exports","sfw-telemetry/utils/client","sfw-messaging/utils/post-messages","sfw-messaging/utils/messages","sfw-telemetry/utils/flight-config","sfw-services/utils/market-specific"],function(e,t,n,a,r,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({actions:{submit:function(){if(!this.get("isDisabled")){var e=this.get("selectedPi.display_info"),t=$(".piUpdate:visible")
e.expired?this.sendAction("updatePi",this.get("selectedPi")):e.isDirectDebitChallengeRequired&&"selectPi"===this.get("piContext")?this.sendAction("verifyPi",this.get("selectedPi")):e.createUpdateLabel&&t&&t.length>0?this.sendAction("updatePi",this.get("selectedPi")):this.get("includePiInAction")?this.sendAction("submit",this.get("selectedPi")):this.sendAction("submit")}}},display_info:Ember.computed("selectedPi","mercurySelectedPi","canShowExpiredLabel","createUpdateLabel","selectedPi.display_info","piContext",function(){var e=this.get("selectedPi")
return e&&e.get&&e.get("display_info")&&(e.set("display_info.isCsv",e.get("isCsv")),e.set("display_info.showExpiredLabel",!this.get("isModernXboxClient")&&this.get("canShowExpiredLabel")&&e.get("display_info.expired")),e.set("display_info.createUpdateLabel",this.get("canShowUpdateLabel")&&!e.get("display_info.expired")&&e.get("display_info.isUpdatable")),e.set("display_info.showMercuryExpiredPiLabel",this.get("isModernXboxClient")&&this.get("canShowExpiredLabel")&&e.get("display_info.expired")&&"selectPi"!==this.get("piContext")&&!!this.get("mercuryDunningScenario")),e.set("display_info.showMercuryUpdatePiLabel",this.get("isModernXboxClient")&&this.get("canShowExpiredLabel")&&!e.get("display_info.expired")&&"selectPi"!==this.get("piContext")&&!!this.get("mercuryDunningScenario")&&!this.get("mercuryStopShowingUpdate")),e.set("display_info.mercuryShowAsRed",e.get("display_info.showMercuryUpdatePiLabel")),this.get("isOobe")&&r.default.isEnabled("oobepichange")||this.get("isModernXboxClient")?e.set("display_info.canShowName","selectPi"===this.get("piContext")||!!e.get("display_info.account_holder_name")):e.set("display_info.canShowName",!("selectPi"===this.get("piContext")||!e.get("display_info.account_holder_name"))),t.default.isModernXboxClient()&&"selectPi"===this.get("piContext")&&e.get("display_info.payment_instrument_identifier")&&e.set("display_info.select_pi_payment_instrument_identifier",this.get("strings.Mercury_CC_Ending_In").replace("{0}",e.get("display_info.payment_instrument_identifier"))),e.set("display_info.showMercuryUpdateLabel",!!this.get("mercuryDunningScenario")&&"selectPi"===this.get("piContext")&&e.get("display_info.showMercuryExpiredPiLabel")&&e.get("id")===this.get("mercurySelectedPi.id")&&t.default.isModernXboxClient()),e.set("display_info.showMercuryTryAgainLabel",!!this.get("mercuryDunningScenario")&&"selectPi"===this.get("piContext")&&!e.get("display_info.showMercuryExpiredPiLabel")&&e.get("id")===this.get("mercurySelectedPi.id")&&t.default.isModernXboxClient())),this.get("selectedPi.display_info")}),canPostPiSelectedMessage:!1,canShowExpiredLabel:!1,createUpdateLabel:!1,selected_pi:null,mercurySelectedPi:null,mercuryDunningScenario:null,mercuryStopShowingUpdate:!1,selectedPi:Ember.computed("selected_pi","canPostPiSelectedMessage",{get:function(){return this.get("selected_pi")},set:function(e,t){return this.set("selected_pi",t),t&&!String.prototype.isNullOrWhitespace(t.id)&&this.get("canPostPiSelectedMessage")&&!this.get("selectedPi.display_info.expired")&&n.default.send(a.default.piSelected(t.id,"CheckingOut")),t}}),bi_source:null,bi_name:null,bi_slot:"0",cli_class:null,includePiInAction:!1,change_label:null,piContext:null,changeLabel:Ember.computed("change_label",function(){return this.get("strings")[this.get("change_label")]}),isDisabled:Ember.computed("selected_pi",function(){if(!r.default.isEnabled("oobepichange")&&t.default.isWindowsOobeClient())return!0
var e=this.get("selected_pi")
return e&&(e.exceededMaxPrice||!1===e.isAllowed||!0===e.isRiskyPi)}),pendingLabel:Ember.computed("piContext",function(){return"selectPi"===this.get("piContext")?this.get("strings.Shared_Label_Verify"):this.get("strings.Shared_Label_Pending")}),showChangeLabel:!0,useListAccessibility:!1,positionInSet:null,totalElementsInSet:null,accessibilityLabelTemplate:null,accessibilityLabelId:null,getListAccessibilityLabel:Ember.computed("positionInSet","totalElementsInSet","accessibilityLabelTemplate",function(){return this.get("accessibilityLabelTemplate")?this.get("accessibilityLabelTemplate").replace("{0}",this.get("positionInSet")).replace("{1}",this.get("totalElementsInSet")):void 0}),paymentMethodDisplayName:Ember.computed("selected_pi",function(){var e=this.get("selected_pi")
if(e){var t=e.get("display_info")
if(t&&t.payment_method_display_name)return t.payment_method_display_name}return"default"}),isMercury:Ember.computed(function(){return t.default.isMercury()}),isModernXboxClient:Ember.computed(function(){return t.default.isModernXboxClient()}),mercuryExpiryDate:Ember.computed("display_info",function(){var e=this.get("display_info.expiry_month")+"/"+this.get("display_info.expiry_year")
return"selectPi"===this.get("piContext")?this.get("strings.Mercury_CC_Exp_Prefix").replace("{0}",e):e}),isSelectPiContext:Ember.computed("piContext",function(){return"selectPi"===this.get("piContext")}),canHideCreditCardExpiryDate:Ember.computed(function(){return s.default.hideCreditCardExpiryDate()})})}),define("web-blends/components/payment-instruments-subscription",["exports","web-blends/templates/components/payment-instruments-subscription","web-blends/components/payment-instruments","sfw-telemetry/utils/app-globals"],function(e,t,n,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n.default.extend({layout:t.default,backUpPiAdd:Ember.computed("hasAllowedPaymentInstruments",function(){return this.get("hasAllowedPaymentInstruments")<=1}),backUpPiLinkUpsellString:Ember.computed("isCsvSufficient",function(){return this.get("isCsvSufficient")?this.get("strings.BackUpPi_Label_Upsell"):null}),backUpPiLinkString:Ember.computed("isCsvSufficient","hasAllowedPaymentInstruments",function(){return this.get("isCsvSufficient")?this.get("hasAllowedPaymentInstruments")>1?this.get("strings.BackUpPi_Pick").replace("{0}",this.get("strings.Attribute_Required")):(a.default._addBackupPiOptional=!0,this.get("strings.BackUpPi_Add").replace("{0}",this.get("strings.Attribute_Optional"))):this.get("strings.BackUpPi_Label_HowPayRest")})})}),define("web-blends/components/payment-instruments",["exports","sfw-telemetry/utils/flight-config","web-blends/templates/components/payment-instruments","sfw-telemetry/utils/blend-bi-tracker","sfw-telemetry/utils/app-globals","sfw-services/models/select-pi","sfw-telemetry/utils/client"],function(e,t,n,a,r,s,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({classNames:["paymentinstruments","payment-instruments"],classNameBindings:["payment-instruments"],layout:n.default,mercuryStopShowingUpdate:!1,actions:{selectPi:function(){var e=this.model&&this.model.selectedPi,t=e&&e.get("paymentMethod"),n={piId:e&&e.id,isRedeem:this.get("model.isRedeem")}
t&&(n.piType=t.paymentMethodType,n.piMethod=t.paymentMethodFamily,n.isExpired=e.get("display_info")&&e.get("display_info").expired||!1)
a.default.captureContentPageAction({name:"ChangePi",id:"ChangePi"},n),this.sendAction("handleTransition","purchase.selectPi","selectPi")},selectBackupPi:function(e){var t={}
e?(r.default._selectPiData=s.default.create({selectBackupPi:!0,selectedPis:{id:Ember.get(this,"model.selectedPi.id")}}),t.name="AddBackupPi",this.sendAction("handleTransition","paymentAndBilling.selectPaymentInstrumentSdk",{queryParams:{context:"selectpi",backupPi:!0}})):(t.name="ChangeBackupPi",this.sendAction("handleTransition","purchase.selectPi","backupPi")),a.default.captureContentPageAction(t)},addPi:function(){a.default.capturePageAction($("#addPiAction"),this.get("customDataForBi")),this.sendAction("handleTransition","paymentAndBilling.selectPaymentInstrumentSdk",{queryParams:{context:"selectpi"}})},selectAddress:function(){a.default.capturePageAction($("#selectAddressAction"),this.get("customDataForBi")),r.default._selectPiData||(r.default._selectPiData=s.default.create()),r.default._selectPiData.selectedPis=this.get("model.changedPis"),this.get("model.isAddressMissingForBeneficiary")?this.sendAction("handleTransition","purchase.selectAddress",this.get("model.order.beneficiaryPuid")):this.sendAction("handleTransition","purchase.selectAddress","me")},addAddress:function(){a.default.capturePageAction($("#addAddressAction"),this.get("customDataForBi")),r.default._selectPiData||(r.default._selectPiData=s.default.create()),r.default._selectPiData.selectedPis=this.get("model.changedPis"),t.default.isEnabled("addresssdk")&&!this.get("model.isAddressMissingForBeneficiary")?this.sendAction("handleTransition","paymentAndBilling.addressSdk",{queryParams:{context:"address",puid:"me",isBeneficiaryPurchase:!1}}):this.sendAction("handleTransition","paymentAndBilling.addName",{queryParams:{context:"addaddress",puid:this.get("model.isAddressMissingForBeneficiary")?this.get("model.order.beneficiaryPuid"):"me"}})},addProfile:function(){a.default.capturePageAction($("#addProfileAction"),this.get("customDataForBi"))
var e=this.get("model.isAddressMissingForBeneficiary")?this.get("model.order.beneficiaryPuid"):"me"
t.default.isEnabled("profilesdk")&&!this.get("model.isAddressMissingForBeneficiary")?this.sendAction("handleTransition","paymentAndBilling.profileSdk",{queryParams:{context:"profile",puid:e,isBeneficiaryPurchase:!1}}):this.sendAction("handleTransition","paymentAndBilling.addName",{queryParams:{context:"addprofile",puid:e}})}},customDataForBi:Ember.computed(function(){return this.get("model.isRedeem")?{isRedeem:!0}:null}),xBoxShowAddAddress:Ember.computed("model.noProfileAddressFound",function(){return this.get("model.noProfileAddressFound")&&"cfq7ttc0k5df".equalsIgnoreCase(this.get("model.order.firstLineItem.productId"))}),selectAddressString:Ember.computed("model",function(){if(this.get("model.noDefaultAddress"))return this.get("model.isAddressMissingForBeneficiary")?this.get("strings.SelectAddress_For_Child_Title_V1"):this.get("strings.Confirm_Your_Billing_Address")}),addAddressString:Ember.computed("model",function(){if(this.get("model.noProfileAddressFound"))return this.get("model.isAddressMissingForBeneficiary")?this.get("strings.Add_Profile_Address_For_Child_Button_V1"):this.get("strings.Add_Profile_Address_Button")}),backUpPiLinkString:Ember.computed(function(){return this.get("strings.BackUpPi_Label_HowPayRest")}),backupButtonId:Ember.computed(function(){return this.get("buttonId")+"_backup"}),isMercury:Ember.computed(function(){return i.default.isMercury()}),isSaturnDesktop:Ember.computed(function(){return i.default.isSaturnDesktop()}),isSaturnXbox:Ember.computed(function(){return i.default.isSaturnXbox()}),isModernXboxClient:Ember.computed(function(){return i.default.isModernXboxClient()}),showConfirmLinkText:Ember.computed(function(){return t.default.isEnabled("removeconfirmlink")})})}),define("web-blends/components/pidl-displayhelp-item",["exports","sfw-components/components/pidl-displayhelp-item"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/components/pidl-displayhelp",["exports","sfw-components/components/pidl-displayhelp"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/components/pidl-document",["exports","sfw-components/components/pidl-document"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/components/pidl-group",["exports","sfw-components/components/pidl-group"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/components/pidl-item-label",["exports","sfw-components/components/pidl-item-label"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/components/pidl-item",["exports","sfw-components/components/pidl-item"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/components/pidl-sdk",["exports","ember-pidlsdk/components/pidl-sdk"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/components/prepurchase-header",["exports","sfw-services/utils/format-price"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({product:Ember.computed("model",function(){var e=this.get("model"),n=Object.assign({},e),a=n.rating,r=a&&a.ratings&&a.ratings.length&&a.ratings[0],s=n.currentAvailability.pricingInfo,i=t.default.getPriceFormatForTaxString(s.priceTaxType,s.listPrice.formattedPrice).replace(t.default.getBasicPriceFormatString(),s.listPrice.formattedPrice)
return n.formattedPrice=i,r&&(n.rating={logoUri:r.logoUri,title:r.longName,id:r.ratingId,infoUri:a.ratingHomeUrl}),n})})}),define("web-blends/components/privacy-statement",["exports","sfw-components/components/privacy-statement"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/components/redeem-gift-card",["exports","sfw-telemetry/utils/client"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({actions:{redeem:function(){this.sendAction()}},useListAccessibility:!1,positionInSet:null,totalElementsInSet:null,accessibilityLabelTemplate:null,accessibilityLabelId:null,getListAccessibilityLabel:Ember.computed("positionInSet","totalElementsInSet","accessibilityLabelTemplate",function(){return this.get("accessibilityLabelTemplate")?this.get("accessibilityLabelTemplate").replace("{0}",this.get("positionInSet")).replace("{1}",this.get("totalElementsInSet")):void 0}),isMercury:Ember.computed(function(){return t.default.isMercury()}),isModernXboxClient:Ember.computed(function(){return t.default.isModernXboxClient()}),isRoleRequired:!1})}),define("web-blends/components/redeem-prorate-page",["exports","sfw-telemetry/utils/client","sfw-components/utils/template-tokenizer","sfw-messaging/utils/open-terms","sfw-messaging/utils/open-url","sfw-telemetry/utils/flight-config"],function(e,t,n,a,r,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({downgradeDescription:Ember.computed(function(){return this.get("strings.Subscribe_Downgrade_Description").replace("{convertProductTitle}",this.get("model.convertProductTitle")).replace("{currentProductTitle}",this.get("model.currentProductTitle"))}),prorateTitle:Ember.computed(function(){return this.get("model.isXboxUltimate")?this.get("strings.Ultimate_Prorate_Title"):this.get("strings.Subscribe_Prorate_Title").replace("{currentProductTitle}",this.get("model.currentProductTitle"))}),keepExistingOption:Ember.computed(function(){return this.get("strings.Subscribe_Prorate_Keep_Current").replace("{currentProductTitle}",this.get("model.currentProductTitle"))}),getLessOption:Ember.computed(function(){var e=this.get("strings.Office_Downgrade_Option2")
return e=e.replace("{officePurchase}",this.get("model.convertProductTitle"))}),downgradeAllowed:Ember.computed(function(){return this.get("model.isDowngradeAllowed")}),isXboxOne:Ember.computed(function(){return t.default.isXboxOneClient()}),keepCurrentButton:Ember.computed(function(){return this.get("strings.Shared_Button_Continue")}),getLessOfficeButton:Ember.computed(function(){return this.get("strings.Office_GetLessOffice_Button2")}),isProrateDynamicEnabled:Ember.computed(function(){return s.default.isEnabled("proratedynamic")}),ultimateProrateLegal:Ember.computed(function(){var e=this,t=this.get("model.prorateDescription")
return s.default.isEnabled("proratedynamic")?n.default.tokenize(t,["xboxGamePassConversionlink"],function(){return e.get("strings.See_Conversion_Info")},function(e){return e.id=e.value+"_tou",e.css="cli_tou",a.default.enhanceToken(e),e}):n.default.tokenize(t,["xboxGamePasslink"],function(){return"xbox.com/gamepass"},function(e){return e.id=e.value+"_tou",e.css="cli_tou",a.default.enhanceToken(e),e})}),actions:{keep:function(){this.sendAction("keep")},getLess:function(){this.sendAction("getLess")},cancel:function(){this.sendAction("cancel")},viewTerms:function(){this.sendAction("viewTerms")},viewTermsLink:function(e,t){r.default.open(e,t)}}})}),define("web-blends/components/redirect-retry-page",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({processingMessage:Ember.computed(function(){return this.get("strings.Purchase_Message_Wait_For_Processing").replace("{0}",this.get("displayName")).replace("{1}",this.get("waitTimeMinutes"))}),gotoProductPage:Ember.computed(function(){return this.get("strings.Purchase_Button_Go_To").replace("{0}",this.get("strings.Purchase_Product_Page")).replace("{1}","")}),actions:{tryAgain:function(){this.sendAction("tryAgain")},goToPDP:function(){this.sendAction("goToPDP")}}})}),define("web-blends/components/reseller-detail",["exports","sfw-telemetry/utils/start-data","sfw-telemetry/utils/client","sfw-telemetry/utils/flight-config"],function(e,t,n,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({order:null,selectedPi:null,mappedReseller:Ember.computed("order","selectedPi",function(){var e=t.default.get().Market,r=e&&e.toLowerCase&&e.toLowerCase(),s=this.get("selectedPi.payment_method_family")
if(s)if("br"===r){if(s.toLowerCase)switch(s.toLowerCase()){case"mobile_carrier_billing":return{name:"Claro"}
default:return{name:"Microsoft"}}}else if("cn"===r){if(n.default.isXboxOneClient()||n.default.isUniversalStoreNativeClient()&&a.default.isEnabled("removeresellerforstoreapp")||n.default.isInAppClient()&&a.default.isEnabled("removeresellerforinapp"))return null
if(s.toLowerCase&&"mobile_carrier_billing"===s.toLowerCase())return{name:"ä¸­å›½ç§»åŠ¨",icp:"A1.B1.B2-20100001"}
var i=t.default.get().Culture,l=i&&i.toLowerCase&&i.toLowerCase()
return"zh-cn"===l||"zh-hans-cn"===l?{sold_by:"é”€å”®å•†åç§°",name:"æ­å·žç½‘æ˜“å¢žç›ˆç§‘æŠ€æœ‰é™å…¬å¸"}:{name:"æ­å·žç½‘æ˜“å¢žç›ˆç§‘æŠ€æœ‰é™å…¬å¸"}}return null}),formattedResellerName:Ember.computed("mappedReseller",function(){var e=this.get("mappedReseller")
return e&&e.sold_by&&e.name?e.sold_by+": "+e.name:e&&e.name?this.get("strings.Sold_By_Reseller_Name").replace("{reseller_name}",e.name):null}),formattedResellerCode:Ember.computed("mappedReseller",function(){var e=this.get("mappedReseller")
return e&&e.icp?"ICP#: "+e.icp:null})})})
define("web-blends/components/risk-challenge",["exports","sfw-components/components/risk-challenge"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/components/shop-link",["exports","sfw-messaging/utils/post-messages","sfw-messaging/utils/messages","sfw-services/utils/constant-links","sfw-services/utils/market-specific","sfw-telemetry/utils/user-agent"],function(e,t,n,a,r,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({classNames:["shopLink","col-md-8-shoplink"],title:null,message:null,url:null,dataBiName:null,name:null,init:function(){switch(this._super(),this.get("name")){case"xbox":this.set("title",this.get("strings.Redeem_ThankYou_Title_Xbox")),this.set("message",r.default.showMoviesTVMarkets()?this.get("strings.Redeem_ThankYouPage_Xbox_MoviesTVs"):this.get("strings.Redeem_ThankYouPage_Xbox_NoMoviesTVs")),this.set("imageUrl","/uniblends/REL20231025.1/assets/images/gldn-CP-Redemption-Xbox.jpg"),this.set("url",a.default.get().shopXbox),this.set("dataBiName","Redeem-ThankYou-AMC-Xbox"),this.set("imageAltText",this.get("strings.Redeem_ThankYou_XboxImageAltText"))
break
case"online":this.set("title",this.get("strings.Redeem_ThankYou_Title_Online")),this.set("message",this.get("showMarketStringForOnline")),this.set("imageUrl","/uniblends/REL20231025.1/assets/images/gldn-CP-Redemption-Online.jpg"),this.set("url",a.default.get().shopOnline),this.set("dataBiName","Redeem-ThankYou-AMC-Online"),this.set("imageAltText",this.get("strings.Redeem_ThankYou_OnlineImageAltText"))
break
case"windows":this.set("title",this.get("strings.Redeem_ThankYou_Title_Windows")),this.set("message",r.default.showMoviesTVMarkets()?this.get("strings.Redeem_ThankYouPage_Windows_MoviesTVs"):this.get("strings.Redeem_ThankYouPage_Windows_NoMoviesTVs")),this.set("imageUrl","/uniblends/REL20231025.1/assets/images/gldn-CP-Redemption-Windows.jpg"),this.set("url",s.default.isFromWin8XDevice?a.default.get().shopWindowsWinDevice:a.default.get().shopWindowsNonWinDevice),this.set("dataBiName","Redeem-ThankYou-AMC-Windows"),this.set("imageAltText",this.get("strings.Redeem_ThankYou_WindowsImageAltText"))}},actions:{postOpenUrlMessage:function(){var e=this.get("url")
if(e&&e.length){var a="ShopLinkClicked_"+this.get("name"),r=e.startsWithIgnoreCase("http")
t.default.send(n.default.openUrl(e,a,r,!0))}}},showMarketStringForOnline:Ember.computed(function(){return r.default.showPhysicalDigitalMarkets()?this.get("strings.Redeem_ThankYouPage_Online_PhysicalDigital"):r.default.showAccessoriesDigitalMarkets()?this.get("strings.Redeem_ThankYouPage_Online_AccessoriesDigital"):this.get("strings.Redeem_ThankYouPage_Online_DigitalOnly")})})}),define("web-blends/components/subs-downgrade",["exports","sfw-components/components/subs-downgrade"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/components/subscription-interstitial",["exports","sfw-messaging/utils/open-url","sfw-components/utils/legal-market-region","sfw-telemetry/utils/start-data","sfw-services/utils/currency-formatter","sfw-services/utils/constant-links","sfw-telemetry/utils/client"],function(e,t,n,a,r,s,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({retailPrice:null,listPrice:null,currencyCode:null,lineItemTitle:null,recurrencePrice:null,isTrial:null,initialChargeFrequency:null,localizedChargeFrequency:null,localizedTrialDurationString:null,promotionalCoreDurationUnitType:null,promotionalCoreDurationUnits:null,iconUri:null,isAdditionalInfoMarket:!1,interstitialTitle:Ember.computed(function(){return this.get("strings.Purchase_SubscriptionInterstitial_Title")}),interstitialProductPrice:Ember.computed(function(){var e=void 0,t=this.get("retailPrice"),n=this.get("listPrice"),a=this.get("recurrencePrice"),s=this.get("currencyCode"),i=this.get("isTrial"),l=this.get("initialChargeFrequency"),o=this.get("localizedChargeFrequency"),d=this.get("promotionalCoreDurationUnitType"),u=this.get("promotionalCoreDurationUnits"),c=this.get("strings.Mercury_Subscription_Per_Period"),m=r.default.formatCurrency(t,s)
if(n&&(n<t||n<a))if("true"===i.toLowerCase()){var f=this.get("strings.Purchase_subscription_Promotional_LegalTerms"),p=r.default.formatCurrency(a,s),g=c.replace("{formattedPriceDisplay}",p).replace("{0}",o)
e=f.replace("{0}",g)}else if(u&&d.equalsIgnoreCase("Month")){c=this.get("strings.Purchase_SubscriptionDiscount_UpgradeInterstitial_PromoWithFreeMonthFormattedPrice1")
var b=r.default.formatCurrency(n,s)
e=c.replace("{0}",b).replace("{1}",u).replace("{2}",m)}else{var h=this.get("strings.Purchase_Discounted_Subscription_Label"),y=this.get("strings.Purchase_Label_RenewalInformation_Formatted"),P=this.get("strings.Purchase_Discounted_Subscription_Renewal_Label"),_=r.default.formatCurrency(n,s),v=r.default.formatCurrency(a,s),w=l||o,C=h.replace("{0}",_).replace("{1}",w),x=y.replace("{0}",v).replace("{1}",o)
e=C+"; "+P.replace("{0}",x)}else o&&(e=c.replace("{formattedPriceDisplay}",m).replace("{0}",o))
return e}),interstitialBody:Ember.computed(function(){var e=n.default.getRegion(),t=a.default.get().Market.toLowerCase(),r=["gb"].includes(t)
this.set("isAdditionalInfoMarket",r)
var s="EU"===e?this.get("strings.Purchase_SubscriptionInterstitial_Body_EU"):this.get("strings.Purchase_SubscriptionInterstitial_Body")
s="il"===t?this.get("strings.Purchase_SubscriptionInterstitial_Body_IL"):s,s="gb"===t?this.get("strings.Purchase_SubscriptionInterstitial_Body_GB"):s
var i=r?this.get("strings.Purchase_SubscriptionInterstitial_AdditionalInfoLinkText"):""
return s=s.replace("{AdditionalInfoLinkText}",i)}),interstitialAdditionalInfoLink:Ember.computed(function(){return s.default.get().interstitialAdditionalInfo}),isXboxOne:Ember.computed(function(){return i.default.isXboxOneClient()}),isModernDesktopClient:Ember.computed(function(){return i.default.isModernDesktopClient()}),actions:{continue:function(){this.sendAction("continue")},cancel:function(){this.sendAction("cancel")},clickToRedirect:function(e,n){t.default.open(e,n)}}})}),define("web-blends/components/subscription-upgrade",["exports","sfw-components/utils/template-tokenizer","sfw-messaging/utils/open-terms","sfw-messaging/utils/open-url","sfw-telemetry/utils/flight-config","sfw-telemetry/utils/client"],function(e,t,n,a,r,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({newExpirationDate:null,lineItemTitle:null,showModernConversion:null,conversionDetailsUrl:null,upgradeTitle:Ember.computed(function(){var e=this.get("lineItemTitle")
return this.get("showModernConversion")?this.get("strings.ModCon_UpgradeTitle").replace("{skuTitle}",e):this.get("strings.Ultimate_Upgrade_Title")}),upgradeDescription:Ember.computed(function(){var e=this.get("lineItemTitle")
return this.get("strings.ModCon_UpgradeDescription").replace("{skuTitle}",e)}),ultimateUpgradeLegal:Ember.computed(function(){var e=this.get("strings.Ultimate_Upgrade_Message")
return t.default.tokenize(e,["xboxGamePasslink"],function(){return"xbox.com/gamepass"},function(e){return e.id=e.value+"_tou",e.css="cli_tou",n.default.enhanceToken(e),e})}),addEAPlay:Ember.computed(function(){return r.default.isEnabled("eaplayconvupdate")}),valenciaUpgradeMessage:Ember.computed(function(){var e=this.get("lineItemTitle")
return r.default.isEnabled("valenciaupgrade")?this.get("strings.Valencia_Upgrade_Interstitial").replace(/{skuTitle}/g,e):null}),garrisonUIAccessibility:Ember.computed(function(){return r.default.isEnabled("accesspcga")}),isXboxOne:Ember.computed(function(){return s.default.isXboxOneClient()}),renewalDateString:Ember.computed("newExpirationDate",function(){var e=this.get("newExpirationDate"),t=this.get("lineItemTitle")
return this.get("showModernConversion")?r.default.isEnabled("mcrenewaldatev2")?this.get("strings.ModCon_Upgrade_RenewalDate").replace("{date}",e):this.get("strings.ModCon_UpgradeRenewalDate").replace("{date}",e):e?r.default.isEnabled("valenciaupgrade")?this.get("strings.Valencia_Upgrade_Interstitial_Renewal").replace("{skuTitle}",t).replace("{date}",e):this.get("strings.Ultimate_Upgrade_Message_Renewal_Date").replace("{localized_date}",e):null}),ultimateUpgradeLegalV2:Ember.computed(function(){var e=this.get("strings.Ultimate_Upgrade_Message_See_More")
return t.default.tokenize(e,["xboxGamePasslink"],function(){return"xbox.com/gamepass"},function(e){return e.id=e.value+"_tou",e.css="cli_tou",n.default.enhanceToken(e),e})}),isModernDesktopClient:Ember.computed(function(){return s.default.isModernDesktopClient()}),conversionDetailsLink:Ember.computed(function(){return this.get("conversionDetailsUrl")}),actions:{continue:function(){this.sendAction("continue")},cancel:function(){this.sendAction("cancel")},viewTermsLink:function(e,t){a.default.open(e,t)}}})}),define("web-blends/controllers/error",["exports","web-blends/modules/flow-stack","web-blends/modules/return-route","sfw-telemetry/utils/app-globals","web-blends/modules/busy","sfw-services/utils/error-equals","sfw-telemetry/utils/client","sfw-telemetry/utils/start-data","sfw-telemetry/utils/flight-config","sfw-services/utils/error-types","sfw-messaging/utils/open-url"],function(e,t,n,a,r,s,i,l,o,d,u){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend({userDataResetter:Ember.inject.service(),actions:{close:function(){this.get("userDataResetter").reset(),r.default.busy()
var e=this.get("model")
t.default.clearAndSendError({errorCode:e.fullName,errorMessage:e.message,errorType:e.type})},selectPi:function(){var e=a.default._selectPiData&&a.default._selectPiData.selectedPis,t=e&&e.csvTopOffPaymentInstrumentId,n=a.default._selectPiData&&a.default._selectPiData.selectBackupPi
this.get("isAddPiInvalidError")?n?this.replaceRoute("purchase.selectPi","backupPi"):this.replaceRoute("purchase.selectPi","selectPi"):t?this.replaceRoute("purchase.selectPi","backupPiError"):this.get("isRedeemFlow")?o.default.isEnabled("ispurchasecontext")&&i.default.isBuddyPassScenario()?this.replaceRoute("redeem.enterCode",{queryParams:{invokeType:"redeemErrorValidatePIOnAttachFailed",autoConfirm:!1}}):this.replaceRoute("redeem.enterCode",{queryParams:{invokeType:"redeemErrorValidatePIOnAttachFailed"}}):this.replaceRoute("purchase.selectPi","piError")},purchase:function(){a.default.isWarningDisplayed=!0,this.replaceRoute("purchase.confirm")},redeem:function(){o.default.isEnabled("ispurchasecontext")&&i.default.isBuddyPassScenario()?this.replaceRoute("redeem.enterCode",{queryParams:{invokeType:"redeemError",autoConfirm:!1}}):this.replaceRoute("redeem.enterCode",{queryParams:{invokeType:"redeemError"}})},fix:function(){i.default.isXboxOneClient()?u.default.open("settings://subscriptions","subscriptions",!0,!0):u.default.open("https://account.microsoft.com/services",!0)}},isAMCAddOrEditPi:Ember.computed(function(){var e=l.default.get().selApps
return i.default.isAMCClient()&&("paymentAndBilling.choosePaymentMethodFamily"===e||"paymentAndBilling.editPaymentInstrument"===e)}),isInvalidPiError:Ember.computed("model",function(){return s.default.isInvalidPiError(this.get("model"))&&!this.get("isAMCAddOrEditPi")}),isAddPiInvalidError:Ember.computed("model",function(){return s.default.isAddPiInvalidError(this.get("model"))&&!this.get("isAMCAddOrEditPi")}),showOkayButton:Ember.computed("model",function(){return!i.default.isWindowsOobeClient()&&(this.get("isInvalidPiError")||this.get("isAddPiInvalidError"))||this.get("model.showPiForRiskRejected")}),isUserAlreadyOwnsContentError:Ember.computed("model",function(){return s.default.isUserAlreadyOwnsContentError(this.get("model"))}),isRedeemFlow:Ember.computed(function(){return n.default.errorInRedeem()}).volatile(),showFixableButton:Ember.computed(function(){return!i.default.isWindowsOobeClient()&&s.default.isPreviousOrderInDunningError(this.get("model"))}),isInlineClient:Ember.computed(function(){return i.default.isInlineClient()}),defaultCancelButtonText:Ember.computed(function(){return i.default.isWindowsOobeClient()?this.get("strings.Shared_Button_OK"):this.get("isInlineClient")?this.get("strings.Shared_Button_Cancel"):this.get("strings.Button_Close")}),showWarning:Ember.computed("model",function(){return"WarningForMaturityAgeGating"===this.get("model.code")}),showCvAndTimestamp:Ember.computed(function(){return!o.default.isEnabled("uiregression")}),showCode:Ember.computed("model",function(){return o.default.isEnabled("oobepichange")?"SVC"===this.get("model.prefix")||"App"===this.get("model.prefix")||d.default.canDisplay(this.get("model.code")):!i.default.isWindowsOobeClient()&&("SVC"===this.get("model.prefix")||"App"===this.get("model.prefix")||d.default.canDisplay(this.get("model.code")))}),showOobeErrorMessage:Ember.computed("model",function(){return!!i.default.isWindowsOobeClient()&&!!o.default.isEnabled("oobepichange")})})}),define("web-blends/controllers/payment-and-billing/add-address",["exports","sfw-telemetry/utils/app-globals","web-blends/modules/busy","sfw-messaging/utils/open-url","web-blends/modules/return-route","sfw-telemetry/utils/blend-bi-tracker","sfw-components/utils/user-pidl-data-builder","sfw-messaging/utils/open-terms","sfw-components/utils/pidl-validator2","sfw-services/utils/pidl-data"],function(e,t,n,a,r,s,i,l,o,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend({user:Ember.inject.service(),actions:{addAddress:function(){var e=this,a=e.get("model.originalPidl"),r=e.get("model.pidl_blend_id_prefix"),s=e.get("model.sessionId"),l=e.get("model.puid")||"me",o=e.get("model")
n.default.busy(),i.default.createWithAddress(a,r,"",s,o).then(function(a){n.default.done(),a&&(a.error?e.replaceRoute("error",a.error):(t.default._userAddressPidlData||(t.default._userAddressPidlData={}),t.default._userAddressPidlData[l]=a,t.default._userAddAddressData&&t.default._userAddAddressData.action?(t.default._userAddAddressData.action(e,t.default._userAddressPidlData[l]),t.default._userAddAddressData.action=function(){}):e.replaceRoute("paymentAndBilling.summary","addAddress",l).then(function(){e.get("model.isXboxOne")&&e.set("model.displayIndex",0)})))})},enterPressed:function(){this.get("canShowXboxNextButton")?this.send("next"):this.send("addAddress")},cancel:function(){var e=r.default.addNameOrAddress()
e&&(e.context?this.replaceRoute(e.route,e.context):this.replaceRoute(e.route))},privacyStatement:function(e){a.default.open(e,"privacyStatement")},next:function(){var e=this.get("model.displayIndex"),t=d.default.getPidlForDisplayIndex(e,this.get("model.pidlDocuments"))
o.default.validateAtDisplayIndex(t,e)&&this.set("model.displayIndex",e+1)
var n={currentFieldName:this.getFieldName(e)}
s.default.captureContentPageAction({name:"XboxNextFieldButtonClicked"},n),Ember.run.later(this,function(){o.default.focusValidElementOnPage()},200)},back:function(){var e=this.get("model.displayIndex")
this.set("model.displayIndex",e-1)
var t={currentFieldName:this.getFieldName(e)}
s.default.captureContentPageAction({name:"XboxBackFieldButtonClicked"},t),Ember.run.later(this,function(){o.default.focusValidElementOnPage()},200)},viewTerms:function(){s.default.captureContentPageAction({name:"ViewTermsButtonClicked"}),l.default.open("privacy")}},getFieldName:function(e){var t=d.default.getPidlItemForDisplayIndex(e,this.get("model.pidlDocuments"))
return t?t.displayName:""},title:Ember.computed("model.puid",function(){var e=this.get("model.puid"),n=this.get("strings.Add_Address_For_Child_Title_V1")
return t.default._userAddAddressData&&t.default._userAddAddressData.title?t.default._userAddAddressData.title:e&&"me"!==e?n:this.get("strings.Add_Address_Title")}),addAddressText:Ember.computed("model.puid",function(){var e=this.get("model.puid")
return e&&"me"!==e?this.get("strings.Add_Address_For_Child_Text"):this.get("strings.Add_Address_Text")}),isAtLastDisplayIndex:Ember.computed("model.displayIndex","model.lastDisplayIndex",function(){return this.get("model.displayIndex")>=this.get("model.lastDisplayIndex")}),canShowXboxBackButton:Ember.computed("model.displayIndex","model.isXboxOne",function(){return this.get("model.isXboxOne")&&this.get("model.displayIndex")>0}),canShowXboxNextButton:Ember.computed("model.displayIndex","model.isXboxOne",function(){return this.get("model.isXboxOne")&&!this.get("isAtLastDisplayIndex")}),canShowProfileUpdateNotice:Ember.computed("model.displayIndex","model.isXboxOne",function(){return!this.get("model.isXboxOne")||0===this.get("model.displayIndex")}),canShowPrivacyMessage:Ember.computed("model.displayIndex","model.isXboxOne",function(){return!this.get("model.isXboxOne")||this.get("isAtLastDisplayIndex")})})}),define("web-blends/controllers/payment-and-billing/add-email",["exports","sfw-services/utils/commerce-js","web-blends/modules/busy","sfw-messaging/utils/open-url","sfw-components/utils/pidl-validator2","web-blends/modules/return-route","sfw-telemetry/utils/blend-bi-tracker","sfw-messaging/utils/open-terms","sfw-services/errors/app-error"],function(e,t,n,a,r,s,i,l,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend({user:Ember.inject.service(),actions:{addEmail:function(){var e=this.get("model.puid")||"me"
if(r.default.validateAll(this.get("model.pidlDocuments"))){var a=this.get("model.originalPidl"),i=this.get("model.pidl_blend_id_prefix")
if(a&&a.length>0){var l=this
return n.default.busy(),t.default.readUserInputData(a[0],i,"").then(function(t){return l.get("user").getProfile(e).then(function(n){n.set("email_address",t.email_address)
var a=l.get("model.context")
if("addprofile"===a)return n.save().then(function(){var e=s.default.addNameOrAddress()
return e&&e.route?l.replaceRoute(e.route):l.replaceRoute("purchase.confirm")})
if("addaddress"===a)return l.replaceRoute("paymentAndBilling.addAddress",e)
if("addpi"===a){var r=l.get("model.paymentMethodFamily"),i=l.get("model.paymentMethodType"),d={context:"add",paymentMethodFamily:r,paymentMethodType:i}
return"paypal"===i||"mobile_billing_non_sim"===r||"unionpay_creditcard"===i||"unionpay_debitcard"===i||"ideal_billing_agreement"===i||"ach"===i?n.save().then(function(){return"paypal"===i?l.replaceRoute("paymentAndBilling.redirectConfirm"):"unionpay_creditcard"===i||"unionpay_debitcard"===i||"ideal_billing_agreement"===i||"ach"===i?(d.puid=e,l.replaceRoute("paymentAndBilling.paymentInstrumentSdk",{queryParams:d})):l.replaceRoute("paymentAndBilling.addPaymentInstrument",{queryParams:d})}):l.replaceRoute("paymentAndBilling.addPaymentInstrument",{queryParams:d})}throw new o.default("InvalidData")})},function(e){throw t.default.getErrorDetails(e)}).catch(function(e){e&&e.name&&e.name.toLowerCase&&"transitionaborted"===e.name.toLowerCase()||l.replaceRoute("error",e)}).finally(function(){n.default.done()})}this.replaceRoute("error","InvalidData")}},enterPressed:function(){this.send("addName")},cancel:function(){var e=s.default.addNameOrAddress()
e&&(e.context?this.replaceRoute(e.route,e.context):this.replaceRoute(e.route))},privacyStatement:function(e){a.default.open(e,"privacyStatement")},viewTerms:function(){i.default.captureContentPageAction({name:"ViewTermsButtonClicked"}),l.default.open("privacy")}},title:Ember.computed("model.puid",function(){var e=this.get("model.puid"),t=this.get("strings.Need_More_Info_For_Child_Title_V1")
return e&&"me"!==e?t:this.get("strings.Need_More_Info_Title")})})}),define("web-blends/controllers/payment-and-billing/add-name",["exports","sfw-services/utils/commerce-js","web-blends/modules/busy","sfw-messaging/utils/open-url","sfw-components/utils/pidl-validator2","web-blends/modules/return-route","sfw-telemetry/utils/blend-bi-tracker","sfw-services/utils/pidl-data","sfw-messaging/utils/open-terms","web-blends/modules/flow-stack"],function(e,t,n,a,r,s,i,l,o,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend({user:Ember.inject.service(),actions:{addName:function(){var e=this.get("model.puid")||"me"
if(r.default.validateAll(this.get("model.pidlDocuments"))){var a=this.get("model.originalPidl"),s=this.get("model.pidl_blend_id_prefix")
if(!a||!a.length)return this.replaceRoute("error","InvalidData")
n.default.busy()
var i=this
t.default.readUserInputData(a[0],s,"").then(function(t){return i.get("user").getProfile(e).then(function(n){n.set("first_name",t.first_name),n.set("last_name",t.last_name)
var a=i.get("model.context"),r=i.get("model.paymentMethodFamily"),s=i.get("model.paymentMethodType")
return i.replaceRoute("paymentAndBilling.addEmail",{queryParams:{context:a,paymentMethodFamily:r,paymentMethodType:s,puid:e}})})},function(e){throw t.default.getErrorDetails(e)}).catch(function(e){if(!e||"TransitionAborted"!==e.name)return i.replaceRoute("error",e)}).finally(function(){n.default.done()})}},enterPressed:function(){this.get("canShowXboxNextButton")?this.send("next"):this.send("addName")},cancel:function(){var e=s.default.addNameOrAddress()
e?e.context?this.replaceRoute(e.route,e.context):this.replaceRoute(e.route):d.default.clearAndDone("cancel")},privacyStatement:function(e){a.default.open(e,"privacyStatement")},next:function(){var e=this.get("model.displayIndex"),t=l.default.getPidlForDisplayIndex(e,this.get("model.pidlDocuments"))
r.default.validateAtDisplayIndex(t,e)&&this.set("model.displayIndex",e+1)
var n={currentFieldName:this.getFieldName(e)}
i.default.captureContentPageAction({name:"XboxNextFieldButtonClicked"},n),Ember.run.later(this,function(){r.default.focusValidElementOnPage()},200)},back:function(){var e=this.get("model.displayIndex")
this.set("model.displayIndex",e-1)
var t={currentFieldName:this.getFieldName(e)}
i.default.captureContentPageAction({name:"XboxBackFieldButtonClicked"},t),Ember.run.later(this,function(){r.default.focusValidElementOnPage()},200)},viewTerms:function(){i.default.captureContentPageAction({name:"ViewTermsButtonClicked"}),o.default.open("privacy")}},getFieldName:function(e){var t=l.default.getPidlItemForDisplayIndex(e,this.get("model.pidlDocuments"))
return t?t.displayName:""},title:Ember.computed("model.puid",function(){var e=this.get("model.puid")
return e&&"me"!==e?this.get("strings.Need_More_Info_For_Child_Title"):this.get("strings.Need_More_Info_Title")}),isAtLastDisplayIndex:Ember.computed("model.displayIndex","model.lastDisplayIndex",function(){return this.get("model.displayIndex")>=this.get("model.lastDisplayIndex")}),canShowXboxBackButton:Ember.computed("model.displayIndex","model.isXboxOne",function(){return this.get("model.isXboxOne")&&this.get("model.displayIndex")>0}),canShowXboxNextButton:Ember.computed("isAtLastDisplayIndex","model.isXboxOne",function(){return this.get("model.isXboxOne")&&!this.get("isAtLastDisplayIndex")}),canShowPrivacyMessage:Ember.computed("model.displayIndex","model.isXboxOne",function(){return!this.get("model.isXboxOne")||this.get("isAtLastDisplayIndex")})})}),define("web-blends/controllers/payment-and-billing/choose-payment-method-family",["exports","web-blends/modules/flow-stack","web-blends/modules/return-route","sfw-telemetry/utils/blend-bi-tracker","sfw-telemetry/utils/flight-config","sfw-telemetry/utils/client"],function(e,t,n,a,r,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend({actions:{replaceWithRedeem:function(){this.replaceRoute("redeem.enterCode",{queryParams:{isPurchaseFlow:!0}})},getPaymentInstrumentDescriptions:function(e){var t={},n=this,i="unionpay_creditcard".equalsIgnoreCase(e.get("paymentMethodType"))||"unionpay_debitcard".equalsIgnoreCase(e.get("paymentMethodType"))
return r.default.isEnabled("pidlsdkallpis")||"mobile_billing_non_sim".equalsIgnoreCase(e.get("paymentMethodFamily"))||"alipay_billing_agreement".equalsIgnoreCase(e.get("paymentMethodType"))||"ach".equalsIgnoreCase(e.get("paymentMethodType"))||"sepa".equalsIgnoreCase(e.get("paymentMethodType"))||"ideal_billing_agreement".equalsIgnoreCase(e.get("paymentMethodType"))||"paypal".equalsIgnoreCase(e.get("paymentMethodType"))&&!s.default.isXboxOneClient()||"paypal".equalsIgnoreCase(e.get("paymentMethodType"))&&s.default.isXboxOneClient()||"credit_card".equalsIgnoreCase(e.get("paymentMethodFamily")&&!i)||i?function(e,t){var a="unionpay_creditcard"===t||"unionpay_debitcard"===t,r="credit_card".equalsIgnoreCase(e)&&!a
return n.replaceRoute("paymentAndBilling.paymentInstrumentSdk",{queryParams:{context:"add",paymentMethodFamily:e,paymentMethodType:r?"":t,puid:n.get("model.puid")||"me"}}).catch(function(e){e&&e.name&&e.name.toLowerCase&&"transitionaborted"===e.name.toLowerCase()||n.replaceRoute("error",e)})}(e.get("paymentMethodFamily"),e.get("paymentMethodType")):function(r,s){switch(r){case"ewallet":if("paypal"===s)return t.name=s,a.default.captureContentPageAction(t),n.replaceRoute("paymentAndBilling.addName",{queryParams:{context:"addpi",paymentMethodFamily:r,paymentMethodType:s}})
if("alipay_billing_agreement"===s)return t.name=s,a.default.captureContentPageAction(t),n.replaceRoute("paymentAndBilling.addName",{queryParams:{context:"addpi",paymentMethodFamily:r,paymentMethodType:s}})
e.paymentMethodType
break
case"credit_card":var i="unionpay_creditcard"===s||"unionpay_debitcard"===s
return t.name=i?s:r,a.default.captureContentPageAction(t),n.replaceRoute("paymentAndBilling.addName",{queryParams:{context:"addpi",paymentMethodFamily:r,paymentMethodType:s}})
default:return t.name=r,a.default.captureContentPageAction(t),n.replaceRoute("paymentAndBilling.addName",{queryParams:{context:"addpi",paymentMethodFamily:r,paymentMethodType:s}})}}(e.get("paymentMethodFamily"),e.get("paymentMethodType"))},cancel:function(){a.default.capturePageAction($("#cancelButton"))
var e=n.default.addPi()
e?(t.default.pop("cancel"),e.context?this.replaceRoute(e.route,e.context):this.replaceRoute(e.route)):t.default.clearAndDone("cancel")}},treatedChoosePMLayout:Ember.computed(function(){return!s.default.isXboxOneClient()&&r.default.isEnabled("treatedchoosepm")}),treatedRedeemButton:Ember.computed(function(){return!s.default.isXboxOneClient()&&r.default.isEnabled("treatedchoosepm")}),treatedPaymentMethodDisplayData:Ember.computed(function(){return this.get("treatedChoosePMLayout")?"treatedPaymentMethodDisplayData":"paymentMethodDisplayData"}),treatedPaymentMethodInputContainer:Ember.computed(function(){return this.get("treatedChoosePMLayout")?"treatedPaymentMethodInputContainer":"paymentMethodInputContainer"}),treatedSelectedPaymentMethod:Ember.computed(function(){return this.get("treatedChoosePMLayout")?"treated-button-list":"button-list"}),treatedTitle:Ember.computed(function(){return this.get("isModernXboxClient")?this.get("strings.Add_New_Payment_Instrument"):this.get("model.backupPi")?this.get("strings.Add_Payment_Instrument_Title"):this.get("treatedChoosePMLayout")?this.get("strings.AddPI_ChoosePaymentMethod_Title"):this.get("strings.Choose_PaymentMethodFamily_Title")}),treatedLinkTextStyle:Ember.computed(function(){return this.get("treatedChoosePMLayout")?"linktext":""}),isMercury:Ember.computed(function(){return s.default.isMercury()}),isModernXboxClient:Ember.computed(function(){return s.default.isModernXboxClient()})})}),define("web-blends/controllers/payment-and-billing/direct-debit-challenge",["exports","web-blends/modules/busy","sfw-telemetry/utils/blend-bi-tracker","sfw-components/utils/pidl-validator2","sfw-services/utils/commerce-js","sfw-services/services/payment-instrument","sfw-telemetry/utils/app-globals","sfw-services/models/select-pi","web-blends/modules/reset-blend-sensitive-user-data","sfw-services/utils/error-equals"],function(e,t,n,a,r,s,i,l,o,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend({queryParams:["piId"],piId:null,userAttemptMessage:"",actions:{next:function(){var e=this
if(n.default.capturePageAction($("#nextButton")),a.default.validateAll(e.get("model.pidlDocuments"))){var u=e.get("model.originalPidl"),c=e.get("model.pidl_blend_id_prefix")
u?u.length||(u=[u]):e.replaceRoute("error","InvalidData")
try{var m=e.piId
r.default.readUserInputData(u[0],c,"").then(function(n){t.default.busy(),r.default.transformUserInputData(u[0],n).then(function(){s.default.resumePaymentInstrument(m,n).then(function(){return e.set("userAttemptMessage",""),i.default._selectPiData||(i.default._selectPiData=l.default.create()),i.default._selectPiData.selectedPis={id:m},(0,o.default)(),e.store.unloadAll("payment-instrument"),t.default.done(),e.replaceRoute("purchase.confirm")},function(n){if(!d.default.isDirectDebitInvalidAmountError(n))return e.replaceRoute("error",n)
s.default.getPaymentInstrument(m).then(function(a){if("pending"===(a.status&&a.status.toLowerCase&&a.status.toLowerCase())&&a.details&&a.details.pendingOn&&a.details.pendingOn.toLowerCase&&"picv"===a.details.pendingOn.toLowerCase()){var r=a.details&&a.details.pendingDetails&&a.details.pendingDetails.remainingAttempts||0
r>1?e.set("userAttemptMessage",e.get("strings.DirectDebit_Validation_Retry").replace("{0}",r)):e.set("userAttemptMessage",e.get("strings.DirectDebit_Validation_LastRetry")),t.default.done()}else e.replaceRoute("error",n)},function(t){return e.replaceRoute("error",t)})})},function(t){return e.replaceRoute("error",t)})},function(t){return e.replaceRoute("error",t)})}catch(t){e.replaceRoute("error",t)}}else t.default.done()},cancel:function(){n.default.capturePageAction($("#directDebitChallengeCancel")),this.set("userAttemptMessage",""),this.replaceRoute("purchase.confirm")}},attemptMessage:Ember.computed("userAttemptMessage",function(){return this.get("userAttemptMessage")})})}),define("web-blends/controllers/payment-and-billing/payment-instrument-sdk",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend({needsFingerprintTagging:Ember.computed("model.greenId",function(){return this.get("model.greenId")})})}),define("web-blends/controllers/payment-and-billing/redirect-confirm",["exports","sfw-telemetry/utils/app-globals","web-blends/modules/busy","web-blends/modules/return-route","sfw-components/utils/template-tokenizer","sfw-messaging/utils/post-messages","sfw-messaging/utils/messages","sfw-services/utils/redirection-service-url","sfw-messaging/utils/open-url","sfw-services/services/payment-instrument","sfw-services/models/session-ids","sfw-telemetry/utils/blend-bi-tracker","sfw-telemetry/utils/client","sfw-services/utils/order-pi-context","sfw-messaging/utils/open-terms","sfw-telemetry/utils/start-data","sfw-services/models/select-pi"],function(e,t,n,a,r,s,i,l,o,d,u,c,m,f,p,g,b){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend({actions:{addPiRedirectConfirmNext:function(){n.default.busy()
var e=this
t.default._sessionIds||(t.default._sessionIds=u.default.create())
var a={sessionId:t.default._sessionIds.getNewSessionId(),paymentMethodFamily:"ewallet",paymentMethodType:"paypal",context:"purchase"}
c.default.capturePageAction($("#nextButton"),{sessionId:a.sessionId}),d.default.addPaymentInstrument(a,this.get("model.legacyPurchaseType")).then(function(r){var d
if(e.get("isInPageRedirection")&&e.model&&e.model.order&&null!=(d=l.default.addPiReturnUrl(a.sessionId))){t.default._selectPiData||(t.default._selectPiData=b.default.create())
var u,c,p=t.default._selectPiData.selectedPis
return t.default._selectPiData.selectBackupPi?(c=r.id,u=p.id):u=r.id,f.default.saveContext(e.model.order.get("orderId"),a.sessionId,u,c,"redirect_confirm"),void s.default.send(i.default.openUrl(d,"piRedirect",!0))}var g=l.default.syncPaymentInstrumentAddPi(a.sessionId)
m.default.isWebClient()?o.default.openInBrowser(g,"payPalRedirection"):s.default.send(i.default.openUrl(g,"piRedirect",!1)),n.default.done(),e.replaceRoute("paymentAndBilling.redirectContinue").then(function(t){t.controller.set("model",{tempSelectedPi:r.id,contentTitle:e.get("strings.Add_PayPal_Continue_Title_New"),contentText:e.get("strings.Add_PayPal_Continue_Text_New"),logo:e.model&&e.model.logo})})},function(t){e.replaceRoute("error",t)})},addPiRedirectConfirmCancel:function(){c.default.capturePageAction($("#cancelButton"))
var e=a.default.addPi()
e&&(e.context?this.replaceRoute(e.route,e.context):this.replaceRoute(e.route))},privacyStatement:function(e){o.default.open(e,"privacyStatement")},viewTerms:function(){c.default.captureContentPageAction({name:"ViewTermsButtonClicked"}),p.default.open("privacy")}},redirectConfirmTextParts:Ember.computed(function(){var e=this.get("strings")
return r.default.tokenize(e.Add_PayPal_Text,["0"],function(){return e.Shared_Button_Next})}),showPopup:Ember.computed("isInPageRedirection",function(){return m.default.isWebClient()&&!this.get("isInPageRedirection")}),isInPageRedirection:Ember.computed(function(){var e=g.default.get().AddPiSuccessUrl,t=g.default.get().AddPiFailureUrl
return e&&t}),nextButtonText:Ember.computed("isInPageRedirection",function(){return this.get("isInPageRedirection")?this.get("strings.Shared_Button_Next"):this.get("strings.PayPal_Button_Sign_In_In_Page")})})}),define("web-blends/controllers/payment-and-billing/redirect-continue",["exports","sfw-components/utils/template-tokenizer","sfw-telemetry/utils/app-globals","web-blends/modules/flow-stack","sfw-services/models/select-pi","sfw-services/services/payment-instrument","sfw-telemetry/utils/blend-bi-tracker","sfw-messaging/utils/open-url","sfw-services/models/session-ids","sfw-services/utils/redirection-service-url","web-blends/modules/return-route"],function(e,t,n,a,r,s,i,l,o,d,u){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend({actions:{complete:function(e){i.default.capturePageAction($("#continueButton"))
var t=this
s.default.getPaymentInstrument(t.get("model.tempSelectedPi")).then(function(n){"active"===n.status||t.get("model.isDirectDebit")?t.selectPiAndGoBackToPurchase(n):t.replaceRoute("paymentAndBilling.redirectRetry"),e&&e()},function(n){t.replaceRoute("error",n),e&&e()})},close:function(){i.default.capturePageAction($("#closeButton"))
var e=this
s.default.getPaymentInstrument(e.get("model.tempSelectedPi")).then(function(t){var n=t.status&&t.status.toLowerCase&&t.status.toLowerCase()
if("active"===n||"pending"===n&&t.details&&t.details.pendingOn&&t.details.pendingOn.toLowerCase&&"picv"===t.details.pendingOn.toLowerCase())e.selectPiAndGoBackToPurchase(t)
else{a.default.pop("piAdded")
var r=u.default.addPiSuccess()
r&&"redeem.redeemConfirm"===r.route?e.replaceRoute("redeem.redeemConfirm"):e.replaceRoute("purchase.confirm")}},function(t){e.replaceRoute("error",t)})},retry:function(){if(!this.get("model.isDirectDebit"))return this.replaceRoute("paymentAndBilling.redirectConfirm")
this.reopenDocuSign(this.get("model.userData"),this.get("model.piInfo"),this.get("model.validationRegex"))}},reopenDocuSign:function(e,t,a){var r=this
n.default._sessionIds||(n.default._sessionIds=o.default.create()),e.sessionId=n.default._sessionIds.getNewSessionId()
var u=Ember.get(e,"details.accountToken")
new RegExp(a).test(u)?r.replaceRoute("error","InvalidData"):s.default.addPaymentInstrument(e,r.get("model.legacyPurchaseType")).then(function(n){var a=n&&n.details&&n.details.picvRequired
i.default.captureAddPiStatePageAction("Pending",{piInfo:t,picvRequired:a})
var r=d.default.syncPaymentInstrumentSignatureAddPi(e.sessionId,a)
l.default.open(r,"piRedirect",!1)},function(e){i.default.captureAddPiStatePageAction("Failed",{piInfo:t,errorDetail:e}),r.replaceRoute("error",e)})},selectPiAndGoBackToPurchase:function(e){n.default._selectPiData||(n.default._selectPiData=r.default.create())
var t=n.default._selectPiData.selectedPis,s=n.default._selectPiData.selectBackupPi?{id:t.id,csvTopOffPaymentInstrumentId:e.id}:{id:e.id}
n.default._selectPiData.selectedPis=s,a.default.pop("piAdded",e.id),this.store.unloadAll("payment-instrument")
var i=u.default.addPiSuccess()
return i&&"redeem.redeemConfirm"===i.route?this.replaceRoute("redeem.redeemConfirm"):this.replaceRoute("purchase.confirm")},redirectContinueTextParts:Ember.computed("model.continueText",function(){var e=this.get("model.isDirectDebit"),n=this.get("strings")
return t.default.tokenize(this.get("model.contentText"),["0","1"],function(t){return"0"===t?e?n.Shared_Button_Yes:n.Shared_Button_Continue:e?n.Shared_Button_No:n.Button_Close})})})}),define("web-blends/controllers/payment-and-billing/summary",["exports","sfw-telemetry/utils/app-globals","sfw-services/utils/commerce-js","web-blends/modules/return-route","sfw-services/services/payment-instrument","web-blends/modules/busy","web-blends/modules/flow-stack","sfw-components/utils/template-tokenizer","sfw-messaging/utils/open-url","sfw-services/services/account-tax-id","web-blends/modules/reset-blend-sensitive-user-data","sfw-services/models/select-pi","sfw-services/utils/error-equals","sfw-services/models/session-ids","sfw-services/utils/redirection-service-url","web-blends/modules/treatments","web-blends/modules/treatment-map","sfw-telemetry/utils/blend-bi-tracker","sfw-telemetry/utils/client","sfw-services/utils/constant-links","sfw-telemetry/utils/flight-config"],function(e,t,n,a,r,s,i,l,o,d,u,c,m,f,p,g,b,h,y,P,_){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend({user:Ember.inject.service(),creditCardCountry:Ember.inject.service(),actions:{save:function(){s.default.busy()
var e=this,t=e.get("model.puid"),a=e.get("model.pidlData.originalPidl"),r=e.get("model.pidlData.data")
if(h.default.capturePageAction($("#saveButton"),{sessionId:r&&r.length&&r[0].sessionId}),a&&r)if(e.get("editMode")){var l=e.get("model.pidlData.model.piId")
if(!(l&&Array.isArray(r)&&r.length>0))return void e.replaceRoute("error","InvalidData")
e.putUserData(l,r[0])}else{if(!(Array.isArray(a)&&Array.isArray(r)&&a.length>0&&r.length>0))return void e.replaceRoute("error","InvalidData")
n.default.tokenizeUserInputData(a[0],r[0]).then(function(){e.store&&e.store.unloadAll("profile")
var l=_.default.isEnabled("enableccsmd")?e.get("creditCardCountry").getCountry():null
e.get("user").getProfile(t,!0,!1,l).then(function(t){if(e.get("isAddressDescription"))if(r[0]){var l=r[0]
t.set("default_address",e.get("store").createRecord("address",l)),t.save().then(function(){t.get("addresses").pushObject(t.get("default_address")),i.default.pop("addressAdded",l),e.get("isTaxIdDescription")&&r[1]&&r[1].value&&!String.prototype.isNullOrWhitespace(r[1].value)?n.default.tokenizeUserInputData(a[1],r[1]).then(function(){d.default.post(r[1]).then(function(){s.default.done(),i.default.peek()===i.default.flowNames.Redeem?e.replaceRoute("redeem.redeemConfirm"):e.replaceRoute("purchase.confirm")},function(t){m.default.isTaxIdUserError(t)?(e.set("model.pidlData.pifdValidationError",t),e.send("edit"),s.default.done()):e.replaceRoute("error",t)})},function(t){e.replaceRoute("error",t)}):(s.default.done(),i.default.peek()===i.default.flowNames.Redeem?e.replaceRoute("redeem.redeemConfirm"):e.replaceRoute("purchase.confirm"))},function(t){m.default.isAddDefaultAddressUserError(t)?(e.set("model.pidlData.pifdValidationError",t),e.send("edit"),s.default.done()):e.replaceRoute("error",t)})}else e.replaceRoute("error",n.default.getErrorDetails("No tokenized user address found"))
else{var o=r&&r.length&&r[0],u=o&&o.address?o.address:o&&o.details&&o.details.address
if(u&&!t.get("hasDefaultAddress")){var c=u
t.set("default_address",e.get("store").createRecord("address",c)),r[2]&&r[2].email_address&&t.set("email_address",r[2].email_address)
var f=function(){return Ember.RSVP.resolve(null)},p=f,g=f,b=null,h=null
e.get("isTaxIdDescription")&&r[1]&&r[1].value&&!String.prototype.isNullOrWhitespace(r[1].value)&&(p=n.default.tokenizeUserInputData,g=d.default.post,b=a[1],h=r[1]),p(b,h).then(function(){g(h).then(function(){t.save().then(function(){e.resetEmailPidl(),e.postUserData(r[0])},function(t){m.default.isAddDefaultAddressUserError(t)?(e.set("model.pidlData.pifdValidationError",t),e.send("edit"),s.default.done()):e.replaceRoute("error",t)})},function(t){m.default.isTaxIdUserError(t)?(e.set("model.pidlData.pifdValidationError",t),e.send("edit"),s.default.done()):e.replaceRoute("error",t)})},function(t){m.default.isAddDefaultAddressUserError(t)?(e.set("model.pidlData.pifdValidationError",t),e.send("edit"),s.default.done()):e.replaceRoute("error",t)})}else r.length>0?t.get("requiredFieldsDirty")||t.get("hasDirtyAttributes")?t.save().then(function(){e.postUserData(r[0])},function(t){e.replaceRoute("error",t)}):e.postUserData(r[0]):e.replaceRoute("error","InvalidData")}},function(t){e.replaceRoute("error",t)})},function(t){e.replaceRoute("error",t)})}else e.replaceRoute("error","InvalidData")},edit:function(){if(h.default.capturePageAction($("#editSummary")),this.get("isAddressDescription"))this.replaceRoute("paymentAndBilling.addAddress",this.get("model.puid"))
else{var e=this.get("model.pidlData.displayData")
e&&e.length>0?this.replaceRoute("paymentAndBilling.addPaymentInstrument",{queryParams:{context:this.get("model.pidlData.model.operationName"),paymentMethodFamily:this.get("model.pidlData.model.paymentMethodFamily"),paymentMethodType:this.get("model.pidlData.model.paymentMethodType"),piId:this.get("model.pidlData.model.piId")}}):this.replaceRoute("error","InvalidData")}},cancel:function(){h.default.capturePageAction($("#cancelButton")),(0,u.default)()
var e=a.default.addPi()
e?(i.default.pop("cancel"),e.context?this.replaceRoute(e.route,e.context):this.replaceRoute(e.route)):i.default.clearAndDone("cancel")},legalStatement:function(e){o.default.open(e,"accountManagement")}},billingAddressNote:Ember.computed("model.puid","model.msaProfile",function(){var e=this.get("model.puid")
return e&&"me"!==e?this.get("strings.Billing_Address_And_Email_For_Child_Note_V1").replace("{0}",this.get("model.msaProfile.email_address")):this.get("strings.Billing_Address_Note")}),billingSummaryNote:Ember.computed("model.msaProfile",function(){return this.get("strings.Billing_Summary_Legal").replace("{0}",this.get("model.msaProfile.email_address"))}),billingNoChargeNote:Ember.computed(function(){return!g.default.doesTreatmentExist(b.default.BillingNoChargeNote.id)||this.get("isAddressDescription")?null:this.get("strings.Billing_NoCharge_Note")}),postUserData:function(e){var n,a=this,l=this.get("isDirectDebit")
if(l&&!e.sessionId&&(t.default._sessionIds||(t.default._sessionIds=f.default.create()),e.sessionId=t.default._sessionIds.getSessionId(t.default._sessionIds.newPlaceholderId)),l){var d=a.get("model.pidlData.model.pidlDocuments.0.pidlModel"),g=d&&d.filter?d.filter(function(e){return"accountToken".equalsIgnoreCase(e.propertyName)}):null
n=g&&g.get("0.data_description.validation.regex")}r.default.addPaymentInstrument(e,a.get("model.legacyPurchaseType")).then(function(r){if(l){var d=a.get("piInfo"),m=r&&r.details&&r.details.picvRequired
h.default.captureAddPiStatePageAction("Pending",{piInfo:d,picvRequired:m}),(0,u.default)()
var f=p.default.syncPaymentInstrumentSignatureAddPi(e.sessionId,m)
o.default.open(f,"piRedirect",!1),s.default.done(),a.replaceRoute("paymentAndBilling.redirectContinue").then(function(t){t.controller.set("model",{tempSelectedPi:r.id,contentTitle:a.get("strings.Docusign_Continue_Title"),contentText:a.get("strings.Docusign_Continue_Text_No_Placeholders"),isDirectDebit:!0,userData:e,piInfo:d,validationRegex:n})})}else{h.default.captureAddPiStatePageAction("Success",{piInfo:a.get("piInfo")}),t.default._selectPiData||(t.default._selectPiData=c.default.create())
var g=t.default._selectPiData.selectedPis,b=t.default._selectPiData.selectBackupPi?{id:g.id,csvTopOffPaymentInstrumentId:r.id}:{id:r.id}
t.default._selectPiData.selectedPis=b,(0,u.default)(),a.store.unloadAll("payment-instrument"),i.default.pop("piAdded",r.id),i.default.peek()===i.default.flowNames.Redeem?(s.default.done(),a.replaceRoute("redeem.redeemConfirm")):i.default.peek()&&(s.default.done(),a.replaceRoute("purchase.confirm"))}},function(e){m.default.isAddPiUserError(e)?(h.default.captureAddPiStatePageAction("InlineError",{piInfo:a.get("piInfo"),errorDetail:e}),a.set("model.pidlData.pifdValidationError",e),a.send("edit"),s.default.done()):(h.default.captureAddPiStatePageAction("Failed",{piInfo:a.get("piInfo"),errorDetail:e}),a.replaceRoute("error",e))})},putUserData:function(e,n){var a=this
r.default.put(e,n).then(function(e){h.default.captureAddPiStatePageAction("Success",{piInfo:a.get("piInfo"),mode:"edit"}),t.default._selectPiData||(t.default._selectPiData=c.default.create())
var n=t.default._selectPiData.selectedPis,r=t.default._selectPiData.selectBackupPi?{id:n.id,csvTopOffPaymentInstrumentId:e.id}:{id:e.id}
t.default._selectPiData.selectedPis=r,(0,u.default)(),a.store&&a.store.unloadAll("payment-instrument"),i.default.pop("piUpdated",e.id),i.default.peek()===i.default.flowNames.Redeem?(s.default.done(),a.replaceRoute("redeem.redeemConfirm")):i.default.peek()&&(s.default.done(),a.replaceRoute("purchase.confirm"))},function(e){m.default.isEditPiUserError(e)?(h.default.captureAddPiStatePageAction("InlineError",{piInfo:a.get("piInfo"),errorDetail:e,mode:"edit"}),a.set("model.pidlData.pifdValidationError",e),a.send("edit"),s.default.done()):(h.default.captureAddPiStatePageAction("Failed",{piInfo:a.get("piInfo"),errorDetail:e,mode:"edit"}),a.replaceRoute("error",e))})},resetEmailPidl:function(){var e=t.default._userPidlData&&t.default._userPidlData.get("model.originalPidl"),n=e&&e.length&&e[e.length-1]
n&&n.length&&n[0].data_description&&n[0].data_description.email_address&&(e.pop(),t.default._userPidlData.set("model.originalPidl",e))},isAddressDescription:Ember.computed("model.pidlData.originalPidl",function(){var e=this.get("model.pidlData.originalPidl")
return!!(e&&Array.isArray(e)&&e.length>0&&e[0]&&e[0].length>0&&e[0][0].identity&&e[0][0].identity.description_type&&e[0][0].identity.description_type.toLowerCase)&&"address"===e[0][0].identity.description_type.toLowerCase()}),address:Ember.computed("model.pidlData.displayData",function(){var e=this.get("model.pidlData.displayData")
return e&&e.length>0?e[0]&&e[0].address:null}),isTaxIdDescription:Ember.computed("model.pidlData.originalPidl",function(){var e=this.get("model.pidlData.originalPidl")
return!!(e&&Array.isArray(e)&&e.length>1&&e[1]&&e[1].length>0&&e[1][0].identity&&e[1][0].identity.description_type&&e[1][0].identity.description_type.toLowerCase)&&"taxid"===e[1][0].identity.description_type.toLowerCase()}),isDirectDebit:Ember.computed("model.pidlData.data",function(){var e=this.get("model.pidlData.data")
return!!((e=e&&Array.isArray(e)&&e[0])&&e.paymentMethodFamily&&e.paymentMethodFamily.toLowerCase&&"direct_debit"===e.paymentMethodFamily.toLowerCase())}),piInfo:Ember.computed("model.pidlData.data",function(){var e=this.get("model.pidlData.data")
return{paymentMethodFamily:(e=e&&e.length&&e[0])&&e.paymentMethodFamily||null,paymentMethodType:e&&e.paymentMethodType||null}}),subtitle:Ember.computed(function(){return this.get("isAddressDescription")?this.get("strings.Information_Summary_AddAddress_Subtitle"):this.get("strings.Information_Summary_AddPi_Subtitle")}),editMode:Ember.computed("model.pidlData.model.operationName",function(){var e=this.get("model.pidlData.model.operationName")
return e&&e.toLowerCase&&"edit"===e.toLowerCase()}),legalStatementTextParts:Ember.computed("model.puid",function(){var e="me"===(this.get("model.puid")||"me")?this.get("strings.Billing_Summary_Legal_Microsoft_Account_With_Link"):this.get("strings.Billing_Summary_Legal_Microsoft_Account_For_Child_With_Link")
return l.default.tokenize(e,["0"],function(){return"account.microsoft.com"},function(e){return e.id="legalStatement",e.biContentName="accountManagement",e.css="cli_legalStatement",e.url=P.default.get().accountsCom,e})}),isXboxOne:Ember.computed(function(){return y.default.isXboxOneClient()})})}),define("web-blends/controllers/purchase/ask-purchaser/index",["exports","web-blends/modules/busy","sfw-messaging/utils/messages","sfw-messaging/utils/post-messages","web-blends/modules/flow-stack","sfw-telemetry/utils/blend-bi-tracker","sfw-services/errors/app-error"],function(e,t,n,a,r,s,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend({xbetService:Ember.inject.service("xbet"),waitForPurchaser:Ember.computed(function(){var e=this
a.default.send(n.default.selectPurchaser()),t.default.busy(),a.default.listen(function(n){n&&n.message&&n.message.toString().equalsIgnoreCase("purchaserSelected")&&n.status&&(n.status.toString().equalsIgnoreCase("success")?e.get("xbetService").postAskPurchaser(n.email||"",n.xuid||"",n.gamertag||"").then(function(){t.default.done(),e.replaceRoute("purchase.askPurchaser.success")},function(n){t.default.done(),s.default.capturePurchaseStatePageAction("Failed"),e.replaceRoute("error",n)}):n.status.toString().equalsIgnoreCase("cancel")?(t.default.done(),s.default.capturePurchaseStatePageAction("Cancelled"),r.default.clearAndDone("cancel")):(t.default.done(),s.default.capturePurchaseStatePageAction("Failed"),e.replaceRoute("error",new i.default("AskAPurchaserDialogError"))))})})})}),define("web-blends/controllers/purchase/ask-purchaser/success",["exports","web-blends/modules/flow-stack","web-blends/modules/busy"],function(e,t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend({actions:{close:function(){n.default.busy(),t.default.clearAndDone("cancel")}}})}),define("web-blends/controllers/purchase/ask-to-buy/index",["exports","sfw-telemetry/utils/client","web-blends/modules/busy","sfw-telemetry/utils/flight-config"],function(e,t,n,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend({queryParams:["redirectedFrom","orderId","selectedPiId","reason","isXbetAskAParent"],isXbetAskAParent:!1,parentalApproval:Ember.inject.service("parental-approval"),xbetService:Ember.inject.service("xbet"),actions:{submitAskToBuyRequest:function(){var e=this
n.default.busy(),this.get("isXbetAskAParent")?this.get("xbetService").postAskPurchaserChildSub().then(function(){n.default.done(),e.replaceRoute("purchase.askToBuy.success")}).catch(function(t){e.replaceRoute("error",t)}):this.get("parentalApproval").post(this.get("model").order.id,["Restriction"]).then(function(){n.default.done(),e.replaceRoute("purchase.askToBuy.success")}).catch(function(t){e.replaceRoute("error",t)})},replaceWithRedeem:function(){this.replaceRoute("redeem.enterCode",{queryParams:{isPurchaseFlow:!0}})}},isXboxOneClient:Ember.computed(function(){return t.default.isXboxOneClient()}),isFromRedeem:Ember.computed("redirectedFrom",function(){return"redeem"===this.get("redirectedFrom")}),shouldShowRedeemLink:Ember.computed("reason",function(){return this.get("reason")!==this.get("constants").askToBuy.reasons.age}),shouldShowRedeemMessage:Ember.computed("isFromRedeem","csvDetails",function(){return this.get("isFromRedeem")&&null!==this.get("csvDetails")}),csvDetails:Ember.computed("model.selectedPi",function(){return this.get("model.selectedPi.isCsv")?this.get("model.selectedPi.details"):null}),askToBuyMessage:Ember.computed("model.order",function(){return this.get("strings.AskToBuy_New_Index_Message").replace("{0}",this.get("model.order.firstLineItem.displayTitle"))}),shouldShowNewPageVersion:Ember.computed("model",function(){return this.get("isXbetAskAParent")||a.default.isEnabled("newatbmsg")})})}),define("web-blends/controllers/purchase/complete",["exports","sfw-telemetry/utils/client","sfw-telemetry/utils/start-data","web-blends/modules/flow-stack","sfw-components/utils/template-tokenizer","sfw-services/utils/constant-links","sfw-messaging/utils/open-url"],function(e,t,n,a,r,s,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend({queryParams:["scenario"],actions:{done:function(){var e={orderId:this.get("model.order.orderId"),lineItem:this.get("model.order.firstLineItem").serialize({full:!0}),ctaClicked:"primary"}
a.default.pop("success",e)},doneSecondary:function(){var e={orderId:this.get("model.order.orderId"),lineItem:this.get("model.order.firstLineItem").serialize({full:!0}),ctaClicked:"secondary"}
a.default.pop("success",e)},giftOrderTrackingStatement:function(e){i.default.open(e,"orderTrackingGiftCongrats")}},isScenarioGift:Ember.computed(function(){return"gift"===this.get("scenario")}),isScenarioDLCThankYou:Ember.computed(function(){return"dlcPurchaseWithThanks"===this.get("scenario")}),isManualReview:Ember.computed("isScenarioGift","model",function(){return this.get("isScenarioGift")&&!!this.get("model.order.isInManualReview")&&this.get("model.order.orderState").equalsIgnoreCase("Ordered")}),isGamingApp:Ember.computed(function(){return t.default.isGamingApp()}),gamingAppThemeVersionClass:Ember.computed(function(){return t.default.gamingAppThemeVersionClass()}),thankYouTitle:Ember.computed(function(){var e=t.default.gamingAppCustomParameters()
return this.get("isScenarioDLCThankYou")?this.get("strings").Purchase_Complete_DLC_Title:this.get("isScenarioGift")?this.get("strings").Gaming_App_ThankYou_Gift_Title:Object.prototype.hasOwnProperty.call(e,"Complete")&&Object.prototype.hasOwnProperty.call(e.Complete,"Title")&&this.get("strings")[e.Complete.Title]||this.get("strings").GamingApp_ThankYou_Title}),thankYouDescription:Ember.computed(function(){var e=t.default.gamingAppCustomParameters()
return this.get("isScenarioDLCThankYou")?this.get("strings").Purchase_Complete_DLC_Message:this.get("isScenarioGift")?this.get("hasAddons")?this.get("strings").GamingApp_ThankYou_Gift_Description.replace("{currentProductTitle}",this.get("productTitle")):this.get("strings").GamingApp_ThankYou_Gift_Description_No_Addons:Object.prototype.hasOwnProperty.call(e,"Complete")&&Object.prototype.hasOwnProperty.call(e.Complete,"Description")&&this.get("strings")[e.Complete.Description]||this.get("strings").GamingApp_ThankYou_Install_Description}),thankYouCTAText:Ember.computed(function(){var e=t.default.gamingAppCustomParameters()
return this.get("isScenarioDLCThankYou")?this.get("strings").Purchase_Complete_DLC_Button:this.get("isScenarioGift")?this.get("hasAddons")?this.get("strings").GamingApp_ThankYou_Gift_ShopAddons_Button:this.get("strings").GamingApp_ThankYou_Gift_ExploreGames_Button:Object.prototype.hasOwnProperty.call(e,"Complete")&&Object.prototype.hasOwnProperty.call(e.Complete,"CTAText")&&this.get("strings")[e.Complete.CTAText]||this.get("strings").GamingApp_ThankYou_Install_CTA_Button}),showClose:Ember.computed(function(){var e=t.default.gamingAppCustomParameters()
return!!Object.prototype.hasOwnProperty.call(e,"CloseX")&&!0===e.CloseX}),thankYouCTASecondText:Ember.computed(function(){return this.get("strings").GamingApp_ThankYou_Gift_ExploreGames_Button}),isXboxOne:Ember.computed(function(){return t.default.isXboxOneClient()}),gamertag:Ember.computed("isXboxOne",function(){if(this.get("isXboxOne"))return n.default.get().Gamertag}),moderngamertag:Ember.computed(function(){return t.default.isModernXboxClient()?n.default.get().ModernGamertag:""}),moderngamertagsuffix:Ember.computed(function(){return t.default.isModernXboxClient()&&n.default.get().ModernGamertagSuffix?n.default.get().ModernGamertagSuffix:""}),ismoderngamertagenabled:Ember.computed(function(){return!!this.get("moderngamertag")}),recipientText:Ember.computed("model.order.firstLineItem.giftee",function(){var e="GamertagProfileId"===this.get("model.order.firstLineItem.giftee.recipientType")?this.get("model.order.firstLineItem.giftee.recipient.gamer_tag"):this.get("model.order.firstLineItem.giftee.recipient.email_address")
return this.get("strings.Purchase_Gift_Congrats_GifteeConfirm").replace("{0}",e)}),productTitle:Ember.computed("model.order.firstLineItem.displayTitle",function(){return this.get("model.order.firstLineItem.displayTitle")}),imageAltText:Ember.computed("model.order.firstLineItem.displayTitle",function(){var e=this.get("productTitle")
return this.get("strings.Shared_Label_Logo").replace("{0}",e)}),showImage:Ember.computed("model.order.imageProductUrl",function(){return!!this.get("model.order.imageProductUrl")}),orderTrackingTerms:Ember.computed(function(){var e=this.get("strings")
return r.default.tokenize(e.Purchase_Gift_Congrats_OrderTracking_Desktop,["accountsCom"],function(){return"account.microsoft.com"},function(e){return e.id=e.value+"_tou",e.css="cli_tou",e.url=s.default.get().accountsCom,e})}),xboxDownloadInstructions:Ember.computed(function(){var e=this.get("strings")
return r.default.tokenize(e.Purchase_Completion_Xbox_Download_Instructions,["0"],function(){return e.Xbox_Download_Path})}),pcDownloadInstructions:Ember.computed(function(){var e=this.get("strings")
return r.default.tokenize(e.Purchase_Completion_PC_Download_Instructions,["0","1"],function(t){return"0"===t?e.Microsoft_Store_Name:e.Store_Library_Name})}),isDigitalAttach:Ember.computed(function(){return!!n.default.get().IsDigitalAttachment}),gamingAppGiftClass:Ember.computed(function(){return this.get("isScenarioGift")&&t.default.isGamingApp()?"gamingAppGiftThankYouPage":""}),hasAddons:Ember.computed(function(){var e=t.default.gamingAppCustomParameters()
return!!Object.prototype.hasOwnProperty.call(e,"HasAddons")&&!!e.HasAddons}),twoCTAContentClass:Ember.computed(function(){return t.default.isGamingApp()&&this.get("hasAddons")&&this.get("isScenarioGift")?"twoCTAContent":""})})}),define("web-blends/controllers/purchase/confirm-oobe",["exports","sfw-telemetry/utils/client","web-blends/mixins/legal-strings","sfw-telemetry/utils/start-data","web-blends/modules/busy","web-blends/utils/perf","sfw-components/utils/legal-market-region","sfw-messaging/utils/messages","sfw-messaging/utils/post-messages","sfw-components/utils/order-bi-data","sfw-telemetry/utils/blend-bi-tracker","sfw-telemetry/utils/flight-config","web-blends/modules/flow-stack","sfw-services/utils/map-omex-not-eligible-error","sfw-services/utils/error-equals","web-blends/utils/pidl-sdk"],function(e,t,n,a,r,s,i,l,o,d,u,c,m,f,p,g){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend(n.default,{queryParams:["autoConfirm","threeDsSessionId"],autoConfirm:!1,threeDsSessionId:null,pidl:Ember.inject.service("pidl"),creditCardCountry:Ember.inject.service(),autoRenewalConsent:Ember.inject.service(),user:Ember.inject.service(),isAutoRenewalCheckboxChecked:!1,actions:{selectPi:function(){this.replaceRoute("purchase.selectPi","selectPi")},purchase:function(){var e=this
if(!this.get("isDisabled")&&!r.default.isBusy()){if(c.default.isEnabled("challengecheck")){if(!e.get("threeDsSessionId")&&!e.get("handlingChallenge")&&e.get("autoRenewalConsentRequired")&&!e.get("isAutoRenewalCheckboxChecked"))return void e.get("autoRenewalConsent").setAutoRenewalConsentError(!0)}else if(e.get("autoRenewalConsentRequired")&&!e.get("isAutoRenewalCheckboxChecked"))return void e.get("autoRenewalConsent").setAutoRenewalConsentError(!0)
r.default.busy(),this.set("model.isPurchaseAllowed",!1),s.default.markOnce(s.default.markerNames.purchaseStart)
var n=this.get("model.selectedPi"),i=n&&n.id,b=this.get("model.order"),h=n&&n.get("piAccountId"),y=b.get("firstLineItem.isPreOrder"),P=b.get("firstLineItem.isSubscriptionItem"),_=b.get("firstLineItem.challengePurchaseContext")
a.default.get().selectedPi=n
var v={orderInfo:(0,d.default)(b,n,null,!0)}
if(c.default.isEnabled("enableccsmd")){var w=e.get("creditCardCountry").getCountry()||a.default.get().Market
v.piCountry=w,v.isSmd=!w.equalsIgnoreCase(a.default.get().Market)}var C,x=this.get("model.checkoutPromise")||(C=Ember.Object.create({isCheckingOut:b&&b.get("isCheckingOut")}),Ember.RSVP.resolve(C)),I=a.default.get().IsDigitalAttachment&&c.default.isEnabled("dainwinoobe")
x.then(function(w){if(!w.get("isCheckingOut")&&!I)return e.replaceRoute("error","OrderCheckoutFailed")
var C=Ember.RSVP.resolve()
"US".equalsIgnoreCase(a.default.get().Market)&&b.get("billingInformation.soldToAddressId")&&(C=e.get("user").getDefaultAddress().then(function(t){var n=e.get("user").getAddressZipCodeInfo(t)
v.addressRegionInRegionList=n.addressRegionInRegionList})),C.then(function(){var w=function(t){var w=arguments.length>1&&void 0!==arguments[1]&&arguments[1]
if(!(b&&b.get("isCheckingOut")||I))return u.default.capturePurchaseStatePageAction("Failed",v),e.replaceRoute("error","InvalidOrderFormat")
o.default.send(l.default.piSelected(i,"Purchased")),b.get("billingInformation")&&a.default.get().tokenizedRiskData&&b.set("billingInformation.tokenizedPaymentInstrumentData",a.default.get().tokenizedRiskData),b.get("billingInformation")&&t&&(b.set("billingInformation.sessionId",t),w&&(v.threeDsChallengeCompleted=!0,b.set("billingInformation.challengeCompletedKind","3DS2"))),b.set("orderState","Purchased"),b.save().then(function(){var e=b.get("lineItems"),t={orderId:b.get("orderId"),count:e&&e.length||0,lineItems:e&&e.map(function(e){return e.serialize({full:!0})})}
v.orderInfo=(0,d.default)(b,n,null,!0),b&&"ordered"===b.get("orderState").toLowerCase()?u.default.capturePurchaseStatePageAction("Ordered",v,"PURCHASECOMPLETE"):u.default.capturePurchaseStatePageAction("Purchased",v,"PURCHASECOMPLETE"),s.default.markOnce(s.default.markerNames.purchaseComplete),s.default.capturePurchase({orderId:b.get("orderId")}),m.default.pop("success",t)},function(t){if(r.default.done(),b.rollbackAttributes(),c.default.isEnabled("cleartokenizeddataonerror")&&(a.default.set("tokenizedRiskData",null),b.get("billingInformation.tokenizedPaymentInstrumentData")&&b.set("billingInformation.tokenizedPaymentInstrumentData","")),v.orderInfo=(0,d.default)(b,n,null,!1),v.errorCode=t&&t.code,p.default.isCvvChallengeError(t)){if(u.default.capturePurchaseStatePageAction("NeedCvvRiskChallenge",v),!c.default.isEnabled("pidlsdkcvv"))return e.replaceRoute("purchase.riskChallenge","purchase","Cvv")
var s=e.replaceRoute("purchase.riskChallengeSdk",{queryParams:{context:"challenge",challengeType:"Cvv"}})
s.data.order=b,s.data.selectedPi=n,s.data.selectedBackupPi=null,s.data.returnFlow="confirmOobe"}else{if(!c.default.isEnabled("psd2enable")||!p.default.is3DS2ChallengeError(t)){if(u.default.capturePurchaseStatePageAction("Failed",v),b.get("isOmexProduct")&&(t=f.default.getError(t)),c.default.isEnabled("enableccsmd")){var l=e.get("creditCardCountry").getCountry()||a.default.get().Market
t.pageDetails={piCountry:l,isSmd:!l.equalsIgnoreCase(a.default.get().Market)}}return e.replaceRoute("error",t)}var o=e.get("pidl"),m=i,w=h,C=o.paymentSessionData(_,a.default.get().Culture,m,w,g.default.pidlSdkPartnerForChallenge(),g.default.challengeWindowSize(),y,P,b.get("orderId"))
u.default.captureContentPageAction({name:"need3DS2Challenge"})
var x=e.replaceRoute("purchase.riskChallengeSdk",{queryParams:{context:"challenge",challengeType:"threeds2"}})
x.data.order=b,x.data.selectedPi=n,x.data.selectedBackupPiId=null,x.data.paymentSession=C,x.data.returnFlow="confirmOobe"}})}
if(c.default.isEnabled("psd2enable"))if(e.get("threeDsSessionId")){u.default.captureContentPageAction({name:"threeDsAutoConfirm"})
var C=e.get("threeDsSessionId"),x=e.get("model.order.sessionId")
t.default.isWebClient()&&x&&x!==C&&e.set("model.order.sessionId",C),e.set("threeDsSessionId",null),w(C,!0)}else if(a.default.get().tokenizedRiskData)u.default.captureContentPageAction({name:"cvvAutoConfirm"}),w()
else{u.default.capturePageAction($("#confirmButton"),v,80)
var k=e.get("pidl")
k.setEnvironment(g.default.sdkEnvironment())
var T=g.default.pidlSdkCreateSessionOptions()
T.returnOptions={callbacks:{success:function(a){if(u.default.captureContentPageAction({name:"challengeCreatePaymentSessionSuccess"}),a&&a.id&&a.isChallengeRequired){u.default.captureContentPageAction({name:"need3DS2Challenge"}),r.default.done(),t.default.isWebClient()&&e.get("model.order.sessionId")&&e.set("model.order.sessionId",a.id)
var s=e.replaceRoute("purchase.riskChallengeSdk",{queryParams:{context:"challenge",challengeType:"threeds2"}})
s.data.order=b,s.data.selectedPi=n,s.data.selectedBackupPiId=null,s.data.paymentSession=a,s.data.returnFlow="confirmOobe"}else a&&a.id?(u.default.captureContentPageAction({name:"noChallengeRequired"}),w()):(u.default.captureContentPageAction({name:"noChallengeSessionIdFound"}),w())},failure:function(e){u.default.captureContentPageAction({name:"challengeCreatePaymentSessionFailed"},{error:e}),w()}}}
var A=i,S=h,R=k.paymentSessionData(_,a.default.get().Culture,A,S,g.default.pidlSdkPartnerForChallenge(),g.default.challengeWindowSize(),y,P,b.get("orderId"))
u.default.captureContentPageAction({name:"challengeCreatePaymentSessionCalled"}),k.createPaymentSession(T,R)}else u.default.capturePageAction($("#confirmButton"),v,80),w()}).catch(function(){})}).catch(function(){})}}},confirmButtonText:Ember.computed(function(){return this.get("isNotTrial")?this.get("strings.Purchase_Button_BuyNow"):this.get("strings.Purchase_Button_Start_Trial_BuyLater")}),lineItemTitle:Ember.computed("model.order",function(){return this.get("model.order.firstLineItem.displayTitle")}),lineItemPriceSubtitle:Ember.computed("model.order",function(){return t.default.isWindowsOobeGamePassClient()?this.get("strings.Purchase_SubscriptionPaid_WinOobe_Subtitle_XboxGamePassPC").replace("{listPrice}",this.get("priceInfo.originalPriceFormat")):this.get("isNotTrial")?this.get("strings.Purchase_SubscriptionPaid_WinOobe_Subtitle").replace("{listPrice}",this.get("priceInfo.originalPriceFormat")).replace("{productName}",this.get("lineItemTitle")):("EU"===i.default.getRegion()?this.get("strings.Purchase_SubscriptionTrial_WindowsOobe_Subtitle_EU"):this.get("strings.Purchase_SubscriptionTrial_WindowsOobe_Subtitle")).replace("{renewalInfoPrice}",this.get("priceInfo.priceFormat")).replace("{productName}",this.get("lineItemTitle")).replace("{trialDuration}",this.get("trialDurationString"))}),lineItemRenewalPriceSubtitle:Ember.computed(function(){return this.get("strings.Purchase_SubscriptionPaid_WinOobe_Recurrence_Title").replace("{renewalInfoPrice}",this.get("renewalInfo.originalPriceFormat"))}),readyToTakeAction:Ember.computed("model",function(){return this.get("model.isPurchaseAllowed")}),renewalInfo:Ember.computed("model.order",function(){return this.get("model.order.firstLineItem.formattedRenewalPriceInfo")}),priceInfo:Ember.computed("model.order",function(){return this.get("isNotTrial")?this.get("model.order.firstLineItem.formattedListPrice"):this.get("model.order.firstLineItem.formattedRenewalPriceInfo")}),trialDurationString:Ember.computed("model.order",function(){return this.get("model.order.firstLineItem.webBlendsData.TrialDurationString")}),needsFingerprintTagging:Ember.computed("model.order",function(){return c.default.isEnabled("fingerprintconfirmoobeall")&&!!this.get("model.order.sessionId")||c.default.isEnabled("fingerprintdesktopoobe")&&t.default.isDesktopClient()&&!!this.get("model.order.sessionId")||t.default.isWebClient()&&!!this.get("model.order.sessionId")}),isDisabled:Ember.computed("readyToTakeAction",function(){return!this.get("readyToTakeAction")}),isNotTrial:Ember.computed("model.order",function(){return!this.get("model.order.firstLineItem.isSubscriptionTrial")}),isNewLegalStringFlightDisabled:Ember.computed("model",function(){return!c.default.isEnabled("newsubscriptionlegalstrings")}),titleString:Ember.computed(function(){return this.get("isNotTrial")?this.get("strings.Purchase_Oobe_Paid_Title"):this.get("strings.Purchase_Oobe_Title")}),piChangeButtonClassName:Ember.computed(function(){return this.get("model.showChangeButton")?"piChangeButtonEnabled":"piChangeButtonDisabled"}),contentContainerClassName:Ember.computed(function(){return this.get("model.showOobeStyledPiContainer")?"content_container_OOBE":"content_container"}),autoRenewalConsentRequired:Ember.computed("autoRenewalConsent.autoRenewalConsentRequired","readyToTakeAction",function(){return this.get("autoRenewalConsent.autoRenewalConsentRequired")&&this.get("readyToTakeAction")}),isKoreanTransactionFeeEnabled:Ember.computed(function(){return"KR".equalsIgnoreCase(a.default.get().Market)}),isKoreaTransactionFeeV1Enabled:Ember.computed(function(){return c.default.isEnabled("koreatransactionfeev1")}),isArgentinaTransactionFeeEnabled:Ember.computed(function(){return"AR".equalsIgnoreCase(a.default.get().Market)}),isArgentinaTransactionFeeV1Enabled:Ember.computed(function(){return c.default.isEnabled("argentinatransactionfeev1")}),setAutoRenewalCheckboxChecked:function(e){this.set("isAutoRenewalCheckboxChecked",e)},toggleAutoRenewalCheckboxChecked:function(){this.toggleProperty("isAutoRenewalCheckboxChecked")}})}),define("web-blends/controllers/purchase/confirm-tvod",["exports","web-blends/utils/selected-pi","sfw-telemetry/utils/app-globals","sfw-messaging/utils/post-messages","sfw-messaging/utils/messages","sfw-services/services/tvod-purchase","sfw-services/utils/base64","sfw-telemetry/utils/start-data","sfw-telemetry/utils/client","web-blends/modules/busy","web-blends/modules/flow-stack","sfw-services/utils/currency-formatter","sfw-messaging/utils/open-terms","sfw-telemetry/utils/blend-bi-tracker"],function(e,t,n,a,r,s,i,l,o,d,u,c,m,f){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend({gamertag:Ember.computed(function(){return l.default.get().Gamertag?l.default.get().Gamertag:""}),moderngamertag:Ember.computed(function(){return o.default.isModernXboxClient()?l.default.get().ModernGamertag:""}),moderngamertagsuffix:Ember.computed(function(){return o.default.isModernXboxClient()&&l.default.get().ModernGamertagSuffix?l.default.get().ModernGamertagSuffix:""}),ismoderngamertagenabled:Ember.computed(function(){return!!this.get("moderngamertag")}),productDescriptionTruncated:Ember.computed("model.ProductDescription",function(){var e=this.get("model.ProductDescription")
if(e&&e.length)return e.length>256?e.substring(0,256)+"...":e}),hasPi:Ember.computed("model.piContainer.allPaymentInstruments",function(){return this.get("model.piContainer.allPaymentInstruments").length>0}),selectedPi:Ember.computed("model.piContainer.allPaymentInstruments",function(){var e=this.get("model.piContainer.allPaymentInstruments"),a=n.default._selectPiData&&n.default._selectPiData.selectedPis&&n.default._selectPiData.selectedPis.id
return(0,t.default)(e,null,a)}),isChina:Ember.computed(function(){return"CN".equalsIgnoreCase(l.default.get().Market)}),legalString:Ember.computed(function(){return this.get("strings.Tvod_LegalTerms").replace("{termsLink}",this.get("strings.Store_Terms_Of_Sale_Link")).replace("{buttonText}",this.get("strings.Shared_Button_Buy"))}),chinaLegalString:Ember.computed(function(){return this.get("strings.Purchase_UniversalLegal").replace("{msaTou}",this.get("strings.Microsoft_Service_Agreement_Link"))}),priceString:Ember.computed(function(){var e=this.get("model.Price"),t=this.get("model.CurrencyCode"),n=this.get("model.TaxIncluded"),a=c.default.formatCurrency(e,t)
return"AR".equalsIgnoreCase(l.default.get().Market)?this.get("strings.Purchase_Label_WithApplicableTax_Formatted").replace("{0}",a):n?this.get("strings.Purchase_Label_WithOtherTax_Formatted").replace("{0}",a):this.get("strings.Purchase_Label_WithApplicableTax_Formatted").replace("{0}",a)}),actions:{addPi:function(){f.default.capturePageAction($("#buyornextButton")),this.replaceRoute("paymentAndBilling.selectPaymentInstrumentSdk",{queryParams:{context:"selectpi"}})},cancel:function(){f.default.capturePageAction($("#cancelButton")),f.default.capturePurchaseStatePageAction("Cancelled"),d.default.busy(),u.default.clearAndDone("cancel","TvodCancel")},purchase:function(){f.default.capturePageAction($("#buyornextButton"))
var e=this,t=null,n=null
d.default.busy()
try{var o=e.get("selectedPi")
t=o&&o.id,n=i.default.decodeToString(l.default.get().Offer)}catch(e){}t?s.default.post(n,t).then(function(t){if(t){f.default.capturePurchaseStatePageAction("Purchased",{},"PURCHASECOMPLETE")
var n={receipt:(new XMLSerializer).serializeToString(t)}
u.default.pop("success",n)}else f.default.capturePurchaseStatePageAction("Failed"),e.replaceRoute("error","InvalidResponseProperty")},function(t){if("2007"!==t.code)f.default.capturePurchaseStatePageAction("Failed"),e.replaceRoute("error",t)
else{f.default.capturePurchaseStatePageAction("Pending")
try{a.default.send(r.default.tvodYield(JSON.parse(t.innerError)))}catch(e){}}}):(f.default.capturePurchaseStatePageAction("Failed"),e.replaceRoute("error","TvodPurchase"))},viewTerms:function(){f.default.capturePageAction($("#viewTerms")),m.default.open("msa")},changePi:function(){this.replaceRoute("purchase.selectPi","selectPi")}}})}),define("web-blends/controllers/purchase/confirm",["exports","sfw-telemetry/utils/client","sfw-services/utils/constant-links","web-blends/modules/e-nota-legal-terms","web-blends/mixins/legal-strings","sfw-components/utils/product-types","sfw-telemetry/utils/start-data","sfw-components/utils/template-tokenizer","sfw-telemetry/utils/flight-config","sfw-services/utils/format-price","sfw-services/utils/purchase-subscription","sfw-services/utils/currency-formatter"],function(e,t,n,a,r,s,i,l,o,d,u,c){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend(r.default,{paymentIncentive:Ember.inject.service(),autoRenewalConsent:Ember.inject.service(),queryParams:["autoConfirm","threeDsSessionId"],autoConfirm:!1,threeDsSessionId:null,isAutoRenewalCheckboxChecked:!1,mercuryLegalModalVisible:!1,mercuryStopShowingUpdate:Ember.computed("model.mercuryStopShowingUpdate",function(){return this.get("model.mercuryStopShowingUpdate")}),actions:{handleTransition:function(e,t){arguments.length>1?this.replaceRoute(e,t):this.replaceRoute(e)},startAskPurchaserFlow:function(){this.replaceRoute("purchase.askPurchaser")},showMercuryLegalModal:function(){this.set("mercuryLegalModalVisible",!0)
var e=this
Ember.run.scheduleOnce("afterRender",e,function(){$(".btnMercuryLegalModalClose").first().focus()}),$(".btnMercuryLegalModalClose").on("keydown",function(e){[9,37,214,205,140,39,213,206,141,38,211,203,138,40,212,204,139].includes(e.keyCode)&&($(".btnMercuryLegalModalClose").focus(),e.preventDefault(),e.stopPropagation())}),$(".btnMercuryLegalModalClose").on("keyup",e,function(t){if(196===t.keyCode)return e.send("hideMercuryLegalModal"),t.preventDefault(),t.stopPropagation(),!1})},hideMercuryLegalModal:function(){this.set("mercuryLegalModalVisible",!1),Ember.run.scheduleOnce("afterRender",this,function(){$(".btnMercuryLegalTerms").first().focus()})}},gamertag:Ember.computed(function(){if(t.default.isXboxOneClient())return i.default.get().Gamertag}),moderngamertag:Ember.computed(function(){return t.default.isModernXboxClient()?i.default.get().ModernGamertag:""}),moderngamertagsuffix:Ember.computed(function(){return t.default.isModernXboxClient()&&i.default.get().ModernGamertagSuffix?i.default.get().ModernGamertagSuffix:""}),ismoderngamertagenabled:Ember.computed(function(){return!!this.get("moderngamertag")}),lineItemTitle:Ember.computed("model.order",function(){return this.get("model.order.firstLineItem.displayTitle")}),iconUri:Ember.computed("model.order",function(){var e,n=this.get("model.order.firstLineItem.imageList")
for(var a in n)if(!isNaN(parseInt(a))){if("boxart".equalsIgnoreCase(n[a].ImagePurpose))return n[a].Uri
t.default.isSaturnDesktop()&&"logo".equalsIgnoreCase(n[a].ImagePurpose)&&(e=n[a].Uri)}return e||""}),heroImage:Ember.computed("model.order",function(){var e=this.get("model.order.firstLineItem.imageList")
for(var t in e)if(!isNaN(parseInt(t))&&"superheroart".equalsIgnoreCase(e[t].ImagePurpose))return e[t].Uri
return""}),dialogTitle:Ember.computed("model.order",function(){return this.get("lineItemTitle")}),itemPriceInfoComponentName:Ember.computed("model.order",function(){return this.get("model.order.firstLineItem.isSubscriptionItem")?this.get("isMonthlyEquivalentPricingExperimentActive")?"item-price-info-monthlyequivalent":"item-price-info-subscription":"item-price-info"}),paymentInstrumentsComponentName:Ember.computed("model.order",function(){return this.get("model.order.firstLineItem.isSubscriptionItem")&&this.get("model.selectedPi.isCsv")?"payment-instruments-subscription":"payment-instruments"}),isXboxOne:Ember.computed(function(){return t.default.isXboxOneClient()&&i.default.get().Gamertag}),isChina:Ember.computed(function(){return"CN".equalsIgnoreCase(i.default.get().Market)}),confirmButtonText:Ember.computed("model.order",function(){return this.get("model.mercuryDunningScenario")?this.get("strings.Shared_Label_Update"):"turnonautorenewal".equalsIgnoreCase(i.default.get().OfferType)?this.get("strings.Confirm_Button"):this.get("model.order.firstLineItem.isSubscriptionItem")&&!this.get("model.order.isPiRequired")?this.get("strings.Shared_Label_Try"):this.get("model.order.firstLineItem.isSubscriptionItem")?this.get("isRenewalExperimentActive")?this.get("strings.Shared_Button_Renew"):o.default.isEnabled("buynowctatext")&&"EU".equalsIgnoreCase(i.default.get().Market)?this.get("strings.Purchase_Button_BuyNow"):this.get("strings.Shared_Button_Subscribe"):!this.get("model.order.isPiRequired")||this.get("model.isPiRequiredButFree")?this.get("strings.Shared_Button_Get"):s.default.isMediaItem()&&"rent".equalsIgnoreCase(i.default.get().TransactionType)||this.get("model.order.firstLineItem.isRental")?this.get("strings.Shared_Button_Rent"):this.get("model.order.firstLineItem.giftee")?this.get("strings.Purchase_Button_BuyAsGift"):this.get("strings.Shared_Button_Buy")}),eNotaTermParts:Ember.computed("model.selectedPi",function(){var e=(0,a.default)()
return!this.get("model.selectedPi.display_info.isMobi")&&e?l.default.tokenize(e,["0"],function(){return n.default.get().commerceCom},function(e){return e.id="eNotaTerms",e.css="cli_eNotaTerms",e.url=n.default.get().commerceCom,e.biContentName="eNota Terms",e}):[]}),hasAllowedPaymentInstruments:Ember.computed("model",function(){return this.get("model.piContainer.allowedPaymentInstruments.length")}),isCsvSufficient:Ember.computed.alias("model.isCsvSufficient"),csvBalance:Ember.computed.alias("model.csvBalance"),remainingBalance:Ember.computed("model",function(){var e=this.get("csvBalance")
if(!this.get("isCsvSufficient")&&e&&e>0){var t=this.get("model.order.firstLineItem.totalAmount")-e
if(t>0)return t}}),payWithRemainingFormat:Ember.computed("model",function(){var e=this.get("csvBalance")
if(!this.get("isCsvSufficient")&&e&&e>0){var t=this.get("model.order.firstLineItem.totalAmount"),n=d.default.getPriceFormatForTaxStringSaturn(this.get("model.order.firstLineItem.taxType"),t,!0,!1)
return this.get("strings.Mercury_Pay_Remaining_With").replace("{0}",n)}return this.get("strings.Mercury_Pay_Remaining_With_NoBalance")}),showBackupPi:Ember.computed("model.selectedPi",function(){return this.get("model.selectedPi.isCsv")&&this.get("model.selectedBackupPi")}),showSelectBackupPiLink:Ember.computed("model",function(){return!(this.get("showAddAddressLink")||this.get("showSelectAddressLink")||this.get("showProfileLink"))&&(this.get("model.selectedPi.isCsv")&&!this.get("showBackupPi")&&(this.get("model.order.firstLineItem.isSubscriptionItem")||!this.get("isCsvSufficient")))}),showAddAddressLink:Ember.computed("model",function(){return this.get("model.selectedPi.soldToAddressRequired")&&this.get("model.noProfileAddressFound")}),showSelectAddressLink:Ember.computed("model",function(){return this.get("model.selectedPi.soldToAddressRequired")&&this.get("model.noDefaultAddress")}),showProfileLink:Ember.computed("model",function(){return!!(o.default.isEnabled("profilesdk")&&this.get("model.noMsaProfile")&&this.get("model.order.isPiRequired"))||(!(this.get("model.selectedPi.soldToAddressRequired")||!this.get("model.noMsaProfile")||!this.get("model.order.isPiRequired"))||(!(!this.get("model.order.isPiRequired")||!this.get("model.noEmailAddress"))||!(!this.get("model.order.isOmexProduct")||!this.get("model.noMsaProfile")&&!this.get("model.noEmailAddress"))))}),showContactPreference:Ember.computed("model",function(){return this.get("readyToTakeAction")&&!this.get("needToAddPi")&&!this.get("showSelectBackupPiLink")}),showRewardsIncentive:Ember.computed("model",function(){return!!this.get("model.isUserEligibleToSeeIncentive")&&(this.get("paymentIncentive").offerShown(),!0)}),showSaturnXboxWithoutTaxes:Ember.computed(function(){return t.default.isSaturnXbox()&&this.get("model.order.firstLineItem.isSubscriptionItem")&&o.default.isEnabled("saturnsub")}),readyToTakeAction:Ember.computed("model","model.showTotalAndTax",function(){return!this.get("model.selectedPi.display_info.expired")&&(this.get("model.isPurchaseAllowed")||this.get("showSelectBackupPiLink"))&&(!t.default.isModernXboxClient()||!!this.get("model.showTotalAndTax")||this.get("showSaturnXboxWithoutTaxes"))}),needToAddPi:Ember.computed("model",function(){return!this.get("model.hasPiIfRequired")&&!(this.get("isAddingBackupPi")||this.get("model.noMsaProfile")||this.get("model.noDefaultAddress")||this.get("model.noProfileAddressFound")||this.get("model.noEmailAddress"))}),isAddingBackupPi:Ember.computed("model",function(){return!!this.get("showSelectBackupPiLink")&&!(this.get("model.order.firstLineItem.isSubscriptionItem")&&this.get("isCsvSufficient")&&this.get("model.piContainer.allowedPaymentInstruments.length")<2)}),needsFingerprintTagging:Ember.computed("model.order",function(){return o.default.isEnabled("fingerprintconfirmall")&&!!this.get("model.order.sessionId")||o.default.isEnabled("fingerprintdesktopconfirm")&&t.default.isDesktopClient()&&!!this.get("model.order.sessionId")||o.default.isEnabled("fingerprintxcloud")&&t.default.isXCloudClient()&&!!this.get("model.order.sessionId")||t.default.isWebClient()&&!!this.get("model.order.sessionId")}),displaySubTitles:Ember.computed("lineItemSubTitle1","lineItemSubTitle2",function(){return this.get("lineItemSubTitle1")||this.get("lineItemSubTitle2")}),lineItemSubTitle1:Ember.computed.oneWay("model.order.firstLineItem.subtitle"),lineItemSubTitle2:Ember.computed.oneWay("model.order.firstLineItem.subtitle2"),isGift:Ember.computed("model",function(){return!!this.get("model.order.firstLineItem.giftee")}),isMercuryGift:Ember.computed("model",function(){return!!this.get("model.order.firstLineItem.giftee")&&t.default.isMercury()}),isModernXboxClientGift:Ember.computed("model",function(){return!!this.get("model.order.firstLineItem.giftee")&&t.default.isModernXboxClient()}),getPurchaseContainerId:Ember.computed("model",function(){return this.get("model.order.firstLineItem.giftee")&&t.default.isModernXboxClient()?"GiftPurchaseContainer":"PurchaseContainer"}),isGamingApp:Ember.computed(function(){return t.default.isGamingApp()}),isGamingAppV2Theme:Ember.computed(function(){return t.default.isGamingAppV2Theme()}),isMonthlyEquivalentPricingExperimentActive:Ember.computed("model.order",function(){return o.default.isEnabled("oexp_mep")&&this.get("model.order.isOmexProduct")&&this.get("model.order.firstLineItem.isYearly")}),isNotGamingAppV2Theme:Ember.computed(function(){return!t.default.isGamingAppV2Theme()}),isRenewalExperimentActive:Ember.computed("model.order",function(){return o.default.isEnabled("renewal")&&this.get("model.order.isOmexProduct")}),gamingAppThemeVersionClass:Ember.computed(function(){return t.default.gamingAppThemeVersionClass()}),gamingAppGiftClass:Ember.computed(function(){return this.get("isGamingAppGift")?"cli_gamingAppGift":""}),showClose:Ember.computed(function(){var e=t.default.gamingAppCustomParameters()
return!!Object.prototype.hasOwnProperty.call(e,"CloseX")&&!0===e.CloseX}),accountInformation:Ember.computed("model",function(){if(this.get("model.emailAddress")&&this.get("isGamingApp")){var e=i.default.get().MarketNativeName
return e=e?"({countryName})".replace("{countryName}",e):"",this.get("strings.Redeem_AddedToEmailWithCountry_Text").replace("{email}",this.get("model.emailAddress")).replace("{country}",e).trim()}return""}),isGamingAppGift:Ember.computed("model",function(){return this.get("isGift")&&this.get("isGamingApp")}),isAskAPurchaserEligible:Ember.computed(function(){return this.get("isXboxOne")&&t.default.isAskAPurchaserEligible()}),isGiftable:Ember.computed(function(){return!!this.get("model.product.GiftAvailabilityId")}),hasXPriceAffirmationString:Ember.computed(function(){return!!i.default.get().XPriceAffirmationString}),getXPriceAffirmationString:Ember.computed(function(){return i.default.get().XPriceAffirmationString}),isOfficeDIMEClient:Ember.computed(function(){return t.default.isOfficeDIMEClient()}),youArePurchasingProductMessage:Ember.computed("model.order",function(){return this.get("strings.Purchase_You_Are_Purchasing_Title").replace("{0}",this.get("lineItemTitle"))}),showMobiTerms:Ember.computed("model",function(){return this.get("model.selectedPi.display_info.isMobi")||this.get("model.selectedBackupPi.display_info.isMobi")}),mobiPi:Ember.computed("model",function(){return this.get("model.selectedBackupPi.display_info.isMobi")?this.get("model.selectedBackupPi"):this.get("model.selectedPi")}),daUpgradeConsent:Ember.computed("model.daUpgradeConsent",function(){return o.default.isEnabled("daconvertenabled")&&this.get("model.daUpgradeConsent")||!1}),isMercury:Ember.computed(function(){return t.default.isMercury()}),isSaturnDesktop:Ember.computed(function(){return t.default.isSaturnDesktop()}),isSaturnXbox:Ember.computed(function(){return t.default.isSaturnXbox()}),isModernXboxClient:Ember.computed(function(){return t.default.isModernXboxClient()}),orderTaxesIncluded:Ember.computed("model.order.firstLineItem",function(){return!!this.get("showSaturnXboxWithoutTaxes")||"TaxesNotIncluded"!==this.get("model.order.firstLineItem.taxType")}),mercuryPriceFormatWithTaxString:Ember.computed("model.order.firstLineItem","orderTaxesIncluded",function(){if(this.get("showSaturnXboxWithoutTaxes")){var e=d.default.getPriceFormatForTaxStringSaturn(this.get("model.order.firstLineItem.taxType"),this.get("model.order.firstLineItem.listPrice"),!1,!0)
return d.default.getPriceFormatForTaxString(this.get("model.order.firstLineItem.taxType"),e)}return d.default.getPriceFormatForTaxString(this.get("model.order.firstLineItem.taxType"),this.get("model.order.firstLineItem.totalAmount"),this.get("orderTaxesIncluded"))}),saturnDesktopPriceTaxString:Ember.computed("model.order.firstLineItem","orderTaxesIncluded",function(){return d.default.getPriceFormatForTaxStringSaturn(this.get("model.order.firstLineItem.taxType"),this.get("model.order.firstLineItem.totalAmount"),!1,!0)}),gamerpic:Ember.computed(function(){if(t.default.isModernXboxClient())return i.default.get().Gamerpic}),shouldIncludeCancel:Ember.computed(function(){return this.get("isNotGamingAppV2Theme")&&!this.get("isSaturnDesktop")}),posterImage:Ember.computed(function(){var e=this.get("model.order.firstLineItem.imageList"),n="",a="",r=""
for(var s in e)if(!isNaN(parseInt(s))){if("poster".equalsIgnoreCase(e[s].ImagePurpose)&&!t.default.isSaturnXbox())return e[s].Uri
"boxart".equalsIgnoreCase(e[s].ImagePurpose)?n=e[s].Uri:"brandedkeyart".equalsIgnoreCase(e[s].ImagePurpose)?a=e[s].Uri:"logo".equalsIgnoreCase(e[s].ImagePurpose)&&(r=e[s].Uri)}return t.default.isModernXboxClient()?t.default.isSaturnXbox()&&r?r:!t.default.isSaturnXbox()&&a?a:n:""}),mercuryRatingImage:Ember.computed(function(){var e=t.default.modernXboxClientCustomParameters()
return Object.prototype.hasOwnProperty.call(e,"productRating")?e.productRating.ratingValueLogoUrl:""}),mercuryDescriptors:Ember.computed(function(){var e=t.default.modernXboxClientCustomParameters()
return Object.prototype.hasOwnProperty.call(e,"productRating")?e.productRating.descriptors&&e.productRating.descriptors.join(", "):""}),mercuryInteractiveElements:Ember.computed(function(){var e=t.default.modernXboxClientCustomParameters()
return Object.prototype.hasOwnProperty.call(e,"productRating")?e.productRating.interactiveElements&&e.productRating.interactiveElements.join("<br />"):""}),shouldShowMercurySeparator:Ember.computed("mercuryDescriptors","mercuryInteractiveElements",function(){return!!this.get("mercuryDescriptors")&&!!this.get("mercuryInteractiveElements")}),shouldShowMercuryStrikethrough:Ember.computed("model.order.firstLineItem",function(){return this.get("model.order.firstLineItem.retailPrice")!==this.get("model.order.firstLineItem.listPrice")}),autoRenewalConsentRequired:Ember.computed("autoRenewalConsent.autoRenewalConsentRequired","isAddingBackupPi","readyToTakeAction",function(){return this.get("autoRenewalConsent.autoRenewalConsentRequired")&&!this.get("isAddingBackupPi")&&this.get("readyToTakeAction")}),setAutoRenewalCheckboxChecked:function(e){this.set("isAutoRenewalCheckboxChecked",e)},toggleAutoRenewalCheckboxChecked:function(){this.toggleProperty("isAutoRenewalCheckboxChecked")},hasCompatibilityWarning:Ember.computed(function(){return Object.prototype.hasOwnProperty.call(t.default.modernXboxClientCustomParameters(),"compatibilityWarning")}),compatibilityWarningLevel:Ember.computed(function(){var e=t.default.modernXboxClientCustomParameters()
return Object.prototype.hasOwnProperty.call(e,"compatibilityWarning")?e.compatibilityWarning&&e.compatibilityWarning.compatibilityLevel:""}),compatibilityWarningString:Ember.computed(function(){var e=t.default.modernXboxClientCustomParameters()
return Object.prototype.hasOwnProperty.call(e,"compatibilityWarning")?e.compatibilityWarning&&e.compatibilityWarning.compatibilityString:""}),mercuryAccessibilityLabel:Ember.computed(function(){return this.get("strings.Mercury_ConfirmPayment_AccessibilityLabel").replace("{0}",this.get("dialogTitle"))}),isMercuryLegalModalVisible:Ember.computed("mercuryLegalModalVisible",function(){return this.get("mercuryLegalModalVisible")?"modalIsVisible":""}),shouldShowMoreText:Ember.computed(function(){var e=$("#btnMercuryLegalTerms #LegalText").height()<$("#btnMercuryLegalTerms #LegalText").prop("scrollHeight")
return e||Ember.run.scheduleOnce("afterRender",this,function(){$("#btnMercuryLegalTerms").attr("disabled","disabled")}),e}),isMercuryDunningScenario:Ember.computed(function(){return!!this.get("model.mercuryDunningScenario")}),mercuryDunningText:Ember.computed(function(){return this.get("model.mercuryDunningScenario")?this.get("strings.Mercury_Dunning_Problem_Payment_Method_Text"):""}),showTotalAndTax:Ember.computed("model.showTotalAndTax",function(){return!!this.get("model.showTotalAndTax")}),mercurySubscriptionClass:Ember.computed("model.order",function(){return t.default.isMercury()&&o.default.isEnabled("mercurysubtime")&&this.get("model.order.firstLineItem.isSubscriptionItem")?"mercurySubscription":""}),saturnSubscriptionClass:Ember.computed("model.order",function(){return t.default.isSaturnXbox()&&o.default.isEnabled("mercurysubtime")&&this.get("model.order.firstLineItem.isSubscriptionItem")?"mercurySubscription":""}),mercuryFormattedListPrice:Ember.computed("model.order","model.product",function(){if(o.default.isEnabled("mercurysubtime")&&this.get("model.order.firstLineItem.isSubscriptionItem")&&!this.get("shouldShowMercuryStrikethrough")){var e=this.get("model.product.DisplaySkuAvailabilities.0.Sku"),t=u.default.overrideWebBlendData(e,{})
if(t&&t.LocaledChargeFrequency)return this.get("strings.Mercury_Subscription_Per_Period").replace("{0}",t.LocaledChargeFrequency)}return"{formattedPriceDisplay}"}),mercuryFormattedRetailPrice:Ember.computed("model.order","model.product",function(){if(o.default.isEnabled("mercurysubtime")&&this.get("model.order.firstLineItem.isSubscriptionItem")&&this.get("shouldShowMercuryStrikethrough")){var e=this.get("model.product.DisplaySkuAvailabilities.0.Sku"),t=u.default.overrideWebBlendData(e,{})
if(t&&t.LocaledChargeFrequency)return this.get("strings.Mercury_Subscription_Per_Period").replace("{0}",t.LocaledChargeFrequency)}return"{formattedPriceDisplay}"}),mercuryRecurrencePrice:Ember.computed("model.order","model.product",function(){return this.get("model.product.DisplaySkuAvailabilities.0.Availabilities.0.OrderManagementData.Price.RecurrencePrice")}),mercuryTrialWithRecurrenceMessage:Ember.computed("model.order","model.product",function(){var e=this.get("model.product.DisplaySkuAvailabilities.0.Sku"),t=this.get("strings.Mercury_Subscription_Per_Period"),n=u.default.overrideWebBlendData(e,{}),a=n?n.LocaledChargeFrequency:void 0,r=c.default.formatCurrency(this.get("mercuryRecurrencePrice"),this.get("model.order.firstLineItem.currencyCode")),s=t.replace("{formattedPriceDisplay}",r).replace("{0}",a),i=this.get("strings.Purchase_subscription_Promotional_LegalTerms").replace("{0}",s)
return n.TrialDurationString+"; "+i}),mercuryShowSubscriptionTrialPrice:Ember.computed("model.order","model.product",function(){if(this.get("model.order.firstLineItem.isSubscriptionItem")){var e=this.get("model.product.DisplaySkuAvailabilities.0.Sku"),t=u.default.overrideWebBlendData(e,{})
return t&&t.isTrial}return!1}),isNewLegalTextLayoutEnabled:Ember.computed(function(){var e=!(this.get("isMonthlyEquivalentPricingExperimentActive")||t.default.isSaturnDesktop()||t.default.isModernXboxClient()||t.default.isGamingApp())
return e&&Ember.run.scheduleOnce("afterRender",this,function(){$("#ViewCart").scrollTop(0),$(".mainCheckBoxContainerNewLegalLayout:has(.c-checkbox)").addClass("positionInitial"),$(".moreScroll").removeClass("moreScroll")}),e}),positionInitialClass:Ember.computed(function(){return this.get("isMonthlyEquivalentPricingExperimentActive")||t.default.isSaturnDesktop()||t.default.isModernXboxClient()||t.default.isGamingApp()?"":"positionInitial"}),showCheckBoxContainer:Ember.computed("showContactPreference","autoRenewalConsentRequired",function(){return this.get("showContactPreference")||this.get("autoRenewalConsentRequired")}),showKoreaTransactionFee:Ember.computed(function(){return"KR".equalsIgnoreCase(i.default.get().Market)}),showArgentinaTransactionFee:Ember.computed(function(){return"AR".equalsIgnoreCase(i.default.get().Market)}),isArgentinaTransactionFeeV1Enabled:Ember.computed(function(){return o.default.isEnabled("argentinatransactionfeev1")}),isKoreaTransactionFeeV1Enabled:Ember.computed(function(){return o.default.isEnabled("koreatransactionfeev1")}),paymentSummaryClass:Ember.computed(function(){return"AR".equalsIgnoreCase(i.default.get().Market)&&t.default.isMercury()?"marginTop30":null}),showJapanLegalBanner:Ember.computed(function(){return o.default.isEnabled("enableJapanLegalBanner")&&"JP".equalsIgnoreCase(i.default.get().Market)&&(t.default.isMercury()||t.default.isSaturnXbox())})})}),define("web-blends/controllers/purchase/gift",["exports","web-blends/modules/flow-stack","sfw-telemetry/utils/blend-bi-tracker","web-blends/modules/busy","sfw-messaging/utils/open-terms","sfw-messaging/utils/open-url","sfw-telemetry/utils/client","sfw-telemetry/utils/start-data","sfw-messaging/utils/post-messages","sfw-messaging/utils/messages","sfw-components/utils/template-tokenizer","sfw-components/utils/legal-market-region","sfw-services/utils/error-equals"],function(e,t,n,a,r,s,i,l,o,d,u,c,m){Object.defineProperty(e,"__esModule",{value:!0})
e.default=Ember.Controller.extend({inlineError:"",giftInfo:{userOption:{value:"email"},recipientInfo:{value:"",required:!0,validationGroup:"email",requiredErrorString:"strings.Purchase_Gift_Recipient_Required",invalidEmailErrorString:"strings.Purchase_Gift_Recipient_Invalid_Email"},senderInfo:{value:i.default.isXboxOneClient()?l.default.get().Gamertag:"",required:!0,contentCheckRequired:!0,requiredErrorString:"strings.Purchase_Gift_Sender_Required",contentErrorString:"strings.Gift_ProhibitedSenderName",contentWithError:null}},init:function(){if(this._super(),i.default.isAskPurchaserScenario()||i.default.isGamingAppGiftWithGamertag()||i.default.isMercuryGiftWithGamertag()){var e="",t=""
i.default.isAskPurchaserScenario()?e=l.default.get().AskerGamertag:i.default.isGamingAppGiftWithGamertag()?e=i.default.gamingAppCustomParameters().Beneficiary:i.default.isMercuryGiftWithGamertag()&&(e=i.default.mercuryCustomParameters().gifteeGamertag,t=i.default.mercuryCustomParameters().gifteeGamerPic||""),this.set("giftInfo.userOption.value","gamertag"),this.set("giftInfo.recipientInfo.value",{gamertag:e,gamerPic:t}),this.set("giftInfo.recipientInfo.validationGroup","gamertag")}},actions:{getFriendslist:function(){var e=this
if(l.default.get().XBLXToken){this.set("giftInfo.userOption.value","gamertag")
var t=o.default.listen(function(r){if(r){var s=r.message,l=r.status,o=r.xuid
"gamertagselected".equalsIgnoreCase(s)&&(t.unsubscribe(),n.default.captureContentPageAction({name:"GamertagSelectedPostMessage"},{status:r.status}),"success".equalsIgnoreCase(l)&&o&&(a.default.busy(),e.store.findRecord("friends-info",o).then(function(t){t.get("gamertag")&&t.get("displayPicRaw")?(e.set("giftInfo.recipientInfo.value",{gamertag:t.get("modernGamertag")?t.get("modernGamertag"):t.get("gamertag"),gamertagSuffix:t.get("modernGamertagSuffix")?t.get("modernGamertagSuffix"):void 0,gamerPic:t.get("displayPicRaw")}),e.set("giftInfo.recipientInfo.validationGroup","gamertag"),i.default.isModernXboxClient()&&1===e.get("model.currentIndex")||e.set("model.currentIndex",e.get("model.currentIndex")+1),a.default.done(),e.setFocusOnNextButton()):e.replaceRoute("error","NoUserInfoFound")},function(t){e.replaceRoute("error",t)})))}})
o.default.send(d.default.launchPeoplePicker())}else this.replaceRoute("error","XBLXTokenNotFound")},getEmailAddress:function(){"email"!==this.get("giftInfo.userOption.value")&&(this.set("giftInfo.recipientInfo.value",""),this.set("giftInfo.recipientInfo.validationGroup","email"),this.set("giftInfo.userOption.value","email")),this.set("model.currentIndex",this.get("model.currentIndex")+1),this.setFocusOnTextBox()},viewTerms:function(){r.default.open("gifttou")},viewTermsLink:function(e,t){s.default.open(e,t)},cancel:function(){n.default.capturePurchaseStatePageAction("Cancelled"),a.default.busy(),t.default.clearAndDone("cancel")},next:function(){var e=this,t=function(t){var n=void 0
switch(t){case 1:(n=e.get("giftInfo.recipientInfo")).value.trim&&e.set("giftInfo.recipientInfo.value",n.value.trim())
break
case 2:n=e.get("giftInfo.senderInfo"),e.set("giftInfo.senderInfo.value",n.value.trim())}if(n){if(n.required&&!n.value)return e.get(n.requiredErrorString)
if("email"===n.validationGroup){if(!new RegExp("^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,15}$").test(n.value))return e.get(n.invalidEmailErrorString)}else if(n.contentCheckRequired&&n.contentWithError===n.value)return e.get(n.contentErrorString)}return""}
if(i.default.isModernXboxClient()){if(1===this.get("model.currentIndex")){this.set("recipientInlineError","")
var r=t(1)
r&&(this.setFocusOnTextBox(),this.set("recipientInlineError",r)),this.set("senderInlineError","")
var s=t(2)
s&&(this.setFocusOnTextBox(),this.set("senderInlineError",s)),s||r||(a.default.busy(),this.reset(),this.updateGiftee().then(function(){a.default.done(),e.replaceRoute("purchase.confirm")}).catch(function(t){m.default.isSenderNameContentError(t)?(n.default.captureContentPageAction({name:"GiftContentError"},{fieldName:"senderName"}),e.set("giftInfo.senderInfo.contentWithError",e.get("giftInfo.senderInfo.value")),a.default.done(),e.setFocusOnTextBox(),e.set("senderInlineError",e.get(e.get("giftInfo.senderInfo").contentErrorString))):e.replaceRoute("error",t)}))}}else{this.set("inlineError","")
var l=t(this.get("model.currentIndex"))
l?(this.setFocusOnTextBox(),this.set("inlineError",l)):this.get("model.currentIndex")<this.get("model.endIndex")?(this.setFocusOnTextBox(),this.set("model.currentIndex",this.get("model.currentIndex")+1)):(a.default.busy(),this.reset(),this.updateGiftee().then(function(){a.default.done(),e.replaceRoute("purchase.confirm")}).catch(function(t){m.default.isSenderNameContentError(t)?(n.default.captureContentPageAction({name:"GiftContentError"},{fieldName:"senderName"}),e.set("giftInfo.senderInfo.contentWithError",e.get("giftInfo.senderInfo.value")),a.default.done(),e.setFocusOnTextBox(),2!==e.get("model.currentIndex")&&e.set("model.currentIndex",2),e.set("inlineError",e.get(e.get("giftInfo.senderInfo").contentErrorString))):e.replaceRoute("error",t)}))}},back:function(){this.set("inlineError",""),this.set("model.currentIndex",this.get("model.currentIndex")-1),this.setFocusOnTextBox()},enterPressed:function(){Ember.run.later(this,function(){this.get("showNext")&&this.send("next")},200)},placeHolderHandler:function(){$("#recipientInfo").val()?$("#iePlaceHolder").hide():$("#iePlaceHolder").show()},removePlaceHolderHandler:function(){$("#recipientInfo").val()&&$("#iePlaceHolder").hide()}},isXboxOne:Ember.computed(function(){return i.default.isXboxOneClient()}),isDesktop:Ember.computed(function(){return i.default.isDesktopClient()}),gamertag:Ember.computed("isXboxOne",function(){if(this.get("isXboxOne"))return l.default.get().Gamertag}),moderngamertag:Ember.computed(function(){return i.default.isModernXboxClient()?l.default.get().ModernGamertag:""}),moderngamertagsuffix:Ember.computed(function(){return i.default.isModernXboxClient()&&l.default.get().ModernGamertagSuffix?l.default.get().ModernGamertagSuffix:""}),ismoderngamertagenabled:Ember.computed(function(){return!!this.get("moderngamertag")}),showGamertagOption:Ember.computed("model.currentIndex",function(){return 0===this.get("model.currentIndex")}),showRecipientInfo:Ember.computed("model.currentIndex",function(){return 1===this.get("model.currentIndex")}),showRecipientGamertag:Ember.computed("model.currentIndex","giftInfo",function(){return 1===this.get("model.currentIndex")&&"gamertag"===this.get("giftInfo.userOption.value")}),showSenderInfo:Ember.computed("model.currentIndex",function(){return 2===this.get("model.currentIndex")}),showNext:Ember.computed("model.currentIndex",function(){return this.get("model.currentIndex")>0}),showCancel:Ember.computed("model.currentIndex","isXboxOne",function(){return 0===this.get("model.currentIndex")||1===this.get("model.currentIndex")&&!this.get("isXboxOne")}),showCancelMercury:Ember.computed("model.currentIndex",function(){return i.default.isMercuryGiftWithGamertag()&&1===this.get("model.currentIndex")}),recipientGamertag:Ember.computed("giftInfo.recipientInfo.value.gamertag",function(){return this.get("giftInfo.recipientInfo.value.gamertag")}),recipientGamertagSuffix:Ember.computed("giftInfo.recipientInfo.value.gamertagSuffix",function(){return this.get("giftInfo.recipientInfo.value.gamertagSuffix")}),recipientGamerPic:Ember.computed("giftInfo.recipientInfo.value.gamerPic",function(){return this.get("giftInfo.recipientInfo.value.gamerPic")&&this.get("giftInfo.recipientInfo.value.gamerPic").replace(/&mode=padding/gi,"")}),lineItemTitle:Ember.computed("model.order.firstLineItem.displayTitle",function(){return this.get("model.order.firstLineItem.displayTitle")}),itemPriceInfoComponentName:Ember.computed("model.order",function(){return this.get("model.order.firstLineItem.isSubscriptionItem")?"item-price-info-subscription":"item-price-info"}),giftTermParts:Ember.computed("isXboxOne",function(){var e=this.get("strings"),t=l.default.get().MarketNativeName,n=e.Gift_LegalTerms_EEA_Or_NoCountry
return!c.default.getRegion().equalsIgnoreCase("EU")&&t&&(n=e.Gift_LegalTerms_Non_EEA.replace("{region}",t)),u.default.tokenize(n,["giftTermsLink","termsLink"],function(t){return"giftTermsLink"===t?e.Gift_Terms_And_Conditions_Link:e.MicrosoftStore_Terms_Of_Sale_Link},function(e){return e.id=e.value+"_tou",e.css="cli_tou",r.default.enhanceToken(e),e})}),nextButtonBiName:Ember.computed("model.currentIndex",function(){return this.biButtonName(this.get("model.currentIndex"),"Next")}),backButtonBiName:Ember.computed("model.currentIndex",function(){return this.biButtonName(this.get("model.currentIndex"),"Back")}),showSenderInlineError:Ember.computed("senderInlineError",function(){return Ember.String.htmlSafe(this.get("senderInlineError")?"display:block;":"display:none;")}),showRecipientInlineError:Ember.computed("recipientInlineError",function(){return Ember.String.htmlSafe(this.get("recipientInlineError")?"display:block;":"display:none;")}),showInlineError:Ember.computed("inlineError",function(){return Ember.String.htmlSafe(this.get("inlineError")?"display:block;":"display:none;")}),updateGiftee:function(){var e=this,t=this.get("model.order")
if(t.get("firstLineItem.giftee.recipient.sender_name")===this.get("giftInfo.senderInfo.value")&&t.get("firstLineItem.giftee.recipient.email_address")===this.get("giftInfo.recipientInfo.value")&&t.get("firstLineItem.giftee.recipient.gamer_tag")===this.get("giftInfo.recipientInfo.value.gamertag"))return Ember.RSVP.resolve()
var n=Ember.RSVP.resolve()
t.get("isCheckingOut")&&(t.set("orderState","Editing"),n=t.save())
var a=this.store.createRecord("profile")
a.set("type","recipient")
var r="email"===this.get("giftInfo.userOption.value")
r?a.set("email_address",this.get("giftInfo.recipientInfo.value")):a.set("gamer_tag",this.get("giftInfo.recipientInfo.value.gamertag")),a.set("sender_name",this.get("giftInfo.senderInfo.value"))
var s=a.save()
return Ember.RSVP.all([n,s]).then(function(){var t=e.get("model.order.firstLineItem"),n=t.get("giftee"),s=r?"EmailProfileId":"GamertagProfileId"
return n.set("recipient",a),n.set("recipientType",s),t.save()})},setFocusOnTextBox:function(){Ember.run.scheduleOnce("afterRender",this,function(){var e=$("#addGiftInfo :input:enabled:visible:first")
if(e&&e.length&&e.focus&&(e.focus(),e[0].value&&e[0].setSelectionRange))try{e[0].setSelectionRange(e[0].value.length,e[0].value.length)}catch(e){}})},setFocusOnNextButton:function(){Ember.run.scheduleOnce("afterRender",this,function(){var e=$("#nextButton")
e&&e.length&&e.focus&&e.focus()})},biButtonName:function(e,t){return t+"_"+(2===e?"SenderInfo":"RecipientInfo")},reset:function(){this.set("inlineError",""),this.set("giftInfo.senderInfo.contentWithError",null)},isGamingApp:Ember.computed(function(){return i.default.isGamingApp()}),isMercury:Ember.computed(function(){return i.default.isMercury()}),isModernXboxClient:Ember.computed(function(){return i.default.isModernXboxClient()}),gamerpic:Ember.computed(function(){if(i.default.isModernXboxClient())return l.default.get().Gamerpic}),posterImage:Ember.computed(function(){var e=this.get("model.order.firstLineItem.imageList"),t="",n=""
for(var a in e)if(!isNaN(parseInt(a))){if("poster".equalsIgnoreCase(e[a].ImagePurpose))return e[a].Uri
"boxart".equalsIgnoreCase(e[a].ImagePurpose)?t=e[a].Uri:"brandedkeyart".equalsIgnoreCase(e[a].ImagePurpose)&&(n=e[a].Uri)}return i.default.isModernXboxClient()?n||t:""}),mercuryRatingImage:Ember.computed(function(){var e=i.default.modernXboxClientCustomParameters()
return Object.prototype.hasOwnProperty.call(e,"productRating")?e.productRating.ratingValueLogoUrl:""}),mercuryDescriptors:Ember.computed(function(){var e=i.default.modernXboxClientCustomParameters()
return Object.prototype.hasOwnProperty.call(e,"productRating")?e.productRating.descriptors&&e.productRating.descriptors.join(", "):""}),mercuryInteractiveElements:Ember.computed(function(){var e=i.default.modernXboxClientCustomParameters()
return Object.prototype.hasOwnProperty.call(e,"productRating")?e.productRating.interactiveElements&&e.productRating.interactiveElements.join("<br />"):""}),shouldShowMercurySeparator:Ember.computed("mercuryDescriptors","mercuryInteractiveElements",function(){return!!this.get("mercuryDescriptors")&&!!this.get("mercuryInteractiveElements")}),shouldShowMercuryStrikethrough:Ember.computed("model.order.firstLineItem",function(){return this.get("model.order.firstLineItem.retailPrice")!==this.get("model.order.firstLineItem.listPrice")}),dialogTitle:Ember.computed("model.order",function(){return this.get("lineItemTitle")}),iconUri:Ember.computed("model.order",function(){var e=this.get("model.order.firstLineItem.imageList")
for(var t in e)if(!isNaN(parseInt(t))&&"boxart".equalsIgnoreCase(e[t].ImagePurpose))return e[t].Uri
return""}),isAskPurchaserScenario:Ember.computed(function(){return i.default.isAskPurchaserScenario()}),isGamingAppGiftWithGamertag:Ember.computed(function(){return i.default.isGamingAppGiftWithGamertag()}),showBackButton:Ember.computed(function(){return!i.default.isGamingAppGiftWithGamertag()&&!i.default.isAskPurchaserScenario()&&!i.default.isMercuryGiftWithGamertag()}),isIE:Ember.computed(function(){return!!(window.navigator.userAgent.indexOf("MSIE ")>0||navigator.userAgent.match(/Trident.*rv:11\./))}),placeHolderForIE:Ember.computed("isIE","isDesktop",function(){return!(!this.get("isIE")||!this.get("isDesktop"))})})}),define("web-blends/controllers/purchase/mobi-challenge",["exports","web-blends/modules/busy","sfw-telemetry/utils/blend-bi-tracker","sfw-components/utils/order-bi-data","sfw-services/services/payment-instrument"],function(e,t,n,a,r){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend({actions:{submit:function(){t.default.busy()
var e=this,s=e.get("model.selectedPi"),i=e.get("model.order"),l=i&&i.get("sessionId"),o={orderInfo:(0,a.default)(i,s)}
n.default.capturePageAction($("#purchaseMobiChallengeOK"),o),r.default.purchaseSendResendChallenge("sms",l,s&&s.id).then(function(){t.default.done(),e.replaceRoute("purchase.riskChallenge","purchase","sms")},function(t){e.replaceRoute("error",t)})},cancel:function(){n.default.capturePageAction($("#purchaseMobiChallengeCancel")),this.replaceRoute("purchase.confirm")}}})}),define("web-blends/controllers/purchase/redirect-confirm",["exports","sfw-telemetry/utils/blend-bi-tracker","sfw-components/utils/order-bi-data","sfw-components/utils/template-tokenizer","sfw-services/utils/redirection-service-url","sfw-telemetry/utils/client","web-blends/modules/busy","sfw-messaging/utils/open-url","web-blends/modules/return-route","web-blends/modules/flow-stack"],function(e,t,n,a,r,s,i,l,o,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend({actions:{purchaseRedirectConfirmContinue:function(){var e,a=this.get("model.order"),s=this.get("model.selectedPi"),o={orderInfo:(0,n.default)(a,s),sessionId:a&&a.get("sessionId")}
switch(t.default.capturePageAction($("#PurchaseRedirectConfirmContinue"),o),this.get("model.type")){case"riskChallenge":e=r.default.syncPaymentInstrumentPurchase(o.sessionId),l.default.open(e,"piRedirect",!1),this.replaceRoute("purchase.redirectContinue",this.get("model.type"))
break
case"asyncPurchase":e=r.default.asyncPaymentInstrumentPurchase(o.sessionId),i.default.busy()
var d=this
a.set("orderState","Purchased"),a.save().then(function(n){"pending"===n.get("orderState").toLowerCase()?(t.default.capturePurchaseStatePageAction("Pending",o),l.default.open(e,"piRedirect",!1),d.replaceRoute("purchase.redirectContinue",d.get("model.type")),i.default.done()):(t.default.capturePurchaseStatePageAction("Failed",o),d.replaceRoute("error","UnexpectedOrderState"))},function(e){a.rollbackAttributes(),o.errorCode=e&&e.code,t.default.capturePurchaseStatePageAction("Failed",o),d.replaceRoute("error",e)})
break
default:this.replaceRoute("error","InvalidData")}},purchaseRedirectConfirmBack:function(){var e=this.get("model.order"),a=this.get("model.selectedPi"),r={orderInfo:(0,n.default)(e,a)}
if(t.default.capturePageAction($("#PurchaseRedirectConfirmBack"),r),"asyncPurchase"===this.get("model.type"))this.replaceRoute("purchase.selectPi","selectPi")
else{var s=o.default.addPiSuccess()
s&&"redeem.redeemConfirm"===s.route?this.replaceRoute("redeem.redeemConfirm"):this.replaceRoute("purchase.confirm")}}},riskRedirectTextParts:Ember.computed(function(){var e=this.get("strings")
return a.default.tokenize(e.Purchase_RedirectConfirm_MainText,["0"],function(){return e.Shared_Button_Continue})}),riskRedirectSubTextParts:Ember.computed(function(){var e=this.get("strings")
return a.default.tokenize(e.Purchase_RedirectConfirm_SubText,["0"],function(){return e.Shared_Button_Back})}),isWebClient:Ember.computed(function(){return s.default.isWebClient()}),asyncPurchaseLogo:Ember.computed("model.selectedPi",function(){return this.get("model.selectedPi.display_info.preferredLogo")}),asyncPurchaseTitle:Ember.computed("model.selectedPi",function(){var e=this.get("model.selectedPi.display_info.payment_method_display_name")
return this.get("strings.Purchase_Title_Redirection").replace("{0}",e)}),asyncPurchaseMessage:Ember.computed("model.selectedPi",function(){var e=this.get("model.selectedPi.display_info.payment_method_display_name")
return s.default.isWebClient()?this.get("strings.Purchase_Message_Turn_Off_Popup_Blocker").replace("{0}",e):this.get("strings.Purchase_Message_Redirection_With_Provider").replace("{0}",e)}),asyncPurchaseRedirectText:Ember.computed("model.selectedPi",function(){var e=this.get("model.selectedPi.display_info.payment_method_display_name")
return this.get("strings.Purchase_Button_Go_To").replace("{0}",e).replace("{1}",this.get("strings.Purchase_Label_New_Browser"))}),isMercury:Ember.computed(function(){return s.default.isMercury()}),isModernXboxClient:Ember.computed(function(){return s.default.isModernXboxClient()}),mercuryRedirect:Ember.computed(function(){if(s.default.isModernXboxClient()){i.default.busy()
var e=this.get("model.order"),a=this.get("model.selectedPi"),r={orderInfo:(0,n.default)(e,a),sessionId:e&&e.get("sessionId")},l=this
e.set("orderState","Purchased"),e.save().then(function(e){i.default.done(),"pending"===e.get("orderState").toLowerCase()?(t.default.capturePurchaseStatePageAction("RedirectForAsyncPurchase",{calculateRevenue:!1,addSmdTelemetry:!0}),d.default.clearAndDone("purchaseRedirect",{currency:e.get("currencyCode"),piid:e.get("selectedPi"),sessionId:e.get("sessionId"),orderId:e.get("orderId"),amount:e.get("firstLineItem.totalAmount").toString()})):(t.default.capturePurchaseStatePageAction("Failed",r),l.replaceRoute("error","UnexpectedOrderState"))},function(n){i.default.done(),e.rollbackAttributes(),r.errorCode=n&&n.code,t.default.capturePurchaseStatePageAction("Failed",r),l.replaceRoute("error",n)})}})})}),define("web-blends/controllers/purchase/redirect-continue",["exports","sfw-components/utils/template-tokenizer","sfw-components/utils/order-bi-data","web-blends/modules/flow-stack","web-blends/modules/busy","sfw-telemetry/utils/blend-bi-tracker","sfw-services/utils/redirection-service-url","sfw-messaging/utils/open-url"],function(e,t,n,a,r,s,i,l){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend({rds:Ember.inject.service(),actions:{purchaseRedirectContinueTryPurchase:function(){r.default.busy()
var e=this.get("model.order")
if(!e)throw new Error("Missing order in redirectContinue")
var t=this.get("model.selectedPi")
if(!t)throw new Error("Missing selectedPi in redirectContinue")
var a={orderInfo:(0,n.default)(e,t),sessionId:e.get("sessionId")}
s.default.capturePageAction($("#purchaseRedirectContinue"),a),this.checkStateAndTransfer(e,t,a)},purchaseRedirectContinueTryRedirectAgain:function(){r.default.busy()
var e=this.get("model.order"),t=this.get("model.selectedPi"),a={orderInfo:(0,n.default)(e,t),sessionId:e.get("sessionId")}
s.default.capturePageAction($("#purchaseTryAgain"),a),this.checkStateAndTransfer(e,t,a)},close:function(){s.default.capturePageAction($("#closeButton")),r.default.busy(),a.default.clearAndDone("cancel")}},selectedBackupPi:Ember.computed("model.order.selectedBackupPi",function(){return this.get("model.order.selectedBackupPi")}),redirectContinueSubTextParts:Ember.computed(function(){var e=this.get("strings")
return t.default.tokenize(e.Purchase_RedirectContinue_SubText,["0"],function(){return e.Shared_Button_Continue})}),asyncPurchaseLogo:Ember.computed("model.selectedPi",function(){return this.get("model.selectedPi.display_info.preferredLogo")}),asyncPurchaseRedirectContinueText:Ember.computed("model.selectedPi",function(){var e=this.get("model.selectedPi.display_info.payment_method_display_name")
return this.get("strings.Purchase_Message_Done_Paying").replace("{0}",e)}),readyToTakeAction:Ember.computed("model.selectedPi",function(){return!this.get("model.selectedPi.display_info.expired")}),checkStateAndTransfer:function(e,t,o){var d=this,u=e.get("sessionId")
this.get("rds").queryUserPayState(u).then(function(c){if(c)if("initial"===c.session_state||"pending"===c.session_state){var m=i.default.asyncPaymentInstrumentPurchase(u)
l.default.open(m,"piRedirect",!1),s.default.capturePurchaseStatePageAction("NeedRestartPurchase",o),r.default.done()}else e.set("orderState","Purchased"),e.save().then(function(i){var l=i.get("orderState")
l&&"string"==typeof l?l=l.toLowerCase():(s.default.capturePurchaseStatePageAction("Failed",o),d.replaceRoute("error","UnexpectedOrderState")),"purchased"===l||"ordered"===l?(o.orderInfo=(0,n.default)(e,t,null,!0),s.default.capturePurchaseStatePageAction("Purchased",o,"PURCHASECOMPLETE"),a.default.pop("success",i)):"pending"===l?"failure"===c.session_state?(s.default.capturePurchaseStatePageAction("Failed",o),d.replaceRoute("error","RdsStateFailure")):"success"===c.session_state?(s.default.capturePurchaseStatePageAction("Pending",o),r.default.done(),d.replaceRoute("purchase.redirectRetry","fromRedirectContinue")):(s.default.capturePurchaseStatePageAction("Failed",o),d.replaceRoute("error","UnexpectedRdsSessionState")):(s.default.capturePurchaseStatePageAction("Failed",o),d.replaceRoute("error","UnexpectedOrderState"))},function(t){e.rollbackAttributes(),o.orderState="failed",o.errorCode=t&&t.code,s.default.capturePurchaseStatePageAction(o),d.replaceRoute("error",t)})
else s.default.capturePurchaseStatePageAction("Failed",o),d.replaceRoute("error","RdsStateQuery")},function(e){s.default.capturePageAction($("#purchaseTryAgain"),{rdsError:e}),d.replaceRoute("error","UnexpectedRdsSessionState")})}})}),define("web-blends/controllers/purchase/redirect-retry",["exports","web-blends/modules/flow-stack","sfw-telemetry/utils/start-data","sfw-telemetry/utils/blend-bi-tracker","web-blends/modules/busy","sfw-components/utils/order-bi-data"],function(e,t,n,a,r,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend({actions:{tryAgain:function(){r.default.busy()
var e=this,i=this.get("model"),l={orderInfo:(0,s.default)(i.order,i.selectedPi),sessionId:i.order&&i.order.get("sessionId")}
a.default.capturePageAction($("#tryAgainButton"),l),i.order.set("billingInformation.tokenizedPaymentInstrumentData",n.default.get().tokenizedRiskData),i.order.set("orderState","Purchased"),i.order.save().then(function(e){"purchased"===e.get("orderState").toLowerCase()||"ordered"===e.get("orderState").toLowerCase()?(l.orderInfo=(0,s.default)(i.order,i.selectedPi,null,!0),a.default.capturePurchaseStatePageAction("Purchased",l,"PURCHASECOMPLETE"),t.default.pop("success",e)):(a.default.capturePurchaseStatePageAction("Pending",l),r.default.done())},function(t){i.order.rollbackAttributes(),l.errorCode=t&&t.code,a.default.capturePurchaseStatePageAction("Failed",l),e.replaceRoute("error",t)})},goToPDP:function(){a.default.capturePageAction($("#goToPDPButton")),r.default.busy(),t.default.clearAndDone("cancel")}}})}),define("web-blends/controllers/purchase/rewards-reactive",["exports","web-blends/modules/busy","web-blends/modules/flow-stack","sfw-components/utils/order-bi-data","sfw-telemetry/utils/start-data","sfw-telemetry/utils/blend-bi-tracker"],function(e,t,n,a,r,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend({actions:{next:function(){s.default.capturePageAction($("#nextButton")),this.replaceRoute("paymentAndBilling.selectPaymentInstrumentSdk",{queryParams:{context:"selectpi"}})},cancel:function(){if(!t.default.isBusy()){t.default.busy()
var e=r.default.get().OrderId
this.get("store").findRecord("order",e).then(function(e){var t={orderInfo:(0,a.default)(e,null,null,!0)}
s.default.capturePageAction($("#cancelButton"),t),s.default.capturePurchaseStatePageAction("Cancelled",t),n.default.clearAndDone("cancel")})}}}})}),define("web-blends/controllers/purchase/rewards-thanks",["exports","sfw-telemetry/utils/blend-bi-tracker"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend({actions:{next:function(){t.default.capturePageAction($("#nextButton")),this.replaceRoute("purchase.confirm")}}})}),define("web-blends/controllers/purchase/risk-challenge",["exports","sfw-telemetry/utils/app-globals","web-blends/modules/busy","web-blends/modules/reset-blend-sensitive-user-data","sfw-services/models/select-pi","web-blends/modules/flow-stack"],function(e,t,n,a,r,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend({queryParams:["paymentMethodType"],paymentMethodType:null,actions:{handleError:function(e){this.replaceRoute("error",e)},handleSuccess:function(e){e?this.replaceRoute("purchase.confirm",{queryParams:e}):this.replaceRoute("purchase.confirm")},handleAsyncPiContinue:function(e){var t={context:"add"}
return"mobile_billing_non_sim"===e?t.paymentMethodFamily="mobile_billing_non_sim":"alipay_billing_agreement"===e&&(t.paymentMethodFamily="ewallet",t.paymentMethodType="alipay_billing_agreement"),this.replaceRoute("paymentAndBilling.addPaymentInstrument",{queryParams:t})},handleSmsAddPiSuccess:function(e){t.default._selectPiData||(t.default._selectPiData=r.default.create()),t.default._selectPiData.selectedPis={id:e},(0,a.default)(),s.default.pop("piAdded",e),this.store.unloadAll("payment-instrument"),n.default.done(),this.send("handleSuccess",null)},handleSmsRiskChallengeContinue:function(){return this.replaceRoute("purchase.riskChallenge","purchase","sms")}}})})
define("web-blends/controllers/purchase/save-to-cart",["exports","web-blends/modules/busy","web-blends/modules/flow-stack","sfw-components/utils/order-bi-data","sfw-telemetry/utils/start-data","sfw-telemetry/utils/blend-bi-tracker","sfw-services/errors/app-error"],function(e,t,n,a,r,s,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend({actions:{add:function(){var e=this
return t.default.busy(),this.get("store").createRecord("save-to-cart",this.model).save().then(function(t){if(t&&t.get("Error")){var a=new i.default("SaveToCartError",t.get("Error"))
e.replaceRoute("error",a)}else n.default.clearAndDone("cancel")},function(t){e.replaceRoute("error",t)})},close:function(){if(!t.default.isBusy()){t.default.busy()
var e={},i=r.default.get().OrderId
i&&this.get("store").findRecord("order",i).then(function(t){t&&(e={orderInfo:(0,a.default)(t,null,null,!0)})}),s.default.capturePageAction($("#closeButton"),e),s.default.capturePurchaseStatePageAction("Cancelled",e),n.default.clearAndDone("cancel")}}}})}),define("web-blends/controllers/purchase/select-address",["exports","web-blends/modules/busy","web-blends/modules/return-route","sfw-telemetry/utils/blend-bi-tracker"],function(e,t,n,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend({user:Ember.inject.service(),actions:{addAddress:function(){var e=this.get("model.puid")
a.default.capturePageAction($("#addAddressInSelectAddress")),this.replaceRoute("paymentAndBilling.addressSdk",{queryParams:{context:"address",puid:e,route:"selectAddressRoute"}})},selectAddress:function(e){t.default.busy()
var a=this
this.get("user").getProfile(a.get("model.puid")).then(function(r){r.set("default_address",e),r.set("default_address_id",e.id),r.save().then(function(){t.default.done()
var e=n.default.addNameOrAddress()
e&&e.route?a.replaceRoute(e.route):a.replaceRoute("purchase.confirm")},function(e){a.replaceRoute("error",e)})},function(e){a.replaceRoute("error",e)})},cancel:function(){var e=n.default.addNameOrAddress()
e&&(e.context?this.replaceRoute(e.route,e.context):this.replaceRoute(e.route))}},selectAddressTitle:Ember.computed("model.puid",function(){var e=this.get("model.puid")
return e&&"me"!==e?this.get("strings.SelectAddress_For_Child_Title"):this.get("strings.Tell_Us_Which_Address_To_Use")}),addAddressText:Ember.computed("model.puid",function(){var e=this.get("model.puid")
return e&&"me"!==e?this.get("strings.Add_Address_For_Child_Text"):this.get("strings.Add_Address_Text")}),addAddressButtonText:Ember.computed(function(){return this.get("strings.Add_New_Address_Title")}),addressContainer:Ember.computed(function(){return"addressContainerNew"})})}),define("web-blends/controllers/purchase/select-pi",["exports","sfw-telemetry/utils/app-globals","sfw-telemetry/utils/blend-bi-tracker","sfw-services/models/select-pi","sfw-telemetry/utils/flight-config","sfw-telemetry/utils/client","sfw-services/utils/supported-payment-instruments","sfw-messaging/utils/post-messages","sfw-messaging/utils/messages"],function(e,t,n,a,r,s,i,l,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend({telemetryBi:Ember.inject.service(),actions:{replaceWithRedeem:function(){this.replaceRoute("redeem.enterCode",{queryParams:{isPurchaseFlow:!0}})},selectPi:function(e){s.default.isModernXboxClient()&&l.default.send(o.default.action("piselected"))
var r=this.get("model.selectedPi"),i=this.get("model.selectBackup"),d=i?{name:"SelectBackupPi"}:{name:"SelectPi"},u={piType:e.get("payment_method_type"),piMethod:e.get("payment_method_family"),piId:e.id,isRedeem:this.get("model.isRedeem")}
n.default.captureContentPageAction(d,u),i&&this.get("telemetryBi").setDidFinishSelectBackup(!0)
var c=i?{id:r&&r.id,csvTopOffPaymentInstrumentId:e.id}:{id:e.id}
t.default._selectPiData=a.default.create({selectBackupPi:i,selectedPis:c}),this.get("model.isRedeem")?this.replaceRoute("redeem.redeemConfirm"):(s.default.isWindowsOobeClient()&&this.replaceRoute("purchase.confirmOobe"),this.replaceRoute("purchase.confirm"))},cancel:function(){n.default.capturePageAction($("#back")),this.get("model.isRedeem")?this.replaceRoute("redeem.redeemConfirm"):(s.default.isWindowsOobeClient()&&this.replaceRoute("purchase.confirmOobe"),this.replaceRoute("purchase.confirm"))},addPi:function(){var e=this.get("model.isRedeem")?{isRedeem:!0}:null
n.default.capturePageAction($("#addPiAction"),e)
var r=this.get("model.selectBackup")
if(r){var d=this.get("model.selectedPi"),u={id:d&&d.id}
t.default._selectPiData=a.default.create({selectBackupPi:!0,selectedPis:u})}if(s.default.isWindowsOobeClient()){var c="credit_card"
return i.default.isAlipayEnabledForWinOobe()&&(c="ewallet"),this.transitionToRoute("paymentAndBilling.paymentInstrumentSdk",{queryParams:{context:"add",paymentMethodFamily:c,paymentMethodType:i.default.getPaymentMethodListForWinOobe(),puid:"me"}})}s.default.isModernXboxClient()&&l.default.send(o.default.busy()),this.replaceRoute("paymentAndBilling.selectPaymentInstrumentSdk",{queryParams:{context:"selectpi",backupPi:r}})},updatePi:function(e){if(this.get("model.selectBackup")){var s=this.get("model.selectedPi"),i={id:s&&s.id}
t.default._selectPiData=a.default.create({selectBackupPi:!0,selectedPis:i})}var l={name:"UpdatePi",contentId:e&&e.id},o=e.get("payment_method_family"),d=e.get("payment_method_type"),u={piType:d,piMethod:o,isExpired:e.get("display_info")&&e.get("display_info").expired,isRedeem:this.get("model.isRedeem")}
n.default.captureContentPageAction(l,u)
var c="unionpay_creditcard".equalsIgnoreCase(d)||"unionpay_debitcard".equalsIgnoreCase(d)
r.default.isEnabled("pidlsdkallpis")||r.default.isEnabled("pidlsdkccedit")&&"credit_card".equalsIgnoreCase(o)&&!c||r.default.isEnabled("pidlsdkcupedit")&&"unionpay_creditcard".equalsIgnoreCase(d)?this.replaceRoute("paymentAndBilling.paymentInstrumentSdk",{queryParams:{context:"edit",paymentMethodFamily:o,paymentMethodType:d,piId:e.id}}):this.replaceRoute("paymentAndBilling.addPaymentInstrument",{queryParams:{context:"edit",paymentMethodFamily:o,paymentMethodType:d,piId:e.id}})},verifyPi:function(e){var t={name:"VerifyPi",contentId:e&&e.id},a=e.get("payment_method_family"),s=e.get("payment_method_type"),i={piType:s,piMethod:a,isRedeem:this.get("model.isRedeem")}
n.default.captureContentPageAction(t,i),"ach"===s||"sepa"===s&&r.default.isEnabled("pidlsdkallpis")?this.replaceRoute("paymentAndBilling.paymentInstrumentSdk",{queryParams:{context:"challenge",paymentMethodFamily:a,paymentMethodType:s,piId:e.id}}):this.replaceRoute("paymentAndBilling.directDebitChallenge",{queryParams:{piId:e.id}})}},title:Ember.computed("model.selectBackupForSufficientCsv",function(){return this.get("model.selectBackupForSufficientCsv")?this.get("strings.BackUpPi_Pick").replace("{0}",""):this.get("model.selectBackup")?this.get("strings.BackUpPi_Label_HowPayRest"):this.get("strings.SelectPi_Label_HowPay")}),isMercury:Ember.computed(function(){return s.default.isMercury()}),isModernXboxClient:Ember.computed(function(){return s.default.isModernXboxClient()}),mercurySelectedPi:Ember.computed(function(){return this.get("model.selectedPi")}),mercuryDunningScenario:Ember.computed(function(){return this.get("model.mercuryDunningScenario")}),totalElementsInSelection:Ember.computed("model",function(){var e=this.get("model.showRedeemLink")?1:0
return this.get("model.length")+e+1}),getListAccessibilityLabelAddPi:Ember.computed("totalElementsInSelection",function(){return this.get("strings.accessibilityLabelTemplate")?this.get("strings.Pi_Option_AccessibilityLabel").replace("{0}",this.get("totalElementsInSelection")).replace("{1}",this.get("totalElementsInSelection")):void 0}),showOobeExperience:Ember.computed("model",function(){return!!s.default.isWindowsOobeClient()&&!!r.default.isEnabled("oobepichange")}),isPaymentLuminosityContrastEnabled:Ember.computed(function(){return r.default.isEnabled("paymentluminositycontrast")&&!s.default.isSaturnDesktop()&&!s.default.isModernXboxClient()&&!s.default.isGamingApp()})})}),define("web-blends/controllers/purchase/subscription-downgrade",["exports","sfw-services/utils/external-urls","sfw-messaging/utils/post-messages","sfw-messaging/utils/messages","sfw-telemetry/utils/client","sfw-components/utils/order-bi-data","sfw-telemetry/utils/blend-bi-tracker"],function(e,t,n,a,r,s,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend({queryParams:["ownedBigId","convertBigId","expirationDate","sharedType","context"],ownedBigId:null,convertBigId:null,expirationDate:null,sharedType:null,context:null,telemetryBi:Ember.inject.service(),actions:{keepCurrent:function(){if(r.default.isUniversalStoreNativeClient()||r.default.isInAppClient()){var e=this.get("ownedBigId").split("/")[0],l=t.default.get("StoreLinkThreshold").toString().replace("{0}",e)
n.default.send(a.default.openUrl(l,"OfficeDowngradeKeepCurrent",!0,!0))}else n.default.send(a.default.done({status:"cancel"}))
var o=this.get("model.order"),d=this.get("model.selectedPi"),u=this.get("model.profile"),c={orderInfo:(0,s.default)(o,d,null,null,u)}
i.default.capturePurchaseStatePageAction("Cancelled",c),this.get("telemetryBi").setDidFinishDowngrade(!1)},downgradeConfirm:function(){var e="redeem"===this.get("context")?"redeem.redeemConfirm":"purchase.confirm"
this.replaceRoute(e,{queryParams:{userConsent:"Family".equalsIgnoreCase(this.get("model.sharedType"))?"ChildNewSubscription":"Downgrade"}}),this.get("telemetryBi").setDidFinishDowngrade(!0)},cancel:function(){n.default.send(a.default.done({status:"cancel"}))}}})}),define("web-blends/controllers/purchase/tvod-resume",["exports","sfw-services/services/tvod-purchase","web-blends/modules/busy","sfw-messaging/utils/messages","sfw-messaging/utils/post-messages","sfw-telemetry/utils/start-data","sfw-telemetry/utils/blend-bi-tracker","sfw-telemetry/utils/client"],function(e,t,n,a,r,s,i,l){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend({init:function(){this._super(),Ember.run.schedule("afterRender",this,function(){n.default.busy(),this.send("checkTransactionState")})},showStillPending:!1,retryCount:1,gamertag:Ember.computed(function(){return s.default.get().Gamertag?s.default.get().Gamertag:""}),moderngamertag:Ember.computed(function(){return l.default.isModernXboxClient()?s.default.get().ModernGamertag:""}),moderngamertagsuffix:Ember.computed(function(){return l.default.isModernXboxClient()&&s.default.get().ModernGamertagSuffix?s.default.get().ModernGamertagSuffix:""}),ismoderngamertagenabled:Ember.computed(function(){return!!this.get("moderngamertag")}),message:Ember.computed("showStillPending",function(){return this.get("showStillPending")?this.get("strings.Tvod_Transaction_Still_Pending"):this.get("strings.Tvod_Please_Wait")}),actions:{tryAgain:function(){n.default.busy(),i.default.capturePageAction($("#tryAgain"),{resumeId:this.get("model.resumeId")}),this.send("checkTransactionState")},checkTransactionState:function(){i.default.capturePurchaseStatePageAction("Pending",{resumeId:this.get("model.resumeId")})
var e=this
$("#checkPurchaseStateButton").hide(),e.set("showStillPending",!1),t.default.checkTransactionState(this.get("model.resumeId")).then(function(e){i.default.capturePurchaseStatePageAction("Purchased",{},"PURCHASECOMPLETE")
var t=(new XMLSerializer).serializeToString(e.documentElement)
r.default.send(a.default.done({status:"success",data:{receipt:t}}))},function(t){if("2008"!==t.code)i.default.capturePurchaseStatePageAction("Failed"),e.replaceRoute("error",t)
else if(e.get("retryCount")<3){var a=e.get("retryCount")+1
e.set("retryCount",a),setTimeout(function(){e.send("checkTransactionState")},5e3)}else n.default.done(),$("#checkPurchaseStateButton").show(),e.set("showStillPending",!0),e.set("retryCount",1)})}}})}),define("web-blends/controllers/redeem",["exports","sfw-telemetry/utils/client","sfw-messaging/utils/open-terms","sfw-components/utils/template-tokenizer","web-blends/mixins/legal-strings","sfw-telemetry/utils/start-data","sfw-components/utils/legal-market-region"],function(e,t,n,a,r,s,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend(r.default,{customDataForBi:Ember.computed("model.product","model.tokenInfo",function(){var e={}
return this.get("model.product.ProductType")?e.tokenInfo={productType:this.get("model.product.ProductType"),productId:this.get("model.product.id"),tokenType:this.get("model.product.IsIAP")?"iap":"product"}:this.get("model.tokenInfo.csvTokenDescription")&&(e.tokenInfo={tokenType:"csv",currency:this.get("model.tokenInfo.csvTokenDescription").currency,csvAmount:this.get("model.tokenInfo.csvTokenDescription").csvAmount}),e.isPurchaseFlow=this.get("model.isPurchaseFlow"),e}),customDataForTokenResult:Ember.computed("model.tokenInfo","model.tokenInfo.tokenState","model.tokenInfo.csvTokenDescription","model.tokenInfo.universalStoreSkuId","model.tokenInfo.offerId",function(){var e={}
return this.get("model.tokenInfo")&&(e._data={tokenState:this.get("model.tokenInfo.tokenState")},this.get("model.tokenInfo.csvTokenDescription")&&(e._data.csvTokenDescription=this.get("model.tokenInfo.csvTokenDescription")),this.get("model.tokenInfo.xbox360TokenDescription")&&(e._data.xbox360TokenDescription=this.get("model.tokenInfo.xbox360TokenDescription")),this.get("model.tokenInfo.universalStoreSkuId")&&(e._data.universalStoreSkuId=this.get("model.tokenInfo.universalStoreSkuId")),this.get("model.tokenInfo.universalStoreBigIds")&&(e._data.universalStoreBigIds=this.get("model.tokenInfo.universalStoreBigIds"),e.allowAutoRenew=e._data.universalStoreBigIds.length>1),this.get("model.tokenInfo.offerId")&&(e._data.offerId=this.get("model.tokenInfo.offerId"))),e.isPurchaseFlow=this.get("isPurchaseFlow"),e}),isLayoutModal:Ember.computed(function(){return t.default.isLayoutModal()}),isXboxOne:Ember.computed(function(){return t.default.isXboxOneClient()}),isLayoutModalOrXboxOneClient:Ember.computed("isLayoutModal","isXboxOne",function(){return this.get("isLayoutModal")||this.get("isXboxOne")}),productLegal:Ember.computed("model.tokenContentType","showCsvInfo","isXboxOne","model.tokenInfo.isPartnerBilling","model.product.ProductType",function(){var e=this.get("strings"),t="csv"===this.get("model.tokenContentType")||this.get("showCsvInfo"),r="PASS".equalsIgnoreCase(this.get("model.product.ProductType")),l=this.get("model.tokenInfo.isPartnerManaged"),o="",d="CN".equalsIgnoreCase(s.default.get().Market),u=i.default.getRegion().equalsIgnoreCase("EU")
if(d)o=e.Redeem_Legal_Text
else{var c=e.Redeem_LegalTerms_Gifting_V1
u&&r&&(c=e.Redeem_Subscription_AutoRenewalOff_Gift_LegalTerms_EU),l&&(c=e.Redeem_LegalTerms_PartnerManaged),o=t?e.Purchase_LegalTerms:c
var m=e.Confirm_Button
o=o.replace("{buttonText}",m)}return a.default.tokenize(o,["msaTou","termsLink","giftTermsLink","usageRulesLinkText"],function(t){switch(t){case"msaTou":return e.Microsoft_Service_Agreement_Link
case"termsLink":return e.Store_Terms_Of_Sale_Link
case"giftTermsLink":return e.Gift_Terms_And_Conditions_Link
case"usageRulesLinkText":return e.Purchase_UniversalLegalTerms_UsageRules_DigitalGoods
default:return t}},function(e){switch(e.id=e.value+"_tou",e){case"msaTou":e.biContentName="MicrosoftServiceAgreement"
break
case"termsLink":e.biContentName="StoreTermsOfSales"
break
case"giftTermsLink":e.biContentName="GiftTermsLink"
break
case"usageRulesLinkText":e.biContentName="UsageRulesLink"}return e.css="cli_tou",n.default.enhanceToken(e),e})}),releaseDate:Ember.computed("model.activeAvailability",function(){var e,t,n=this.get("model.activeAvailability")
return n&&(e=n.Properties.PreOrderReleaseDate)&&(t=new Date(e))>new Date?this.get("strings.Release_Date")+" "+t.toLocaleDateString():null}),consumableQuantity:Ember.computed("model.product","model.displaySkuAvailability",function(){var e=this.get("model.product")
if(e){var t=null
if(e.get("Properties.EntitlementProperties")){var n=this.get("model.displaySkuAvailability")
n.Sku&&n.Sku.Properties&&(t=n.Sku.Properties.ConsumableQuantity)}if(t)return this.get("strings.Purchase_Label_Quantity")+" "+t}return null}),duration:Ember.computed("model.displaySkuAvailability","model.activeAvailability",function(){var e=this.get("model.displaySkuAvailability")
if(e&&e.Sku&&e.Sku.RecurrencePolicy&&e.Sku.RecurrencePolicy.Duration){var t=e.Sku.RecurrencePolicy.Duration,n=this.get("strings")["Duration_UnitType_"+t.UnitType].replace("{0}",t.Units),a=this.get("model.activeAvailability")
if(a&&a.OrderManagementData&&a.OrderManagementData.PromotionalCoreDuration){var r=a.OrderManagementData.PromotionalCoreDuration
if(r.Units&&r.UnitType){var s=this.get("strings")["Redeem_PromotionalCoreDuration_"+r.Units+"_"+r.UnitType]
s&&(n+=" + "+s)}}return n}return null})})}),define("web-blends/controllers/redeem/enter-code",["exports","web-blends/utils/format-token","sfw-messaging/utils/post-messages","web-blends/utils/get-more-info-error","sfw-messaging/utils/messages","sfw-telemetry/utils/start-data","sfw-components/utils/template-tokenizer","sfw-telemetry/utils/blend-bi-tracker","web-blends/modules/busy","sfw-telemetry/utils/app-globals","sfw-messaging/utils/open-url","web-blends/controllers/redeem","sfw-telemetry/utils/flight-config","web-blends/modules/return-route","web-blends/modules/flow-stack","sfw-telemetry/utils/client","sfw-services/utils/constant-links","sfw-messaging/utils/open-terms","sfw-services/models/session-ids","web-blends/utils/constants","sfw-services/errors/app-error","sfw-services/utils/blend-service-errors"],function(e,t,n,a,r,s,i,l,o,d,u,c,m,f,p,g,b,h,y,P,_,v){Object.defineProperty(e,"__esModule",{value:!0})
var w=void 0
function C(e){return e?new Date(e).toLocaleString():null}e.default=c.default.extend({queryParams:["isPurchaseFlow","invokeType","dismissAfterRedeem"],invokeType:null,isPurchaseFlow:!1,dismissAfterRedeem:!1,imageUrl:null,showRedirectMsg:!1,hideInputBoxHint:!1,isCsvCurrencyMismatch:!1,tokenString:"",errorMessage:null,screenReaderErrorMessage:null,errorCode:null,redirectMsgDetails:null,tokenLength:29,productImages:Ember.inject.service(),isDisabled:!0,redirectLinks:null,showXboxRedeemErrorString:!0,officeRedirectToSetupOfficeCom:!1,titleString:Ember.computed(function(){return this.get("isPurchaseFlow")?this.get("strings.Redeem_PurchaseFlow_Title"):this.get("strings.RedeemTokenPrompt")}),redeemDescription:Ember.computed(function(){return this.get("strings.Redeem_Enter_Code_Description")}),redeemInfo:Ember.computed("model.emailAddress",function(){if(this.get("model.emailAddress")){var e=!g.default.isXboxOneClient()&&s.default.get().MarketNativeName
return e=e?"({countryName})".replace("{countryName}",e):"",this.get("strings.Redeem_AddedToEmailWithCountry_Text").replace("{email}",this.get("model.emailAddress")).replace("{country}",e).trim()}return null}),ocrScanLinkLabel:Ember.computed(function(){var e=s.default.get().OcrScanAvailable
return e&&e.equalsIgnoreCase("true")?this.get("strings.Redeem_ScanCode_Link"):null}),gamertag:Ember.computed("isXboxOne",function(){return this.get("isXboxOne")&&s.default.get().Gamertag}),gamerpic:Ember.computed("isXboxOne",function(){return this.get("isXboxOne")&&s.default.get().Gamerpic}),moderngamertag:Ember.computed(function(){if(g.default.isModernXboxClient())return s.default.get().ModernGamertag}),moderngamertagsuffix:Ember.computed(function(){if(g.default.isModernXboxClient())return s.default.get().ModernGamertagSuffix?s.default.get().ModernGamertagSuffix:""}),inputBoxType:Ember.computed("isXboxOne",function(){return this.get("isXboxOne")&&s.default.get().Culture&&!s.default.get().Culture.startsWithIgnoreCase("en")?"email":"text"}),csvCurrencyMismatch:Ember.computed("model.tokenInfo",function(){var e=this.get("model.tokenInfo.csvTokenDescription.currency")
return e?this.get("isPurchaseFlow")?this.get("strings.Redeem_CsvCurrencyMismatch").replace("{0}",s.default.get().Market.toUpperCase()).replace(/\{1}/g,e.toUpperCase()):this.get("strings.Redeem_CsvCurrencyMismatchError").replace("{0}",e.toUpperCase()):""}),notRedeemableInRegion:Ember.computed("isXboxOne",function(){return this.get("isXboxOne")?this.get("strings.Redeem_ProductNotRedeemableInRegion_Text").replace("{0}",""):this.get("strings.Redeem_ProductNotRedeemableInRegion").replace("{0}",'<a target="_blank" href="'+b.default.get().learnMoreAboutRedeem+'" data-bi-name="NotRedeemableInRegionLinkClicked" >').replace("{1}","</a>")}),alreadyRedeemed:Ember.computed("isXboxOne",function(){return this.get("isXboxOne")?this.get("strings.Redeem_Token_Already_Redeemed_Text").replace("{0}",""):this.get("strings.Redeem_Token_Already_Redeemed").replace("{0}",'<a target="_blank" href="'+b.default.get().learnMoreAboutRedeem+'" data-bi-name="TokenAlreadyRedeemedLinkClicked" >').replace("{1}","</a>")}),csvPreRedeemMessage:Ember.computed("model.tokenInfo",function(){var e=this.get("model.tokenInfo.csvTokenDescription")
return e&&this.get("strings.Redeem_PreRedeemCsvMessage").replace("{0}",e.csvDisplayAmount)}),redirectMessage:Ember.computed("redirectMsgDetails.urlType",function(){var e=this
if(e.get("officeRedirectEnabled")&&e.get("redirectMsgDetails.urlType").equalsIgnoreCase("officeRedirect")){var t=new _.default("RedeemOfficeRedirect",v.default.get("RedeemOfficeRedirect").code)
l.default.captureContentPageAction("RedeemEnterCodeError",t)
var n=e.get("strings.Redeem_Office_Redirect_Link")
return i.default.tokenize(n,["officeComLink"],function(){return b.default.get().OfficeComSetup},function(t){return t.id="OfficeCom",t.biContentName="OfficeCom",t.css="cli_RedirectMessage",t.url=b.default.get().epayTokenRedirectUrl.replace("{0}",e.get("tokenString")).replace("{1}",g.default.getClientType()),t})}return e.get("isSetupOfficeComRedirect")?i.default.tokenize("{0}",["0"],function(){switch(e.get("redirectMsgDetails.urlType")){case"setupOfficeCom":return e.get("strings.Redeem_RedirectToSetupOfficeCom2")
case"setupOfficeComTokenNotFound":return e.get("strings.Redeem_Token_Not_Found_SetupOfficeCom2")
case"redeemOfficeToken":return e.get("strings.Redeem_RedirectToOfficeCom_Link2")
default:return e.get("strings.Redeem_RedirectToXboxCom_Link")}},function(t){switch(e.get("redirectMsgDetails.urlType")){case"setupOfficeCom":case"setupOfficeComTokenNotFound":return t.id="SetupOfficeCom",t.biContentName="SetupOfficeCom",t.css="cli_RedirectMessage",t.url=e.get("setupOfficeComRedirectUrl"),t
case"redeemOfficeToken":return t.id="OfficeCom",t.biContentName="OfficeCom",t.css="cli_RedirectMessage",t.url=b.default.get().officeTokenRedirectUrl,t
default:return t.id="XboxCom",t.biContentName="XboxCom",t.css="cli_RedirectMessage",t.url=e.get("xboxTokenRedirectUrl"),t}}):i.default.tokenize("{0}",["0"],function(){switch(e.get("redirectMsgDetails.urlType")){case"redeemOfficeToken":return e.get("strings.Redeem_RedirectToOfficeCom_Link2")
case"epayToken":return e.get("strings.Redeem_Epay_Link2")
default:return e.get("strings.Redeem_RedirectToXboxCom_Link")}},function(t){switch(e.get("redirectMsgDetails.urlType")){case"redeemOfficeToken":return t.id="OfficeCom",t.biContentName="OfficeCom",t.css="cli_RedirectMessage",t.url=b.default.get().officeTokenRedirectUrl,t
case"epayToken":return t.id="OfficeCom",t.biContentName="OfficeCom",t.css="cli_RedirectMessage",t.url=b.default.get().epayTokenRedirectUrl.replace("{0}",e.get("tokenString")).replace("{1}",g.default.getClientType()),t
default:return t.id="XboxCom",t.biContentName="XboxCom",t.css="cli_RedirectMessage",t.url=e.get("xboxTokenRedirectUrl"),t}})}),isSetupOfficeComRedirect:Ember.computed(function(){return m.default.isEnabled("setupofficeredirect")&&"setup.office.com".equalsIgnoreCase(s.default.get().redirectContext)}),setupOfficeComRedirectUrl:Ember.computed(function(){var e="",t=""
s.default.get().CallerApplicationId&&(e=s.default.get().CallerApplicationId.equalsIgnoreCase("office.client")?"&source=client":"&source="+s.default.get().CallerApplicationId),s.default.get().ctid&&(t="&ctid="+s.default.get().ctid)
var n="token"
return(e.equalsIgnoreCase("&source=client")||e.equalsIgnoreCase("&source=oobe"))&&(n="value"),b.default.get().setupOfficeComRedirectUrl.replace("{0}",n).replace("{1}",this.get("tokenString")).replace("{2}",e).replace("{3}",t)}),officeClientSource:Ember.computed(function(){return s.default.get().CallerApplicationId&&(s.default.get().CallerApplicationId.equalsIgnoreCase("office.client")||s.default.get().CallerApplicationId.equalsIgnoreCase("client"))}),xboxTokenRedirectUrl:Ember.computed(function(){return b.default.get().xboxTokenRedirectUrl.replace("{0}",this.get("tokenString")).replace("{1}",g.default.getClientType())}),enterCodeHint:Ember.computed(function(){return this.get("strings.Redeem_Enter_Code_Hint").replace("{0}","xxxxx-xxxxx-xxxxx-xxxxx-xxxxx")}),ctaButtonText:Ember.computed(function(){return this.get("strings.Shared_Button_Next")}),viewTermsButtonText:Ember.computed("errorMessage",function(){return this.get("errorMessage")&&this.get("learnMoreUrl")?this.get("strings.GetMoreInfo_Link"):this.get("strings.View_Terms_Button")}),billingInformation:Ember.computed("model.tokenInfo",function(){return d.default._sessionIds||(d.default._sessionIds=y.default.create()),{sessionId:d.default._sessionIds.getNewSessionId(),paymentInstrumentType:"Token",paymentInstrumentId:this.get("model.tokenInfo").id}}),officeRedirectEnabled:Ember.computed(function(){return m.default.isEnabled("redeemofficeredirect")}),showNewRedeemText:Ember.computed(function(){return!this.get("isPurchaseFlow")&&!this.get("dismissAfterRedeem")&&m.default.isEnabled("redeemofficeredirect")&&(!g.default.isModernXboxClient()||m.default.isEnabled("officeredirectinxbox"))}),tokenStringChanged:Ember.observer("model","tokenString",function(){var e=this.get("tokenString"),n=(0,t.default)(e)
e!==n&&(this.correctCursorPosition(e,n),this.set("tokenString",n),$("#tokenString").val(n)),this.clearMessages(),this.get("tokenString").length===this.get("tokenLength")&&Ember.run.once(this,this.lookupToken)}),correctCursorPosition:function(e,t){var n=$("#tokenString")[0]
if(n){var a=n.selectionEnd,r=(e.slice(0,a).match(/-/g)||[]).length,s=(t.slice(0,a).match(/-/g)||[]).length
a+=s-r,Ember.run.next(function(){n.selectionStart=n.selectionEnd=a})}},clearMessages:function(){this.set("showRedirectMsg",!1),this.set("errorMessage",null),this.set("screenReaderErrorMessage",null),this.set("errorCode",null),this.set("redirectMsgDetails",null),this.set("isDisabled",!0),this.set("hideInputBoxHint",!1),this.set("redirectLinks",null),this.set("showXboxRedeemErrorString",!0),this.set("ctaButtonText",this.get("strings.Shared_Button_Next")),this.set("officeRedirectToSetupOfficeCom",!1)},lookupToken:function(){var e=this,t={},n={}
return n.isPurchaseFlow=this.get("isPurchaseFlow"),o.default.busy(),this.set("hideInputBoxHint",!0),this.set("errorMessage",null),this.set("screenReaderErrorMessage",null),this.set("isCsvCurrencyMismatch",!1),this.store.findRecord("token",this.get("tokenString")).then(function(a){e.set("model.tokenInfo",a),t.name="GetTokenDescriptionSuccess",l.default.captureContentPageAction(t,e.get("customDataForTokenResult"))
var r,s,i=a.get("tokenState")
if(i=i.toLowerCase&&i.toLowerCase()||i,a.get("isPartnerManagedPIAttachRequired")){n.isPartnerManagedPIAttachRequired=!0
var d=void 0
return(d={urlType:"epayToken"}).url=b.default.get().epayTokenRedirectUrl.replace("{0}",e.get("tokenString")).replace("{1}",g.default.getClientType()),l.default.captureContentPageAction(t,n),w=Ember.run.later(e,"send","openUrl",3500),e.set("redirectMsgDetails",d),e.set("showRedirectMsg",!0),void o.default.done()}if("active"===i){var u=a.get("tokenStartDate"),c=a.get("tokenExpiryDate")
if(u&&function(e){var t=new Date(e),n=new Date
return t.getTime()-n.getTime()>0}(u))return c?e.set("errorMessage",e.get("strings.Redeem_TokenNotActiveWithStartEndDate").replace("{0}",C(u)).replace("{1}",C(c))):e.set("errorMessage",e.get("strings.Redeem_TokenNotActiveWithStartDate").replace("{0}",C(u))),void o.default.done()
if(c&&(s=new Date(c),(new Date).getTime()-s.getTime()>0))return e.set("errorMessage",e.get("strings.Redeem_TokenExpired")),void o.default.done()
if(a.get("universalStoreSkuId")||a.get("universalStoreBigIds")&&a.get("universalStoreBigIds").length){if(t.name="GetTokenDescriptionForStoreProduct",l.default.captureContentPageAction(t,n),e.get("isPurchaseFlow"))return e.set("errorMessage",e.get("strings.Purchase_Redeem_Not_Gift_Card_Error")),void o.default.done()
var f=[]
if(a.get("universalStoreBigIds"))a.get("universalStoreBigIds").forEach(function(e){var t=e.split("/")
3===t.length&&f.push({productId:t[0],skuId:t[1],availabilityId:t[2]})})
else if(a.get("universalStoreSkuId")){var p=a.get("universalStoreSkuId").split("/")
2===p.length&&f.push({productId:p[0],skuId:p[1],availabilityId:a.get("universalStoreAvailabilityId")})}if(!f.length)return t.name="ParseProductIdFailed",l.default.captureContentPageAction(t,n),e.set("errorMessage",e.get("strings.Redeem_Unknown_Server_Error")),e.set("errorCode","ParseProductIdFailed"),void o.default.done()
if(m.default.isEnabled("redeemofficeredirect")&&(r=f,Object.values(P.default.omexProductIds).containsAnyIgnoreCase(r[0].productId))){n.isPartnerManaged=a.get("isPartnerManaged"),n.productId=f[0].productId,t.name="officeRedirect",l.default.captureContentPageAction(t,n)
var h=void 0
return(h={urlType:"officeRedirect"}).url=b.default.get().epayTokenRedirectUrl.replace("{0}",e.get("tokenString")).replace("{1}",g.default.getClientType()),e.set("officeRedirectToSetupOfficeCom",!0),e.set("redirectMsgDetails",h),e.set("showRedirectMsg",!0),g.default.isXboxOneClient()||(e.set("ctaButtonText",e.get("strings.Shared_Button_Continue")),o.default.done(),e.send("enableRedeemButton")),void o.default.done()}return e.store.findRecord("product",f[0].productId).then(function(r){e.set("model.product",r),e.set("model.productBigIds",f)
var s=function(e,t){var n=void 0,a=void 0,r=t[0].skuId
return(n=e.get("DisplaySkuAvailabilities"))&&n.find&&(a=n.find(function(e){return e.Sku.SkuId.toLowerCase()===r.toLowerCase()})),a}(r,f)
if(e.set("model.displaySkuAvailability",s),e.set("model.activeAvailability",function(e,t){var n=void 0,a=[]
return e&&e.Availabilities&&e.Availabilities.find&&(t&&1===t.length?t[0].availabilityId&&(n=e.Availabilities.find(function(e){return e.AvailabilityId.toLowerCase()===t[0].availabilityId.toLowerCase()})):(t.forEach(function(e){a.push(e.availabilityId.toLowerCase())}),n=e.Availabilities.find(function(e){return a.includes(e.AvailabilityId.toLowerCase())&&e.OrderManagementData.Price.IsPIRequired})),!n&&e.Availabilities.length&&(n=e.Availabilities[0])),n}(s,f)),f&&f.length>1&&(e.set("model.piRequiredAvailability",e.get("model.activeAvailability")),e.set("model.nonPiRequiredAvailability",function(e,t){var n=void 0,a=[]
return e&&e.Availabilities&&e.Availabilities.find&&(t.forEach(function(e){a.push(e.availabilityId.toLowerCase())}),n=e.Availabilities.find(function(e){return a.includes(e.AvailabilityId.toLowerCase())&&!e.OrderManagementData.Price.IsPIRequired})),n}(s,f))),m.default.isEnabled("redeemofficeredirect")&&r.get("isOmexProduct")||m.default.isEnabled("redeemoffice365redirect")&&function(e){if(e&&e.Sku&&e.Sku.RecurrencePolicy&&e.Sku.RecurrencePolicy.RecurrenceGroup){var t=e.Sku.RecurrencePolicy.RecurrenceGroup
return t.containsIgnoreCase("office")||t.containsIgnoreCase("onedrive")}return!1}(s)){n.isPartnerManaged=a.get("isPartnerManaged"),n.productId=f[0].productId,n.isOmexProduct=r.get("isOmexProduct"),n.ResourceGroup=s&&s.Sku&&s.Sku.RecurrencePolicy&&s.Sku.RecurrencePolicy.RecurrenceGroup,t.name="officeRedirect",l.default.captureContentPageAction(t,n)
var i=void 0
return(i={urlType:"officeRedirect"}).url=b.default.get().epayTokenRedirectUrl.replace("{0}",e.get("tokenString")).replace("{1}",g.default.getClientType()),e.set("officeRedirectToSetupOfficeCom",!0),e.set("redirectMsgDetails",i),e.set("showRedirectMsg",!0),g.default.isXboxOneClient()||(e.set("ctaButtonText",e.get("strings.Shared_Button_Continue")),o.default.done(),e.send("enableRedeemButton")),void o.default.done()}e.set("model.tokenContentType","product"),t.name="GetProductDetailsSuccess",n.tokenInfo={},"7"===m.default.getFlightValue("catalogversion")?n.tokenInfo.ProductFamily=r.get("ProductFamily"):n.tokenInfo.productType=r.get("ProductType"),n.tokenInfo.productId=r.get("id"),n.tokenInfo.tokenType="product",l.default.captureContentPageAction(t,n),e.send("constructImageUrl"),e.send("hydrateParentProducts"),o.default.done(),e.send("enableRedeemButton")},function(a){t.name="GetProductDetailsFailed",n.error=a,l.default.captureContentPageAction(t,n),e.set("errorMessage",e.get("strings.Redeem_Unknown_Server_Error")),e.set("errorCode",a.code),o.default.done()})}a.get("xbox360TokenDescription")?(e.set("model.tokenContentType","xbox360"),o.default.done(),e.send("enableRedeemButton")):(e.set("model.tokenContentType","csv"),o.default.done(),e.send("enableRedeemButton"))}else e.send("handleNonActiveTokenState",i,a.get("stateReason"))
o.default.done()},function(r){if(t.name="GetTokenDescriptionFailed",n.err=r,n.isPurchaseFlow=e.get("isPurchaseFlow"),"GeoRestricted".equalsIgnoreCase(r.code)){var s=r.innerError&&r.innerError.innererror&&r.innerError.innererror.details,i=null,d=null
Array.isArray(s)&&(i=s&&s.find(function(e){return"assetId".equalsIgnoreCase(e.target)}),d=s&&s.find(function(e){return"geofencePolicyId".equalsIgnoreCase(e.target)})),n.tokenInfo={productId:i&&i.message,assetDetails:i,geofencePolicyId:d&&d.message,geofencePolicyDetails:d}}switch(n.message=r.message,r.statusCode){case 404:if(e.get("isSetupOfficeComRedirect")){var u=void 0
return(u={urlType:"setupOfficeComTokenNotFound"}).url=e.get("setupOfficeComRedirectUrl"),l.default.captureContentPageAction(t,n),e.set("redirectMsgDetails",u),e.set("showRedirectMsg",!0),void o.default.done()}e.set("errorMessage",a.default.updateRedeemErrorString(e.get("strings.Redeem_Token_Not_Found_New"),"TokenNotFound")),e.set("screenReaderErrorMessage",a.default.updateRedeemErrorString(e.get("strings.Redeem_Token_Not_Found_New"),"TokenNotFound",!0))
break
case 401:e.set("errorMessage",e.get("strings.Redeem_Token_Unauthorized"))
break
case 400:var c=void 0
if(e.get("isPurchaseFlow"))e.set("errorMessage",e.get("strings.Purchase_Redeem_Not_Gift_Card_Error"))
else if(e.get("isSetupOfficeComRedirect")&&"TokenNotSupported".equalsIgnoreCase(r.code))c={urlType:"setupOfficeCom"}
else if("TokenNotSupported".equalsIgnoreCase(r.code)||"TokenNotSupportedXbox360Content".equalsIgnoreCase(r.code)||"TokenNotSupportedSubscription".equalsIgnoreCase(r.code)||"TokenNotSupportedXboxOneContent".equalsIgnoreCase(r.code)){if(!g.default.isXboxOneClient()){var f=$("#tokenString")[0]?$("#tokenString")[0].value:"",p=[b.default.get().OtherOfficeProduct+"?token="+f,b.default.get().Office365Business,e.get("xboxTokenRedirectUrl")],h=[e.get("strings.Redeem_Token_Not_Supported_OfficeHome2"),e.get("strings.Redeem_Token_Not_Supported_Office365Business2"),"Xbox"],y=["redeemOffice365Business","redeemOtherOfficeProduct","redeemXbox360Token"]
if(m.default.isEnabled("updatetokennotsupportedstring")){var P=e.get("strings.Redeem_Token_Not_Supported_Xbox")
e.set("showXboxRedeemErrorString",!1),p.splice(p.length-1,0,b.default.get().xboxCodesOrGiftCardsLink),h.splice(h.length-1,0,P),y.splice(y.length-1,0,"redeemXboxCodesOrGiftCards")}for(var _=[],v=p.length-1,C=0;C<v;C++){var x={isToken:!0}
x.id="TokenNotFound"+C,x.urlType=y[C],x.tokenText=h[C],x.biContentName="TokenNotFoundRedirectLink",x.css="cli_RedirectMessage",x.url=p[C],_.push(x)}return e.set("redirectLinks",_),m.default.isEnabled("updatetokennotsupportedstring")?e.set("errorMessage",e.get("strings.Redeem_Token_TokenStateError_Ineligible")):e.set("errorMessage",e.get("strings.Redeem_Token_TokenStateError")),void o.default.done()}e.set("errorMessage",e.get("strings.Redeem_Token_TokenStateError"))}else"XboxSubscriptionsMismatchedMarketAndLanguage".equalsIgnoreCase(r.code)?e.set("errorMessage",a.default.updateRedeemErrorString(e.get("strings.Redeem_XboxPurchaseMismatchedMarketAndLanguageError_New"),"XboxSubscriptionsMismatchedMarketAndLanguage")):"CatalogSkuDataNotFound".equalsIgnoreCase(r.code)?e.set("errorMessage",a.default.updateRedeemErrorString(e.get("strings.Redeem_Catalog_Sku_Data_Not_Found_New"),"CatalogSkuDataNotFound")):e.set("errorMessage",e.get("strings.Redeem_Unknown_Server_Error"))
if(c){var I=void 0
return e.get("isSetupOfficeComRedirect")&&"TokenNotSupported".equalsIgnoreCase(r.code)?(c.url=e.get("setupOfficeComRedirectUrl"),I=3500):(c.url="redeemOfficeToken"===c.urlType?b.default.get().officeTokenRedirectUrl:e.get("xboxTokenRedirectUrl"),I=2500),l.default.captureContentPageAction(t,n),w=Ember.run.later(e,"send","openUrl",I),e.set("redirectMsgDetails",c),e.set("showRedirectMsg",!0),void o.default.done()}break
case 403:"GeoRestricted".equalsIgnoreCase(r.code)&&e.set("errorMessage",a.default.updateRedeemErrorString(e.get("strings.Redeem_Market_Mismatch_Error_New"),"GeoRestricted"))
break
case 500:"TokenStateError".equalsIgnoreCase(r.code)&&e.set("errorMessage",e.get("strings.Redeem_Token_TokenStateError"))}e.get("errorMessage")||e.set("errorMessage",e.get("strings.Redeem_Unknown_Server_Error")),e.set("errorCode",r.code),l.default.captureContentPageAction(t,n),o.default.done()})},actions:{handleNonActiveTokenState:function(e,t){"redeemed"===e?(this.set("errorMessage",this.get("alreadyRedeemed")),this.set("learnMoreUrl",b.default.get().learnMoreAboutRedeem)):"deactivated"===e?this.set("errorMessage",this.get("strings.Redeem_Token_Deactivated")):"inactive"===e?this.set("errorMessage",this.get("strings.Redeem_Token_Not_Active")):"scrapped"===e&&"returned".equalsIgnoreCase(t)?this.set("errorMessage",this.get("strings.Redeem_TokenScrapped_Returned")):this.set("errorMessage",this.get("strings.Redeem_TokenScrappedOrOther"))},cancel:function(){var e=this.get("customDataForBi")
if(e.isOfficeRedirectToSetupOfficeCom=this.get("officeRedirectEnabled")&&this.get("officeRedirectToSetupOfficeCom"),l.default.captureContentPageAction({name:"CancelButtonClicked"},e),this.get("isPurchaseFlow")){this.clearMessages(),this.set("tokenString","")
var t=f.default.redeemInPurchase()
t?t.context?this.replaceRoute(t.route,t.context):this.replaceRoute(t.route):this.get("dismissAfterRedeem")?n.default.send(r.default.redeemDone({status:"cancel"})):p.default.clearAndDone("cancel")}else n.default.send(r.default.done({status:"cancel"}))},changeRegionClicked:function(){var e={message:"ChangeRegion",tokenString:this.get("tokenString")}
this.get("model.tokenInfo.csvTokenDescription.currency")&&(e.currency=this.get("model.tokenInfo.csvTokenDescription.currency").toUpperCase()),n.default.send(e),o.default.busy()},enableRedeemButton:function(){this.set("isDisabled",!1),this.get("shouldShowRedeemEnterCode")||this.send("next")},constructImageUrl:function(){var e=this
this.get("productImages").getImageUrl(this.get("model.product")).then(function(t){e.set("imageUrl",t),e.set("model.imageUrl",t)})},hydrateParentProducts:function(){var e=this,t=this.get("model.product.ParentProductIds")
t&&t.length>0?this.store.query("product",{BigIds:t.slice(0,5)}).then(function(t){e.set("model.parentProducts",t.filter(function(e){return!(t=e).get("MarketProperties").some(function(e){return new Date(e.OriginalReleaseDate)>new Date})&&!["durable","consumable","unmanagedconsumable","bundle"].containsAnyIgnoreCase(t.get("ProductType"))
var t}))},function(){e.set("model.parentProducts",null)}):this.set("model.parentProducts",null)},next:function(){if(!o.default.isBusy()&&!this.get("isDisabled"))if(this.get("isPurchaseFlow")&&this.set("tokenString",""),this.get("officeRedirectEnabled")&&this.get("officeRedirectToSetupOfficeCom"))this.send("openUrl",this.get("redirectMessage")[1].url,this.get("redirectMsgDetails.urlType"),!0)
else{var e=this.get("customDataForBi")
l.default.captureContentPageAction({name:"NextButtonClicked"},e)
var t={isPurchaseFlow:this.get("isPurchaseFlow")}
t.dismissAfterRedeem=this.get("dismissAfterRedeem"),t.userConsent=void 0,t.upgradeConsent=void 0,t.threeDsSessionId=void 0,t.autoConfirm=!1,this.replaceRoute("redeem.redeemConfirm",{queryParams:t})}},viewTerms:function(){var e=void 0,t="CN".equalsIgnoreCase(s.default.get().Market)
if(e=this.get("errorMessage")&&this.get("learnMoreUrl")?this.get("learnMoreUrl"):t?b.default.get().microsoftServiceAgreement:b.default.get().storeTermsOfSale){var a=this.get("customDataForBi")
l.default.captureContentPageAction({name:"ViewTermsButtonClicked"},a),this.get("learnMoreUrl")?n.default.send(r.default.openUrl(e,"openViewTerms",!1)):t?h.default.open("msa"):"csv"!==this.get("model.tokenContentType")?h.default.open("gifttou"):h.default.open("salestou")}},viewTou:function(){"CN".equalsIgnoreCase(s.default.get().Market)?u.default.open(b.default.get().microsoftServiceAgreement,"termsOfUse"):u.default.open(b.default.get().storeTermsOfSale,"salestou")},openScanLink:function(){this.ocrScanLinkLabel&&n.default.send(r.default.launchOcrScan())},openUrl:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2]
if(w&&clearTimeout(w),this.get("officeRedirectEnabled")&&this.get("officeRedirectToSetupOfficeCom")){var s={isPurchaseFlow:this.get("isPurchaseFlow"),client:g.default.getClientType(),isContinueButton:a}
l.default.captureContentPageAction({name:"officeRedirectClicked"},s),a&&g.default.isWebClient()&&(t="_parent"),u.default.open(e,t)}else if(e&&t)n.default.send(r.default.openUrl(e,t,!0))
else{var i=this.get("redirectMsgDetails")
n.default.send(r.default.openUrl(i.url,i.urlType,!0))}},incompleteToken:function(){0!==this.get("tokenString").length&&this.get("tokenString").length!==this.get("tokenLength")&&this.set("errorMessage",this.get("strings.Incomplete_Token_Error_Message"))}},shouldShowRedeemEnterCode:Ember.computed("errorMessage",function(){return m.default.isEnabled("skipredeemcode")?!s.default.get().tokenString||!s.default.get().SkipRedeemEnterCode||!!this.get("errorMessage"):!g.default.isBuddyPassScenario()}),isMercury:Ember.computed(function(){return g.default.isMercury()}),isModernXboxClient:Ember.computed(function(){return g.default.isModernXboxClient()})})}),define("web-blends/controllers/redeem/redeem-confirm",["exports","sfw-messaging/utils/post-messages","sfw-messaging/utils/messages","sfw-telemetry/utils/start-data","sfw-telemetry/utils/blend-bi-tracker","web-blends/modules/busy","sfw-telemetry/utils/app-globals","sfw-services/utils/commerce-js","sfw-messaging/utils/open-url","web-blends/controllers/redeem","sfw-telemetry/utils/flight-config","sfw-services/utils/error-equals","web-blends/modules/return-route","web-blends/modules/flow-stack","sfw-messaging/utils/open-terms","web-blends/utils/selected-pi","sfw-services/utils/supported-payment-instruments","sfw-services/models/session-ids","sfw-services/models/select-pi","sfw-telemetry/utils/client","sfw-telemetry/utils/create-guid","web-blends/errors/redeem-error","sfw-components/utils/order-bi-data","web-blends/utils/pidl-sdk","sfw-services/errors/app-error","sfw-services/services/buddy-pass"],function(e,t,n,a,r,s,i,l,o,d,u,c,m,f,p,g,b,h,y,P,_,v,w,C,x,I){Object.defineProperty(e,"__esModule",{value:!0})
var k=null
e.default=d.default.extend({queryParams:["isPurchaseFlow","userConsent","autoConfirm","threeDsSessionId","dismissAfterRedeem"],user:Ember.inject.service(),isPurchaseFlow:!1,userConsent:null,tokenString:"",autoRenewOn:!0,redeemSuccess:!1,autoConfirm:!1,threeDsSessionId:null,challengeOrderId:null,pidl:Ember.inject.service("pidl"),dismissAfterRedeem:!1,isAutoRenewalCheckboxChecked:!1,creditCardCountry:Ember.inject.service(),autoRenewalConsent:Ember.inject.service(),init:function(){this._super()},gamertag:Ember.computed("isXboxOne",function(){return this.get("isXboxOne")&&a.default.get().Gamertag}),gamerpic:Ember.computed("isXboxOne",function(){return this.get("isXboxOne")&&a.default.get().Gamerpic}),moderngamertag:Ember.computed(function(){return P.default.isModernXboxClient()?a.default.get().ModernGamertag:""}),moderngamertagsuffix:Ember.computed(function(){return P.default.isModernXboxClient()&&a.default.get().ModernGamertagSuffix?a.default.get().ModernGamertagSuffix:""}),ismoderngamertagenabled:Ember.computed(function(){return!!this.get("moderngamertag")}),showCsvInfo:Ember.computed("model.tokenContentType",function(){return"csv"===this.get("model.tokenContentType")}),showProductInfo:Ember.computed("model.tokenContentType",function(){return"product"===this.get("model.tokenContentType")}),showXbox360Info:Ember.computed("model.tokenContentType",function(){return"xbox360"===this.get("model.tokenContentType")}),csvPreRedeemMessage:Ember.computed("model.tokenInfo",function(){var e=this.get("model.tokenInfo.csvTokenDescription")
return e&&this.get("strings.Redeem_PreRedeemCsvMessage").replace("{0}",e.csvDisplayAmount)}),rubCsvCurrency:Ember.computed("model.tokenInfo",function(){var e=this.get("model.tokenInfo.csvTokenDescription.currency"),t=this.get("model.tokenInfo.csvTokenDescription.csvAmount")
return!(!e||!t)&&(t>0&&"RUB"===e.toUpperCase())}),productTitle:Ember.computed("model.product","duration","model.userConsent",function(){var e=this.get("model.product.ProductTitle"),t=this.get("model.product.isXboxUltimate"),n="Prorate".equalsIgnoreCase(this.get("model.userConsent"))
if(t&&n)return e
var a=this.get("duration")
return a&&(e=e+" ("+a+")"),e}),showAutoRenewOnXbox:Ember.computed("model.allowAutoRenew","isXboxOne",function(){return this.get("model.allowAutoRenew")&&this.get("isXboxOne")&&!this.get("model.redeemWithPi")}),showAutoRenewOnNonXboxClients:Ember.computed("model.allowAutoRenew","isXboxOne",function(){return this.get("model.allowAutoRenew")&&!this.get("isXboxOne")&&!this.get("model.redeemWithPi")}),autoRenewTitle:Ember.computed("model.piRequiredAvailability",function(){var e=this.get("model.piRequiredAvailability")
if(e&&e.OrderManagementData&&e.OrderManagementData.Price&&e.OrderManagementData.Price.DiscountDuration&&"0"!==e.OrderManagementData.Price.DiscountDuration.Units){var t=e.OrderManagementData.Price.DiscountDuration,n=this.get("strings")["Subscribe_Auto_Renew_Discount_"+t.Units+t.UnitType]
return n='<span class="bold">'+n+"</span>",Ember.String.htmlSafe(this.get("strings.Turn_On_Recurring_PaymentTitle").replace("{0}",n))}return this.get("strings.Turn_On_Auto_Renewal_Title")}),autoRenewOnOffIndicatorTitle:Ember.computed("autoRenewOn",function(){return this.get("autoRenewOn")?this.get("strings.Shared_Label_On"):this.get("strings.Shared_Label_Off")}),selectedPi:Ember.computed("allowedPaymentInstruments","model.changedPis","model.selectedPi",function(){if(u.default.isEnabled("enableccsmd")&&this.get("model.selectedPi"))return this.get("model.selectedPi")
var e=this.get("allowedPaymentInstruments"),t=this.get("model.changedPis"),n=(0,g.default)(e,null,t&&t.id)
return this.set("model.selectedPi",n),n}),allowedPaymentInstruments:Ember.computed("model.piContainer.allPaymentInstruments","model.order",function(){var e=this.get("model.piContainer.allPaymentInstruments"),t=this.get("model.order")
return e&&b.default.getPisAllowedForOrder(e,t)}),hasAllowedPaymentInstruments:Ember.computed("allowedPaymentInstruments",function(){var e=this.get("allowedPaymentInstruments")
return e&&e.length>0}),hasPiIfRequired:Ember.computed("selectedPi","model.selectedPi","model.order.isPiRequired",function(){return(!this.get("selectedPi")||0!==this.store.peekAll("payment-instrument").get("length"))&&(this.get("selectedPi")||!this.get("model.order.isPiRequired"))}),addOnForString:Ember.computed("model.parentProducts",function(){var e=this.get("model.parentProducts"),t=e&&e.map(function(e){return e.get("ProductTitle")}).join(", ")
return t?this.get("strings.Redeem_AddOnFor").replace("{0}",t):""}),imageAltText:Ember.computed("model.product",function(){var e="Microsoft"
return this.get("showCsvInfo")||this.get("showXbox360Info")||(e=this.get("model.product.ProductTitle")),this.get("strings.Shared_Label_Logo").replace("{0}",e)}),billingInformation:Ember.computed("model.tokenInfo","model.sessionId","model.defaultAddressId",function(){var e=void 0
return e={sessionId:this.get("model.sessionId"),paymentInstrumentType:"Token",paymentInstrumentId:this.get("model.tokenInfo").id},this.get("model.allowAutoRenew")&&this.get("autoRenewOn")&&(e.secondaryPaymentInstrumentId=this.get("selectedPi").id,u.default.isEnabled("enableccsmd")&&this.get("selectedPi.soldToAddressRequired")&&this.get("model.defaultAddressId")&&(e.soldToAddressId=this.get("model.defaultAddressId"))),e}),showProfileLink:Ember.computed("model.order.isPiRequired","model.noMsaProfile","model.noEmailAddress","selectedPi",function(){return!!this.get("hasPiIfRequired")&&(!this.get("selectedPi.soldToAddressRequired")&&this.get("model.noMsaProfile")&&this.get("model.order.isPiRequired")||this.get("model.noEmailAddress")&&this.get("model.order.isPiRequired"))}),showAddAddressLink:Ember.computed("model.noProfileAddressFound","selectedPi",function(){return!(!this.get("selectedPi.soldToAddressRequired")||!this.get("model.noProfileAddressFound"))}),showSelectAddressLink:Ember.computed("model.noDefaultAddress","selectedPi",function(){return!(!this.get("selectedPi.soldToAddressRequired")||!this.get("model.noDefaultAddress"))}),showNextToAddPiButton:Ember.computed("autoRenewOn","hasPiIfRequired",function(){return this.get("autoRenewOn")&&!this.get("hasPiIfRequired")}),isConfirmButtonDisabled:Ember.computed("autoRenewOn","showProfileLink","showAddAddressLink","showSelectAddressLink","hasPiIfRequired","selectedPi.display_info.expired",function(){return this.get("autoRenewOn")&&(this.get("showAddAddressLink")||this.get("showSelectAddressLink")||this.get("showProfileLink")||!this.get("hasPiIfRequired")||this.get("selectedPi.display_info.expired"))}),autoRenewalConsentRequired:Ember.computed("autoRenewalConsent.autoRenewalConsentRequired","isConfirmButtonDisabled",function(){return this.get("autoRenewalConsent.autoRenewalConsentRequired")&&!this.get("isConfirmButtonDisabled")}),setAutoRenewalCheckboxChecked:function(e){this.set("isAutoRenewalCheckboxChecked",e)},toggleAutoRenewalCheckboxChecked:function(){this.toggleProperty("isAutoRenewalCheckboxChecked")},needsFingerprintTagging:Ember.computed("greenId",function(){return u.default.isEnabled("fingerprintredeemall")&&!!this.get("greenId")||u.default.isEnabled("fingerprintdesktopredeem")&&P.default.isDesktopClient()&&!!this.get("greenId")||P.default.isWebClient()&&!!this.get("greenId")}),greenId:Ember.computed("model.sessionId","threeDsSessionId",function(){if(this.get("threeDsSessionId"))return this.get("threeDsSessionId")
var e=void 0
return(e=i.default._sessionIds&&i.default._sessionIds.greenId)||(e=_.default.create(),i.default._sessionIds||(i.default._sessionIds=h.default.create()),i.default._sessionIds.greenId||(i.default._sessionIds.greenId=e)),e||this.get("model.sessionId")}),biToggleAutoRenewContent:Ember.computed("autoRenewOn",function(){return this.get("autoRenewOn")?"toggleOn":"toggleOff"}),biConfirmButtonContent:Ember.computed("model.allowAutoRenew","autoRenewOn",function(){var e=this.get("model.allowAutoRenew"),t=e&&this.get("autoRenewOn"),n="ConfirmAROn_"
return n+=e?"True":"False",n+="_",n+=t?"True":"False"}),isNewLegalTextLayoutEnabled:Ember.computed(function(){return!P.default.isSaturnDesktop()&&!P.default.isModernXboxClient()&&!P.default.isGamingApp()}),isKoreanTransactionFeeEnabled:Ember.computed("model.allowAutoRenew",function(){return this.get("model.allowAutoRenew")&&"KR".equalsIgnoreCase(a.default.get().Market)}),isArgentinaTransactionFeeEnabled:Ember.computed("model.allowAutoRenew",function(){return this.get("model.allowAutoRenew")&&"AR".equalsIgnoreCase(a.default.get().Market)}),isArgentinaTransactionFeeV1Enabled:Ember.computed(function(){return u.default.isEnabled("argentinatransactionfeev1")}),isBuddyPassScenario:Ember.computed(function(){return P.default.isBuddyPassScenario()}),isKoreaTransactionFeeV1Enabled:Ember.computed(function(){return u.default.isEnabled("koreatransactionfeev1")}),actions:{addPi:function(){this.get("hasPiIfRequired")||(r.default.capturePageAction($("#addPiAction"),{}),this.replaceRoute("paymentAndBilling.selectPaymentInstrumentSdk",{queryParams:{context:"selectpi"}}),r.default.capturePageAction($("#nextButton"),{}))},toggleAutoRenew:function(){var e=!this.get("autoRenewOn")
this.set("model.order.isPIRequired",e),this.set("autoRenewOn",e)
var t=this.get("model.activeAvailability"),n=this.get("model.piRequiredAvailability"),a=this.get("model.nonPiRequiredAvailability"),s=t.AvailabilityId===n.AvailabilityId?a:n
this.set("model.activeAvailability",s),u.default.isEnabled("bicontentupdate")&&Ember.run.scheduleOnce("afterRender",null,r.default.captureContentUpdate)},handleTransition:function(e,t){this.replaceRoute(e,t)},cancel:function(){var e=this.get("customDataForBi")
if(e.allowAutoRenew=this.get("model.allowAutoRenew"),e.autoRenewOn=e.allowAutoRenew&&this.get("autoRenewOn"),u.default.isEnabled("enableccsmd")){var s=this.get("creditCardCountry").getCountry()||a.default.get().Market
e.piCountry=s,e.isSmd=!s.equalsIgnoreCase(a.default.get().Market)}if(this.get("model.redeemWithPi")&&(e.redeemWithPi=!0),r.default.captureContentPageAction({name:"CancelButtonClicked"},e),this.get("isPurchaseFlow")){var i=m.default.redeemInPurchase()
m.default.cancelInRedeem(),i?i.context?this.replaceRoute(i.route,i.context):this.replaceRoute(i.route):this.get("dismissAfterRedeem")?t.default.send(n.default.redeemDone({status:"cancel"})):f.default.clearAndDone("cancel")}else t.default.send(n.default.done({status:"cancel"}))},redeemToken:function(){if(!(s.default.isBusy()||u.default.isEnabled("redeemsuccessfix")&&this.get("redeemSuccess"))){if(u.default.isEnabled("challengecheckredeem")){if(!this.get("threeDsSessionId")&&this.get("autoRenewalConsentRequired")&&!this.get("isAutoRenewalCheckboxChecked"))return this.get("autoRenewalConsent").setAutoRenewalConsentError(!0),void Ember.run.scheduleOnce("afterRender",this,function(){$("#autoRenewalConsent").focus()})}else if(this.get("autoRenewalConsentRequired")&&!this.get("isAutoRenewalCheckboxChecked")&&this.get("autoRenewOn"))return this.get("autoRenewalConsent").setAutoRenewalConsentError(!0),void Ember.run.scheduleOnce("afterRender",this,function(){$("#autoRenewalConsent").focus()})
s.default.busy()
var e={tokenType:"Token5x5",tokenValue:this.get("model.tokenInfo").id}
this.set("model.tokenValue",e.tokenValue)
var l=this.get("model.allowAutoRenew"),o=l&&this.get("autoRenewOn"),d="ConfirmAROn_"
d+=l?"True":"False",d+="_"
var m={name:"ConfirmButtonClicked",contentId:d+=o?"True":"False"}
this.get("autoConfirm")&&(m.name="3DS2Challenge")
var f=this.get("customDataForBi")
if(f.allowAutoRenew=l,f.autoRenewOn=o,o&&(f.selectedPi={id:this.get("model.selectedPi.id"),paymentMethodFamily:this.get("model.selectedPi.paymentMethod.paymentMethodFamily"),paymentMethodType:this.get("model.selectedPi.paymentMethod.paymentMethodType")}),u.default.isEnabled("enableccsmd")){var p=this.get("creditCardCountry").getCountry()||a.default.get().Market
f.piCountry=p,f.isSmd=!p.equalsIgnoreCase(a.default.get().Market)}this.get("model.redeemWithPi")&&(f.redeemWithPi=!0),r.default.captureContentPageAction(m,f)
var g,b,h,_=this,x=_.get("model.productBigIds")
x&&x.length&&(b=x[0].skuId,g=x[0].productId,h=_.get("model.activeAvailability.AvailabilityId"))
var T=function(e){var l={createOrderResult:e.serialize?e.serialize():e,orderInfo:P.default.isBuddyPassScenario()?(0,w.default)(e):{},tokenInfo:_.get("model.tokenInfo").toJSON(),isPurchaseFlow:_.get("isPurchaseFlow")}
if(u.default.isEnabled("enableccsmd")){var o=_.get("creditCardCountry").getCountry()||a.default.get().Market
l.piCountry=o,l.isSmd=!o.equalsIgnoreCase(a.default.get().Market)}if("US".equalsIgnoreCase(a.default.get().Market)&&_.get("billingInformation.soldToAddressId")){var d=_.get("model.profileDefaultAddress"),c=_.get("user").getAddressZipCodeInfo(d)
l.addressRegionInRegionList=c.addressRegionInRegionList}_.get("autoConfirm")&&(_.set("autoConfirm",!1),l.threeDsChallengeCompleted=!0),_.set("redeemSuccess",!0),_.get("model.redeemWithPi")&&(l.redeemWithPi=!0),u.default.isEnabled("upgradetelemetry")&&(l.consentCompleted=_.get("model.userConsent")),u.default.isEnabled("orderinfoinredeem")&&(l.orderInfo.productId=g||_.get("model.tokenContentType")||"NoProductId",l.orderInfo.skuId=b||"NoSkuId",l.orderInfo.availabilityId=h||"NoAvailabilityId",l.orderInfo.tokenContentType=_.get("model.tokenContentType"),l.orderInfo.productType=_.get("model.product.ProductType")||_.get("model.tokenContentType"),l.orderInfo.tokenValidationPolicy=_.get("model.tokenInfo.tokenValidationPolicy"),l.orderInfo.productTitle=_.get("model.product.ProductTitle"),l.orderInfo.orderId=e&&e.get&&e.get("orderId"),!l.orderInfo.productTitle&&_.get("model.tokenInfo.csvTokenDescription")&&(l.orderInfo.productTitle=_.get("model.tokenInfo.csvTokenDescription.csvDisplayAmount")+" "+_.get("model.tokenInfo.csvTokenDescription.currency")+" Microsoft Gift Card")),r.default.captureContentPageAction({name:"CreateOrderWithTokenSucceeded"},l),g&&h&&b&&!e.get("orderLineItems.length")&&e.set("orderLineItems",[{productId:g,skuId:b,availabilityId:h}]),_.set("model.tokenInfo",_.get("model.tokenInfo").toJSON()),_.set("model.createOrderResult",e),_.set("model.tokenValue",null),_.get("isPurchaseFlow")&&!_.get("dismissAfterRedeem")?(_.store.unloadAll("payment-instrument"),_.store.findAll("payment-instrument").then(function(e){var t=e.find(function(e){return e.get("isCsv")})
i.default._selectPiData=y.default.create(),i.default._selectPiData.selectedPis={id:t.get("id")},_.set("tokenString",""),s.default.done(),_.replaceRoute("purchase.confirm",{queryParams:{redirectedFrom:"redeem"}})})):_.get("dismissAfterRedeem")?P.default.isBuddyPassScenario()?I.default.markOfferAsClaimed().finally(function(){t.default.send(n.default.redeemDone({status:"success"}))}):t.default.send(n.default.redeemDone({status:"success"})):_.replaceRoute("redeem.success",{queryParams:{orderId:Ember.get(e,"orderId")}})},A=function e(i,l,o){var d={error:i,isPurchaseFlow:_.get("isPurchaseFlow")}
if(u.default.isEnabled("enableccsmd")){var m=_.get("creditCardCountry").getCountry()||a.default.get().Market
d.piCountry=m,d.isSmd=!m.equalsIgnoreCase(a.default.get().Market)}if(_.get("model.redeemWithPi")&&(d.redeemWithPi=!0),"US".equalsIgnoreCase(a.default.get().Market)&&_.get("billingInformation.soldToAddressId")){var f=_.get("model.profileDefaultAddress"),p=_.get("user").getAddressZipCodeInfo(f)
d.addressRegionInRegionList=p.addressRegionInRegionList}if(u.default.isEnabled("upgradetelemetry")&&(d.consentCompleted=_.get("model.userConsent")),r.default.captureContentPageAction({name:"CreateOrderWithTokenFailed"},d),"prerequisiteprofilemissing"===i.code.toLowerCase()||"accountrequiresadditionaldata"===i.code.toLowerCase())_.sendToAddAddress(T,e)
else{if(_.enablePsd2()&&c.default.is3DS2ChallengeError(i))return _.set("challengeOrderId",l.get("orderId")),_.get("store").findRecord("order",_.get("challengeOrderId")).then(function(e){var i=_.get("pidl"),l=e.get("billingInformation.secondaryPaymentInstrumentId"),o=_.get("model.selectedPi.piAccountId"),d=e.get("firstLineItem.challengePurchaseContext"),u=i.paymentSessionData(d,a.default.get().Culture,l,o,C.default.pidlSdkPartnerForChallenge(),C.default.challengeWindowSize(),!1,!0)
if(P.default.isXboxOneClient()){k=t.default.listen(function(e){_.listenChallengeMessage(e,_)}),r.default.captureContentPageAction({name:"sendChallengePostMessage"}),t.default.send(n.default.launch3DsChallenge(u))}else{var c=_.replaceRoute("purchase.riskChallengeSdk",{queryParams:{context:"challenge",challengeType:"threeds2"}})
c.data.paymentSession=u,c.data.returnFlow="redeem",s.default.done()}}).catch(function(e){e.pageDetails={orderInfo:(0,w.default)(l),productId:o},_.replaceRoute("error",e),s.default.done()})
var g=new v.default(i)
if(g.pageDetails={orderInfo:(0,w.default)(l),productId:o},u.default.isEnabled("enableccsmd")){var b=_.get("creditCardCountry").getCountry()||a.default.get().Market
g.pageDetails.piCountry=b,g.pageDetails.isSmd=!b.equalsIgnoreCase(a.default.get().Market)}if(g.code&&"csvcurrencymismatch"===g.code.toLowerCase()&&_.get("rubCsvCurrency"))return _.replaceRoute("error","RubCsvCurrencyMismatch")
_.replaceRoute("error",g),s.default.done()}},S=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]
r.default.captureContentPageAction({name:"redeemNow"})
var n=_.get("billingInformation")
n&&e&&(n.sessionId=e,t&&(n.challengeCompletedKind="3DS2"))
var s=_.store.createRecord("order",{orderAdditionalMetadata:P.default.isBuddyPassScenario()?JSON.stringify({purchaseKind:"BuddyPass"}):null,clientContext:P.default.getContext(),language:a.default.get().Languages||a.default.get().Culture,market:a.default.get().Market,orderState:"Purchased",lineItems:[]})
if(s.set("billingInformation",n),"US".equalsIgnoreCase(a.default.get().Market)&&n.soldToAddressId){var i=_.get("model.profileDefaultAddress"),l=_.get("user").getAddressZipCodeInfo(i)
r.default.captureContentPageAction({name:"zipPlusFour"},{soldToAddressId:n.soldToAddressId,soldToaddressIdRequired:!0,zipCodeLength:l.zipCodeLength,zipCodeHasHyphen:l.hasHyphen,zipPlusFour:l.zipPlusFour,addressRegionInRegionList:l.addressRegionInRegionList,transationType:"redeem"})}if(u.default.isEnabled("ultimateupgrade")&&_.get("model.userConsent")){if(h&&g&&b){var o=_.store.createRecord("orderLineItem",{availabilityId:h,productId:g,skuId:b,quantity:1})
_.get("model.userConsent")&&o.set("userConsent",_.get("model.userConsent")),s.set("lineItems",[o])}}else if(h&&g&&b)if(x&&x.length>1){var d=_.store.createRecord("orderLineItem",{availabilityId:h,productId:g,skuId:b,quantity:1})
s.set("lineItems",[d])}else if(_.get("model.redeemWithPi")&&x&&1===x.length){var c=_.store.createRecord("orderLineItem",{availabilityId:h,productId:g,skuId:b,quantity:1})
s.set("lineItems",[c])}return P.default.isBuddyPassScenario()?I.default.claimOffer().then(function(e){return _.store.findRecord("token",e).then(function(t){var n=t.get("universalStoreBigIds")[0].split("/")
if(3===n.length)return s.get("firstLineItem").set("availabilityId",n[2]),_.set("model.tokenInfo",t),_.set("dismissAfterRedeem",!0),s.get("billingInformation").paymentInstrumentId=e,s.save().then(T,function(e){return A(e,s,g)})
throw new Error("PSA returned from token did not have three parts.")})}).catch(function(e){_.replaceRoute("error",e)}):s.save().then(T,function(e){return A(e,s,g)})}
if(!_.enablePsd2()){if(u.default.isEnabled("ultimateupgrade")&&_.get("model.userConsent")){var R=_.store.createRecord("order",{orderAdditionalMetadata:P.default.isBuddyPassScenario()?JSON.stringify({purchaseKind:"BuddyPass"}):null,clientContext:P.default.getContext(),language:a.default.get().Languages||a.default.get().Culture,market:a.default.get().Market,orderState:"Purchased",lineItems:[]})
if(R.set("billingInformation",_.get("billingInformation")),h&&g&&b){var E=_.store.createRecord("orderLineItem",{availabilityId:h,productId:g,skuId:b,quantity:1})
_.get("model.userConsent")&&E.set("userConsent",_.get("model.userConsent")),R.set("lineItems",[E])}return R.save().then(T,function(e){return A(e,R,g)})}var M=_.store.createRecord("order",{orderAdditionalMetadata:P.default.isBuddyPassScenario()?JSON.stringify({purchaseKind:"BuddyPass"}):null,clientContext:P.default.getContext(),language:a.default.get().Languages||a.default.get().Culture,market:a.default.get().Market,orderState:"Purchased",lineItems:[]})
if(M.set("billingInformation",_.get("billingInformation")),h&&g&&b)if(x&&x.length>1){var B=_.store.createRecord("orderLineItem",{availabilityId:h,productId:g,skuId:b,quantity:1})
M.set("lineItems",[B])}else if(_.get("model.redeemWithPi")&&x&&1===x.length){var D=_.store.createRecord("orderLineItem",{availabilityId:h,productId:g,skuId:b,quantity:1})
M.set("lineItems",[D])}return M.save().then(T,function(e){return A(e,M,g)})}var L=_.get("billingInformation")
if(_.get("autoConfirm")&&_.get("threeDsSessionId")){if(_.get("challengeOrderId"))return _.get("store").findRecord("order",_.get("challengeOrderId")).then(function(e){return e.set("billingInformation.sessionId",_.get("threeDsSessionId")),e.set("billingInformation.challengeCompletedKind","3DS2"),e.set("orderState","Purchased"),e.save().then(T,function(t){return A(t,e,g)})}).catch(function(e){_.replaceRoute("error",e),s.default.done()})
S(_.get("threeDsSessionId"),!0)}else if(L.secondaryPaymentInstrumentId){var O=_.get("pidl")
O.setEnvironment(C.default.sdkEnvironment())
var F=C.default.pidlSdkCreateSessionOptions(!0)
F.returnOptions={callbacks:{success:function(e){if(r.default.captureContentPageAction({name:"challengeCreatePaymentSessionSuccess"}),e&&e.id&&e.isChallengeRequired)if(r.default.captureContentPageAction({name:"need3DS2Challenge"}),P.default.isXboxOneClient())k=t.default.listen(function(e){_.listenChallengeMessage(e,_)}),r.default.captureContentPageAction({name:"sendChallengePostMessage"}),t.default.send(n.default.launch3DsChallenge(e))
else{s.default.done(),P.default.isWebClient()&&_.set("threeDsSessionId",e.id)
var a=_.replaceRoute("purchase.riskChallengeSdk",{queryParams:{context:"challenge",challengeType:"threeds2"}})
a.data.paymentSession=e,a.data.returnFlow="redeem"}else e&&e.id?(r.default.captureContentPageAction({name:"noChallengeRequired"}),S()):(r.default.captureContentPageAction({name:"noChallengeSessionIdFound"}),S())},failure:function(e){r.default.captureContentPageAction({name:"challengeCreatePaymentSessionFailed"},{error:e}),S()}}}
var U=L.secondaryPaymentInstrumentId,N=_.get("model.selectedPi.piAccountId"),q=_.get("model.activeAvailability"),X=O.paymentSessionData(_.challengePurchaseContext(q),a.default.get().Culture,U,N,C.default.pidlSdkPartnerForChallenge(),C.default.challengeWindowSize(),!1,!0)
O.createPaymentSession(F,X),r.default.captureContentPageAction({name:"challengeCreatePaymentSessionCalled"})}else S()}},viewTerms:function(){var e="CN".equalsIgnoreCase(a.default.get().Market),t=this.get("customDataForBi")
t.allowAutoRenew=this.get("model.allowAutoRenew"),t.autoRenewOn=t.allowAutoRenew&&this.get("autoRenewOn"),r.default.captureContentPageAction({name:"ViewTermsButtonClicked"},t)
var n=void 0
n=e?"msa":"csv"!==this.get("model.tokenContentType")?"gifttou":"salestou",p.default.open(n)},viewTou:function(e,t){"CN".equalsIgnoreCase(a.default.get().Market)?o.default.open(e,"termsOfUse"):t&&t.containsIgnoreCase("gifttermslink")?o.default.open(e,"giftLegal"):o.default.open(e,"salestou")}},sendToAddAddress:function(e,t){var n=this
if(u.default.isEnabled("profilesdk"))return i.default._userAddAddressData={title:this.get("strings.Redeem_Add_Address_Title"),action:function(){var s,i,l,o=n.get("model.productBigIds")
o&&o.length&&(i=o[0].skuId,s=o[0].productId,l=n.get("model.activeAvailability.AvailabilityId"))
var d=n.store.createRecord("order",{orderAdditionalMetadata:P.default.isBuddyPassScenario()?JSON.stringify({purchaseKind:"BuddyPass"}):null,clientContext:P.default.getContext(),language:a.default.get().Languages||a.default.get().Culture,market:a.default.get().Market,orderState:"Purchased",lineItems:[]}),u=n.get("billingInformation")
if("US".equalsIgnoreCase(a.default.get().Market)&&u.soldToAddressId){var c=n.get("model.profileDefaultAddress"),m=n.get("user").getAddressZipCodeInfo(c)
r.default.captureContentPageAction({name:"zipPlusFour"},{soldToAddressId:u.soldToAddressId,soldToaddressIdRequired:!0,zipCodeLength:m.zipCodeLength,zipCodeHasHyphen:m.hasHyphen,zipPlusFour:m.zipPlusFour,addressRegionInRegionList:m.addressRegionInRegionList,transationType:"redeem",addAdress:!0})}if(n.enablePsd2()&&u&&u.secondaryPaymentInstrumentId&&n.get("threeDsSessionId")&&n.get("autoConfirm")&&(u.sessionId=n.get("threeDsSessionId"),u.challengeCompletedKind="3DS2"),d.set("billingInformation",u),l&&s&&i&&o&&o.length>1){var f=n.store.createRecord("orderLineItem",{availabilityId:l,productId:s,skuId:i,quantity:1})
d.set("lineItems",[f])}return d.save().then(e,function(e){return t(e,d,s)})}},this.replaceRoute("paymentAndBilling.profileSdk",{queryParams:{context:"profile",nextContext:"addaddress",puid:"me"}}).then(function(){s.default.done()})
i.default._userAddAddressData={title:this.get("strings.Redeem_Add_Address_Title"),action:function(o,d){var u=d.originalPidl,m=d.data
Array.isArray(u)&&Array.isArray(m)&&u.length>0&&m.length>0?(s.default.busy(),l.default.tokenizeUserInputData(u[0],m[0]).then(function(){if(m[0]){var e=m[0]
return o.get("user").getProfile().then(function(t){return t.set("default_address",n.get("store").createRecord("address",e)),t.set("default_address_id",e.id),t.save().then(function(){return n.store&&n.store.unloadAll("profile"),!0},function(e){return c.default.isAddDefaultAddressUserError(e)?(i.default._userAddressPidlData.me.pifdValidationError=e,o.replaceRoute("paymentAndBilling.addName",{queryParams:{context:"addaddress",puid:"me"}}),!1):(o.replaceRoute("error",e),!1)})})}return o.replaceRoute("error",l.default.geterrordetails("no tokenized user address found")),!1},function(e){return o.replaceRoute("error",e),!1}).then(function(s){if(s){var i,l,o,d=n.get("model.productBigIds")
d&&d.length&&(l=d[0].skuId,i=d[0].productId,o=n.get("model.activeAvailability.AvailabilityId"))
var u=n.store.createRecord("order",{orderAdditionalMetadata:P.default.isBuddyPassScenario()?JSON.stringify({purchaseKind:"BuddyPass"}):null,clientContext:P.default.getContext(),language:a.default.get().Languages||a.default.get().Culture,market:a.default.get().Market,orderState:"Purchased",lineItems:[]}),c=n.get("billingInformation")
if(u.set("billingInformation",c),"US".equalsIgnoreCase(a.default.get().Market)&&c.soldToAddressId){var m=n.get("model.profileDefaultAddress"),f=n.get("user").getAddressZipCodeInfo(m)
r.default.captureContentPageAction({name:"zipPlusFour"},{soldToAddressId:c.soldToAddressId,soldToaddressIdRequired:!0,zipCodeLength:f.zipCodeLength,zipCodeHasHyphen:f.hasHyphen,zipPlusFour:f.zipPlusFour,addressRegionInRegionList:f.addressRegionInRegionList,transationType:"redeem",addAdress:!0})}if(o&&i&&l&&d&&d.length>1){var p=n.store.createRecord("orderLineItem",{availabilityId:o,productId:i,skuId:l,quantity:1})
u.set("lineItems",[p])}return u.save().then(e,function(e){return t(e,u,i)})}}).finally(function(){s.default.done()})):o.replaceRoute("error","InvalidData")}},this.replaceRoute("paymentAndBilling.addName",{queryParams:{context:"addaddress",puid:"me"}}),s.default.done()},listenChallengeMessage:function(e,t){if(e){var n=e.message
if("challengeCompleted".equalsIgnoreCase(n)){var a=e.status,i=e.paymentSession,l=i&&i.id,o=i&&i.challengeStatus
k&&k.unsubscribe(),r.default.captureContentPageAction({name:"challengeCompletedPostMessage"},{status:e.status,error:e.error,challengeStatus:o}),s.default.done()
var d=void 0
"success".equalsIgnoreCase(a)&&l&&"succeeded".equalsIgnoreCase(o)?(r.default.captureContentPageAction({name:"threedsChallengeSuccess"}),t.set("threeDsSessionId",l),t.set("autoConfirm",!0),t.send("redeemToken")):"cancel".equalsIgnoreCase(a)?(s.default.busy(),r.default.captureContentPageAction({name:"threedsChallengeCancelled"}),f.default.clearAndDone("cancel")):"failed".equalsIgnoreCase(o)?((d=new x.default("ChallengeFailure")).message={threeDsChallenge:!0},t.replaceRoute("error",d)):"timedOut".equalsIgnoreCase(o)?((d=new x.default("ChallengeTimedOut")).message={threeDsChallenge:!0},t.replaceRoute("error",d)):"success".equalsIgnoreCase(a)&&"succeeded".equalsIgnoreCase(o)?l||((d=new x.default("NoSessionFound")).message={threeDsChallenge:!0},t.replaceRoute("error",d)):((d=new x.default("ChallengeStatusFailure")).message={threeDsChallenge:!0,status:a,challengeStatus:o},t.replaceRoute("error",d))}}},challengePurchaseContext:function(e){var t=e&&e.OrderManagementData&&e.OrderManagementData.Price
return{amount:t&&t.ListPrice,currency:t&&t.CurrencyCode,country:a.default.get().Market}},enablePsd2:function(){return P.default.isXboxOneClient()&&u.default.isEnabled("psd2xboxenable")||!P.default.isXboxOneClient()&&u.default.isEnabled("psd2enable")}})}),define("web-blends/controllers/redeem/redirect-confirm",["exports","web-blends/controllers/redeem","sfw-messaging/utils/open-url","web-blends/modules/flow-stack","sfw-services/utils/redirection-service-url"],function(e,t,n,a,r){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({actions:{redirect:function(){n.default.open(r.default.getAveUrl(),"aveRedirect"),this.replaceRoute("redeem.redirectContinue")},cancel:function(){a.default.clearAndDone("cancel")}}})}),define("web-blends/controllers/redeem/redirect-continue",["exports","web-blends/controllers/redeem","web-blends/modules/flow-stack"],function(e,t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({actions:{confirm:function(){this.replaceRoute("redeem.redeemConfirm",{queryParams:{aveTryAgain:!0}})},tryAgain:function(){this.replaceRoute("redeem.redirectConfirm")},cancel:function(){n.default.clearAndDone("cancel")}}})}),define("web-blends/controllers/redeem/success",["exports","sfw-messaging/utils/post-messages","sfw-messaging/utils/messages","web-blends/modules/busy","sfw-telemetry/utils/blend-bi-tracker","sfw-services/utils/format-price","sfw-telemetry/utils/user-agent","sfw-telemetry/utils/start-data","sfw-telemetry/utils/flight-config","web-blends/controllers/redeem","sfw-telemetry/utils/client","sfw-services/utils/external-urls","sfw-services/utils/constant-links"],function(e,t,n,a,r,s,i,l,o,d,u,c,m){Object.defineProperty(e,"__esModule",{value:!0}),e.default=d.default.extend({contactPreference:Ember.inject.service(),showShopCTALinks:Ember.computed("isLayoutModalOrXboxOneClient","model.hasXbox360","model.hasCsv",function(){return this.get("model.hasCsv")&&u.default.isInlineClient()&&!this.get("model.hasXbox360")}),showCloseCTA:Ember.computed("showShopCTALinks","isLayoutModalOrXboxOneClient","model.hasXbox360",function(){return!this.get("showShopCTALinks")&&(this.get("isLayoutModalOrXboxOneClient")||u.default.isUniversalStoreNativeClient()||u.default.isInAppClient()||this.get("model.hasXbox360"))}),showContactPreference:Ember.computed.oneWay("model.product.isOmexProduct"),showRedeemAnother:Ember.computed(function(){return o.default.isEnabled("redeemother")}),showNewRedeemCSV:Ember.computed("showShopCTALinks",function(){return this.get("showShopCTALinks")}),xboxUltimateApp:Ember.computed("model.product.isXboxUltimate",function(){return u.default.isAMCClient()&&this.get("model.product.isXboxUltimate")?{googleStoreURL:c.default.get("XboxUltimateGoogleStoreUrl").toString(),appleStoreURL:c.default.get("XboxUltimateAppleStoreUrl").toString(),windowsStoreURL:c.default.get("XboxUltimateWindowsStoreUrl").toString()}:null}),showRedeemSuccessImprovement:Ember.computed("model.product.isXboxUltimate","model.product.isXboxGamePassForPC","model.product.isXboxGamePassForXbox",function(){return o.default.isEnabled("redeemsuccessimprovement")&&(this.get("model.product.isXboxUltimate")||this.get("model.product.isXboxGamePassForPC")||this.get("model.product.isXboxGamePassForXbox"))}),showCTALinksForUltimate:Ember.computed("model.product.isXboxUltimate",function(){return u.default.isAMCClient()&&this.get("model.product.isXboxUltimate")?{xboxComPlayURL:c.default.get("xboxComPlayURL").toString(),xboxConsoleURL:c.default.get("xboxConsoleURL").toString(),xboxAppWinPCURL:c.default.get("xboxAppWinPCURL").toString(),xboxMobAppSamsungGalaxyStoreURL:c.default.get("xboxMobAppSamsungGalaxyStoreURL").toString(),xboxMobAppGooglePlayStoreURL:c.default.get("xboxMobAppGooglePlayStoreURL").toString(),xboxUltimateAppleStoreUrl:c.default.get("XboxUltimateAppleStoreUrl").toString()}:null}),showCTALinksForUltimateV2:Ember.computed("model.product.isXboxUltimate",function(){return u.default.isAMCClient()&&this.get("model.product.isXboxUltimate")?{xboxComPlayURL:c.default.get("xboxComPlayURL").toString(),xboxConsoleURL:c.default.get("xboxConsoleURL").toString(),xboxAppWinPCURL:c.default.get("xboxAppWinPCURL").toString(),xboxMobAppSamsungGalaxyStoreURL:c.default.get("xboxMobAppSamsungGalaxyStoreURL").toString(),xboxMobAppGooglePlayStoreURL:c.default.get("xboxMobAppGooglePlayStoreURL").toString(),xboxUltimateAppleStoreUrl:c.default.get("XboxUltimateAppleStoreUrl").toString(),xboxUltimateSmartTV:c.default.get("xboxUltimateSmartTV").toString()}:null}),showCTALinksForPC:Ember.computed("model.product.isXboxGamePassForPC",function(){return u.default.isAMCClient()&&this.get("model.product.isXboxGamePassForPC")?{xboxAppWinPCURL:c.default.get("xboxAppWinPCURL").toString()}:null}),showCTALinksForConsole:Ember.computed("model.product.isXboxGamePassForXbox",function(){return u.default.isAMCClient()&&this.get("model.product.isXboxGamePassForXbox")?{xboxComURL:c.default.get("xboxComURL").toString(),xboxMobAppSamsungGalaxyStoreURL:c.default.get("xboxMobAppSamsungGalaxyStoreURL").toString(),xboxMobAppGooglePlayStoreURL:c.default.get("xboxMobAppGooglePlayStoreURL").toString(),xboxUltimateAppleStoreUrl:c.default.get("XboxUltimateAppleStoreUrl").toString()}:null}),showCTALinksForGoldLive:Ember.computed("model.product.isXboxLiveGold",function(){return u.default.isAMCClient()&&this.get("model.product.isXboxLiveGold")?{xboxGamePassCoreURL:c.default.get("xboxGamePassCoreURL").toString(),xboxAllConsolesURL:c.default.get("xboxAllConsolesURL").toString()}:null}),showRedeemSuccessImprovementGoldLive:Ember.computed("model.product.isXboxLiveGold",function(){return o.default.isEnabled("redeemsuccessimprovementgoldlive")&&this.get("model.product.isXboxLiveGold")}),showRedeemSuccessImprovementV2:Ember.computed("model.product.isXboxUltimate","model.product.isXboxGamePassForPC","model.product.isXboxGamePassForXbox",function(){return o.default.isEnabled("redeemsuccessimprovementv2")&&(this.get("model.product.isXboxUltimate")||this.get("model.product.isXboxGamePassForPC")||this.get("model.product.isXboxGamePassForXbox"))}),actions:{close:function(){if(this.get("showContactPreference")&&this.get("contactPreference").send("WebBlend"),u.default.isWebClient()||u.default.isXboxOneOOBEClient())this.get("model.hasCsv")||this.get("model.hasXbox360")||u.default.isXboxOneOOBEClient()?t.default.send(n.default.done({status:"success"})):this.get("model.product.IsMovie")?t.default.send(n.default.openUrl(this.get("watchMovieUrl"),"redeemWatchVideo",!0)):t.default.send(n.default.openUrl(this.get("model.targetUrlInfo.targetUrl"),"redeemGetProduct",!0,!0))
else{var e={status:"success",data:{orderId:this.get("model.orderId")}}
this.get("model.hasCsv")||(e.data.orderLineItems=this.get("model.orderResult.orderLineItems"),this.get("model.hasXbox360")||u.default.isInAppClient()&&u.default.isXboxOneClient()||(this.get("model.product.IsMovie")?e.data.targetUrl=this.get("watchMovieUrl"):e.data.targetUrl=this.get("model.targetUrlInfo.targetUrl"))),t.default.send(n.default.done(e))}a.default.busy()},redeemAnother:function(){this.replaceRoute("redeem.enterCode",{queryParams:{invokeType:"redeemAnother"}})},getAppClicked:function(){var e,s=this.get("model.product.ParentProductIds")
e=s&&s.length>0?s[0]:this.get("model.product").id
var i=this.get("customDataForBi")
i.clickType="Product",i.productId=e,r.default.captureContentPageAction({name:"PostRedeemClick"},i),t.default.send(n.default.openUrl(this.get("model.targetUrlInfo.targetUrl"),"redeemGetProduct",!0,!0)),a.default.busy()},watchMovieClicked:function(){var e=this.get("model.product.AlternateZuneId"),s=this.get("customDataForBi")
s.clickType="Movie",s.zuneId=e,r.default.captureContentPageAction({name:"PostRedeemClick"},s),t.default.send(n.default.openUrl(this.get("watchMovieUrl"),"redeemWatchVideo",!0)),a.default.busy()},helpfulLinksClicked:function(e){if(e&&e.length){var a=e.startsWithIgnoreCase("http")
t.default.send(n.default.openUrl(e,"shopLinkCSV",a,!0))}}},redeemProductInstallBuyWarning:Ember.computed(function(){return i.default.isFromWin8XDevice()||i.default.isFromWinPhone81Device()||i.default.isFromWinPhone8Device()?this.get("strings.Redeem_ProductInstallBuyWarning"):null}),xboxRedeemSucceedMessage:Ember.computed("isXboxOne","model.hasXbox360","model.product.IsDurable","model.product.IsGame","model.platformCompatibilities",function(){if(this.get("isXboxOne")||this.get("model.hasXbox360")){if(this.get("model.product.IsDurable")||this.get("model.product.IsGame"))return this.get("strings.Redeem_Succeed_Message")}else if(this.get("model.product.IsGame")){var e=this.get("model.platformCompatibilities")
if(e&&e.containsAnyIgnoreCase("xbox"))return this.get("strings.Redeem_XBox_Succeed_Message")}return null}),csvBalance:Ember.computed("model.csvPi","model.hideBalance",function(){var e=this.get("model.csvPi.details"),t=this.get("model.hideBalance")
if(e&&!t){var n=e.balance,a=e.currency
return{price:n,priceFormat:this.get("showNewRedeemCSV")?this.get("strings.Redeem_TokenAmountAvailable").replace("{amount}",s.default.getBasicPriceFormatString()):this.get("strings.Redeem_Success_CsvNewBalance").replace("{amount}",s.default.getBasicPriceFormatString()),currencyCode:a}}return null}),showOfficeActivationMessage:Ember.computed(function(){return o.default.isEnabled("setupofficeredirect")&&u.default.isSetupOfficeComClient()}),officeActivationMessage:Ember.computed(function(){return this.get("strings.Office_Redeem_Success_Activation")}),csvTokenAmount:Ember.computed("model.tokenInfo",function(){var e=this.get("model.tokenInfo")
if(e&&e.csvTokenDescription){var t=e.csvTokenDescription.csvAmount,n=e.csvTokenDescription.currency
return{price:t,priceFormat:this.get("strings.Redeem_TokenAmountAdded").replace("{amount}",s.default.getBasicPriceFormatString()),currencyCode:n}}return null}),productTitle:Ember.computed("model.product",function(){var e=this.get("model.parentProducts"),t=e&&e.map(function(e){return e.get("ProductTitle")}).join(", "),n=this.get("model.product.ParentProductIds")
return t||(n&&n.length?"":this.get("model.product.ProductTitle"))}),getAppString:Ember.computed("model.product.IsApp","model.targetUrlInfo.canLinkToClientStoreApp","productTitle",function(){var e=this.get("productTitle")
return e&&u.default.isWebClient()?this.get("model.product.isGamePassProduct")?this.get("strings.Redeem_Go_To_Product_Game_Pass"):this.get("model.product.IsApp")&&this.get("model.targetUrlInfo.canLinkToClientStoreApp")?this.get("strings.Redeem_Get_Product").replace("{0}",e):this.get("strings.Redeem_Go_To_Product").replace("{0}",e):null}),successMessageTitle:Ember.computed("model.hasCsv","model.product.IsMovie","model.product.ProductTitle","model.hasXbox360","xboxRedeemSucceedMessage",function(){var e=""
return this.get("model.hasXbox360")?e=this.get("strings.Redeem_Success_Product_Ready").replace("{productName}",this.get("model.tokenInfo.xbox360TokenDescription.reducedTitle")):this.get("model.product.ProductTitle")&&(e=this.get("strings.Redeem_Success_Product_Ready").replace("{productName}",this.get("model.product.ProductTitle"))),e}),watchMovieUrl:Ember.computed("model.product",function(){var e=this.get("model.product").id
return e?c.default.get("ShopMovieUrlFormat").toString().replace("{0}",e):c.default.get("ShopMoviesDefaultUrl").toString()}),watchMovieString:Ember.computed("model.product",function(){return this.get("model.product.AlternateZuneId")?this.get("strings.Redeem_Watch_Video").replace("{0}",this.get("model.product.ProductTitle")):this.get("strings.Redeem_Watch_Video_NoZuneId").replace("{0}",'<a href="'+m.default.get().xboxVideo+'">').replace("{1}","</a>")}),csvLinks:Ember.computed(function(){var e=l.default.get().Market.toLowerCase(),t=[],n=1
return t.push({name:"games",slot:n++}),t.push({name:"apps",slot:n++}),-1===e.indexOf("jp")&&t.push({name:"music",slot:n++}),-1===e.indexOf("ar")&&-1===e.indexOf("be")&&-1===e.indexOf("pt")&&t.push({name:"movies",slot:n++}),t}),csvLinksClass:Ember.computed(function(){return 4===this.get("csvLinks").length?"col-lg-6 col-sm-12":"col-md-8"}),getGiftCardFaqUrl:Ember.computed(function(){return m.default.get().giftCardFaq}),getCheckAccountBalanceUrl:Ember.computed(function(){return m.default.get().checkAccountBalance}),getGiftTermsConditionsUrl:Ember.computed(function(){return m.default.get().giftTermsConditions}),getMicrosoftServiceAgreementUrl:Ember.computed(function(){return m.default.get().microsoftServiceAgreement})})}),define("web-blends/controllers/rewards/claim-incentive",["exports","web-blends/modules/flow-stack","sfw-services/errors/app-error","web-blends/modules/busy","sfw-services/utils/constant-links","sfw-components/utils/template-tokenizer","sfw-messaging/utils/open-url","sfw-telemetry/utils/client","web-blends/utils/rewards","sfw-services/utils/currency-formatter"],function(e,t,n,a,r,s,i,l,o,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend({checkboxIsChecked:!1,isXboxOne:Ember.computed(function(){return l.default.isXboxOneClient()}),claimButtonIsDisabled:Ember.computed("checkboxIsChecked",function(){return!this.get("model.isRewardsMember")&&!this.get("checkboxIsChecked")}),legalLink:Ember.computed(function(){return r.default.get().microsoftServiceAgreement}),privacyLink:Ember.computed(function(){return r.default.get().privacyStatement}),offerTitle:Ember.computed("model.offerId",function(){return this.get("strings.RewardsOffer_Title").replace("{amount}",d.default.formatCurrency(5,"usd"))}),imageParts:Ember.computed("model.offerId",function(){var e={link:"https://assets.onestore.ms/cdnfiles/webblend/images/logo_microsoft.png"}
return e.altText=this.get("strings.Shared_Label_Logo").replace("{0}","Microsoft"),e.description=this.get("strings.RedeemOffer_PreRewardsCsvMessage").replace("{0}",d.default.formatCurrency(5,"usd")),e}),offerDescription:Ember.computed("model.offerId",function(){return this.get("strings.RewardsOffer_Description")}),legalParts:Ember.computed("model.offerId",function(){var e=this
return s.default.tokenize(this.get("strings.RewardsOffer_Legal_Text"),["msaTou","privacy"],function(t){return"msaTou"===t?e.get("strings.Microsoft_Service_Agreement_Link"):e.get("strings.RewardsOffer_PrivacyStatement")},function(t){return"msaTou"===t.value?(t.url=e.get("legalLink"),t.id="legalStatement",t.biContentName="Legal Statement"):(t.url=e.get("privacyLink"),t.id="privacyStatement",t.biContentName="Privacy Statement"),t})}),checkboxText:Ember.computed("model.offerId",function(){return this.get("strings.RewardsOffer_Become_Rewards_Member")}),becomeRewardsMember:function(e){return this.get("store").createRecord("createRewardsUser",{id:"me",offerid:e}).save()},tryToClaimPromotion:function(e,t){var n=this
return this.get("store").createRecord("rewardsClaimPromotion",{id:"me",attributes:{offerid:e,scenario:t}}).save().then(function(){n.replaceRoute("redeem.success",{queryParams:{fromRewardsClaimIncentive:!0}})}).catch(function(e){n.replaceRoute("error",e)})},actions:{cancel:function(){t.default.clearAndDone("cancel")},claim:function(){var e=this
if(a.default.busy(),this.get("model.isRewardsMember"))this.tryToClaimPromotion(this.get("model.rewardsOfferId"),this.get("model.rewardsScenario"))
else{var t=this.get("model.offerId")
this.becomeRewardsMember(t).then(function(a){var r=o.default.findEligibleOffer(a,t)
if(!(r&&r.attributes&&r.attributes.scenario&&r.attributes.offerid))throw new n.default("RewardsUserIneligible")
e.tryToClaimPromotion(r.attributes.offerid,r.attributes.scenario)}).catch(function(t){e.replaceRoute("error",t)})}},openLegalStatement:function(e,t){i.default.open(e,t)}}})}),define("web-blends/errors/redeem-error",["exports","sfw-services/errors/base-service-error","sfw-services/errors/service-error"],function(e,t,n){function a(e){e instanceof n.PurchaseError||t.default.call(this,"SVC","RedeemUnknownServerError",null,null,null,e)
var a=e.code
if(500===e.statusCode)a="transaction_e_expired_token".equalsIgnoreCase(e.message)?"RedeemTokenExpired":"unknownexternalerror".equalsIgnoreCase(e.code)&&"tokenstate".equalsIgnoreCase(e.innerError.innererror.target)?"RedeemTokenStateError":"RedeemInternalServerError"
else if(503===e.statusCode)a="RedeemServiceUnavailable"
else if(401===e.statusCode)a="RedeemTokenUnauthorized"
else{if(!("TokenNotInRedeemableState"===e.code&&e.innerError.innererror.data.includes("Redeemed")||"TokenAlreadyInRedeemedState"===e.code))return e
a="RedeemTokenAlreadyRedeemed"}t.default.call(this,"SVC",a,null,e.message,e.statusCode,e,e.cv,e.source)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=a,a.prototype=Object.create(t.default.prototype)}),define("web-blends/helpers/and",["exports","ember-truth-helpers/helpers/and"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0})
var n=null
Ember.Helper?n=Ember.Helper.helper(t.andHelper):Ember.HTMLBars.makeBoundHelper&&(n=Ember.HTMLBars.makeBoundHelper(t.andHelper)),e.default=n}),define("web-blends/helpers/app-version",["exports","web-blends/config/environment","ember-cli-app-version/utils/regexp"],function(e,t,n){function a(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.default.APP.version,s=a.versionOnly||a.hideSha,i=a.shaOnly||a.hideVersion,l=null
return s&&(a.showExtended&&(l=r.match(n.versionExtendedRegExp)),l||(l=r.match(n.versionRegExp))),i&&(l=r.match(n.shaRegExp)),l?l[0]:r}Object.defineProperty(e,"__esModule",{value:!0}),e.appVersion=a,e.default=Ember.Helper.helper(a)}),define("web-blends/helpers/eq",["exports","ember-truth-helpers/helpers/equal"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0})
var n=null
Ember.Helper?n=Ember.Helper.helper(t.equalHelper):Ember.HTMLBars.makeBoundHelper&&(n=Ember.HTMLBars.makeBoundHelper(t.equalHelper)),e.default=n}),define("web-blends/helpers/gt",["exports","ember-truth-helpers/helpers/gt"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0})
var n=null
Ember.Helper?n=Ember.Helper.helper(t.gtHelper):Ember.HTMLBars.makeBoundHelper&&(n=Ember.HTMLBars.makeBoundHelper(t.gtHelper)),e.default=n}),define("web-blends/helpers/gte",["exports","ember-truth-helpers/helpers/gte"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0})
var n=null
Ember.Helper?n=Ember.Helper.helper(t.gteHelper):Ember.HTMLBars.makeBoundHelper&&(n=Ember.HTMLBars.makeBoundHelper(t.gteHelper)),e.default=n}),define("web-blends/helpers/is-array",["exports","ember-truth-helpers/helpers/is-array"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0})
var n=null
Ember.Helper?n=Ember.Helper.helper(t.isArrayHelper):Ember.HTMLBars.makeBoundHelper&&(n=Ember.HTMLBars.makeBoundHelper(t.isArrayHelper)),e.default=n}),define("web-blends/helpers/is-equal",["exports","ember-truth-helpers/helpers/is-equal"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"isEqual",{enumerable:!0,get:function(){return t.isEqual}})}),define("web-blends/helpers/is-flight-enabled",["exports","sfw-telemetry/helpers/is-flight-enabled"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/helpers/lt",["exports","ember-truth-helpers/helpers/lt"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0})
var n=null
Ember.Helper?n=Ember.Helper.helper(t.ltHelper):Ember.HTMLBars.makeBoundHelper&&(n=Ember.HTMLBars.makeBoundHelper(t.ltHelper)),e.default=n}),define("web-blends/helpers/lte",["exports","ember-truth-helpers/helpers/lte"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0})
var n=null
Ember.Helper?n=Ember.Helper.helper(t.lteHelper):Ember.HTMLBars.makeBoundHelper&&(n=Ember.HTMLBars.makeBoundHelper(t.lteHelper)),e.default=n}),define("web-blends/helpers/not-eq",["exports","ember-truth-helpers/helpers/not-equal"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0})
var n=null
Ember.Helper?n=Ember.Helper.helper(t.notEqualHelper):Ember.HTMLBars.makeBoundHelper&&(n=Ember.HTMLBars.makeBoundHelper(t.notEqualHelper)),e.default=n}),define("web-blends/helpers/not",["exports","ember-truth-helpers/helpers/not"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0})
var n=null
Ember.Helper?n=Ember.Helper.helper(t.notHelper):Ember.HTMLBars.makeBoundHelper&&(n=Ember.HTMLBars.makeBoundHelper(t.notHelper)),e.default=n}),define("web-blends/helpers/or",["exports","ember-truth-helpers/helpers/or"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0})
var n=null
Ember.Helper?n=Ember.Helper.helper(t.orHelper):Ember.HTMLBars.makeBoundHelper&&(n=Ember.HTMLBars.makeBoundHelper(t.orHelper)),e.default=n}),define("web-blends/helpers/pluralize",["exports","ember-inflector/lib/helpers/pluralize"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default}),define("web-blends/helpers/singularize",["exports","ember-inflector/lib/helpers/singularize"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default}),define("web-blends/helpers/sum",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.sum=n
var t=function(){return function(e,t){if(Array.isArray(e))return e
if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,s=void 0
try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,s=e}finally{try{!a&&l.return&&l.return()}finally{if(r)throw s}}return n}(e,t)
throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()
function n(e){var n=t(e,2)
return n[0]+n[1]}e.default=Ember.Helper.helper(n)}),define("web-blends/helpers/xor",["exports","ember-truth-helpers/helpers/xor"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0})
var n=null
Ember.Helper?n=Ember.Helper.helper(t.xorHelper):Ember.HTMLBars.makeBoundHelper&&(n=Ember.HTMLBars.makeBoundHelper(t.xorHelper)),e.default=n})
define("web-blends/initializers/app-version",["exports","ember-cli-app-version/initializer-factory","web-blends/config/environment"],function(e,t,n){Object.defineProperty(e,"__esModule",{value:!0})
var a=void 0,r=void 0
n.default.APP&&(a=n.default.APP.name,r=n.default.APP.version),e.default={name:"App Version",initialize:(0,t.default)(a,r)}}),define("web-blends/initializers/container-debug-adapter",["exports","ember-resolver/resolvers/classic/container-debug-adapter"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"container-debug-adapter",initialize:function(){var e=arguments[1]||arguments[0]
e.register("container-debug-adapter:main",t.default),e.inject("container-debug-adapter:main","namespace","application:main")}}}),define("web-blends/initializers/data-adapter",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"data-adapter",before:"store",initialize:function(){}}}),define("web-blends/initializers/ember-data",["exports","ember-data/setup-container","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"ember-data",initialize:t.default}}),define("web-blends/initializers/export-application-global",["exports","web-blends/config/environment"],function(e,t){function n(){var e=arguments[1]||arguments[0]
if(!1!==t.default.exportApplicationGlobal){var n
if("undefined"!=typeof window)n=window
else if("undefined"!=typeof global)n=global
else{if("undefined"==typeof self)return
n=self}var a,r=t.default.exportApplicationGlobal
a="string"==typeof r?r:Ember.String.classify(t.default.modulePrefix),n[a]||(n[a]=e,e.reopen({willDestroy:function(){this._super.apply(this,arguments),delete n[a]}}))}}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=n,e.default={name:"export-application-global",initialize:n}}),define("web-blends/initializers/injectStore",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"injectStore",before:"store",initialize:function(){}}}),define("web-blends/initializers/store",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"store",after:"ember-data",initialize:function(){}}}),define("web-blends/initializers/transforms",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"transforms",before:"store",initialize:function(){}}}),define("web-blends/initializers/truth-helpers",["exports","ember-truth-helpers/utils/register-helper","ember-truth-helpers/helpers/and","ember-truth-helpers/helpers/or","ember-truth-helpers/helpers/equal","ember-truth-helpers/helpers/not","ember-truth-helpers/helpers/is-array","ember-truth-helpers/helpers/not-equal","ember-truth-helpers/helpers/gt","ember-truth-helpers/helpers/gte","ember-truth-helpers/helpers/lt","ember-truth-helpers/helpers/lte"],function(e,t,n,a,r,s,i,l,o,d,u,c){function m(){Ember.Helper||((0,t.registerHelper)("and",n.andHelper),(0,t.registerHelper)("or",a.orHelper),(0,t.registerHelper)("eq",r.equalHelper),(0,t.registerHelper)("not",s.notHelper),(0,t.registerHelper)("is-array",i.isArrayHelper),(0,t.registerHelper)("not-eq",l.notEqualHelper),(0,t.registerHelper)("gt",o.gtHelper),(0,t.registerHelper)("gte",d.gteHelper),(0,t.registerHelper)("lt",u.ltHelper),(0,t.registerHelper)("lte",c.lteHelper))}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=m,e.default={name:"truth-helpers",initialize:m}}),define("web-blends/instance-initializers/app-services",["exports","sfw-services/instance-initializers/app-services"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"initialize",{enumerable:!0,get:function(){return t.initialize}})}),define("web-blends/instance-initializers/ember-data",["exports","ember-data/instance-initializers/initialize-store-service"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"ember-data",initialize:t.default}}),define("web-blends/mixins/legal-strings",["exports","sfw-components/utils/purchase-legal-strings"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Mixin.create({legalStrings:Ember.computed(function(){return(0,t.default)()})})}),define("web-blends/mixins/pidl-sdk-container",["exports","sfw-telemetry/utils/app-globals","sfw-telemetry/utils/client","web-blends/config/environment","sfw-telemetry/utils/flight-config","web-blends/utils/pidl-event-handler","sfw-services/utils/service-call-headers","sfw-telemetry/utils/start-data","web-blends/utils/feature-enable"],function(e,t,n,a,r,s,i,l,o){Object.defineProperty(e,"__esModule",{value:!0})
e.default=Ember.Mixin.create({afterModel:function(e){this._super(e)
var d=this.get("model.isRedeem");(r.default.isEnabled("addresssdk")||r.default.isEnabled("profilesdk"))&&e.additionalHeaders?r.default.isEnabled("vnextpis")&&(e.additionalHeaders["x-ms-flight"]="vnext"):e.additionalHeaders=i.default.get({omitAcceptLanguage:!0,omitMarket:!0,addVnext:r.default.isEnabled("vnextpis"),piRewardsIncentiveOfferId:e.piRewardsIncentiveOfferId,add3DSOne:o.default.isIndia3DSFeatureEnabled(d),addIndiaTokenizationText:r.default.isEnabled("indiatokenizationtext"),addIndiaHideExpiryDate:r.default.isEnabled("indiahideexpirarydate"),addVenmoFlightHeaders:r.default.isEnabled("venmoflightheaders"),addPiCaptchaTestHeaders:r.default.isEnabled("addpicaptchatestheaders"),addPiCaptchaFlightHeaders:o.default.isCaptchaFlightHeaderEnabled()}),r.default.isEnabled("addpipidltestheader")?(e.additionalHeaders["x-ms-test"]='{ "scenarios": "px-service-psd2-e2e-emulator,BillDeskForceCreateToken,BillDeskUseTestEncryption,BillDeskTokenization,GenericPaymentsTestStore", "contact": "TestAMC" }',e.additionalHeaders["x-ms-flight"]?e.additionalHeaders["x-ms-flight"]=e.additionalHeaders["x-ms-flight"]+",EnableThreeDSOne":e.additionalHeaders["x-ms-flight"]="EnableThreeDSOne"):r.default.isEnabled("psd2pidltestheader")?e.additionalHeaders["x-ms-test"]='{ "scenarios": "px-service-psd2-e2e-emulator", "contact": "psd2test" }':r.default.isEnabled("psd2pidltestheaderalways")?e.additionalHeaders["x-ms-test"]='{ "scenarios": "px.payerauth.psd2.challenge.success,px.pims.3ds,acs.ui.singleselect", "contact": "psd2test" }':r.default.isEnabled("psd2pidltestheadercancel")?e.additionalHeaders["x-ms-test"]='{ "scenarios": "px.payerauth.psd2.challenge.cancelled, px.pims.3ds", "contact": "psd2test" }':r.default.isEnabled("psd2pidltestheaderfail")?e.additionalHeaders["x-ms-test"]='{ "scenarios": "px.payerauth.psd2.challenge.failed, px.pims.3ds", "contact": "psd2test" }':r.default.isEnabled("psd2pidltestheaderto")?e.additionalHeaders["x-ms-test"]='{ "scenarios": "px.payerauth.psd2.challenge.timedout, px.pims.3ds", "contact": "psd2test" }':r.default.isEnabled("psd2pidltestheaderfailtoattach")?e.additionalHeaders["x-ms-test"]='{ "scenarios": "px.pims.validate.failed", "contact": "psd2test" }':r.default.isEnabled("bankchallengeaddpi")?e.additionalHeaders["x-ms-test"]='{"scenarios":"px-service-psd2-e2e-emulator,BillDeskForceCreateToken,BillDeskUseTestEncryption,BillDeskTokenization,GenericPaymentsTestStore", "contact": "Test" }':r.default.isEnabled("bankchallengepurchase")?e.additionalHeaders["x-ms-test"]='{"scenarios": "px-service-billdesk-provider,px-service-psd2-e2e-emulator", contact: "test"}':r.default.isEnabled("venmoactive")?e.additionalHeaders["x-ms-test"]='{"scenarios": "px.pims.venmo.add.pending.get.active", contact: "test"}':r.default.isEnabled("venmopending")?e.additionalHeaders["x-ms-test"]='{"scenarios": "px.pims.venmo.add.pending.get.pending", contact: "test"}':r.default.isEnabled("venmoerror")&&(e.additionalHeaders["x-ms-test"]='{"scenarios": "px.pims.venmo.add.pending.get.error", contact: "test"}'),n.default.isOfficeClient()&&(e.scenario=r.default.getPidlScenarios()),e.billableAccountId=l.default.get().BillableAccountId?encodeURIComponent(l.default.get().BillableAccountId):"",e.client=n.default.getClientType(),e.completePrerequisites=!r.default.isEnabled("noprerequisite")||!"US".equalsIgnoreCase(l.default.get().Market),e.deviceFamily=n.default.getDeviceFamily(),e.displayOptions=e.displayOptions||{},e.displayOptions.containerId="pidlContainer",e.displayOptions.busyBlockId=e.displayOptions.busyBlockShowHideHandler?void 0:"webblendBusySpinner",e.displayOptions.showSubmitBlock=!0,e.displayOptions.showPlaceholderInTextbox=n.default.isWindowsOobeClient()||r.default.isEnabled("pidlsdkplaceholder"),e.displayOptions.showErrorBlock=!0,e.displayOptions.inputPropertyIdPrefix="blend_paymentInstrument_",e.language=l.default.get().Culture,e.legacyPurchaseType=e.legacyPurchaseType||t.default._legacyPurchaseType||""
var u=e.addAddressCountry||l.default.get().Market
u&&(u=u.toLowerCase()),e.market=u,e.partner||(n.default.isXboxOneClient()?e.partner="xbox":n.default.isWindowsOobeClient()?e.context.equalsIgnoreCase("challenge")&&r.default.isEnabled("pidlsdkcvv")?e.partner="webblends":(e.partner="officeoobe",e.scenario="rs5"):e.partner="webblends"),e.lockCountrySelection&&(e.scenario="fixedcountryselection"),e.sdkEnvironment="production"===a.default.environment||"ppe"===a.default.environment||"prod"===r.default.getFlightValue("env")?"prod":"ppe",e.sdkEventHandler=s.default,e.disableLogging="false".equalsIgnoreCase(l.default.get().IsTelemetryEnabled),e.extraContainerClass=r.default.isEnabled("addpaymentluminositycontrast")&&!n.default.isSaturnDesktop()&&!n.default.isModernXboxClient()&&!n.default.isGamingApp(),e.extraStyleClass=r.default.isEnabled("addscrollstyle")&&n.default.isGamingAppGiftWithGamertag()},renderTemplate:function(){this.render("pidl-sdk-container")}})}),define("web-blends/models/address",["exports","sfw-services/models/address"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/models/auth-token",["exports","sfw-services/models/auth-token"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/models/billing-information",["exports","sfw-services/models/billing-information"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/models/contact-preference",["exports","sfw-services/models/contact-preference"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/models/create-rewards-user",["exports","sfw-services/models/create-rewards-user"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/models/error-details",["exports","sfw-services/models/error-details"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/models/friends-info",["exports","sfw-services/models/friends-info"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/models/giftee",["exports","sfw-services/models/giftee"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/models/order-line-item",["exports","sfw-services/models/order-line-item"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/models/order",["exports","sfw-services/models/order"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/models/pages/add-payment-instrument",["exports","sfw-telemetry/utils/app-globals","sfw-services/models/session-ids","sfw-telemetry/utils/client"],function(e,t,n,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Object.extend({pidlDocuments:null,originalPidl:null,pidl_blend_id_prefix:null,operationName:null,paymentMethodFamilies:null,paymentMethodFamily:null,paymentMethodType:null,supportedCreditCardPaymentMethods:null,firstDisplayIndex:0,displayIndex:0,lastDisplayIndex:0,sessionId:Ember.computed(function(){return t.default._sessionIds||(t.default._sessionIds=n.default.create()),t.default._sessionIds.getNewSessionId()}),isXboxOne:Ember.computed(function(){return a.default.isXboxOneClient()}),canShowPrivacyMessage:Ember.computed("displayIndex","isXboxOne",function(){return!this.get("isXboxOne")||this.get("isAtLastDisplayIndex")}),canShowXboxBackButton:Ember.computed("displayIndex","isXboxOne",function(){return this.get("isXboxOne")&&this.get("displayIndex")>this.get("firstDisplayIndex")}),canShowXboxNextButton:Ember.computed("displayIndex","isXboxOne",function(){return this.get("isXboxOne")&&!this.get("isAtLastDisplayIndex")}),isAtLastDisplayIndex:Ember.computed("displayIndex","lastDisplayIndex",function(){return this.get("displayIndex")>=this.get("lastDisplayIndex")})})}),define("web-blends/models/pages/alipay-billing-agreement",["exports","sfw-components/utils/template-tokenizer","sfw-services/utils/strings","web-blends/models/pages/add-payment-instrument","sfw-components/utils/pidl-validator2","sfw-services/utils/constant-links"],function(e,t,n,a,r,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a.default.extend({alipayTermsOfUseTextParts:Ember.computed(function(){return t.default.tokenize(n.default.Alipay_Terms_Of_Use,["0","1"],function(e){return"0"===e?n.default.Shared_Button_Next:n.default.Alipay_Terms_Of_Use_Title},function(e){return"1"===e.value&&(e.id="privacyStatement",e.biContentName="Terms of Use",e.css="cli_privacyStatement",e.url=s.default.get().alipayTOU),e})}),isAtLastDisplayIndex:Ember.computed("displayIndex","lastDisplayIndex",function(){var e=this.get("displayIndex"),t=this.get("pidlDocuments")[0].pidlModel
if(t)for(var n=t.length-1;n>=0;--n)if(t[n]&&t[n].pidl_blend_id&&"hidden"!==$("#"+t[n].pidl_blend_id).attr("type")&&!r.default.isDependencyValid(t[n])){if(t[n].displayIndex===e)return!0
break}return!1})})}),define("web-blends/models/pages/credit-card",["exports","web-blends/models/pages/add-payment-instrument","sfw-services/utils/pidl-data"],function(e,t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({editMode:null,canShowCcIcons:Ember.computed("displayIndex","isXboxOne",function(){return!(this.get("editMode")||this.get("isXboxOne")&&0!==this.get("displayIndex"))}),canShowEmailNote:Ember.computed("displayIndex","isXboxOne",function(){if(this.get("isXboxOne")){var e=this.get("displayIndex"),t=n.default.getPidlForDisplayIndex(e,this.get("pidlDocuments"))
return Boolean(t&&t.length&&t[0].displayId&&t[0].displayId.equalsIgnoreCase("email_address"))}return!0})})}),define("web-blends/models/pages/direct-debit",["exports","web-blends/models/pages/add-payment-instrument"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({isDirectDebit:!0})}),define("web-blends/models/pages/mobile-billing-non-sim",["exports","sfw-components/utils/template-tokenizer","sfw-services/utils/strings","web-blends/models/pages/add-payment-instrument"],function(e,t,n,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a.default.extend({addMobiTextParts:Ember.computed(function(){return t.default.tokenize(n.default.Phone_Confirmation_Code_Note,["0"],function(){return n.default.Shared_Button_Next})})})}),define("web-blends/models/payment-instrument",["exports","sfw-services/models/payment-instrument"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/models/payment-method",["exports","sfw-services/models/payment-method"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})})
define("web-blends/models/product",["exports","sfw-services/models/product"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/models/profile",["exports","sfw-services/models/profile"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/models/reward",["exports","sfw-services/models/reward"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/models/rewards-claim-promotion",["exports","sfw-services/models/rewards-claim-promotion"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/models/save-to-cart",["exports","sfw-services/models/save-to-cart"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/models/token",["exports","sfw-services/models/token"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/models/user-pidl-data",["exports","sfw-services/models/user-pidl-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/models/warranty",["exports","sfw-services/models/warranty"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/modules/back-stack",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0})
var t=[]
e.default={push:function(e,n){t.push({route:e,context:n})},peek:function(){return t&&t.length&&t.length>0?t[t.length-1]:null},getElementAt:function(e){return t&&t.length&&e>-1&&e<t.length?t[t.length-1-e]:null},getBackStack:function(){return t}}}),define("web-blends/modules/busy",["exports","sfw-telemetry/utils/flight-config","sfw-messaging/utils/post-messages","sfw-messaging/utils/messages","sfw-telemetry/utils/client","sfw-services/utils/strings"],function(e,t,n,a,r,s){Object.defineProperty(e,"__esModule",{value:!0})
var i=0
e.default={busy:function(){i++,t.default.isEnabled("loadingspinner")&&Ember.$("#webblendBusySpinner").append('<span class="screen-reader" aria-live="polite" aria-busy="true" aria-label='+s.default.Loading_Text+"/>"),r.default.isWindowsRoobe()?Ember.$("#roobewebblendBusySpinner").addClass("active"):Ember.$("#webblendBusySpinner").addClass("active"),t.default.isEnabled("removebusystyle")&&Ember.$(".busyDiv").removeAttr&&Ember.$("#webblendBusySpinner").removeAttr("style"),r.default.isModernXboxClient()&&n.default.send(a.default.busy())},done:function(){i>0&&i--,0===i&&(r.default.isWindowsRoobe()?(Ember.$("#roobewebblendBusySpinner").find("span").remove(),Ember.$("#roobewebblendBusySpinner").removeClass("active")):(Ember.$("#webblendBusySpinner").find("span").remove(),Ember.$("#webblendBusySpinner").removeClass("active")),r.default.isModernXboxClient()&&n.default.send(a.default.busy("done")))},clear:function(){i=0,this.done()},isBusy:function(){return r.default.isWindowsRoobe()?Ember.$("#roobewebblendBusySpinner").hasClass("active"):Ember.$("#webblendBusySpinner").hasClass("active")},getCounter:function(){return i}}}),define("web-blends/modules/e-nota-legal-terms",["exports","sfw-telemetry/utils/start-data","sfw-components/utils/purchase-legal-strings"],function(e,t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var e=t.default&&t.default.get()&&t.default.get().Market
return e&&e.toLowerCase&&"br"===e.toLowerCase()?(0,n.default)().eNotaLegalTerm:""}}),define("web-blends/modules/flow-stack",["exports","sfw-messaging/utils/messages","sfw-messaging/utils/post-messages","sfw-telemetry/utils/instrumentation","sfw-telemetry/utils/client"],function(e,t,n,a,r){Object.defineProperty(e,"__esModule",{value:!0})
var s=[]
e.default={push:function(e){-1===s.indexOf(e)&&s.push(e)},peek:function(){return s&&s.length&&s.length>0?s[s.length-1]:null},pop:function(e,i){if(s&&s.length&&s.length>0){var l=s.pop()
if(0===s.length){var o=a.default.correlationVector(),d={cv:o&&o.getValue(),status:e,data:i}
r.default.isModernXboxClient()&&(d.orderId=i?i.orderId:void 0),n.default.send(t.default.done(d))}return l}return null},clearAndDone:function(e,s){this.clear()
var i=a.default.correlationVector(),l={cv:i&&i.getValue(),status:e,data:s}
r.default.isModernXboxClient()&&(l.orderId=s?s.orderId:void 0),n.default.send(t.default.done(l))},clearAndSendError:function(e){this.clear()
var s=a.default.correlationVector(),i={cv:s&&s.getValue(),status:"cancel",data:e}
r.default.isModernXboxClient()&&(i.orderId=e?e.orderId:void 0),n.default.send(t.default.error(i))},clear:function(){s=[]},length:function(){return s.length},flowNames:{Purchase:"Purchase",AddPaymentInstrument:"AddPaymentInstrument",EditPaymentInstrument:"EditPaymentInstrument",SelectPaymentInstrument:"SelectPaymentInstrument",AddAddress:"AddAddress",TvodPurchase:"TvodPurchase",Redeem:"Redeem",AskToBuy:"AskToBuy",AskAPurchaser:"AskAPurchaser",DigitalAttach:"DigitalAttach"}}}),define("web-blends/modules/purchase-single-item",["exports","sfw-telemetry/utils/start-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default={hasRequiredProperties:function(){return!!t.default.get().SkuId&&!!t.default.get().ProductId&&!!t.default.get().AvailabilityId}}}),define("web-blends/modules/reset-blend-sensitive-user-data",["exports","sfw-telemetry/utils/app-globals"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){t.default._userPidlData&&t.default._userPidlData.reset&&t.default._userPidlData.reset(),t.default._userAddressPidlData&&Object.keys(t.default._userAddressPidlData).forEach(function(e){t.default._userAddressPidlData[e].reset&&t.default._userAddressPidlData[e].reset()})}}),define("web-blends/modules/return-route",["exports","web-blends/modules/back-stack"],function(e,t){function n(e,t){for(var n=e.length;--n>=0;)if(t.indexOf(e[n].route)>-1)return e[n]}Object.defineProperty(e,"__esModule",{value:!0}),e.default={addPi:function(){return n(t.default.getBackStack(),["purchase.confirm","purchase.selectPi","redeem.redeemConfirm","purchase.confirmOobe"])},addNameOrAddress:function(){return n(t.default.getBackStack(),["purchase.confirm","redeem.enterCode","redeem.redeemConfirm","purchase.confirmOobe"])},redeemInPurchase:function(){return n(t.default.getBackStack(),["purchase.confirm","purchase.askToBuy","purchase.selectPi"])},errorInRedeem:function(){return n(t.default.getBackStack(),["redeem.redeemConfirm"])},addPiSuccess:function(){return n(t.default.getBackStack(),["purchase.confirm","redeem.redeemConfirm","purchase.confirmOobe"])},cancelInRedeem:function(){t.default.getBackStack().pop()}}}),define("web-blends/modules/settings/no-payment-instruments",["exports","sfw-services/utils/strings","sfw-services/utils/market-specific"],function(e,t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,a){var r=e?t.default.Purchase_Add_New_Payment_Instrument:t.default.Add_New_Payment_Instrument
return a&&(r=t.default.Purchase_PiRequiredButFree_AddPI),{noPisMessage:t.default.SelectPi_Message_NoPi_WithoutLink,addPiMessage:r,isCreditCardPurgeEnabled:n.default.showCreditCardPurgeText(e),creditCardPurgeShortText:t.default.Credit_Card_Purge_Short_Text,isLongCreditCardPurgeEnabled:n.default.showLongCreditCardPurgeText(e),creditCardPurgeText:t.default.Credit_Card_Purge_Text}}}),define("web-blends/modules/treatment-map",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0})
e.default={BillingNoChargeNote:{id:"346002",description:"Treatment to add a note that the user will not be charged yet in the add payment summary."},HideExpirationDate:{id:"432002",description:"Treatment to hide expiration date in PI container in confirm purchase."}}}),define("web-blends/modules/treatments",["exports","sfw-telemetry/utils/flight-config","sfw-telemetry/utils/identifiers"],function(e,t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default={doesTreatmentExist:function(e){var a=t.default.getFlightValue("treatments")
if(a)return a.indexOf(e)>-1
var r=n.default.getGroups()
return r&&r.indexOf&&r.indexOf(e)>-1}}}),define("web-blends/resolver",["exports","ember-resolver"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default}),define("web-blends/router",["exports","web-blends/config/environment"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0})
var n=Ember.Router.extend({location:t.default.locationType,rootURL:t.default.rootURL})
n.map(function(){this.route("purchase",function(){this.route("confirm"),this.route("confirmTvod"),this.route("confirmOobe"),this.route("selectPi",{path:"selectPi/:context"}),this.route("selectAddress",{path:"selectAddress/:puid"}),this.route("riskChallenge",{path:"riskChallenge/:context/:challengeType"}),this.route("redirectConfirm",{path:"redirectConfirm/:type"}),this.route("redirectContinue",{path:"redirectContinue/:type"}),this.route("redirectRetry",{path:"redirectRetry/:context"}),this.route("mobiChallenge"),this.route("tvodResume"),this.route("subscriptionDowngrade"),this.route("subscriptionUpgrade"),this.route("subscriptionInterstitial"),this.route("gift"),this.route("complete",{path:"complete/:orderId"}),this.route("askToBuy",function(){this.route("block"),this.route("success")}),this.route("rewardsReactive"),this.route("rewardsThanks"),this.route("riskChallengeSdk"),this.route("saveToCart"),this.route("askPurchaser",function(){this.route("success")})}),this.route("error",{path:"error/:code"}),this.route("paymentAndBilling",function(){this.route("addName"),this.route("addEmail"),this.route("directDebitChallenge"),this.route("choosePaymentMethodFamily",{path:"choosePaymentMethodFamily/:context"}),this.route("editPaymentInstrument"),this.route("paymentInstrumentSdk"),this.route("selectPaymentInstrumentSdk"),this.route("addPaymentInstrument",function(){this.route("card",function(){this.route("creditCard"),this.route("directDebit")}),this.route("smsChallenge",function(){this.route("mobileBillingNonSim"),this.route("alipayBillingAgreement")})}),this.route("profileSdk"),this.route("addressSdk"),this.route("addAddress",{path:"addAddress/:puid"}),this.route("summary",{path:"summary/:context/:puid"}),this.route("redirectConfirm"),this.route("redirectContinue"),this.route("redirectRetry")}),this.route("redeem",function(){this.route("enterCode"),this.route("redeemConfirm"),this.route("success"),this.route("redirectConfirm"),this.route("redirectContinue"),this.route("redirectRetry"),this.route("prorate",{path:"prorate/:context"}),this.route("subscriptionUpgrade")}),this.route("rewards",function(){this.route("claimIncentive")}),this.route("digitalAttach",function(){this.route("prorate",{path:"prorate/:context"})})}),e.default=n}),define("web-blends/routes/application",["exports","sfw-messaging/utils/messages","sfw-messaging/utils/post-messages","sfw-services/errors/app-error","sfw-services/models/select-pi","sfw-services/services/service","sfw-services/utils/commerce-js","sfw-services/utils/configuration","sfw-services/utils/external-urls","sfw-services/utils/order-pi-context","sfw-telemetry/utils/app-globals","sfw-telemetry/utils/blend-bi-tracker","sfw-telemetry/utils/client","sfw-telemetry/utils/flight-config","sfw-telemetry/utils/identifiers","sfw-telemetry/utils/instrumentation","sfw-telemetry/utils/start-data","web-blends/config/environment","web-blends/modules/busy","web-blends/modules/flow-stack","web-blends/utils/app-config","web-blends/utils/constants","web-blends/utils/body-resize","web-blends/utils/load-urls","web-blends/utils/perf","web-blends/utils/pidl-sdk","web-blends/utils/styles","web-blends/utils/winjs"],function(e,t,n,a,r,s,i,l,o,d,u,c,m,f,p,g,b,h,y,P,_,v,w,C,x,I,k,T){Object.defineProperty(e,"__esModule",{value:!0})
var A=function(){return function(e,t){if(Array.isArray(e))return e
if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,s=void 0
try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,s=e}finally{try{!a&&l.return&&l.return()}finally{if(r)throw s}}return n}(e,t)
throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),S=void 0,R=void 0
e.default=Ember.Route.extend({user:Ember.inject.service(),telemetryBi:Ember.inject.service(),init:function(){var e=this
S=n.default.listen(function(t){t.startdata&&(e.getStartDataFromQueryParameters(t.startdata),e.normalize(t.startdata),e.handleStartData(t.startdata))}),n.default.listen(function(t){t.message&&t.message.equalsIgnoreCase("navigateBack")&&($(".btn-back").length?$(".btn-back").click():$(".pidlddc-back").length?$(".pidlddc-back").click():e.send("cancel"))})},activate:function(){this.ensureRootId(),this.setupKeyboard(),this.setupControllerScroll()},normalize:function(e){try{if(e.auth){var t=JSON.parse(e.auth)
e.Auth=t.Ticket||null,e.XToken=t.XToken||null,delete e.auth}}catch(t){e.Auth=e.auth,delete e.auth}!e.Culture&&e.locale&&(e.Culture=e.locale,delete e.locale),!e.CssOverride&&e.theme&&(e.CssOverride=e.theme,delete e.theme),!e.CssOverride&&e.brand&&(e.CssOverride=e.brand,delete e.brand),!e.Client&&e.clientType&&(e.Client=e.clientType,delete e.clientType),e.selApps||(e.selApps="purchase.confirm")
var n=void 0
for(n in e)e.hasOwnProperty(n)&&n.charAt(0)===n.charAt(0).toLowerCase()&&(e[n.charAt(0).toUpperCase()+n.slice(1)]=e[n])},getStartDataFromQueryParameters:function(e){var t=["market","locale","clientType","cV","callerApplicationId","layout","theme","brand"]
if(window.location.search)for(var n=window.location.search.slice(1).split("&"),a=0;a<n.length;a++)if(n[a]){var r=n[a].split("="),s=A(r,2),i=s[0],l=s[1]
l&&t.containsAnyIgnoreCase(i)&&(e[i]=l)}},getExperimentIds:function(e){var t=e.ExpId?e.ExpId:null,n=p.default.getGroups()
return n&&(t=t?t+","+n:n),t||null},handleStartData:function(e){var a=this
x.default.markOnce(x.default.markerNames.appStart)
var r=Ember.getOwner(this).application.testing
S&&S.unsubscribe()
var d={appId:"WebBlend",environment:h.default.environment,market:e.Culture,expId:this.getExperimentIds(e),cv:e.CV,pageTags:c.default.getBlendContext(e)||{},sendCoreDataToOSR:!0,autoClick:!0,enableOneDS:!0}
return d.pageTags.buildNumber=_.default.getBuildNumber(),g.default.init(d),g.default.disableJsllLogging(),this.loadConfig(e).then(function(){return b.default.load(e),f.default.reload(),"false".equalsIgnoreCase(b.default.get().IsTelemetryEnabled)&&(f.default.isEnabled("donotdisablelogging")&&m.default.isXboxOneClient()?b.default.set("IsTelemetryEnabled","true"):g.default.disableLogging()),R&&c.default.captureContentPageAction({name:"flightInfo"},R),R&&R.noOfCarbonExpFlights<1&&c.default.captureContentPageAction({name:"FlightsNotFound"},R),a.setTextDirection(),d.market=l.default.SpecificCulture||e.Culture,d.pageTags=c.default.getBlendContext(e,!0)||{},d.pageTags.enabledFeatures=f.default.getFlights(),g.default.extendCoreData(d),o.default.set((0,C.default)()),I.default.init(),m.default.isXboxOneClient()&&!r&&(T.default.init(),s.default.setup()),m.default.isXboxOneClient()&&!b.default.get().CssOverride&&f.default.isEnabled("xboxanimated")&&b.default.set("CssOverride","animated"),f.default.isEnabled("setupofficeredirect")&&b.default.get().CallerApplicationId&&b.default.get().CallerApplicationId.equalsIgnoreCase("client")&&b.default.set("CallerApplicationId","office.client"),f.default.isEnabled("stopaskapurchaser")&&(b.default.set("AskPurchaserEligible","false"),b.default.set("SkipToAskPurchaser","false"),b.default.set("AskPurchaserScenario","false")),b.default.get().AskPurchaserEligible&&b.default.get().AskPurchaserEligible.toString().equalsIgnoreCase("true")&&b.default.get().SkipToAskPurchaser&&b.default.get().SkipToAskPurchaser.toString().equalsIgnoreCase("true")&&b.default.set("selApps","purchase.askPurchaser"),b.default.get().IsDigitalAttachment&&b.default.set("DisplayCompletion",!0),k.default.init(),i.default.init().catch(function(){}),a.get("strings").populate(_.default.getStringsScriptRoot(),e._SpecificCulture)}).then(function(){n.default.send(t.default.ready()),m.default.isInlineClient()&&!r&&w.default.init(),x.default.markOnce(x.default.markerNames.appReady)}).catch(function(e){n.default.send(t.default.error({status:"cancel",data:{errorCode:e.fullName,statusCode:e.statusCode,errorMessage:e.message,errorType:e.type||"system"}}))}).then(function(){return a.checkRequiredStartData()}).then(function(){return a.checkGamertag()}).then(function(){return a.checkGamerpic()}).then(function(){return a.preloadData()}).then(function(){return a.start()}).catch(function(e){a.replaceWith("error",e)})},loadConfig:function(e){return n.default.send(t.default.status({data:"pre loadConfig"})),l.default.loadConfig(e.configUrl,{culture:e.Culture,purchaseServiceVersion:e.PurchaseServiceVersion,market:e.Market,includeUrls:!1}).then(function(){if(n.default.send(t.default.status({data:"loadConfig successful"})),e._SpecificCulture=l.default.SpecificCulture,e.TextDirection=l.default.IsRightToLeft?"RTL":"LTR",e.Lcid=l.default.Lcid,e.MarketNativeName=l.default.MarketNativeName,e.Environment=h.default.environment,l.default.Flights){var a=f.default.getFilteredFlightsCount(l.default.Flights,"wb_"),r=f.default.getFilteredFlightsCount(l.default.Flights,"exwb_"),s=f.default.getFilteredFlightsCount(e.Flights),i=a+r,o=f.default.getFilteredFlightList(l.default.Flights,"wb_"),d=f.default.getFilteredFlightList(l.default.Flights,"exwb_")
o&&(l.default.Flights=o+","),d&&(l.default.Flights+=d),R={noOfExpFlights:r,noOfCarbonFlights:a,noOfCarbonExpFlights:i,noOfClientFlights:s},0===i&&(l.default.Flights=v.default.backupFlights),e.Flights+=","+l.default.Flights}else"test"!==h.default.environment&&(R={noOfExpFlights:0,noOfCarbonFlights:0,noOfCarbonExpFlights:0,noOfClientFlights:f.default.getFilteredFlightsCount(e.Flights)},e.Flights+=","+v.default.backupFlights)})},checkRequiredStartData:function(){var e=b.default.get().Market,t=b.default.get().Culture,n=b.default.get().Auth,r=b.default.get().XToken,s="purchase.saveToCart".equalsIgnoreCase(b.default.get().selApps)
if(!(e&&t&&(n||r||s)))throw n||r?e?new a.default("NoCultureFound"):new a.default("NoMarketFound"):new a.default("AuthenticationTokenInvalid")},checkGamertag:function(){if(m.default.isXboxOneClient()&&!b.default.get().Gamertag)return this.get("user").getProfile().then(function(e){b.default.set("Gamertag",e.get("gamer_tag"))}).catch(function(){})},checkGamerpic:function(){b.default.get().Gamerpic||m.default.isModernXboxClient()&&m.default.modernXboxClientCustomParameters()&&m.default.modernXboxClientCustomParameters().xuid&&this.store.findRecord("friends-info",m.default.modernXboxClientCustomParameters().xuid).then(function(e){b.default.set("Gamerpic",e.get("displayPicRaw"))}).catch(function(){})},preloadData:function(){var e=this
return b.default.get().Order&&(this.get("store").pushPayload("order",b.default.get().Order),delete b.default.get().Order),b.default.get().Product&&(this.get("store").pushPayload("product",b.default.get().Product),delete b.default.get().Product),m.default.isWebClient()?d.default.restoreContext("purchase_confirm").then(function(t){t&&(t.orderId&&(b.default.set("OrderId",t.orderId),e.get("telemetryBi").setDidRedirectReturn(!0)),("active"===t.piStatus||t.pendingOnPicv)&&(u.default._selectPiData||(u.default._selectPiData=r.default.create()),u.default._selectPiData.selectedPis={id:t.piId,csvTopOffPaymentInstrumentId:t.backupPiId||null}))}):Ember.RSVP.resolve()},start:function(){var e=b.default.get().selApps,t=b.default.get().context
t?this.replaceWith(e,t):this.replaceWith(e)},ensureRootId:function(){if(!m.default.isInlineClient()){var e=$(".ember-application").attr("id")
e||(e="webBlendContainer",$(".ember-application").attr("id",e)),$(".ember-application").attr("aria-flowto",e).attr("x-ms-aria-flowfrom",e)}},setTextDirection:function(){$("body").attr("dir",b.default.get().TextDirection).attr("lang",b.default.get().Culture)},setupKeyboard:function(){$(".ember-application").bind("keydown",function(e){if(y.default.isBusy())return e.preventDefault(),void e.stopImmediatePropagation()
if(!m.default.isInlineClient())switch(e.keyCode){case 27:e.preventDefault(),e.stopImmediatePropagation(),y.default.busy(),P.default.clearAndDone("cancel")
break
case 9:if(m.default.isWindowsOobeClient())break
var t=$(".ember-application").find("a,input:enabled,select:enabled,textarea:enabled,button:enabled,option:enabled").filter(":visible"),n=e.shiftKey?t.last():t.first();(e.shiftKey?t.first():t.last()).is(":focus")&&(e.preventDefault(),n.focus())
break
case 37:m.default.isModernXboxClient()&&(e.preventDefault(),e.stopImmediatePropagation(),this.dispatchEvent(new KeyboardEvent("keydown",{key:"GamepadDPadLeft",keyCode:205,bubbles:!0,cancelable:!0})))
break
case 39:m.default.isModernXboxClient()&&(e.preventDefault(),e.stopImmediatePropagation(),this.dispatchEvent(new KeyboardEvent("keydown",{key:"GamepadDPadRight",keyCode:206,bubbles:!0,cancelable:!0})))
break
case 38:m.default.isModernXboxClient()&&(e.preventDefault(),e.stopImmediatePropagation(),this.dispatchEvent(new KeyboardEvent("keydown",{key:"GamepadDPadUp",keyCode:203,bubbles:!0,cancelable:!0})))
break
case 40:m.default.isModernXboxClient()&&(e.preventDefault(),e.stopImmediatePropagation(),this.dispatchEvent(new KeyboardEvent("keydown",{key:"GamepadDPadDown",keyCode:204,bubbles:!0,cancelable:!0})))}}),$(".ember-application").on("keydown","span",function(e){if(y.default.isBusy())return e.preventDefault(),void e.stopImmediatePropagation()
13===e.keyCode&&this.click()}),this._super.apply(this,arguments)},setupControllerScroll:function(){$(".ember-application").on("keydown",function(e){var t=e.keyCode
if(215===t){var n=$(".interstitialBody").first().prop("scrollTop")
$(".interstitialBody").first().scrollTop(n-100)}else if(216===t){var a=$(".interstitialBody").first().prop("scrollTop")
$(".interstitialBody").first().scrollTop(a+100)}})},actions:{cancel:function(){}}})}),define("web-blends/routes/base",["exports","sfw-telemetry/utils/blend-bi-tracker","sfw-messaging/utils/post-messages","sfw-messaging/utils/messages","sfw-telemetry/utils/app-globals","sfw-telemetry/utils/flight-config","sfw-services/errors/base-error","sfw-services/errors/app-error","sfw-telemetry/utils/start-data","web-blends/utils/perf"],function(e,t,n,a,r,s,i,l,o,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Route.extend({postPiInfo:Ember.inject.service(),beforeModel:function(){r.default.currentRoute=this.routeName,("redeem.enterCode"===this.routeName||s.default.isEnabled("redeemperfv2")&&"redeem.redeemConfirm"===this.routeName)&&d.default.captureRedeemInit()},afterRenderEvent:function(e){var r=$(".ember-application").find("input,select,textarea").filter(":not([disabled]):visible:first")[0]||$(".btn-primary").filter(":not([disabled]):visible:first")[0]||$(".ember-application").find("button").filter(":not([disabled]):visible:first")[0]
if(r){var i=r.getAttribute("aria-label"),l=$(".type-t2").text(),u=r.id?$('label[for="'+r.id+'"]').text():"",c=r.innerText
i&&i.startsWith(l)||(r.setAttribute("aria-label",l+". "+(i||u+". "+c)),r.focus(),r.addEventListener("focusout",function(){i?r.setAttribute("aria-label",i):r.removeAttribute("aria-label")}))}document.documentElement.lang=o.default.get().Culture
var m="purchase.gift".equalsIgnoreCase(o.default.get().selApps)
if(!e||e&&!e.delayPageView){if("redeem.enterCode"===this.routeName){var f={isPurchaseFlow:window.location.href.toLowerCase().indexOf("ispurchaseflow=true")>-1,isGift:m,callerApplicationId:o.default.get().CallerApplicationId}
t.default.capturePageView(this.routeName,f,null)}else{var p,g=e&&e.pageDetails||{}
if(g.isGift=m,s.default.isEnabled("redeemsuccessimprovementgoldlive"))e&&e.productBigIds&&e.productBigIds.length&&(p=e.productBigIds[0].productId),g.productId=p
t.default.capturePageView(this.routeName,g,null)}s.default.isEnabled("bicontentupdate")&&t.default.captureContentUpdate()}var b=this.get("postPiInfo.piData"),h=this.get("postPiInfo.addingPi")
n.default.send(a.default.transitioned(this.routeName,null,b,h)),s.default.isEnabled("redeemperfv2")?"redeem.enterCode"!==this.routeName&&"redeem.redeemConfirm"!==this.routeName||d.default.captureRedeemLoad(window.location.href.toLowerCase().indexOf("ispurchaseflow=true")>-1):"redeem.enterCode"===this.routeName&&d.default.captureRedeemLoad(window.location.href.toLowerCase().indexOf("ispurchaseflow=true")>-1)},actions:{error:function(e){s.default.isEnabled("addloadeventinerror")&&d.default.captureLoad(),s.default.isEnabled("addfailedstateinallerror")&&t.default.capturePurchaseStatePageAction("Failed"),Array.isArray(e)&&e[0]&&e[0].error&&(e=e[0].error),e instanceof Error||(e=new Error(JSON.stringify(e))),e instanceof i.default||(e=new l.default(e)),e.sourcePage=e.sourcePage||this.routeName,this.replaceWith("error",e)},didTransition:function(){Ember.run.scheduleOnce("afterRender",this,this.afterRenderEvent,this.get("controller.model"))}},activate:function(){document.title=this.get("title")||"No Title Set",this._super.apply(this,arguments)}})}),define("web-blends/routes/digital-attach/prorate",["exports","web-blends/routes/base","web-blends/modules/flow-stack","sfw-telemetry/utils/blend-bi-tracker","sfw-messaging/utils/open-terms","sfw-telemetry/utils/start-data"],function(e,t,n,a,r,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({productImages:Ember.inject.service(),model:function(e,t){var n=this,a=JSON.parse(e.context),r=a.ownedBigId,s=a.convertBigId,i=a.originalBigId,l=a.newExpirationDate,o=a.currentExpirationDate,d=[this.get("store").findRecord("product",r.productId),this.get("store").findRecord("product",s.productId),this.get("store").findRecord("product",i.productId)]
return Ember.RSVP.Promise.all(d).then(function(e){var r={isDowngradeAllowed:t&&t.queryParams&&"true"===t.queryParams.isDowngradeAllowed},d=e[0]
r.prorateProduct=e[1],r.originalProduct=e[2]
var u=r.prorateProduct.get("isXboxUltimate"),c=r.prorateProduct.get("DisplaySkuAvailabilities").find(function(e){return e.Sku.SkuId===s.skuId})
r.prorateProductId=s.productId,r.prorateSkuId=s.skuId,r.prorateAvailabilityId=c.Availabilities&&c.Availabilities.find(function(e){return e.Actions&&-1!==e.Actions.indexOf("Redeem")}).AvailabilityId
var m=void 0,f=void 0
return a.selectedBillingInfo&&(r.selectedBillingInfo=a.selectedBillingInfo),u?(r.isXboxUltimate=u,r.currentProductTitle=d.get("ProductTitle"),r.convertSkuTitle=n.skuTitle(r.originalProduct,i.skuId)||r.originalProduct.get("ProductTitle"),r.prorateDescription=n.ultimateProrateDurationString(r.currentProductTitle,r.convertSkuTitle,i.productId,i.skuId,l,o),r.currentExpirationDateDescription=n.currentExpirationDateString(r.currentProductTitle,o),r.newExpirationDateDescription=n.newExpirationDateString(r.currentProductTitle,l),r.prorateDescription||n.replaceWith("error","UltimateConversionUnavailable")):(t&&t.queryParams&&t.queryParams.prorateUnitType&&t.queryParams.prorateUnits&&(m=t.queryParams.prorateUnitType,f=t.queryParams.prorateUnits),m&&f||(m=c[0].Sku.RecurrencePolicy.Duration.UnitType,f=c[0].Sku.RecurrencePolicy.Duration.Units),r.prorateStrings=d.get("LocalizedProperties.0.UXDowngradeShortDescription")||[],r.prorateStrings.push(n.prorateDurationString(m,f)),r.currentProductTitle=d.get("ProductTitle"),r.convertProductTitle=r.convertProduct.get("ProductTitle"),r.downgradeStrings=r.convertProduct.get("LocalizedProperties.0.UXDowngradeShortDescription")||[]),r},function(e){n.replaceWith("error",e)})},actions:{keep:function(){var e=this.getCurrentModel()
s.default.set("ProductId",e.prorateProductId),s.default.set("SkuId",e.prorateSkuId),s.default.set("AvailabilityId",e.prorateAvailabilityId),this.replaceWith("purchase.confirm",{queryParams:{daProrateConsent:!0,selectedBillingInfo:JSON.stringify(e.selectedBillingInfo)}})},cancel:function(){n.default.clearAndDone("cancel")},viewTerms:function(){var e="CN".equalsIgnoreCase(s.default.get().Market)
a.default.captureContentPageAction({name:"ViewTermsButtonClicked"},{source:"prorate"})
var t=void 0
t=e?"msa":"gifttou",r.default.open(t)}},prorateDurationString:function(e,t){var n=e.toLowerCase()
n=n.charAt(0).toUpperCase()+n.slice(1),t>1&&(n+="s")
var a=this.get("strings")["Subscribe_Prorate_Duration_"+n]
return a?a.replace("{units}",t):this.get("strings.Subscribe_Prorate_Duration").replace("{Unit}",t).replace("{UnitType}",e)},skuTitle:function(e,t){var n=e.get("DisplaySkuAvailabilities").find(function(e){return e.Sku.SkuId===t}),a=void 0
return n&&(a=this.skuLocalizedProperties(n.Sku)),a&&a.SkuTitle},skuLocalizedProperties:function(e){var t=e.LocalizedProperties
if(!t)return null
var n=s.default.get().Market
return t.find(function(e){return e.Markets.find(function(e){return e&&e.toLowerCase&&e.toLowerCase()===n.toLowerCase()})})},currentExpirationDateString:function(e,t){return this.get("strings.Ultimate_Upgrade_Message_Current_Renewal_Date").replace("{currentProductTitle}",e).replace("{current_date}",t)},newExpirationDateString:function(e,t){return this.get("strings.Ultimate_Upgrade_Message_End_Renewal_Date").replace("{currentProductTitle}",e).replace("{end_date}",t)},ultimateProrateDurationString:function(e,t,n,r,s,i){a.default.captureContentPageAction({name:"getUltimateProrateString"},{currentProductTitle:e,convertSkuTitle:t,convertProductId:n,convertSkuId:r})
var l=void 0
s&&i&&(l=this.get("strings.Ultimate_Prorate_Description").replace("{redeemingSkuTitle}",t).replace("{currentProductTitle}",e).replace("{currentProductTitle}",e))
return l},ultimateProrateDuration:function(e,t){switch(e.toUpperCase()){case"CFQ7TTC0K5DJ":switch(t.toUpperCase()){case"001C":return{Units:2,UnitType:"day"}
case"001G":return{Units:3,UnitType:"day"}
case"001D":return{Units:5,UnitType:"day"}
case"000P":return{Units:9,UnitType:"day"}
case"0001":return{Units:20,UnitType:"day"}
case"0002":return{Units:1,UnitType:"month"}
case"0005":return{Units:2,UnitType:"month"}
case"0007":return{Units:4,UnitType:"month"}
case"000B":return{Units:8,UnitType:"month"}
default:return null}case"CFQ7TTC0K6L8":switch(t.toUpperCase()){case"000K":return{Units:2,UnitType:"day"}
case"0007":return{Units:3,UnitType:"day"}
case"000L":return{Units:5,UnitType:"day"}
case"000D":return{Units:9,UnitType:"day"}
case"000C":return{Units:20,UnitType:"day"}
case"000H":return{Units:2,UnitType:"month"}
case"000Q":return{Units:4,UnitType:"month"}
case"000G":return{Units:5,UnitType:"month"}
case"000J":return{Units:10,UnitType:"month"}
default:return null}case"CFQ7TTC0KGQ8":switch(t.toUpperCase()){case"0004":return{Units:20,UnitType:"day"}
case"000P":return{Units:40,UnitType:"day"}
case"0006":return{Units:2,UnitType:"month"}
case"000H":return{Units:4,UnitType:"month"}
case"0009":return{Units:8,UnitType:"month"}
default:return null}case"CFQ7TTC0K5DH":switch(t.toUpperCase()){case"0001":return{Units:10,UnitType:"day"}
case"0002":return{Units:2,UnitType:"month"}
case"0003":return{Units:10,UnitType:"day"}
case"0004":return{Units:4,UnitType:"month"}
default:return null}case"CFQ7TTC0L7S5":switch(t.toUpperCase()){case"0003":case"0004":return{Units:1,UnitType:"month"}
default:return null}default:return null}}})}),define("web-blends/routes/error",["exports","web-blends/modules/return-route","web-blends/utils/get-more-info-error","sfw-telemetry/utils/instrumentation","web-blends/modules/busy","sfw-telemetry/utils/blend-bi-tracker","sfw-telemetry/utils/flight-config","sfw-messaging/utils/post-messages","sfw-messaging/utils/messages","sfw-telemetry/utils/client","sfw-services/utils/constant-links","sfw-services/services/error-messages","sfw-services/errors/app-error","sfw-telemetry/utils/start-data"],function(e,t,n,a,r,s,i,l,o,d,u,c,m,f){Object.defineProperty(e,"__esModule",{value:!0})
e.default=Ember.Route.extend({controllerName:"error",templateName:"error",retries:0,setupController:function(e,t){this._super(e,t),i.default.isEnabled("autoconfirm")&&e.send("close")},model:function(e){return new m.default(e.code||"Unhandled")},afterModel:function(e){var r=this
if(!e.cv){var s=a.default.correlationVector()
e.cv=s&&s.getValue()}if(d.default.isOfficeClient()&&"Timeout"===e.outerCode&&(this.retries<3?e.allowRetry=!0:e.type="system"),d.default.isWindowsOobeGamePassClient()){var m=i.default.isEnabled("oobepichange"),f=e.code&&(e.code.startsWith("PUR-")||e.code.startsWith("PI-")||e.code.startsWith("DCAT-"))
m&&f&&this.retries<2?(e.allowRetry=!0,e.displayData={ShortDescription:this.get("strings.ErrorTitle_WindowsOobe_PurchaseFailure"),LongDescription:this.get("strings.ErrorDescription_WindowsOobe_PurchaseFailure"),ExtendedDescription:this.get("strings.ErrorDescription_Extended_WindowsOobe_PurchaseFailure"),ErrorMessage:e.message}):e.displayData={ShortDescription:this.get("strings.ErrorTitle_WindowsOobe"),LongDescription:this.get("strings.ErrorDescription_WindowsOobe_GamePass"),ExtendedDescription:this.get("strings.ErrorDescription_Extended_WindowsOobe_GamePass")}}else if(d.default.isWindowsOobeClient()){var p=this.get("strings.ErrorDescription_Extended_WinOobe2"),g=this.get("strings.ErrorDescription_WindowsOobe2")
e.displayData={ShortDescription:this.get("strings.ErrorTitle_WindowsOobe"),LongDescription:g,ExtendedDescription:p}
var b=i.default.isEnabled("oobepichange")
d.default.isWindowsRoobe()&&l.default.send(o.default.pageMessage("pageContext","error",""))
var h=e.code.startsWith("PUR-")||e.code.startsWith("PI-")||e.code.startsWith("DCAT-"),y=i.default.isEnabled("oobevalidatepionattach")&&"ValidatePIOnAttachFailed".equalsIgnoreCase(e.code)
if(b&&(h||y)&&this.retries<2){var P=""
y&&e.message&&e.message.error&&e.message.error.error&&e.message.error.error.innererror&&e.message.error.error.innererror.InnerError&&e.message.error.error.innererror.InnerError.UserDisplayMessage&&(P=e.message.error.error.innererror.InnerError.UserDisplayMessage),e.allowRetry=!0,e.displayData={ShortDescription:this.get("strings.ErrorTitle_WindowsOobe_PurchaseFailure"),LongDescription:this.get("strings.ErrorDescription_WindowsOobe_PurchaseFailure"),ExtendedDescription:this.get("strings.ErrorDescription_Extended_WinOobe_PurchaseFailure"),ErrorMessage:y?P:e.message}}else{var _=this.get("strings.ErrorDescription_Extended_WinOobe2"),v=this.get("strings.ErrorDescription_WindowsOobe2")
e.displayData={ShortDescription:this.get("strings.ErrorTitle_WindowsOobe"),LongDescription:v,ExtendedDescription:_}}}else{if(e.code.includes("RiskRejected")&&this.get("constants").riskRejectedErrors.showSelectPiErrors.includes(e.code)&&(e.showPiForRiskRejected=!0),!i.default.isEnabled("conversionblockederror")||!(e.code.includes("ConversionUnavailable")||e.code.includes("ConversionBlockedByExistingEntitlement")||e.code.includes("ConversionBlockedUnknownConversionPath"))){var w=e.code
return i.default.isEnabled("trimerrorcode")&&"CannotPurchaseWithActiveRecurrencePastGracePeriod".equalsIgnoreCase(e.code)&&(w="CannotPurchaseWithActiveRecurrencePastGracePeri"),i.default.isEnabled("giftblockerror")&&("RiskRejected-GiftingLimit_Reject_Device_ProductId".equalsIgnoreCase(e.code)?w="RiskRejected-GiftingLimitRejectDeviceProductId":"RiskRejected-GiftingLimit_Reject_Account_ProductId".equalsIgnoreCase(e.code)&&(w="RiskRejected-GiftingLimitRejectAccountProductId")),c.default.lookup(w,e.prefix).then(function(a){var s=a
if(t.default.errorInRedeem()&&r.get("constants").redeemErrors.showGetMoreInfoErrors.includes(w)&&(s.LongDescription=n.default.updateRedeemErrorString(a.LongDescription,w)),i.default.isEnabled("purchasedblocked")&&w.includes("PurchaseRejected")&&r.get("constants").purchaseBlockErrors.showLearnMoreInfoErrors.includes(w)&&(s.ShortDescription=n.default.updatePurchaseErrorString(a.ShortDescription,w)),w.includes("RiskRejected")&&(r.get("constants").riskRejectedErrors.showGetMoreInfoErrors.includes(w)&&(s.LongDescription=n.default.updateRiskRejectedErrorString(a.LongDescription,w)),"RiskRejected-Web"===w&&(s.LongDescription=a.LongDescription.replace("aka.ms/purchasesupport",r.get("constants").riskRejectedErrors.webLink.replace("{0}",u.default.get().purchaseSupport)))),i.default.isEnabled("conversionblockedxaa")&&w.includes("ConversionBlockedForXaaSubscription")&&e.productTitle&&(s.ShortDescription=a.ShortDescription.replace("{skuTitle}",e.productTitle),s.LongDescription=a.LongDescription.replace("{skuTitle}",e.productTitle),i.default.isEnabled("xaaconversionexpirationdate")&&(s.LongDescription=a.LongDescription.replace("{date}",e.newXaaExpirationDate))),(i.default.isEnabled("maxstackingpolicy")||i.default.isEnabled("maxstackingpolicyv1"))&&!d.default.isXboxOneClient()&&w.includes("MaxStackingDurationExceeded")){s.ShortDescription=r.get("strings.MaxStackingPolicy_Error_Title")
var l='<a target="_blank" href="'+u.default.get().XBOX_SUBSCRIPTION_LIMITS+'">'+r.get("strings.Click_Here")+"</a>",o='<a target="_blank" href="'+u.default.get().M365_SUBSCRIPTION_LIMITS+'">'+r.get("strings.Click_Here")+"</a>",c=r.get("strings.MaxStackingPolicy_Error_Description_Xbox").replace("{clickhere}",l),m=r.get("strings.MaxStackingPolicy_Error_Description_Office").replace("{clickhere}",o),f=r.get("strings.MaxStackingPolicy_Error_Description")
i.default.isEnabled("maxstackingpolicyv1")&&(f=r.get("strings.MaxStackingPolicy_Error_Description_V1")),s.LongDescription=f.replace("{xboxSubscriptionLimit}","</br></br>"+c).replace("{OfficeSubscriptionLimit}","</br></br>"+m)}e.displayData=s},function(){})}e.displayData={ShortDescription:this.get("strings.ErrorTitle_ModCon_Blocked"),LongDescription:this.get("strings.ErrorDescription_ModCon_Blocked").replace("{link}",this.get("constants").amcLinks.webLink.replace("{0}",this.get("constants").amcLinks.subscriptionsUrl).replace("{1}",this.get("strings.MicrosoftAccount")))}}},afterRenderEvent:function(){var e=$(".btn-primary").filter(":visible:first")[0]||$(".ember-application").find("button").filter(":visible:first")[0]
e&&e.focus()},actions:{cancel:function(){this.controllerFor("error").send("close")},retry:function(){l.default.send({message:"retryStart",retryCount:++this.retries}),d.default.isWindowsOobeClient()?(d.default.isWindowsRoobe()&&l.default.send(o.default.pageMessage("pageContext","selectPi","")),this.replaceWith("purchase.selectPi","selectPi")):(this.store.unloadAll("orderLineItem"),this.store.unloadAll("order"),this.replaceWith("purchase.confirm"))},didTransition:function(){var e={isGift:"purchase.gift".equalsIgnoreCase(f.default.get().selApps)}
t.default.errorInRedeem()&&(e.isRedeemFlow=!0)
var n=this.getCurrentModel(),a={error:n.innerError,instruction:n.displayData.ShortDescription,description:n.displayData.LongDescription,errorCode:n.fullName,errorType:n.type,mscv:n.cv,timestamp:n.timestamp,sourcePage:n.sourcePage,errorMessage:n.message}
n.pageDetails&&$.extend(e,n.pageDetails),s.default.capturePageView("error",e,a),l.default.send(o.default.transitioned("error",a)),Ember.run.scheduleOnce("afterRender",this,this.afterRenderEvent),r.default.clear()}}})}),define("web-blends/routes/index",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Route.extend({})}),define("web-blends/routes/payment-and-billing",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Route.extend({})}),define("web-blends/routes/payment-and-billing/add-address",["exports","sfw-telemetry/utils/app-globals","web-blends/routes/payment-and-billing/base","web-blends/modules/busy","web-blends/modules/flow-stack","sfw-components/utils/pidl-validator2","sfw-telemetry/utils/client","sfw-telemetry/utils/flight-config"],function(e,t,n,a,r,s,i,l){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n.default.extend({user:Ember.inject.service(),title:Ember.computed(function(){return this.get("strings.Need_More_Info_Title")}),pidlModelBuilder:Ember.inject.service(),creditCardCountry:Ember.inject.service(),model:function(e){return this.puid=e&&e.puid||"me",r.default.push(r.default.flowNames.AddAddress),t.default._userAddressPidlData&&t.default._userAddressPidlData[this.puid]&&t.default._userAddressPidlData[this.puid].get("model")?(t.default._userAddressPidlData[this.puid].get("pifdValidationError")&&Ember.run.scheduleOnce("afterRender",this,s.default.showPifdValidationErrorV2,t.default._userAddressPidlData[this.puid].get("model.pidlDocuments"),t.default._userAddressPidlData[this.puid].get("pifdValidationError"),t.default._userAddressPidlData[this.puid].get("model")),t.default._userAddressPidlData[this.puid].get("model")):this.getModelPromise().then(function(e){return e.isXboxOne=i.default.isXboxOneClient(),e.displayIndex=0,e})},afterModel:function(e){this._super(e),this.setFocusOnFirstControl()},serialize:function(e){return{address:e}},getModelPromise:function(){var e=this,t=e.puid||"me"
return a.default.busy(),e.get("user").getProfile().then(function(n){return(l.default.isEnabled("enableccsmd")?e.get("pidlModelBuilder").getModelForAddress(t,null,n.serialize?n.serialize():n,e.get("creditCardCountry").getCountry()):e.get("pidlModelBuilder").getModelForAddress(t,null,n.serialize?n.serialize():n)).then(function(e){return a.default.done(),Ember.Object.create(e)})})}})}),define("web-blends/routes/payment-and-billing/add-email",["exports","web-blends/routes/payment-and-billing/base","web-blends/modules/busy","sfw-services/utils/pidl-data","sfw-services/utils/email-address-pidl","sfw-telemetry/utils/client","web-blends/modules/return-route","sfw-services/errors/app-error","sfw-telemetry/utils/flight-config"],function(e,t,n,a,r,s,i,l,o){function d(e,t){if("addprofile"===e.context){var n=i.default.addNameOrAddress(),a=n&&"redeem.redeemConfirm"===n.route?"redeem.redeemConfirm":"purchase.confirm"
return t.get("isNew")||t.get("hasDirtyAttributes")?t.save().then(function(){return e.replaceWith(a)}):e.replaceWith(a)}if("addaddress"===e.context)return o.default.isEnabled("addresssdk")&&"me".equalsIgnoreCase(e.puid)?e.replaceWith("paymentAndBilling.addressSdk",{queryParams:{context:"address",puid:e.puid}}):e.replaceWith("paymentAndBilling.addAddress",e.puid)
if("addpi"===e.context){var r=function(){return e.replaceWith("paymentAndBilling.addPaymentInstrument",{queryParams:{context:"add",paymentMethodFamily:e.paymentMethodFamily,paymentMethodType:e.paymentMethodType}})},d=function(){return e.replaceWith("paymentAndBilling.paymentInstrumentSdk",{queryParams:{context:"add",paymentMethodFamily:e.paymentMethodFamily,paymentMethodType:e.paymentMethodType,puid:e.puid}})}
if("credit_card"===e.paymentMethodFamily&&"unionpay_creditcard"!==e.paymentMethodType&&"unionpay_debitcard"!==e.paymentMethodType)return r()
var u=function(){return"unionpay_creditcard"===e.paymentMethodType||"unionpay_debitcard"===e.paymentMethodType||"ideal_billing_agreement"===e.paymentMethodType||"ach"===e.paymentMethodType?d():"paypal"===e.paymentMethodType?s.default.isXboxOneClient()?d():e.replaceWith("paymentAndBilling.redirectConfirm"):r()}
return t.get("isNew")||t.get("hasDirtyAttributes")?t.save().then(function(){return u()}):u()}throw new l.default("InvalidData")}Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({user:Ember.inject.service(),title:Ember.computed(function(){return this.get("strings.Need_More_Info_Title")}),beforeModel:function(e){this.puid="me",n.default.busy(),this.context=e.queryParams.context,"addpi"===this.context?(this.paymentMethodFamily=e.queryParams.paymentMethodFamily,this.paymentMethodType=e.queryParams.paymentMethodType):"addaddress"!==this.context&&"addprofile"!==this.context||(this.puid=e.queryParams.puid||"me")
var t=this
return this.get("user").getProfile(this.puid).then(function(e){var n="credit_card"===t.paymentMethodFamily&&"unionpay_creditcard"!==t.paymentMethodType&&"unionpay_debitcard"!==t.paymentMethodType
if(e.get("email_address")||n)return d(t,e).catch(function(e){if(!(e&&e.name&&e.name.toLowerCase&&"transitionaborted"===e.name.toLowerCase()))throw e})}).catch(function(e){return t.replaceWith("error",e)}).finally(function(){n.default.done()})},model:function(){var e=(0,r.default)()
return{pidlDocuments:[a.default.prepareModel(e,!0)],originalPidl:[e],pidl_blend_id_prefix:a.default.pidl_blend_id_prefix,context:this.context,paymentMethodFamily:this.paymentMethodFamily,paymentMethodType:this.paymentMethodType,puid:this.puid,isXboxOne:s.default.isXboxOneClient()}},afterModel:function(e){this._super(e),this.setFocusOnFirstControl()}})}),define("web-blends/routes/payment-and-billing/add-name",["exports","web-blends/routes/payment-and-billing/base","web-blends/modules/busy","sfw-services/utils/pidl-data","sfw-services/utils/name-pidl","sfw-telemetry/utils/client"],function(e,t,n,a,r,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({user:Ember.inject.service(),title:Ember.computed(function(){return this.get("strings.Need_More_Info_Title")}),model:function(e,t){return this.puid="me",n.default.busy(),this.context=t.queryParams.context,"addpi"===this.context?(this.paymentMethodFamily=t.queryParams.paymentMethodFamily,this.paymentMethodType=t.queryParams.paymentMethodType):"addaddress"!==this.context&&"addprofile"!==this.context||(this.puid=t.queryParams.puid||"me"),this.getModelPromise(this.paymentMethodFamily,this.paymentMethodType)},afterModel:function(e){this._super(e),this.setFocusOnFirstControl()},getModelPromise:function(e,t){var i=this,l=i.puid||"me"
return this.get("user").getProfile(l).then(function(o){if(o.get("hasFullName"))return i.replaceWith("paymentAndBilling.addEmail",{queryParams:{context:i.context,paymentMethodFamily:e,paymentMethodType:t,puid:l}}).then(function(){n.default.done()},function(e){n.default.done(),e&&e.name&&e.name.toLowerCase&&"transitionaborted"===e.name.toLowerCase()||i.replaceWith("error",e)})
var d={first_name:o.get("first_name")||"",last_name:o.get("last_name")||""},u=(0,r.default)(),c=a.default.prepareModel(u,!0,d),m=a.default.setDisplayIndex([c])
return n.default.done(),{pidlDocuments:[c],originalPidl:[u],pidl_blend_id_prefix:a.default.pidl_blend_id_prefix,context:i.context,paymentMethodFamily:e,paymentMethodType:t,puid:l,isXboxOne:s.default.isXboxOneClient(),displayIndex:0,lastDisplayIndex:m}})}})}),define("web-blends/routes/payment-and-billing/add-payment-instrument",["exports","sfw-telemetry/utils/app-globals","web-blends/routes/payment-and-billing/base","web-blends/modules/busy","web-blends/modules/flow-stack","sfw-components/utils/pidl-validator2","web-blends/modules/reset-blend-sensitive-user-data","web-blends/modules/return-route","web-blends/models/pages/add-payment-instrument","sfw-messaging/utils/open-url","sfw-telemetry/utils/blend-bi-tracker","sfw-components/utils/pidl-user-input-error","sfw-messaging/utils/open-terms","sfw-services/utils/pidl-data"],function(e,t,n,a,r,s,i,l,o,d,u,c,m,f){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n.default.extend({title:Ember.computed(function(){return this.get("strings.PaymentAndBillingAddPaymentInstrumentPageTitle")}),pidlModelBuilder:Ember.inject.service(),beforeModel:function(e){var t
e.targetName===this.routeName+".index"?("credit_card"===e.queryParams.paymentMethodFamily||"direct_debit"===e.queryParams.paymentMethodFamily||e.queryParams.piId?t=".card":("mobile_billing_non_sim"===e.queryParams.paymentMethodFamily||"ewallet"===e.queryParams.paymentMethodFamily&&e.queryParams.paymentMethodType&&"alipay_billing_agreement"===e.queryParams.paymentMethodType)&&(t=".smsChallenge"),t?this.replaceWith(this.routeName+t,{queryParams:e.queryParams}):this.replaceWith("error","InvalidCreditCardId")):this._super(e)},model:function(){return o.default.create()},afterModel:function(e){this._super({delayPageView:!(e.paymentMethodFamily||e.paymentMethodType||e.piId)})},getModelForPaymentMethod:function(e,t){return a.default.busy(),this.get("pidlModelBuilder").getModelForPaymentMethod(this.store,e,t).then(function(e){return a.default.done(),o.default.create(e)})},getModelForPaymentInstrument:function(e){var t=this
return a.default.busy(),this.get("pidlModelBuilder").getModelForPaymentInstrument(e).then(function(e){return a.default.done(),e&&e.error?(t.replaceWith("error",e.error),null):o.default.create(e)})},actions:{cancel:function(){this.trackButtonClick("#cancelButton"),(0,i.default)()
var e=l.default.addPi()
e?(r.default.pop("cancel"),e.context?this.replaceWith(e.route,e.context):this.replaceWith(e.route)):r.default.clearAndDone("cancel")},next:function(){var e=this.currentModel.get("displayIndex"),t=f.default.getPidlForDisplayIndex(e,this.currentModel.get("pidlDocuments"))
if(this.trackButtonClick("#nextButton",t,e),s.default.validateAtDisplayIndex(t,e)){for(e++;t&&t[e]&&t[e].pidl_blend_id&&"hidden"===$("#"+t[e].pidl_blend_id).attr("type");)e++
this.currentModel.set("displayIndex",e),Ember.run.scheduleOnce("afterRender",this,function(){s.default.focusValidElementOnPage()})}else c.default.logField(t&&t.length&&t.length>e&&t[e]),s.default.focusValidElementOnPage()},back:function(){var e=this.currentModel.get("displayIndex"),t=this.currentModel.get("pidlDocuments")[0].pidlModel
for(this.trackButtonClick("#backButton",t,e),e--;t&&t[e]&&t[e].pidl_blend_id&&"hidden"===$("#"+t[e].pidl_blend_id).attr("type");)e--
this.currentModel.set("displayIndex",e),Ember.run.scheduleOnce("afterRender",this,function(){s.default.focusValidElementOnPage()})},privacyStatement:function(e){d.default.open(e,"privacyStatement")},viewTerms:function(){u.default.captureContentPageAction({name:"ViewTermsButtonClicked"}),m.default.open("privacy")},didTransition:function(){this._super(),t.default._userPidlData&&t.default._userPidlData.get("model")&&t.default._userPidlData.get("pifdValidationError")?Ember.run.scheduleOnce("afterRender",this,s.default.showPifdValidationErrorV2,t.default._userPidlData.get("model.pidlDocuments"),t.default._userPidlData.get("pifdValidationError"),this.get("controller.model")):this.setFocusOnFirstControl()},enterPressed:function(){a.default.busy()
var e=this
setTimeout(function(){var t=!1,n=!1,r=e.currentModel.get("displayIndex"),i=f.default.getPidlForDisplayIndex(r,e.currentModel.get("pidlDocuments"))
if(s.default.validateAtDisplayIndex(i,r))n=!0
else if(i&&i[r]&&i[r].data_description&&i[r].data_description.is_key){var l=e.currentModel.get("originalPidl"),o=e.currentModel.get("pidlDocuments"),d=e.currentModel.get("userProfile")&&e.currentModel.get("userProfile").get("default_address")
s.default.findPidlForKey(i[r],l,o,d)&&(n=!0,t=!0)}t?Ember.run.scheduleOnce("afterRender",e,function(){a.default.done()}):a.default.done(),n&&(e.currentModel.get("canShowXboxNextButton")?e.send("next"):e.send("addPaymentInstrument"))},0)}},trackButtonClick:function(e,t,n){var a={}
if(t&&n){var r=t&&t.length&&t.length>n&&t[n]
r&&(a.field=r.pidl_blend_id_value,a.displayId=r.displayId,a.displayName=r.displayName)}u.default.capturePageAction($(e),a)}})})
define("web-blends/routes/payment-and-billing/add-payment-instrument/card",["exports","web-blends/routes/payment-and-billing/add-payment-instrument","sfw-telemetry/utils/app-globals","sfw-telemetry/utils/blend-bi-tracker","sfw-telemetry/utils/flight-config","sfw-components/utils/pidl-validator2","web-blends/modules/busy","sfw-services/utils/commerce-js","sfw-components/utils/pidl-display-data","sfw-services/models/user-pidl-data","sfw-components/utils/user-pidl-data-builder"],function(e,t,n,a,r,s,i,l,o,d,u){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({beforeModel:function(e){var t,n
e&&e.targetName&&e.targetName===this.routeName+".index"?("credit_card"===e.queryParams.paymentMethodFamily||e.queryParams.piId?(t=".creditCard","unionpay_creditcard"!==e.queryParams.paymentMethodType&&"unionpay_debitcard"!==e.queryParams.paymentMethodType||(e.queryParams.piId?n="paymentAndBilling.paymentInstrumentSdk":t="")):"direct_debit"===e.queryParams.paymentMethodFamily&&(t=".directDebit"),n?this.replaceWith(n,{queryParams:e.queryParams}):t?this.replaceWith(this.routeName+t,{queryParams:e.queryParams}):this.replaceWith("error","InvalidCreditCardId")):this._super(e)},actions:{addPaymentInstrument:function(){a.default.capturePageAction($("#saveButton")),r.default.isEnabled("userpidlbuilderpi")?this.send("addPaymentInstrumentV2"):this.send("addPaymentInstrumentV1")},addPaymentInstrumentV1:function(){var e=this
if(s.default.validateAll(e.currentModel.get("pidlDocuments"),!1,!1,e.currentModel)){i.default.busy()
var t=e.currentModel.get("originalPidl"),r=e.currentModel.get("pidl_blend_id_prefix"),u=e.currentModel.get("sessionId"),c=[],m=[]
if(t){var f=function(){n.default._userPidlData=d.default.create({data:c,originalPidl:t,prefix:r,suffix:"",model:e.currentModel,displayData:m})},p=[]
return t.forEach(function(n,s){var d=new Ember.RSVP.Promise(function(d,p){l.default.readUserInputData(n,r,"",u).then(function(r){l.default.getUserDisplayData(n,r).then(function(n){m[s]=n,n.paymentMethodType=r.paymentMethodType,m[s]=o.default.getAddPiUserDisplayData(n),c[s]=r,function(t,n){if(t>=n-1){var r={piType:c[0].paymentMethodType,piMethod:c[0].paymentMethodFamily}
a.default.captureContentPageAction({name:"AddPiDetails"},r),f(),i.default.done(),e.replaceWith("paymentAndBilling.summary","addPaymentInstrument","me").then(function(){e.currentModel.get("isXboxOne")&&e.currentModel.set("displayIndex",0)})}}(s,t.length),d()},function(t){e.replaceWith("error",t),p()})},function(t){e.replaceWith("error",t),p()})})
p.push(d)}),Ember.RSVP.all(p)}e.replaceWith("error","InvalidData")}},addPaymentInstrumentV2:function(){var e=this,t=e.currentModel.get("originalPidl"),r=e.currentModel.get("pidl_blend_id_prefix"),s=e.currentModel.get("sessionId"),l=e.currentModel
i.default.busy(),u.default.create("paymentinstrument",t,r,"",s,l).then(function(t){if(i.default.done(),t)if(t.error)e.replaceRoute("error",t.error)
else{var r={piType:t.data[0].paymentMethodType,piMethod:t.data[0].paymentMethodFamily}
a.default.captureContentPageAction({name:"AddPiDetails"},r),n.default._userPidlData=t,i.default.done(),e.replaceWith("paymentAndBilling.summary","addPaymentInstrument","me").then(function(){e.currentModel.get("isXboxOne")&&e.currentModel.set("displayIndex",0)})}})}}})}),define("web-blends/routes/payment-and-billing/add-payment-instrument/card/credit-card",["exports","web-blends/routes/payment-and-billing/add-payment-instrument/card","web-blends/modules/flow-stack","web-blends/models/pages/credit-card","sfw-telemetry/utils/start-data"],function(e,t,n,a,r){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({model:function(e,t){return"add".equalsIgnoreCase(t.queryParams.context)?(n.default.push(n.default.flowNames.AddPaymentInstrument),this.getModelForPaymentMethod(t.queryParams.paymentMethodFamily).then(function(e){var t=a.default.create(e)
return t.set("editMode",!1),t})):"edit".equalsIgnoreCase(t.queryParams.context)&&t.queryParams.piId?(n.default.push(n.default.flowNames.EditPaymentInstrument),this.getModelForPaymentInstrument(t.queryParams.piId).then(function(e){var t=a.default.create(e)
return t.set("editMode",!0),t})):r.default&&!String.prototype.isNullOrWhitespace(r.default.get().PaymentInstrumentId)?(n.default.push(n.default.flowNames.EditPaymentInstrument),this.getModelForPaymentInstrument(r.default.get().PaymentInstrumentId).then(function(e){var t=a.default.create(e)
return t.set("editMode",!0),t})):void this.replaceWith("error","InvalidCreditCardId")},getModelForPaymentMethod:function(e,t){return this._super(e,t)},getModelForPaymentInstrument:function(e){return this._super(e)}})}),define("web-blends/routes/payment-and-billing/add-payment-instrument/card/direct-debit",["exports","web-blends/routes/payment-and-billing/add-payment-instrument/card","web-blends/models/pages/direct-debit","web-blends/modules/flow-stack"],function(e,t,n,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({model:function(e,t){if("add".equalsIgnoreCase(t.queryParams.context))return a.default.push(a.default.flowNames.AddPaymentInstrument),this.getModelForPaymentMethod(t.queryParams.paymentMethodFamily,t.queryParams.paymentMethodType).then(function(e){return n.default.create(e)})
this.replaceWith("error","InvalidCreditCardId")},getModelForPaymentMethod:function(e,t){return this._super(e,t)}})}),define("web-blends/routes/payment-and-billing/add-payment-instrument/sms-challenge",["exports","web-blends/routes/payment-and-billing/add-payment-instrument","sfw-telemetry/utils/app-globals","sfw-telemetry/utils/blend-bi-tracker","sfw-components/utils/pidl-validator2","web-blends/modules/busy","sfw-services/utils/commerce-js","sfw-services/models/user-pidl-data","sfw-services/services/payment-instrument","sfw-services/utils/error-equals","sfw-telemetry/utils/start-data"],function(e,t,n,a,r,s,i,l,o,d,u){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({beforeModel:function(e){var t
e.targetName===this.routeName+".index"?(e.queryParams.paymentMethodFamily&&("mobile_billing_non_sim"===e.queryParams.paymentMethodFamily?t=".mobileBillingNonSim":"ewallet"===e.queryParams.paymentMethodFamily&&e.queryParams.paymentMethodType&&"alipay_billing_agreement"===e.queryParams.paymentMethodType&&(t=".alipayBillingAgreement")),t?this.replaceWith(this.routeName+t,{queryParams:e.queryParams}):this.replaceWith("error","InvalidCreditCardId")):this._super(e)},getModelForPaymentMethod:function(e,t){return this._super(e,t)},actions:{addPaymentInstrument:function(){a.default.capturePageAction($("#saveButton"))
var e=this
if(r.default.validateAll(e.currentModel.get("pidlDocuments"))){s.default.busy()
var t=e.currentModel.get("originalPidl"),c=e.currentModel.get("pidl_blend_id_prefix"),m=e.currentModel.get("sessionId"),f=[],p=[]
if(t){var g=function(t,i){if(t>=i-1){var l={piType:f[0].paymentMethodType,piMethod:f[0].paymentMethodFamily}
a.default.captureContentPageAction({name:"AddPiDetails"},l),b()
var c=Ember.RSVP.resolve(n.default._legacyPurchaseType)
return u.default.get().OrderId&&(c=e.store.findRecord("order",u.default.get().OrderId).then(function(e){var t=e.get("firstLineItem.product"),n=t.get("legacyPurchaseType")
return!n&&t.get("isOmexProduct")&&(n="OMEX"),n}).catch(function(){})),c.then(function(t){o.default.addPaymentInstrument(f[0],t).then(function(t){n.default._userPidlData.resumePiId=t.id,s.default.done(),e.replaceWith("purchase.riskChallenge","addPaymentInstrument","Sms",{queryParams:{paymentMethodType:e.get("paymentMethodType")}}).then(function(){e.currentModel.get("isXboxOne")&&e.currentModel.set("displayIndex",0)})},function(t){d.default.isAddNonSimMobiInLinePhoneError(t)||d.default.isAddAlipayBaAccountInLineError(t)||d.default.isAddAlipayBaPhoneInLineError(t)||d.default.isAddAlipayBaCertInLineError(t)?(n.default._userPidlData.pifdValidationError=t,s.default.done(),Ember.run.scheduleOnce("afterRender",e,r.default.showPifdValidationErrorV2,n.default._userPidlData.get("model.pidlDocuments"),n.default._userPidlData.get("pifdValidationError"),e.currentModel)):e.replaceWith("error",t)})})}},b=function(){n.default._userPidlData=l.default.create({data:f,originalPidl:t,prefix:c,suffix:"",model:e.currentModel,displayData:p})},h=[]
return t.forEach(function(a,l){var o=new Ember.RSVP.Promise(function(o,d){i.default.readUserInputData(a,c,"",m).then(function(u){i.default.getUserDisplayData(a,u).then(function(c){p[l]=c,c.details&&c.details.msisdn?i.default.validateUserInputData(a,u).then(function(){i.default.transformUserInputData(a,u).then(function(){f[l]=u,g(l,t.length),o()},function(t){e.replaceWith("error",t),d()})},function(t){t&&t.type&&"validation"===t.type?(f[l]=u,b(),n.default._userPidlData.pifdValidationError=t,s.default.done(),Ember.run.scheduleOnce("afterRender",e,r.default.showPifdValidationErrorV2,n.default._userPidlData.get("model.pidlDocuments"),n.default._userPidlData.get("pifdValidationError"),e.currentModel)):e.replaceWith("error",t),d()}):(f[l]=u,g(l,t.length),o())},function(t){e.replaceWith("error",t),d()})},function(t){e.replaceWith("error",t),d()})})
h.push(o)}),Ember.RSVP.all(h)}e.replaceWith("error","InvalidData")}}}})}),define("web-blends/routes/payment-and-billing/add-payment-instrument/sms-challenge/alipay-billing-agreement",["exports","web-blends/routes/payment-and-billing/add-payment-instrument/sms-challenge","web-blends/models/pages/alipay-billing-agreement","web-blends/modules/flow-stack","sfw-components/utils/pidl-validator2","sfw-services/utils/pidl-data","sfw-telemetry/utils/blend-bi-tracker","sfw-messaging/utils/open-terms"],function(e,t,n,a,r,s,i,l){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({model:function(e,t){for(var r in t.queryParams)t.queryParams.hasOwnProperty(r)&&(this[r]=t.queryParams[r])
return a.default.push(a.default.flowNames.AddPaymentInstrument),this.getModelForPaymentMethod(t.queryParams.paymentMethodFamily,t.queryParams.paymentMethodType).then(function(e){return n.default.create(e)})},getModelForPaymentMethod:function(e,t){return this._super(e,t)},findNextNotHiddenFieldDisplayIndex:function(e,t,n){for(var a=s.default.findPidlModelByDisplayIndex(e,t);e&&e[a]&&e[a].pidl_blend_id&&("hidden"===$("#"+e[a].pidl_blend_id).attr("type")||r.default.isDependencyValid(e[a]));)t+=n?1:-1,a+=n?1:-1,a=s.default.findPidlModelByDisplayIndex(e,t,a,n)
return t},actions:{next:function(){var e=this.currentModel.get("displayIndex"),t=s.default.getPidlForDisplayIndex(e,this.currentModel.get("pidlDocuments"))
r.default.validateAtDisplayIndex(t,e)&&(e++,e=this.findNextNotHiddenFieldDisplayIndex(t,e,!0),this.currentModel.set("displayIndex",e)),Ember.run.scheduleOnce("afterRender",this,function(){$("#payment_method_family_container").find("input,select,textarea,button").filter(":visible:first").focus()})},back:function(){var e=this.currentModel.get("displayIndex"),t=this.currentModel.get("pidlDocuments")[0].pidlModel
e--,e=this.findNextNotHiddenFieldDisplayIndex(t,e,!1),this.currentModel.set("displayIndex",e),Ember.run.scheduleOnce("afterRender",this,function(){$("#payment_method_family_container").find("input,select,textarea,button").filter(":visible:first").focus()})},viewTerms:function(){i.default.captureContentPageAction({name:"ViewTermsButtonClicked"}),l.default.open("alipayBA")}}})}),define("web-blends/routes/payment-and-billing/add-payment-instrument/sms-challenge/mobile-billing-non-sim",["exports","web-blends/routes/payment-and-billing/add-payment-instrument/sms-challenge","web-blends/models/pages/mobile-billing-non-sim","web-blends/modules/flow-stack"],function(e,t,n,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({model:function(e,t){return a.default.push(a.default.flowNames.AddPaymentInstrument),this.getModelForPaymentMethod(t.queryParams.paymentMethodFamily).then(function(e){return n.default.create(e)})},getModelForPaymentMethod:function(e,t){return this._super(e,t)}})}),define("web-blends/routes/payment-and-billing/address-sdk",["exports","web-blends/routes/base","web-blends/mixins/pidl-sdk-container","sfw-telemetry/utils/blend-bi-tracker","sfw-services/errors/service-error","sfw-services/errors/app-error","web-blends/modules/return-route","sfw-services/utils/service-call-headers","sfw-telemetry/utils/flight-config","sfw-telemetry/utils/app-globals","web-blends/modules/busy","sfw-telemetry/utils/start-data"],function(e,t,n,a,r,s,i,l,o,d,u,c){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend(n.default,{user:Ember.inject.service(),creditCardCountry:Ember.inject.service(),telemetryBi:Ember.inject.service(),title:Ember.computed(function(){return this.get("strings.Need_More_Info_Title")}),model:function(e,t){if(!t.queryParams.context)throw new s.default("InvalidOrMissingParamsInRoute")
var n={}
return n.context=t.queryParams.context,n.route=t.queryParams.route,n.returnOptions={callbacks:{success:this.successCallback(this),failure:this.failureCallback(this),gohome:this.cancelCallback(this)}},n.additionalHeaders=l.default.get({omitAcceptLanguage:!0,omitMarket:!0,addVnext:o.default.isEnabled("vnextpis"),addJwtHeader:!0,addSiteName:!0}),n.puid=t.queryParams.puid||"me",n.resourceType="Address",n.pageName="purchase_addressSdk",n.type="billing",n.displayOptions={busyBlockShowHideHandler:function(e){e?u.default.busy():u.default.done()}},n.addAddressCountry=o.default.isEnabled("enableccsmd")?this.get("creditCardCountry").getCountry():null,n.avsSuggest=!0,n.setAsDefaultBilling=!0,this.get("telemetryBi").setDidStartAddAddress(!0),n},successCallback:function(e){return function(t){var n=e.getCurrentModel()
return e.get("user").clear(),e.get("store").unloadAll("address"),e.get("user").getProfile(n.puid,!0,!0).then(function(r){var s=e.get("user").defaultAddressInfo(),i={context:n.context,originRoute:n.route,source:"addressSdk",isDefaultAddressCompliant:!!s.isDefaultAddressCompliant,isDefaultAddressRegionInRegionList:!!s.addressRegionInRegionList}
a.default.captureContentPageAction("AddAddressSuccess",i),e.get("telemetryBi").setDidFinishAddAddress(!0),"selectAddressRoute"!==n.route||"US".equalsIgnoreCase(c.default.get().Market)?e.handleResult(e):(u.default.busy(),r.set("default_address",t.response),r.set("default_address_id",t.id),r.save().then(function(){u.default.done(),e.handleResult(e)},function(t){e.replaceRoute("error",t)}))})}},failureCallback:function(e){return function(t){var n=e.getCurrentModel(),s=e.get("user").defaultAddressInfo(),i={context:n.context,originRoute:n.route,source:"addressSdk",isDefaultAddressCompliant:!!s.isDefaultAddressCompliant,isDefaultAddressRegionInRegionList:!!s.addressRegionInRegionList}
a.default.captureContentPageAction("AddAddressFailed",i)
var l=new r.PidlSdkError(t)
e.replaceWith("error",l)}},cancelCallback:function(e){return function(){var t=e.getCurrentModel(),n=e.get("user").defaultAddressInfo(),r={context:t.context,originRoute:t.route,source:"addressSdk",isDefaultAddressCompliant:!!n.isDefaultAddressCompliant,isDefaultAddressRegionInRegionList:!!n.addressRegionInRegionList}
a.default.captureContentPageAction("AddAddressCancelled",r),e.get("telemetryBi").setDidFinishAddAddress(!1)
var l=i.default.addNameOrAddress()
if(!l)throw new s.default("InvalidOrMissingParamsInRoute")
l.context?e.replaceWith(l.route,l.context):e.replaceWith(l.route)}},handleResult:function(e){if(d.default._userAddAddressData&&d.default._userAddAddressData.action)u.default.busy(),d.default._userAddAddressData.action(),d.default._userAddAddressData.action=function(){}
else{var t=i.default.addNameOrAddress()
if(!t)throw new s.default("InvalidOrMissingParamsInRoute")
t.context?e.replaceWith(t.route,t.context):e.replaceWith(t.route)}}})}),define("web-blends/routes/payment-and-billing/base",["exports","web-blends/routes/base","sfw-components/utils/pidl-validator2","sfw-services/utils/commerce-js","web-blends/modules/busy"],function(e,t,n,a,r){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({beforeModel:function(e){return this._super(e),r.default.busy(),a.default.init().then(function(){r.default.done()})},setFocusOnFirstControl:function(){Ember.run.scheduleOnce("afterRender",this,this.afterRenderPidlFocus)},afterRenderPidlFocus:function(){setTimeout(function(){n.default.focusValidElementOnPage()},200)}})}),define("web-blends/routes/payment-and-billing/choose-payment-method-family",["exports","web-blends/routes/base","web-blends/modules/busy","web-blends/modules/flow-stack","sfw-telemetry/utils/client","sfw-services/utils/supported-payment-instruments","sfw-telemetry/utils/flight-config","sfw-services/utils/risky-pis","sfw-telemetry/utils/app-globals"],function(e,t,n,a,r,s,i,l,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({title:Ember.computed(function(){return this.get("strings.PaymentAndBillingChoosePaymentMethodFamilyPageTitle")}),model:function(e){a.default.push(a.default.flowNames.AddPaymentInstrument)
var t=!(!e||"backupPi"!==e.context)
return this.getModelPromise(t).then(function(e){return e})},getModelPromise:function(e){var t=this,a=!1
n.default.busy()
var d=t.modelFor("purchase.confirm")
return d||(d=this.modelFor("purchase.confirmTvod")),d||(d=this.modelFor("redeem.redeemConfirm"))&&(a=!0),this.store.findAll("payment-method").then(function(n){var u=o.default._legacyPurchaseType,c=d&&d.order
c&&!(u=c.get("firstLineItem.product.legacyPurchaseType"))&&c.get("firstLineItem.product.isOmexProduct")&&(u="OMEX"),n.set("legacyPurchaseType",u)
var m=d&&d.isTvod
return l.default.filterPaymentMethods(n,c&&c.get("orderId")).then(function(l){var d=s.default.paymentMethodsForAddPi(l,c,e,!1,a,m),u=d.nonCsvPaymentMethods
if(u&&0!==u.length){var f=d.isCsvAllowed
if(1!==u.length||f)return n.set("showRedeemLink",f),n.set("paymentMethodFamilies",u),n.set("backupPi",e),e&&(o.default._addOptionalBackupPiVisited=o.default._addBackupPiOptional),n
var p=u[0],g="unionpay_creditcard"===p.get("paymentMethodType")||"unionpay_debitcard"===p.get("paymentMethodType")
if(!r.default.isAMCClient()&&(i.default.isEnabled("pidlsdkallpis")||"mobile_billing_non_sim".equalsIgnoreCase(p.get("paymentMethodFamily"))||"alipay_billing_agreement".equalsIgnoreCase(p.get("paymentMethodType"))||"ach".equalsIgnoreCase(p.get("paymentMethodType"))||"sepa".equalsIgnoreCase(p.get("paymentMethodType"))||"ideal_billing_agreement".equalsIgnoreCase(p.get("paymentMethodType"))||"paypal".equalsIgnoreCase(p.get("paymentMethodType"))&&!r.default.isXboxOneClient()||"paypal".equalsIgnoreCase(p.get("paymentMethodType"))&&r.default.isXboxOneClient()||"credit_card".equalsIgnoreCase(p.get("paymentMethodFamily"))&&!g)||g){var b="credit_card".equalsIgnoreCase(p.get("paymentMethodFamily"))&&!g
return void t.replaceWith("paymentAndBilling.paymentInstrumentSdk",{queryParams:{context:"add",paymentMethodFamily:p.get("paymentMethodFamily"),paymentMethodType:b?"":p.get("paymentMethodType"),puid:"me"}})}t.replaceWith("paymentAndBilling.addName",{queryParams:{context:"addpi",paymentMethodFamily:p.get("paymentMethodFamily"),paymentMethodType:p.get("paymentMethodType")}})}else t.replaceWith("error","NotSupportedPaymentMethods")})}).catch(function(e){e&&e.name&&e.name.toLowerCase&&"transitionaborted"===e.name.toLowerCase()||t.replaceWith("error",e)}).finally(function(){n.default.done()})}})}),define("web-blends/routes/payment-and-billing/direct-debit-challenge",["exports","web-blends/routes/payment-and-billing/base","sfw-services/services/challenge-descriptions","web-blends/modules/busy","sfw-services/utils/pidl-data"],function(e,t,n,a,r){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({model:function(){return a.default.busy(),this.getModelPromise().then(function(e){return a.default.done(),e})},getModelPromise:function(){return n.default.get("sepapicv").then(function(e){return{pidlDocuments:[r.default.prepareModel(e)],originalPidl:[e],pidl_blend_id_prefix:r.default.pidl_blend_id_prefix}})}})}),define("web-blends/routes/payment-and-billing/edit-payment-instrument",["exports","sfw-telemetry/utils/start-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Route.extend({beforeModel:function(){this.replaceWith("paymentAndBilling.addPaymentInstrument",{queryParams:{context:"edit",piId:t.default.get().PaymentInstrumentId,paymentMethodFamily:t.default.get().PaymentMethodFamily,paymentMethodType:t.default.get().PaymentMethodType}})}})}),define("web-blends/routes/payment-and-billing/payment-instrument-sdk",["exports","sfw-services/errors/app-error","sfw-services/errors/service-error","sfw-services/models/select-pi","sfw-services/utils/redirection-service-url","sfw-telemetry/utils/app-globals","sfw-telemetry/utils/blend-bi-tracker","sfw-telemetry/utils/client","sfw-telemetry/utils/create-guid","sfw-telemetry/utils/flight-config","sfw-telemetry/utils/start-data","web-blends/mixins/pidl-sdk-container","web-blends/modules/flow-stack","web-blends/modules/return-route","web-blends/routes/base"],function(e,t,n,a,r,s,i,l,o,d,u,c,m,f,p){Object.defineProperty(e,"__esModule",{value:!0})
e.default=p.default.extend(c.default,{postPiInfo:Ember.inject.service(),user:Ember.inject.service(),paymentIncentive:Ember.inject.service(),telemetryBi:Ember.inject.service(),pidl:Ember.inject.service("pidl"),context:null,puid:null,title:Ember.computed(function(){return this.get("strings.PaymentAndBillingAddPaymentInstrumentPageTitle")}),model:function(e,n){var a=this,i={},c=Ember.RSVP.resolve()
if(n.queryParams.paymentMethodFamily||n.queryParams.paymentMethodType||n.queryParams.puid||n.queryParams.piId){this.get("postPiInfo").setAddingPi(n.queryParams.paymentMethodFamily+"."+n.queryParams.paymentMethodType),i.paymentMethodFamily=n.queryParams.paymentMethodFamily,i.paymentMethodType=n.queryParams.paymentMethodType,i.puid=n.queryParams.puid||"me",i.resourceType="PaymentInstrument",i.piId=n.queryParams.piId,i.isBackupPi=n.queryParams&&"true".equalsIgnoreCase(n.queryParams.isBackupPi),i.context=n.queryParams.context,i.pidlPageNavigator={},"edit"===i.context&&m.default.push(m.default.flowNames.EditPaymentInstrument),i.pageName="paymentAndBilling_addPaymentInstrument_paymentInstrumentsdk",c=this.get("paymentIncentive").isUserEligibleToClaimIncentive().then(function(e){e&&(i.piRewardsIncentiveOfferId=a.get("paymentIncentive").offerId)}),i.greenId=s.default._sessionIds&&s.default._sessionIds.greenId,i.greenId||(i.greenId=o.default.create())
var p=f.default.addPiSuccess()
i.isRedeem=p&&"redeem.redeemConfirm"===p.route,i.returnOptions={callbacks:this.get("callbacks"),urls:function(e,t){var n=void 0
if("ideal_billing_agreement".equalsIgnoreCase(e))(n=r.default.inlineAddPiResultUrls())||(n=d.default.isEnabled("pidlsdkallpis")?r.default.generalAddPiResultUrls():r.default.syncPiAddPiResultUrls())
else if(d.default.isEnabled("pidlsdkallpis")&&!l.default.isXboxOneClient()&&"paypal".equalsIgnoreCase(e))(n=r.default.inlineAddPiResultUrls())||(n=r.default.generalAddPiResultUrls())
else if((d.default.isEnabled("pidlsdkallpis")||d.default.isEnabled("qrcodepaypalxbox"))&&l.default.isXboxOneClient()&&"paypal".equalsIgnoreCase(e))(n=r.default.inlineAddPiResultUrls())||(n=r.default.generalAddPiResultUrls())
else if(d.default.isEnabled("pidlsdkallpis")&&"sepa".equalsIgnoreCase(e))(n=r.default.inlineAddPiResultUrls())||(n=r.default.picvAddPiResultUrls())
else if(d.default.isEnabled("pidlsdkallpis")&&"alipay_billing_agreement".equalsIgnoreCase(e))(n=r.default.inlineAddPiResultUrls())||(n=r.default.generalAddPiResultUrls())
else if(d.default.isEnabled("klarna")&&d.default.isEnabled("klarnareturnurls")&&"klarna".equalsIgnoreCase(e))(n=r.default.inlineAddPiResultUrls())||(n=r.default.generalAddPiResultUrls())
else if(d.default.isEnabled("enablekakaopay")&&"kakaopay".equalsIgnoreCase(e))(n=r.default.inlineAddPiResultUrls())||(n=r.default.generalAddPiResultUrls())
else if(d.default.isEnabled("allowvenmo")&&"venmo".equalsIgnoreCase(e))(n=r.default.inlineAddPiResultUrls())||(n=r.default.generalAddPiResultUrls())
else{if(!d.default.isEnabled("returnurl")||!"credit_card".equalsIgnoreCase(t))return{}
n=r.default.generalAddPiResultUrls()}return{success:n.successUrl,failure:n.failureUrl}}(n.queryParams.paymentMethodType,n.queryParams.paymentMethodFamily)},function(e){if(r.default.inlineAddPiResultUrls()){if("ideal_billing_agreement".equalsIgnoreCase(e))return!0
if("paypal".equalsIgnoreCase(e))return!0
if("sepa".equalsIgnoreCase(e))return!0}return!1}(n.queryParams.paymentMethodType)&&(i.partner="webblends_inline"),d.default.isEnabled("enableccsmd")&&i.isBackupPi&&(i.lockCountrySelection=!0),this.get("telemetryBi").setDidStartAddPi(!0),this.get("telemetryBi").setAddPIType(i.paymentMethodType),this.get("telemetryBi").setAddPIFamily(i.paymentMethodFamily),i.isBackupPi&&this.get("telemetryBi").setDidStartAddBackup(!0),i.firstRun=n.queryParams.firstRun&&("boolean"==typeof n.queryParams.firstRun||"true".equalsIgnoreCase(n.queryParams.firstRun))}if(i){var g=Ember.RSVP.resolve(s.default._legacyPurchaseType)
return u.default.get().OrderId&&(g=this.store.findRecord("order",u.default.get().OrderId).then(function(e){var t=e.get("firstLineItem.product.legacyPurchaseType")
return!t&&e.get("firstLineItem.product.isOmexProduct")&&(t="OMEX"),"OMEX".equalsIgnoreCase(t)&&(t=void 0),t}).catch(function(){})),Ember.RSVP.Promise.all([g,c]).then(function(e){return i.legacyPurchaseType=e[0],i})}throw new t.default("InvalidOrMissingParamsInRoute")},callbacks:Ember.computed(function(){var e=this
return{success:function(t){var n=e.context&&e.context.context,r=e.get("user").defaultAddressInfo(),l=e.getCurrentModel()
if(i.default.captureAddPiStatePageAction("Success",{piInfo:{piMethod:e.context&&e.context.paymentMethodFamily,piType:e.context&&e.context.paymentMethodType,id:t.id,operationType:t.operationType,pageId:t.pageId},mode:n,isDefaultAddressCompliant:!!r.isDefaultAddressCompliant,isDefaultAddressRegionInRegionList:!!r.addressRegionInRegionList}),e.get("postPiInfo").setAddingPi(null),f.default.addPi()){s.default._selectPiData||(s.default._selectPiData=a.default.create())
var o=s.default._selectPiData.selectedPis,u=s.default._selectPiData.selectBackupPi?{id:o.id,csvTopOffPaymentInstrumentId:t.id}:{id:t.id}
s.default._selectPiData.selectedPis=u,e.store&&(d.default.isEnabled("storeunloadfix")?e.store.peekAll("payment-instrument").map(function(e){return e.unloadRecord()}):e.store.unloadAll("payment-instrument"))
var c=f.default.addPiSuccess(),p=c&&"purchase.confirmOobe"===c.route
"edit"===n?m.default.pop("piUpdated",t.id):"challenge"===n||p||m.default.pop("piAdded",t.id),e.get("telemetryBi").setDidFinishAddPi(!0),l&&l.isBackupPi&&e.get("telemetryBi").setDidFinishAddBackup(!0),c&&"redeem.redeemConfirm"===c.route?(e.store&&e.store.unloadAll("profile"),e.replaceWith("redeem.redeemConfirm")):c&&"purchase.confirmOobe"===c.route?e.replaceWith("purchase.confirmOobe"):e.context&&e.context.piRewardsIncentiveOfferId?e.replaceWith("purchase.rewardsThanks"):e.replaceWith("purchase.confirm")}else n?m.default.clearAndDone("piUpdated",t.id):m.default.clearAndDone("piAdded",t.id)},failure:function(t){var a=e.context&&e.context.context,r=e.get("user").defaultAddressInfo()
i.default.captureAddPiStatePageAction("Failed",{piInfo:{piMethod:e.paymentMethodFamily,piType:e.paymentMethodType},errorDetail:t,mode:a,isDefaultAddressCompliant:!!r.isDefaultAddressCompliant,isDefaultAddressRegionInRegionList:!!r.addressRegionInRegionList}),e.get("postPiInfo").setAddingPi(null)
var s=new n.PidlSdkError(t)
e.replaceWith("error",s)},gohome:function(){var t=f.default.addPi(),n=e.context&&e.context.context,a=e.get("user").defaultAddressInfo()
i.default.captureAddPiStatePageAction("Cancelled",{piInfo:{piMethod:e.paymentMethodFamily,piType:e.paymentMethodType},mode:n,isDefaultAddressCompliant:!!a.isDefaultAddressCompliant,isDefaultAddressRegionInRegionList:!!a.addressRegionInRegionList}),e.get("telemetryBi").setDidCancelAddPi(!0),e.get("postPiInfo").setAddingPi(null),t?(l.default.isMercury()&&e.context&&e.context.firstRun&&(t.context=e.context.isBackupPi?"backupPi":"selectPi"),"challenge"!==n&&m.default.pop("cancel"),"purchase.confirmOobe"===t.route?(i.default.captureContentPageAction({name:"addPiCancelledInOobe"}),m.default.clearAndDone("cancel")):t.context?e.replaceWith(t.route,t.context):e.replaceWith(t.route)):m.default.clearAndDone("cancel")}}}),actions:{cancel:function(){this.controller.get("model").pidlPageNavigator.movePrevPage()}}})}),define("web-blends/routes/payment-and-billing/profile-sdk",["exports","web-blends/routes/base","web-blends/mixins/pidl-sdk-container","sfw-services/errors/app-error","web-blends/modules/return-route","sfw-telemetry/utils/blend-bi-tracker","sfw-services/errors/service-error","web-blends/modules/busy","sfw-services/utils/service-call-headers","sfw-telemetry/utils/flight-config"],function(e,t,n,a,r,s,i,l,o,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend(n.default,{user:Ember.inject.service(),title:Ember.computed(function(){return this.get("strings.Need_More_Info_Title")}),model:function(e,t){if(!t.queryParams.context)throw new a.default("InvalidOrMissingParamsInRoute")
var n=this.get("user").getProfile("me"),r={}
return r.context=t.queryParams.context,r.nextContext=t.queryParams.nextContext,r.returnOptions={callbacks:{success:this.successCallback(this),failure:this.failureCallback(this),gohome:this.cancelCallback(this)}},r.additionalHeaders=o.default.get({omitAcceptLanguage:!0,omitMarket:!0,addVnext:d.default.isEnabled("vnextpis"),addJwtHeader:!0,addSiteName:!0}),r.puid=t.queryParams.puid||"me",r.resourceType="Profile",r.pageName="purchase_profileSdk",r.type="consumer",r.displayOptions={busyBlockShowHideHandler:function(e){e?l.default.busy():l.default.done()}},n.then(function(e){return r.profileId=e.get("id"),r})},successCallback:function(e){return function(){var t=e.getCurrentModel()
e.get("user").clear(),e.get("store").unloadAll("profile")
var n={context:t.context,source:"profileSdk"}
s.default.captureContentPageAction("AddProfileSuccess",n)
var i=r.default.addNameOrAddress()
if("addaddress"===t.nextContext)e.replaceWith("paymentAndBilling.addressSdk",{queryParams:{context:"address",puid:e.puid}})
else{if(!i||!i.route)throw new a.default("InvalidOrMissingParamsInRoute")
i.context?e.replaceWith(i.route,i.context):e.replaceWith(i.route)}}},failureCallback:function(e){return function(t){var n={context:e.getCurrentModel().context,source:"profileSdk"}
s.default.captureContentPageAction("AddProfileFailed",n)
var a=new i.PidlSdkError(t)
e.replaceWith("error",a)}},cancelCallback:function(e){return function(){var t={context:e.getCurrentModel().context,source:"profileSdk"}
s.default.captureContentPageAction("AddProfileCancelled",t)
var n=r.default.addNameOrAddress()
if(!n)throw new a.default("InvalidOrMissingParamsInRoute")
n.context?e.replaceWith(n.route,n.context):e.replaceWith(n.route)}}})}),define("web-blends/routes/payment-and-billing/redirect-confirm",["exports","web-blends/routes/base","sfw-telemetry/utils/app-globals"],function(e,t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({title:Ember.computed(function(){return this.get("strings.PaymentAndBillingAddPiRedirectConfirmPageTitle")}),renderTemplate:function(){this.render("paymentAndBilling/redirectConfirmNew")},model:function(){var e=this.modelFor("purchase.confirm")
e||(e=this.modelFor("redeem.redeemConfirm"))
var t=this.modelFor("paymentAndBilling.choosePaymentMethodFamily"),a=t&&t.get&&t.get("paymentMethodFamilies"),r=$.grep(a,function(e){var t=e.get("paymentMethodFamily").toLowerCase(),n=e.get("paymentMethodType").toLowerCase()
return"ewallet"===t&&"paypal"===n}),s=r&&r.length&&r.length>0&&r[0],i=n.default._legacyPurchaseType
return e&&e.order&&!(i=e.order.get("firstLineItem.product.legacyPurchaseType"))&&e.order.get("firstLineItem.product.isOmexProduct")&&(i="OMEX"),{order:e.order,logo:s&&s.get("preferredLogo"),legacyPurchaseType:i}}})}),define("web-blends/routes/payment-and-billing/redirect-continue",["exports","web-blends/routes/base","sfw-telemetry/utils/start-data"],function(e,t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({title:Ember.computed(function(){return this.get("strings.PaymentAndBillingRedirectContinuePageTitle")}),renderTemplate:function(){this.render("paymentAndBilling/redirectContinueNew")},model:function(){var e=Ember.RSVP.resolve(null)
return n.default.get().OrderId&&(e=this.store.findRecord("order",n.default.get().OrderId).then(function(e){var t=e.get("firstLineItem.product.legacyPurchaseType")
return!t&&e.get("firstLineItem.product.isOmexProduct")&&(t="OMEX"),t})),e.then(function(e){return{legacyPurchaseType:e}}).catch(function(){return{}})}})}),define("web-blends/routes/payment-and-billing/redirect-retry",["exports","web-blends/routes/base","web-blends/modules/return-route","web-blends/modules/flow-stack"],function(e,t,n,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({title:Ember.computed(function(){return this.get("strings.Add_PayPal_Error_Title")}),actions:{addOther:function(){var e=n.default.addPi()
if(e)return e.context?this.replaceWith(e.route,e.context):this.replaceWith(e.route)},retry:function(){return this.replaceWith("paymentAndBilling.redirectConfirm")},close:function(){return a.default.pop("piAdded"),this.replaceWith("purchase.confirm")}}})}),define("web-blends/routes/payment-and-billing/select-payment-instrument-sdk",["exports","web-blends/routes/base","web-blends/modules/return-route","web-blends/modules/flow-stack","sfw-telemetry/utils/blend-bi-tracker","sfw-telemetry/utils/app-globals","sfw-services/utils/supported-payment-instruments","sfw-services/models/session-ids","web-blends/modules/busy","sfw-services/errors/service-error","web-blends/mixins/pidl-sdk-container","sfw-services/errors/app-error","sfw-telemetry/utils/flight-config","sfw-telemetry/utils/client"],function(e,t,n,a,r,s,i,l,o,d,u,c,m,f){Object.defineProperty(e,"__esModule",{value:!0})
e.default=t.default.extend(u.default,{telemetryBi:Ember.inject.service(),context:null,title:Ember.computed(function(){return this.get("strings.PaymentAndBillingAddPaymentInstrumentPageTitle")}),model:function(e,t){var n=!1,r=this.modelFor("purchase.confirm")
a.default.push(a.default.flowNames.AddPaymentInstrument),r||(r=this.modelFor("purchase.confirmTvod")),r||(r=this.modelFor("redeem.redeemConfirm"))&&(n=!0)
var o=r&&r.order,d=r&&r.isTvod,u=null
if("selectpi"===t.queryParams.context){(u={}).context=t.queryParams.context,u.resourceType="PaymentInstrument",u.sessionId=o&&(s.default._sessionIds||(s.default._sessionIds=l.default.create()),s.default._sessionIds.getSessionId(s.default._sessionIds.newPlaceholderId)),u.orderId=n?null:o&&o.get("orderId"),u.puid=t.queryParams.puid||"me",u.isBackupPi="true".equalsIgnoreCase(t.queryParams.backupPi),u.pageName="paymentAndBilling_addPaymentInstrument_selectPaymentInstrumentSdk"
var f=i.default.getPiInclusionList(t.queryParams.inclusionList||o&&o.get("paymentInstrumentInclusionFilters"))
u.allowedPaymentMethods=i.default.getAllowedPaymentMethodsForPidlSdkAdd(o,f,n,d)
var p=o&&o.get("firstLineItem.listPrice")
if(m.default.isEnabled("nonsimforsub")){var g=o&&o.get("firstLineItem.RecurrencePrice")
g&&g>p&&(p=g)}u.filters={chargeThreshold:p,splitPaymentSupported:t.queryParams.backupPi}
var b=!f&&(t.queryParams.exclusionList||o&&o.get("paymentInstrumentExclusionFilters"))
b&&(u.filters.exclusionTags=b),u.returnOptions={callbacks:this.get("callbacks")},u.firstRun=t.queryParams.firstRun&&("boolean"==typeof t.queryParams.firstRun||"true".equalsIgnoreCase(t.queryParams.firstRun))}if(u)return u
throw new c.default("InvalidOrMissingParamsInRoute")},callbacks:Ember.computed(function(){var e=this
return{success:function(t){o.default.busy()
var n=t.id.split("."),s=n&&n.length>0?n[0]:"",i=n&&n.length>1?n[1]:"",l={}
l.name=t.id,r.default.captureContentPageAction(l)
var d=e.getCurrentModel()
if(!"stored_value".equalsIgnoreCase(i))return m.default.isEnabled("xboxnativepaypal")&&f.default.isMercury()&&"ewallet"===s&&"paypal"===i?void a.default.clearAndDone("addPaymentInstrument",{paymentMethodFamily:s,paymentMethodType:i,sessionId:e.context&&e.context.sessionId,orderId:e.context&&e.context.orderId}):e.replaceWith("paymentAndBilling.paymentInstrumentSdk",{queryParams:{context:"add",paymentMethodFamily:s,paymentMethodType:i,puid:e.get("model.puid")||"me",isBackupPi:d&&d.filters&&d.filters.splitPaymentSupported||!1,firstRun:e.context&&e.context.firstRun||!1}}).finally(function(){o.default.done()})
e.replaceWith("redeem.enterCode",{queryParams:{isPurchaseFlow:!0}}).finally(function(){o.default.done()})},failure:function(t){var n=new d.PidlSdkError(t)
e.replaceWith("error",n)},gohome:function(){var t=n.default.addPi()
e.get("telemetryBi").setDidCancelChoosePiToAdd(!0),t?(f.default.isMercury()&&e.context&&e.context.firstRun&&(t.context=e.context.isBackupPi?"backupPi":"selectPi"),a.default.pop("cancel"),t.context?e.replaceWith(t.route,t.context):e.replaceWith(t.route)):a.default.clearAndDone("cancel")}}})})}),define("web-blends/routes/payment-and-billing/summary",["exports","sfw-telemetry/utils/app-globals","web-blends/routes/base","sfw-telemetry/utils/start-data"],function(e,t,n,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n.default.extend({title:Ember.computed(function(){return this.get("strings.PaymentAndBillingSummaryPageTitle")}),user:Ember.inject.service(),model:function(e){var n=e&&e.puid||"me",r=e&&e.context&&"addAddress"===e.context,s=this
return this.get("user").getProfile(n).then(function(e){var i=Ember.RSVP.resolve(t.default._legacyPurchaseType)
return a.default.get().OrderId&&(i=s.store.findRecord("order",a.default.get().OrderId).then(function(e){var t=e.get("firstLineItem.product.legacyPurchaseType")
return!t&&e.get("firstLineItem.product.isOmexProduct")&&(t="OMEX"),t}).catch(function(){})),i.then(function(a){return{pidlData:r&&t.default._userAddressPidlData&&t.default._userAddressPidlData[n]?t.default._userAddressPidlData[n]:t.default._userPidlData,userProfile:e,noDefaultProfileAddressFound:!e.get("hasDefaultAddress"),puid:n,legacyPurchaseType:a}})})}})}),define("web-blends/routes/purchase",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Route.extend({})}),define("web-blends/routes/purchase/ask-purchaser/index",["exports","web-blends/routes/base"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({})}),define("web-blends/routes/purchase/ask-purchaser/success",["exports","web-blends/routes/base"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({})}),define("web-blends/routes/purchase/ask-to-buy/block",["exports","web-blends/routes/base","web-blends/modules/flow-stack","sfw-telemetry/utils/blend-bi-tracker"],function(e,t,n,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({actions:{close:function(){a.default.capturePurchaseStatePageAction("Cancelled"),n.default.clearAndDone("cancel")}}})}),define("web-blends/routes/purchase/ask-to-buy/index",["exports","web-blends/routes/base","web-blends/modules/flow-stack","sfw-components/utils/order-bi-data","sfw-telemetry/utils/blend-bi-tracker","sfw-telemetry/utils/flight-config"],function(e,t,n,a,r,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({title:Ember.computed(function(){return this.get("isXbetAskAParent")||s.default.isEnabled("newatbmsg")?this.get("strings.AskToBuy_New_Index_Title_V1"):this.get("strings.AskToBuy_Index_Title_V1")}),paymentInstruments:Ember.inject.service(),model:function(e){if(e&&e.orderId)return Ember.RSVP.hash({order:this.get("store").findRecord("order",e.orderId),selectedPi:this.get("paymentInstruments").getPi(e.selectedPiId)})
this.replaceWith("purchase.confirm")},afterModel:function(e,t){this._super.apply(this,arguments),e.pageDetails={reason:t.queryParams.reason,orderInfo:(0,a.default)(e.order,e.selectedPi,null,!0)}},actions:{didTransition:function(){return this._super.apply(this,arguments),n.default.push(n.default.flowNames.AskToBuy),!0},cancel:function(){r.default.capturePurchaseStatePageAction("Cancelled"),n.default.clearAndDone("cancel")}}})}),define("web-blends/routes/purchase/ask-to-buy/success",["exports","web-blends/routes/base","web-blends/modules/flow-stack","sfw-telemetry/utils/blend-bi-tracker","sfw-telemetry/utils/flight-config"],function(e,t,n,a,r){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({title:Ember.computed(function(){return r.default.isEnabled("newatbmsg")?this.get("strings.AskToBuy_New_Success_Title"):this.get("strings.AskToBuy_Success_Title_V1")}),actions:{close:function(){a.default.capturePurchaseStatePageAction("Cancelled"),n.default.clearAndDone("cancel")}}})}),define("web-blends/routes/purchase/complete",["exports","web-blends/routes/base","web-blends/modules/busy","sfw-telemetry/utils/start-data"],function(e,t,n,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({productImages:Ember.inject.service(),xbetService:Ember.inject.service("xbet"),title:Ember.computed(function(){return"gift"===this.getCurrentModel().scenario?this.get("strings.Purchase_Gift_Congrats_Page_Title"):this.get("strings.Purchase_Congrats_Page_Title")}),model:function(e){var t=this
return n.default.busy(),this.get("store").findRecord("order",e.orderId).then(function(r){return a.default.get().AskPurchaserScenario&&a.default.get().AskPurchaserScenario.toString().equalsIgnoreCase("true")&&t.get("xbetService").postGiftCompleted(r.get("firstLineItem.token5x5Value"),r.get("firstLineItem.productId"),r.get("firstLineItem.skuId")),t.get("productImages").getImageUrl(r.get("firstLineItem.product")).then(function(t){return r.set("imageProductUrl",t),n.default.done(),{order:r,scenario:e.scenario}})})}})}),define("web-blends/routes/purchase/confirm-oobe",["exports","sfw-telemetry/utils/app-globals","web-blends/modules/busy","web-blends/routes/base","sfw-telemetry/utils/client","sfw-services/utils/error-equals","sfw-telemetry/utils/flight-config","web-blends/modules/flow-stack","sfw-components/utils/order-bi-data","web-blends/utils/selected-backup-pi","web-blends/utils/selected-pi","sfw-services/utils/map-omex-not-eligible-error","sfw-messaging/utils/open-terms","sfw-telemetry/utils/start-data","sfw-services/utils/supported-payment-instruments","sfw-telemetry/utils/blend-bi-tracker","sfw-services/models/session-ids","web-blends/utils/perf","sfw-services/errors/app-error","sfw-messaging/utils/post-messages","sfw-messaging/utils/messages"],function(e,t,n,a,r,s,i,l,o,d,u,c,m,f,p,g,b,h,y,P,_){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a.default.extend({paymentInstruments:Ember.inject.service(),user:Ember.inject.service(),creditCardCountry:Ember.inject.service(),autoRenewalConsent:Ember.inject.service(),telemetryBi:Ember.inject.service(),title:Ember.computed(function(){return this.get("strings.PurchaseConfirmPageTitle")}),beforeModel:function(){if(this._super.apply(this,arguments),!(f.default.get().OrderId||f.default.get().ProductId&&f.default.get().SkuId&&(f.default.get().AvailabilityId||this.isDigitalAttachment()&&f.default.get().AttachRecordId)))throw new y.default("InvalidOrderData")},model:function(e,a){var r=this
n.default.busy()
var s={piContainer:this.get("paymentInstruments"),redirectedFrom:a.queryParams.redirectedFrom,addAddressRequired:!1,selectDefaultAddress:!1,showChangeButton:i.default.isEnabled("oobepichange"),showOobeStyledPiContainer:i.default.isEnabled("oobestyledpicontainer")}
s.autoConfirm=e&&e.autoConfirm||!1
var l=this.isDigitalAttachment()
l&&a.queryParams.selectedBillingInfo&&this.set("daSelectedPIBillingInfo",JSON.parse(a.queryParams.selectedBillingInfo))
return(f.default.get().OrderId&&!l?this.loadOrder(f.default.get().OrderId):this.createOrder()).then(function(e){s.order=e}).then(function(){var e=Ember.RSVP.resolve()
return s.order.get("isPiRequired")&&(e=s.piContainer.enumerate(r.get("store"),s.order.get("isOmexProduct"),s.order.get("legacyPurchaseType"),s.order.get("orderId"),!1,!1,!1,!0).then(function(){var e=p.default.getPisAllowedForOrder(s.piContainer.get("allPaymentInstruments"),s.order,!0)
s.piContainer.set("allowedPaymentInstruments",e)}).catch(function(e){throw g.default.capturePurchaseStatePageAction("Failed",{orderInfo:(0,o.default)(s.order,s.selectedPi),sessionId:s.order.get("sessionId")}),e})),e.then(function(){var e=s.piContainer.get("allowedPaymentInstruments")
if(t.default._selectPiData&&t.default._selectPiData.selectedPis){var n=t.default._selectPiData.selectedPis,a=n.id,r=n.csvTopOffPaymentInstrumentId||null
t.default._selectPiData.reset(),s.selectedPi=(0,u.default)(e,null,a),s.selectedBackupPi=r?(0,d.default)(e,null,r):null}else s.selectedPi=(0,u.default)(e,s.order),s.selectedBackupPi=(0,d.default)(e,s.order)})}).then(function(){var e=s.order.get("selectedPi")||null,t=Ember.get(s,"selectedPi.id")||null
if(e!==t&&(s.changedPis={id:t},s.order.get("isCheckingOut")))return s.order.set("orderState","Editing"),s.order.save()}).then(function(){return s})},afterModel:function(e){var t=this
return this._super.apply(this,arguments),this.validateOrder(e).then(function(){if(e.isPurchaseAllowed&&e.order.get("isEditing"))return t.checkoutOrder(e)}).then(function(){t.get("telemetryBi").setDidHavePi(e.hasPiIfRequired),e.piTelemetry={didStartAddPi:t.get("telemetryBi.didStartAddPi"),didFinishAddPi:t.get("telemetryBi.didFinishAddPi"),didCancelAddPi:t.get("telemetryBi.didCancelAddPi"),didCancelChoosePiToAdd:t.get("telemetryBi.didCancelChoosePiToAdd"),didStartAddAddress:t.get("telemetryBi.didStartAddAddress"),didFinishAddAddress:t.get("telemetryBi.didFinishAddAddress"),addPIType:t.get("telemetryBi.addPIType"),addPIFamily:t.get("telemetryBi.addPIFamily"),didStartSelectBackup:t.get("telemetryBi.didStartSelectBackup"),didFinishSelectBackup:t.get("telemetryBi.didFinishSelectBackup"),didStartAddBackup:t.get("telemetryBi.didStartAddBackup"),didFinishAddBackup:t.get("telemetryBi.didFinishAddBackup"),didStartPSD2Challenge:t.get("telemetryBi.didStartPSD2Challenge"),didFinishPSD2Challenge:t.get("telemetryBi.didFinishPSD2Challenge"),didStartSMSChallenge:t.get("telemetryBi.didStartSMSChallenge"),didFinishSMSChallenge:t.get("telemetryBi.didFinishSMSChallenge"),didStartCVVChallenge:t.get("telemetryBi.didStartCVVChallenge"),didFinishCVVChallenge:t.get("telemetryBi.didFinishCVVChallenge"),didStartDowngrade:t.get("telemetryBi.didStartDowngrade"),didFinishDowngrade:t.get("telemetryBi.didFinishDowngrade"),didStartYearlySubscription:t.get("telemetryBi.didStartYearlySubscription"),didFinishYearlySubscription:t.get("telemetryBi.didFinishYearlySubscription"),didHavePi:t.get("telemetryBi.didHavePi"),didRedirectReturn:t.get("telemetryBi.didRedirectReturn")},e.pageDetails={buyButtonEnabled:e.isPurchaseAllowed,noDefaultAddress:e.noDefaultAddress,noProfileAddress:e.noProfileAddressFound,noEmailAddress:e.noEmailAddress,noFullName:e.noFullName,noPaymentInstrument:e.piContainer&&0===e.piContainer.get("hasPi"),noAllowedPaymentInstruments:e.piContainer&&e.piContainer.get("allowedPaymentInstruments")&&0===e.piContainer.get("allowedPaymentInstruments").length,hasPiIfRequired:e.hasPiIfRequired,orderInfo:(0,o.default)(e.order,e.selectedPi,e.selectedBackupPi,null,e.profile,e.piTelemetry),isAutoRenewal:"turnonautorenewal".equalsIgnoreCase(f.default.get().OfferType)},e.pageDetails.scn=e.order.get("firstLineItem.isSubscriptionTrial")?"trial":"purchase",n.default.done()})},actions:{didTransition:function(){this._super.apply(this,arguments),l.default.clear(),l.default.push(l.default.flowNames.Purchase)
var e=this.getCurrentModel()
if(i.default.isEnabled("psd2enable")&&e.autoConfirm)this.controllerFor("purchase.confirmOobe").send("purchase")
else if(!e.hasPiIfRequired&&e.piContainer){var t=e.piContainer.allowedPaymentInstruments&&e.piContainer.allowedPaymentInstruments.length||0,n="credit_card"
if(p.default.isAlipayEnabledForWinOobe()&&(n="ewallet"),!t)return this.replaceWith("paymentAndBilling.paymentInstrumentSdk",{queryParams:{context:"add",paymentMethodFamily:n,paymentMethodType:p.default.getPaymentMethodListForWinOobe(),puid:"me"}})}else{if(e.addAddressRequired)return this.replaceWith("paymentAndBilling.addressSdk",{queryParams:{context:"address",puid:"me",isBeneficiaryPurchase:!1}})
if(e.selectDefaultAddress)return this.replaceWith("purchase.selectAddress","me")}Ember.run.scheduleOnce("afterRender",this,this.afterRender,e)},willTransition:function(e){var t=this.getCurrentModel()
i.default.isEnabled("purchasestatesessiontime")&&h.default&&!h.default.loadCaptured&&g.default.addWebLoadTimeInBlendContext(Date.now())
var a="purchase"
return t.order.get("firstLineItem.isSubscriptionTrial")?a="trial":i.default.isEnabled("renewal")&&t.order.get("isOmexProduct")&&(a="renew"),h.default.captureLoad(null,a),!i.default.isEnabled("adapterqueues")&&t&&t.checkoutPromise&&t.order.get("hasDirtyAttributes")?(n.default.busy(),e.abort(),void t.checkoutPromise.finally(function(){n.default.done(),e.retry()})):this._super(e)},cancel:function(){n.default.busy()
var e=this.controller.get("model.order"),t=this.controller.get("model.selectedPi"),a=this.controller.get("model.profile"),r={orderInfo:(0,o.default)(e,t,null,!0,a)}
g.default.capturePurchaseStatePageAction("Cancelled",r),l.default.clearAndDone("cancel")},viewTou:function(e,t){!i.default.isEnabled("newsubscriptionlegalstrings")||"learnMoreAboutCancellation"!==t&&"learnMoreAboutRefunds"!==t?m.default.open("salesTerms",null,!1,!0):m.default.open(t,e,!1,!0)}},afterRender:function(e){e.isPurchaseAllowed&&h.default.markOnce(h.default.markerNames.buyButtonActive),i.default.isEnabled("purchasestatesessiontime")&&h.default&&!h.default.loadCaptured&&g.default.addWebLoadTimeInBlendContext(Date.now())
var t="purchase"
e.order.get("firstLineItem.isSubscriptionTrial")?t="trial":i.default.isEnabled("renewal")&&e.order.get("isOmexProduct")&&(t="renew"),h.default.captureLoad(null,t),P.default.send(_.default.cortanaStringDescription(this.get("strings.Purchase_Oobe_Title")))},loadOrder:function(e){return this.get("store").findRecord("order",e).then(function(e){return e.get("firstLineItem.product").then(function(){return e})})},createOrder:function(){var e=this.get("store"),t=e.createRecord("orderLineItem",{availabilityId:f.default.get().AvailabilityId,beneficiary:f.default.get().IdentityType&&f.default.get().IdentityValue?{identityType:f.default.get().IdentityType,identityValue:f.default.get().IdentityValue}:null,campaignId:f.default.get().CampaignId||null,devOfferId:f.default.get().DevOfferId,optionalCampaignId:f.default.get().OptionalCampaignId||null,productId:f.default.get().ProductId,quantity:+f.default.get().Quantity||1,skuId:f.default.get().SkuId}),n={},a=!1
f.default.get().CallerApplicationId&&(n.callerApplicationId=f.default.get().CallerApplicationId,a=!0),f.default.get().UniversalAffiliateId&&(n.universalAffiliateId=f.default.get().UniversalAffiliateId,a=!0),i.default.isEnabled("additionalmetadata")&&f.default.get().IsDigitalAttachment&&(n.purchaseKind="DigitalAttach",a=!0)
var s=e.createRecord("order",{orderAdditionalMetadata:a?JSON.stringify(n):null,clientContext:r.default.getContext(),language:f.default.get().Languages||f.default.get().Culture,market:f.default.get().Market,orderState:"Editing",lineItems:[t]}).save(),l=f.default.get().ProductId+"/"+f.default.get().SkuId+"/"+f.default.get().AvailabilityId,o=e.findRecord("product",l)
return this.isDigitalAttachment()?s.then(function(t){return f.default.set("OrderId",t.get("orderId")),f.default.get().ProductId===t.get("firstLineItem.productId")&&f.default.get().SkuId===t.get("firstLineItem.skuId")&&f.default.get().AvailabilityId===t.get("firstLineItem.availabilityId")||(f.default.get().ProductId=t.get("firstLineItem.productId"),f.default.get().SkuId=t.get("firstLineItem.skuId"),f.default.get().AvailabilityId=t.get("firstLineItem.availabilityId")),o.then(function(){var n=t.get("firstLineItem.productId")+"/"+t.get("firstLineItem.skuId")+"/"+t.get("firstLineItem.availabilityId"),a=e.findRecord("product",n)
return Ember.RSVP.all([t,a])}).then(function(t){var n=t[0]
if(t.length>1){var a=t[1],r=a&&a.get("DisplaySkuAvailabilities.0.Availabilities.0.RenewalBigId")
if(r){var s=e.findRecord("product",r)
return Ember.RSVP.all([n,a,s])}}return[n]}).then(function(e){return e[0]})}):Ember.RSVP.all([s,o]).then(function(e){var t=e[0]
return f.default.set("OrderId",t.get("orderId")),t})},checkoutOrder:function(e){var a=this
return this.get("user").getDefaultAddress().then(function(r){if(e.selectedPi){var i={}
if(a.isAutoRenewalConsentRequired(e,r)&&a.get("autoRenewalConsent").addAutoRenewalConsent(),i.csvTopOffPaymentInstrumentId=e.selectedBackupPi?e.selectedBackupPi.get("id"):null,i.paymentInstrumentId=e.selectedPi.get("id"),i.sessionId=t.default._sessionIds.getSessionId(i.paymentInstrumentId,i.csvTopOffPaymentInstrumentId),i.soldToAddressId=e.soldToAddressRequired?r.id:null,e.order.set("billingInformation",i),"US".equalsIgnoreCase(f.default.get().Market)&&i.soldToAddressId){var o=a.get("user").getAddressZipCodeInfo(r)
g.default.captureContentPageAction({name:"zipPlusFour"},{soldToAddressId:i.soldToAddressId,soldToaddressIdRequired:e.soldToAddressRequired,zipCodeLength:o.zipCodeLength,zipCodeHasHyphen:o.hasHyphen,zipPlusFour:o.zipPlusFour,addressRegionInRegionList:o.addressRegionInRegionList,transationType:"purchase"})}}a.isDigitalAttachment()||(e.order.set("orderState","CheckingOut"),e.checkoutPromise=e.order.save().catch(function(t){if(e.order.rollbackAttributes(),s.default.isInvalidOrderStateForOperationError(t))return a.get("store").findRecord("order",e.order.id,{reload:!0}).then(function(e){if(e.get("isPurchased")){var a=e.get("lineItems"),r={orderId:e.get("orderId"),count:a&&a.length||0,lineItems:a&&a.map(function(e){return e.serialize({full:!0})})}
return n.default.busy(),void l.default.pop("success",r)}throw t},function(){throw t})
throw t}).catch(function(t){e.order.get("isOmexProduct")&&(t=c.default.getError(t)),a.replaceWith("error",t)})),t.default._sessionIds||(t.default._sessionIds=b.default.create()),t.default._sessionIds.greenId=e.order.get("sessionId")})},isAutoRenewalConsentRequired:function(e,t){var n=t&&t.get("region"),a=f.default.get().Market,r=e.order&&e.order.get("firstLineItem"),s=this.get("autoRenewalConsent").supportedRegions
return!!("US".equalsIgnoreCase(a)&&s.containsAnyIgnoreCase(n)&&r.get("isSubscriptionItem"))},hasPiIfRequired:function(e){return(!e.selectedPi||0!==this.get("store").peekAll("payment-instrument").get("length"))&&(!!e.selectedPi||!e.order.get("isPiRequired"))},validateOrder:function(e){var t=this
return!i.default.isEnabled("disableblendsda")&&this.isDigitalAttachment()&&e.order.get("isPurchased")?(l.default.clear(),l.default.push(l.default.flowNames.DigitalAttach),e.isPurchaseAllowed=!1,g.default.capturePurchaseStatePageAction("Purchased",{},"PURCHASECOMPLETE"),this.replaceWith("purchase.complete",e.order.get("id"),{queryParams:{scenario:"digitalAttach"}}),Ember.RSVP.resolve()):(e.isPurchaseAllowed=!0,e.autoConfirm?Ember.RSVP.resolve():(e.noDefaultAddress=!1,e.noProfileAddressFound=!1,e.noEmailAddress=!1,e.noFullName=!1,e.hasPiIfRequired=this.hasPiIfRequired(e),this.restrictChildPurchase(e)?(n.default.done(),e.isPurchaseAllowed=!1,Ember.RSVP.reject(new y.default("PurchaseBlockedByFamilyPolicy"))):(i.default.isEnabled("skipoobeprevieweligibility")?Ember.RSVP.resolve():i.default.isEnabled("previeweligibility")&&e.order.get("supportsConversion")?this.handleDowngrade(e.order):Ember.RSVP.resolve()).then(function(){if(e.order.get("firstLineItem").get("isExclusivityFailed"))return Ember.RSVP.reject(new y.default("ExclusivityFailed"))
if(!e.hasPiIfRequired)return e.isPurchaseAllowed=!1,Ember.RSVP.resolve()
if(i.default.isEnabled("enableccsmd")){var a=e.selectedPi&&e.selectedPi.get("smdCreditCardCountry")||null
t.get("creditCardCountry").setCountry(a)}if(e.order.get("isEditing")){n.default.busy(),e.soldToAddressRequired=e.selectedPi&&e.selectedPi.get("soldToAddressRequired")
var r=null
return i.default.isEnabled("enableccsmd")&&(r=t.get("creditCardCountry").getCountry()||f.default.get().Market),t.get("user").getProfile(null,e.soldToAddressRequired,!1,r).then(function(n){if(i.default.isEnabled("saveprofile")&&(e.profile=n),e.addAddressRequired=!1,e.selectDefaultAddress=!1,n.get("hasFullName")||(e.noFullName=!0),n.get("email_address")||(e.noEmailAddress=!0),n.get("hasProfileAddress")?n.get("hasDefaultAddress")||(e.noDefaultAddress=!0):e.noProfileAddressFound=!0,e.soldToAddressRequired&&(e.noProfileAddressFound||e.noDefaultAddress)){var a={operationType:e.noProfileAddressFound?"AddAddress":"SelectAddress",isDefaultAddressCompliant:!0}
if(i.default.isEnabled("enablezipplusfour")&&"US".equalsIgnoreCase(f.default.get().Market)){var r=t.get("user").getOriginalDefaultAddress()
r&&(a.isDefaultAddressCompliant=t.get("user").isZipPlusFourCompliant(r,!0),a.addressRegionInRegionList=t.get("user").getAddressZipCodeInfo(r).addressRegionInRegionList)}g.default.captureContentPageAction({name:"addAddressOrSelectAddress"},a)}if(!e.soldToAddressRequired||!e.order.get("isPiRequired")||!n.get("isNew")&&n.get("hasFullName")&&n.get("email_address")&&n.get("hasDefaultAddress")&&n.get("hasProfileAddress")){if(e.order.get("isPiRequired")&&(n.get("isNew")||!n.get("hasFullName")||!n.get("email_address")))return e.isPurchaseAllowed=!1,Ember.RSVP.reject(new y.default("ProfileIncomplete"))}else if(e.isPurchaseAllowed=!1,i.default.isEnabled("selectaddressoobe")&&e.noDefaultAddress)e.selectDefaultAddress=!0
else{if(!i.default.isEnabled("oobeaskforaddress")&&!p.default.isAlipayEnabledForWinOobe()||!e.noProfileAddressFound)return Ember.RSVP.reject(new y.default("ProfileIncomplete"))
e.addAddressRequired=!0}}).then(function(){n.default.done()})}return e.order.get("isCheckingOut")?Ember.RSVP.resolve():(e.isPurchaseAllowed=!1,Ember.RSVP.reject(new y.default("UnexpectedOrderState","orderState:"+e.order.get("orderState"))))}).then(function(){n.default.done()})))},restrictChildPurchase:function(e){var t=e.order.get("firstLineItem"),n=t.get("purchaseApprovalState"),a=t.get("askToBuySetting")
return"blockedbyage"===n||"blockedbypolicy"===n||"on"===a},handleDowngrade:function(e){return e.set("previewEligibility",!0),e.set("orderState","Editing"),e.save().catch(function(t){throw e.rollbackAttributes(),t}).finally(function(){e.set("previewEligibility",!1)})},isDigitalAttachment:function(){return f.default.get().IsDigitalAttachment&&i.default.isEnabled("dainwinoobe")}})}),define("web-blends/routes/purchase/confirm-tvod",["exports","web-blends/utils/offer-parser","sfw-telemetry/utils/start-data","web-blends/modules/flow-stack","web-blends/routes/base","sfw-services/services/payment-instrument","sfw-services/utils/error-equals","sfw-telemetry/utils/app-globals","web-blends/modules/settings/no-payment-instruments","web-blends/modules/busy","sfw-services/models/select-pi"],function(e,t,n,a,r,s,i,l,o,d,u){function c(e){l.default._selectPiData=u.default.create({selectedPis:{id:e}})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r.default.extend({paymentInstruments:Ember.inject.service(),title:"TV On Demand Purchase Confirm Page",model:function(){var e=this,r=n.default.get().Offer,l={}
if(!r||null!=(l=t.default.parseTvodOffer(r)))return l.pageDetails={orderId:l.OrderId,productTitle:l.ProductTitle},a.default.clear(),a.default.push(a.default.flowNames.TvodPurchase),l.piContainer=this.get("paymentInstruments"),l.isTvod=!0,l.noPaymentInstruments=(0,o.default)(!0),d.default.busy(),l.piContainer.enumerate(e.store,!1,null,null,!0).then(function(){return 0===l.piContainer.allPaymentInstruments.length&&"CN".equalsIgnoreCase(n.default.get().Market)?s.default.addLightweightPaymentInstrument().then(function(t){return d.default.done(),t&&t.id&&c(t.id),e.store.unloadAll("payment-instrument"),l.piContainer.enumerate(e.store,!1,null,null,!0).then(function(){return l})},function(t){if(d.default.done(),i.default.isProfileMissingError(t)||"PaymentInstrumentNotFound"===t.code)return e.replaceWith("paymentAndBilling.addName",{queryParams:{context:"addaddress",puid:"me"}})
e.replaceWith("error",t)}):("CN".equalsIgnoreCase(n.default.get().Market)&&c(l.piContainer.allPaymentInstruments[0].get("id")),d.default.done(),l)})
this.replaceWith("error","TvodInvalidOffer")}})}),define("web-blends/routes/purchase/confirm",["exports","sfw-telemetry/utils/app-globals","web-blends/modules/busy","web-blends/modules/back-stack","web-blends/routes/base","sfw-telemetry/utils/client","sfw-services/utils/error-equals","sfw-telemetry/utils/flight-config","web-blends/modules/flow-stack","sfw-components/utils/order-bi-data","web-blends/utils/selected-backup-pi","web-blends/utils/selected-pi","sfw-services/utils/map-omex-not-eligible-error","sfw-messaging/utils/messages","web-blends/modules/settings/no-payment-instruments","sfw-messaging/utils/open-url","sfw-messaging/utils/post-messages","sfw-telemetry/utils/start-data","sfw-services/utils/supported-payment-instruments","sfw-telemetry/utils/blend-bi-tracker","sfw-services/models/session-ids","web-blends/utils/perf","sfw-services/errors/app-error","sfw-services/utils/new-expiration-date","sfw-services/utils/conversion-details-url","sfw-services/utils/new-xaa-expiration-date","sfw-services/utils/get-local-date","sfw-services/services/recurrences","sfw-services/utils/purchase-subscription"],function(e,t,n,a,r,s,i,l,o,d,u,c,m,f,p,g,b,h,y,P,_,v,w,C,x,I,k,T,A){function S(e){var t={},n=e.innerError.innererror.PurchaseLineItemExceptionContext
if(n&&n.length){var a=n[0]
if(a){var r=a.CurrentSubscriptionDetail
r&&(t.ownedBigId=r.BigId,t.expirationDate=r.ExpirationDate,t.sharedType=r.SharedType)
var s=a.ConvertibleProducts.find(function(e){return"Family"===t.sharedType&&"ChildNewSubscription"===e.ConversionType||"Downgrade"===e.ConversionType})
s&&(t.convertBigId=s.BigId?s.BigId:a.ProductId+"/"+a.SkuId)}}return t.ownedBigId&&t.convertBigId?t:null}function R(e){var t=e.innerError&&e.innerError.innererror&&e.innerError.innererror.PurchaseLineItemExceptionContext,n=null
return t&&t.length&&(n=t[0]),!!(n&&n.ConvertibleProducts&&n.ConvertibleProducts.find(function(e){return"Blocked"===e.ConversionType}))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r.default.extend({paymentInstruments:Ember.inject.service(),rds:Ember.inject.service(),user:Ember.inject.service(),paymentIncentive:Ember.inject.service(),creditCardCountry:Ember.inject.service(),autoRenewalConsent:Ember.inject.service(),postPiInfo:Ember.inject.service(),telemetryBi:Ember.inject.service(),title:Ember.computed(function(){return this.get("strings.PurchaseConfirmPageTitle")}),upgradeConsent:!1,recurringConsent:!1,routeToInterstitial:!0,daProrateConsent:null,daUpgradeConsent:null,daUpgradeBigId:null,downgradeConsent:!1,routeToDowngrade:!1,downgradeContext:null,renderTemplate:function(e){this.render("purchase/confirm",{controller:e})},beforeModel:function(){if(this._super.apply(this,arguments),h.default.get().resumeId)return this.replaceWith("purchase.tvodResume")
if(h.default.get().Offer)return t.default.isTvod=!0,t.default._legacyPurchaseType="xboxClassic",this.replaceWith("purchase.confirmTvod")
if(s.default.isWindowsOobeClient())return this.replaceWith("purchase.confirmOobe")
if(!(h.default.get().OrderId||h.default.get().ProductId&&h.default.get().SkuId&&(h.default.get().AvailabilityId||h.default.get().IsDigitalAttachment&&h.default.get().AttachRecordId)))throw new w.default("InvalidOrderData")
if("rent".equalsIgnoreCase(h.default.get().TransactionType)&&(!h.default.get().ExpirationBeforePlayInHours||!h.default.get().ExpirationAfterPlayInHours))throw new w.default("InvalidDuration")},model:function(e,a){var r=this
n.default.busy()
var i={piContainer:this.get("paymentInstruments"),redirectedFrom:a.queryParams.redirectedFrom}
a.queryParams&&a.queryParams.upgradeConsent&&(this.set("upgradeConsent",!0),l.default.isEnabled("daconvertenabled")&&h.default.get().IsDigitalAttachment&&(i.daUpgradeConsent=!0),this.set("routeToInterstitial",!0)),(a.queryParams&&a.queryParams.recurringConsent||s.default.isDesktopClient())&&this.set("recurringConsent",!0),i.mercuryStopShowingUpdate=a.sequence>1,l.default.isEnabled("daconvertenabled")&&h.default.get().IsDigitalAttachment&&a.queryParams&&a.queryParams.daProrateConsent&&this.set("daProrateConsent","Prorate"),l.default.isEnabled("daconvertenabled")&&l.default.isEnabled("ultimateupgrade")&&h.default.get().IsDigitalAttachment&&a.queryParams&&a.queryParams.upgradeConsent&&(this.set("daUpgradeConsent",a.queryParams.upgradeConsent),this.set("daUpgradeBigId",a.queryParams.daUpgradeBigId)),h.default.get().IsDigitalAttachment&&a.queryParams.selectedBillingInfo&&this.set("daSelectedPIBillingInfo",JSON.parse(a.queryParams.selectedBillingInfo))
var o=Ember.RSVP.resolve()
this.get("paymentIncentive").isProactiveRewardsFlightEnabled()?o=this.get("paymentIncentive").fetchRewardsInfo():this.get("paymentIncentive").isReactiveRewardsFlightEnabled()&&this.get("paymentIncentive").fetchRewardsInfo()
var m=void 0
m=h.default.get().OrderId&&!h.default.get().IsDigitalAttachment?this.loadOrder(h.default.get().OrderId):this.createOrder()
var p=Ember.RSVP.resolve()
h.default.get().AskPurchaserEligible&&h.default.get().AskPurchaserEligible.toString().equalsIgnoreCase("true")&&(p=this.get("store").findRecord("product",h.default.get().ProductId).then(function(e){return e}))
var g=Ember.RSVP.resolve()
return s.default.isGamingApp()&&(g=g.then(function(){if(r.get("user")&&"function"==typeof r.get("user").getProfile)return r.get("user").getProfile().then(function(e){i.emailAddress=e.get("msa_primary_alias")||e.get("email_address"),Ember.RSVP.resolve()},function(){Ember.RSVP.resolve()})
Ember.RSVP.resolve()}),m=m.then(function(e){return b.default.send(f.default.orderCreated(e.get("orderId"))),e})),(s.default.isModernXboxClient()||s.default.isSaturnDesktop())&&(i.showTotalAndTax=!1),s.default.isMercuryDunningScenario()&&(m=m.then(function(e){return T.default.getAllSubscriptionEvents().then(function(t){return t.items.forEach(function(t){if("Active"===t.recurrenceState&&t.productId===e.get("firstLineItem.productId"))i.mercuryDunningScenario=r.get("constants").mercuryDunningScenarios.updatePi
else if("InDunning"===t.recurrenceState&&t.productId===e.get("firstLineItem.productId")){i.mercuryDunningScenario=r.get("constants").mercuryDunningScenarios.trueDunning
var n=""
throw t.changeRecords.forEach(function(e){"EnteringDunning"===e.eventType&&(n=e.orderId)}),{error:"TrueDunning",orderId:n}}}),i.recurrences=t.items,i.mercuryDunningScenario||(i.mercuryDunningScenario=r.get("constants").mercuryDunningScenarios.none),e})}).catch(function(e){if("TrueDunning"===e.error)return r.loadOrder(e.orderId).then(function(e){return e.set("orderState","CheckingOut"),e})})),Ember.RSVP.all([m,o,g,p]).then(function(e){i.order=e[0],i.product=e[3],(s.default.isModernXboxClient()||s.default.isSaturnDesktop())&&b.default.send(f.default.orderCreated(i.order.get("orderId"))),l.default.isEnabled("subsintrange")&&i.order.get("firstLineItem.isSubscriptionItem")&&!i.product&&r.get("store").findRecord("product",i.order.get("firstLineItem.productId")+"/"+i.order.get("firstLineItem.skuId")+"/"+i.order.get("firstLineItem.availabilityId")).then(function(e){i.product=e})}).then(function(){return(h.default.get().DeviceSerialNumber?r.updateWarrantySessionId(i):Ember.RSVP.resolve()).then(function(){var e=Ember.RSVP.resolve()
return r.handleFreeProducts(i),i.order.get("isPiRequired")&&(e=i.piContainer.enumerate(r.get("store"),i.order.get("isOmexProduct"),i.order.get("legacyPurchaseType"),i.order.get("orderId"),!1).then(function(){var e=y.default.getPisAllowedForOrder(i.piContainer.get("allPaymentInstruments"),i.order)
if(i.piContainer.set("allowedPaymentInstruments",e),i.piContainer.get("hasAsyncPis")&&!h.default.get().IsDigitalAttachment)return r.checkPendingOrders(i)}).catch(function(e){throw P.default.capturePurchaseStatePageAction("Failed",{orderInfo:(0,d.default)(i.order,i.selectedPi),sessionId:i.order.get("sessionId")}),e})),e.then(function(){if(!(i.pendingOrderWithRDSSuccess||h.default.get().ChangePayment||r.mercuryGoToScreen()||s.default.isMercuryDunningScenario()))if(l.default.isEnabled("subupgrade")&&i.order.get("supportsConversion")&&(r.isLegacyUpgrade(i.order)||r.isModernConversionUpgrade(i.order))&&(l.default.isEnabled("daconvertenabled")&&h.default.get().IsDigitalAttachment&&!i.order.get("isPurchased")||!h.default.get().IsDigitalAttachment)){if(l.default.isEnabled("ultimateupgrade")&&!h.default.get().IsDigitalAttachment)return l.default.isEnabled("modernconversion")?r.handleConversion(i.order,a.queryParams.upgradeConsent):r.handleUpgrade(i.order,a.queryParams.upgradeConsent)
if(!r.get("upgradeConsent")&&!s.default.isMercuryDunningScenario())return n.default.done(),r.set("routeToInterstitial",!1),r.replaceWith("purchase.subscriptionUpgrade",{queryParams:{lineItemTitle:i.order.get("firstLineItem.product.title")}})}else if(l.default.isEnabled("previeweligibility")&&i.order.get("supportsConversion")&&!r.get("downgradeConsent")&&!r.get("upgradeConsent")&&!h.default.get().IsDigitalAttachment){if(a&&a.queryParams&&a.queryParams.userConsent)return r.set("downgradeConsent",!0),r.set("routeToDowngrade",!1),r.set("downgradeContext",null),l.default.isEnabled("modernconversion")?r.handleConversion(i.order,a.queryParams.userConsent):r.handleDowngrade(i.order,a.queryParams.userConsent)
if(!(l.default.isEnabled("skippreview")&&i.order.get("isOmexProduct")||!1)||l.default.isEnabled("conversionblockederror")&&r.isModernConversionEligibleProduct(i.order))return l.default.isEnabled("modernconversion")?r.handleConversion(i.order):r.handleDowngrade(i.order)}}).then(function(){if(l.default.isEnabled("subsinterstitial")&&r.showRecurringInterstitial(i,s.default)){n.default.done()
var e=void 0,t=void 0,a=void 0,o=void 0,d=void 0,u=void 0
return i.product&&(o=(e=A.default.overrideWebBlendData(i.product.get("DisplaySkuAvailabilities.0.Sku"),{}))?e.isTrial:void 0,d=e?e.TrialDurationString:void 0,t=e?e.InitialChargeFrequency:void 0,a=e?e.LocaledChargeFrequency:void 0,u=i.product.get("DisplaySkuAvailabilities.0.Availabilities.0.OrderManagementData.Price.RecurrencePrice")),r.replaceWith("purchase.subscriptionInterstitial",{queryParams:{retailPrice:i.order.get("firstLineItem.retailPrice"),listPrice:i.order.get("firstLineItem.listPrice"),currencyCode:i.order.get("firstLineItem.currencyCode"),lineItemTitle:i.order.get("firstLineItem.product.title"),recurrencePrice:u,isTrial:o,localizedTrialDurationString:d,initialChargeFrequency:t,localizedChargeFrequency:a,promotionalCoreDurationUnitType:i.order.get("firstLineItem.promotionalCoreDuration.UnitType"),promotionalCoreDurationUnits:i.order.get("firstLineItem.promotionalCoreDuration.Units"),posterImage:r.posterImage(i.order)}})}}).then(function(){var e=i.piContainer.get("allowedPaymentInstruments")
if(i.routeToDowngrade=r.get("routeToDowngrade"),i.downgradeContext=r.get("downgradeContext"),t.default._selectPiData&&t.default._selectPiData.selectedPis){var n=t.default._selectPiData.selectedPis,a=n.id,o=n.csvTopOffPaymentInstrumentId||null
t.default._selectPiData.reset(),l.default.isEnabled("mercury403")&&s.default.isMercury()&&a===o&&(o=null),i.selectedPi=(0,c.default)(e,null,a),i.selectedBackupPi=o?(0,u.default)(e,null,o):null}else i.selectedPi=(0,c.default)(e,i.order),i.selectedBackupPi=(0,u.default)(e,i.order)
if(i.isCsvSufficient=r.isCsvSufficient(i),i.csvBalance=r.csvBalance(i),!i.selectedBackupPi&&i.selectedPi&&i.selectedPi.get("isCsv")&&!i.isCsvSufficient)return y.default.backupPi(e).then(function(e){i.selectedBackupPi=e.find(function(e){return!e.get("isExpired")&&e.id!==i.selectedPi.id})})})}).catch(function(e){throw P.default.capturePurchaseStatePageAction("Failed",{orderInfo:(0,d.default)(i.order,i.selectedPi),sessionId:i.order.get("sessionId")}),e})}).then(function(){var e=i.order.get("selectedPi")||null,t=i.order.get("selectedBackupPi")||null,n=Ember.get(i,"selectedPi.id")||null,a=Ember.get(i,"selectedBackupPi.id")||null
if((e!==n||t!==a)&&(i.changedPis={id:n,csvTopOffPaymentInstrumentId:a},!s.default.isMercuryDunningScenario()&&i.order.get("isCheckingOut")))return i.order.set("orderState","Editing"),i.order.save()}).then(function(){return(s.default.isModernXboxClient()||s.default.isSaturnDesktop())&&i.order.get("isCheckingOut")&&(i.showTotalAndTax=!0),r.get("paymentIncentive").isProactiveRewardsFlightEnabled()?r.get("paymentIncentive").isUserEligibleToSeeIncentive().then(function(e){return i.isUserEligibleToSeeIncentive=e,i},function(){return i}):i}).then(function(){return l.default.isEnabled("mercurysubtime")&&s.default.isModernXboxClient()&&i.order.get("firstLineItem.isSubscriptionItem")?r.get("store").findRecord("product",i.order.get("firstLineItem.productId")+"/"+i.order.get("firstLineItem.skuId")+"/"+i.order.get("firstLineItem.availabilityId")).then(function(e){return i.product=e,i}):i})},afterModel:function(e){var t=this
if(this._super.apply(this,arguments),!h.default.get().ChangePayment&&!this.mercuryGoToScreen()){var a={}
if(a.totalPiCount=this.get("paymentInstruments.allPaymentInstruments.length"),(e.selectedBackupPi||e.selectedPi)&&a.totalPiCount>0){var r=e&&e.selectedBackupPi,i=e&&e.selectedPi
a.piId=r&&r.id||i&&i.id,a.piId&&(a.piType=r?r.get("paymentMethod.paymentMethodType"):i.get("paymentMethod.paymentMethodType"),a.piFamily=r?r.get("paymentMethod.paymentMethodFamily"):i.get("paymentMethod.paymentMethodFamily"))}return this.get("postPiInfo").setPiInfo(a),this.validateOrder(e).then(function(){if(e.isPurchaseAllowed&&e.order.get("isEditing"))return t.checkoutOrder(e)}).then(function(){t.get("telemetryBi").setDidHavePi(e.hasPiIfRequired),e.piTelemetry={didStartAddPi:t.get("telemetryBi.didStartAddPi"),didFinishAddPi:t.get("telemetryBi.didFinishAddPi"),didCancelAddPi:t.get("telemetryBi.didCancelAddPi"),didCancelChoosePiToAdd:t.get("telemetryBi.didCancelChoosePiToAdd"),didStartAddAddress:t.get("telemetryBi.didStartAddAddress"),didFinishAddAddress:t.get("telemetryBi.didFinishAddAddress"),addPIType:t.get("telemetryBi.addPIType"),addPIFamily:t.get("telemetryBi.addPIFamily"),didStartSelectBackup:t.get("telemetryBi.didStartSelectBackup"),didFinishSelectBackup:t.get("telemetryBi.didFinishSelectBackup"),didStartAddBackup:t.get("telemetryBi.didStartAddBackup"),didFinishAddBackup:t.get("telemetryBi.didFinishAddBackup"),didStartPSD2Challenge:t.get("telemetryBi.didStartPSD2Challenge"),didFinishPSD2Challenge:t.get("telemetryBi.didFinishPSD2Challenge"),didStartSMSChallenge:t.get("telemetryBi.didStartSMSChallenge"),didFinishSMSChallenge:t.get("telemetryBi.didFinishSMSChallenge"),didStartCVVChallenge:t.get("telemetryBi.didStartCVVChallenge"),didFinishCVVChallenge:t.get("telemetryBi.didFinishCVVChallenge"),didStartDowngrade:t.get("telemetryBi.didStartDowngrade"),didFinishDowngrade:t.get("telemetryBi.didFinishDowngrade"),didStartYearlySubscription:t.get("telemetryBi.didStartYearlySubscription"),didFinishYearlySubscription:t.get("telemetryBi.didFinishYearlySubscription"),didHavePi:t.get("telemetryBi.didHavePi"),didRedirectReturn:t.get("telemetryBi.didRedirectReturn")},l.default.isEnabled("upgradetelemetry")&&(e.piTelemetry.didStartUpgrade=t.get("telemetryBi.didStartUpgrade"),e.piTelemetry.didFinishUpgrade=t.get("telemetryBi.didFinishUpgrade")),e.pageDetails={buyButtonEnabled:e.isPurchaseAllowed,noDefaultAddress:e.noDefaultAddress,noProfileAddress:e.noProfileAddressFound,noMsaProfile:e.noMsaProfile,noEmailAddress:e.noEmailAddress,noPaymentInstrument:e.piContainer&&0===e.piContainer.get("hasPi"),noAllowedPaymentInstruments:e.piContainer&&e.piContainer.get("allowedPaymentInstruments")&&0===e.piContainer.get("allowedPaymentInstruments").length,hasPiIfRequired:e.hasPiIfRequired,orderInfo:(0,d.default)(e.order,e.selectedPi,e.selectedBackupPi,null,e.profile,e.piTelemetry),isAutoRenewal:"turnonautorenewal".equalsIgnoreCase(h.default.get().OfferType),isUserEligibleToSeeIncentive:e.isUserEligibleToSeeIncentive,noBeneficiaryDefaultAddress:e.noBeneficiaryDefaultAddress,noBeneficiaryProfileAddressFound:e.noBeneficiaryProfileAddressFound,noBeneficiaryMsaProfile:e.noBeneficiaryMsaProfile,noBeneficiaryEmailAddress:e.noBeneficiaryEmailAddress}
var a="purchase"
e.order.get("firstLineItem.isSubscriptionTrial")?a="trial":l.default.isEnabled("renewal")&&e.order.get("isOmexProduct")&&(a="renew"),e.pageDetails.scn=a
var r=s.default.modernXboxClientCustomParameters()
s.default.isMercury()&&r&&r.redirectConfirmation&&o.default.clearAndDone("loadPaymentConfirmation",{orderId:e.order.get("orderId"),sessionId:e.order.get("sessionId")}),n.default.done()})}n.default.done()},actions:{didTransition:function(){this._super.apply(this,arguments)
var e=0===o.default.length()
if(o.default.clear(),o.default.push(o.default.flowNames.Purchase),h.default.get().ChangePayment||"primary"===h.default.get().GoToScreen)return h.default.get().ChangePayment=!1,h.default.get().GoToScreen=void 0,this.replaceWith("purchase.selectPi","selectPi")
if("backup"===h.default.get().GoToScreen)return h.default.get().GoToScreen=void 0,this.replaceWith("purchase.selectPi","backupPi")
if(this.mercuryGoToScreen()){var t=s.default.modernXboxClientCustomParameters()
if(o.default.push(o.default.flowNames.SelectPaymentInstrument),a.default.push("purchase.selectPi"),Object.prototype.hasOwnProperty.call(t.screenData,"addPaymentInstrument")){var n=t.screenData.addPaymentInstrument
return t.screenData=void 0,h.default.set("CustomParameters",JSON.stringify({Mercury:t})),n.paymentMethodFamily||n.paymentMethodType?this.replaceWith("paymentAndBilling.paymentInstrumentSdk",{queryParams:{context:"add",paymentMethodFamily:n.paymentMethodFamily,paymentMethodType:n.paymentMethodType,puid:"me",isBackupPi:0===n.position?"false":"true",firstRun:!0}}):this.replaceWith("paymentAndBilling.selectPaymentInstrumentSdk",{queryParams:{context:"selectpi",backupPi:0===n.position?"false":"true",firstRun:!0}})}if(Object.prototype.hasOwnProperty.call(t.screenData,"editPaymentInstrument")){var r=t.screenData.editPaymentInstrument
t.screenData=void 0,h.default.set("CustomParameters",JSON.stringify({Mercury:t}))
var i="unionpay_creditcard".equalsIgnoreCase(r.paymentMethodType)||"unionpay_debitcard".equalsIgnoreCase(r.paymentMethodType)
return l.default.isEnabled("pidlsdkallpis")||l.default.isEnabled("pidlsdkccedit")&&"credit_card".equalsIgnoreCase(r.paymentMethodFamily)&&!i||l.default.isEnabled("pidlsdkcupedit")&&"unionpay_creditcard".equalsIgnoreCase(r.paymentMethodType)?this.replaceWith("paymentAndBilling.paymentInstrumentSdk",{queryParams:{context:"edit",paymentMethodFamily:r.paymentMethodFamily,paymentMethodType:r.paymentMethodType,piId:r.id,puid:"me",isBackupPi:0===r.position?"false":"true",firstRun:!0}}):this.replaceWith("paymentAndBilling.addPaymentInstrument",{queryParams:{context:"edit",paymentMethodFamily:r.paymentMethodFamily,paymentMethodType:r.paymentMethodType,piId:r.id,puid:"me",isBackupPi:0===r.position?"false":"true"}})}}var d=l.default.isEnabled("pidlsdkcvv")&&"cvv".equalsIgnoreCase(h.default.get().RiskChallengeType)||l.default.isEnabled("pidlsdksms")&&"sms".equalsIgnoreCase(h.default.get().RiskChallengeType)||l.default.isEnabled("psd2enable")&&"threeds2".equalsIgnoreCase(h.default.get().RiskChallengeType),u=null
if(d&&(u=this.getCurrentModel()),h.default.get().RiskChallengeRequired&&h.default.get().RiskChallengeType){if(h.default.get().RiskChallengeRequired=!1,h.default.get().RiskChallengeType.equalsIgnoreCase("threeds"))return this.replaceWith("purchase.redirectConfirm","riskChallenge")
if(!d)return this.replaceWith("purchase.riskChallenge","purchase",h.default.get().RiskChallengeType)
var c=this.replaceWith("purchase.riskChallengeSdk",{queryParams:{context:"challenge",challengeType:h.default.get().RiskChallengeType}})
c.data.order=u.order,c.data.selectedPi=u.selectedPi,c.data.selectedBackupPiId=u.selectedBackupPi&&u.selectedBackupPi.Id}if(d||(u=this.getCurrentModel()),u.pendingOrderWithRDSSuccess&&this.completePendingOrder(u.order),l.default.isEnabled("skippurchaseconfirm")&&e&&!u.hasPiIfRequired&&u.piContainer){var m=u.piContainer.allowedPaymentInstruments&&u.piContainer.allowedPaymentInstruments.length||0
if(m&&u.piContainer.get("hasAsyncPis"))return this.replaceWith("purchase.selectPi","selectPi")
if(!m)return this.replaceWith("paymentAndBilling.selectPaymentInstrumentSdk",{queryParams:{context:"selectpi"}})}Ember.run.scheduleOnce("afterRender",this,this.afterRender,u)},willTransition:function(e){var t=this.getCurrentModel()
l.default.isEnabled("purchasestatesessiontime")&&v.default&&!v.default.loadCaptured&&P.default.addWebLoadTimeInBlendContext(Date.now())
var a="purchase"
return t.order.get("firstLineItem.isSubscriptionTrial")?a="trial":l.default.isEnabled("renewal")&&t.order.get("isOmexProduct")&&(a="renew"),v.default.captureLoad(null,a),!l.default.isEnabled("adapterqueues")&&t&&t.checkoutPromise&&t.order.get("hasDirtyAttributes")?(n.default.busy(),e.abort(),void t.checkoutPromise.finally(function(){n.default.done(),e.retry()})):this._super(e)},viewTou:function(e,t){g.default.open(e,t)},viewEnotaTerms:function(e){b.default.send(f.default.openUrl(e,"eNotaTerms",!1)),g.default.open(e,"eNotaTerms")}},afterRender:function(e){e.isPurchaseAllowed&&v.default.markOnce(v.default.markerNames.buyButtonActive),l.default.isEnabled("purchasestatesessiontime")&&v.default&&!v.default.loadCaptured&&P.default.addWebLoadTimeInBlendContext(Date.now())
var t="purchase"
e.order.get("firstLineItem.isSubscriptionTrial")?t="trial":l.default.isEnabled("renewal")&&e.order.get("isOmexProduct")&&(t="renew"),v.default.captureLoad(null,t),!!(navigator&&navigator.userAgent&&navigator.userAgent.match(/(iPod|iPhone|iPad)/))&&$("#PurchaseContainer").hide().show(0)},loadOrder:function(e){return this.get("store").findRecord("order",e).then(function(e){if(l.default.isEnabled("purchasedblocked")&&"RU".equalsIgnoreCase(h.default.get().Market)||l.default.isEnabled("purchasedblockedby")&&"BY".equalsIgnoreCase(h.default.get().Market)){if(e.get("firstLineItem.giftee")&&e.get("firstLineItem.listPrice")>0)return Ember.RSVP.reject(new w.default("PurchaseRejected"))
if(!"PASS".equalsIgnoreCase(e.get("firstLineItem.productType"))&&e.get("firstLineItem.listPrice")>0)return Ember.RSVP.reject(new w.default("PurchaseRejected"))}return e.get("firstLineItem.product").then(function(){return e})})},createOrder:function(){var e=this,t=this.get("store"),a=t.createRecord("orderLineItem",{availabilityId:h.default.get().AvailabilityId,beneficiary:h.default.get().IdentityType&&h.default.get().IdentityValue?{identityType:h.default.get().IdentityType,identityValue:h.default.get().IdentityValue}:null,campaignId:h.default.get().CampaignId||null,devOfferId:h.default.get().DevOfferId,optionalCampaignId:h.default.get().OptionalCampaignId||null,productId:h.default.get().ProductId,quantity:+h.default.get().Quantity||1,skuId:h.default.get().SkuId}),r={},o=!1
h.default.get().CallerApplicationId&&(r.callerApplicationId=h.default.get().CallerApplicationId,o=!0),h.default.get().UniversalAffiliateId&&(r.universalAffiliateId=h.default.get().UniversalAffiliateId,o=!0),l.default.isEnabled("additionalmetadata")&&h.default.get().IsDigitalAttachment&&(r.purchaseKind="DigitalAttach",o=!0)
var d=t.createRecord("order",{orderAdditionalMetadata:o?JSON.stringify(r):null,clientContext:s.default.getContext(),language:h.default.get().Languages||h.default.get().Culture,market:h.default.get().Market,orderState:"Editing",lineItems:[a]})
if(l.default.isEnabled("daconvertenabled")&&h.default.get().IsDigitalAttachment&&(this.get("daProrateConsent")||this.get("daUpgradeConsent"))){if(this.get("daSelectedPIBillingInfo")&&(d.billingInformation=this.get("daSelectedPIBillingInfo")),this.get("daUpgradeBigId")){var u=this.get("daUpgradeBigId").split("/")
a.set("productId",u[0]),a.set("skuId",u[1]),a.set("availabilityId",u[2])}d.billingInformation&&(d.set("orderState","Purchased"),a.set("userConsent",this.get("daProrateConsent")||this.get("daUpgradeConsent")))}var c=d.save(),m=""
m=l.default.isEnabled("dahydratefix")&&s.default.isMercuryDunningScenario()?h.default.get().ProductId+"/"+h.default.get().SkuId:h.default.get().ProductId+"/"+h.default.get().SkuId+"/"+h.default.get().AvailabilityId
var f=t.findRecord("product",m)
return h.default.get().IsDigitalAttachment?c.then(function(n){return h.default.set("OrderId",n.get("orderId")),h.default.get().ProductId===n.get("firstLineItem.productId")&&h.default.get().SkuId===n.get("firstLineItem.skuId")&&h.default.get().AvailabilityId===n.get("firstLineItem.availabilityId")||(h.default.get().ProductId=n.get("firstLineItem.productId"),h.default.get().SkuId=n.get("firstLineItem.skuId"),h.default.get().AvailabilityId=n.get("firstLineItem.availabilityId")),l.default.isEnabled("daconvertenabled")&&e.get("daProrateConsent")&&n.data.orderState.toLowerCase()!==n.get("orderState").toLowerCase()?e.replaceWith("error","UnexpectedOrderState"):f.then(function(){var e=n.get("firstLineItem.productId")+"/"+n.get("firstLineItem.skuId")+"/"+n.get("firstLineItem.availabilityId"),a=t.findRecord("product",e)
return Ember.RSVP.all([n,a])}).then(function(e){var n=e[0]
if(e.length>1){var a=e[1],r=a&&a.get("DisplaySkuAvailabilities.0.Availabilities.0.RenewalBigId")
if(r){var s=t.findRecord("product",r)
return Ember.RSVP.all([n,a,s])}}return[n]}).then(function(e){return e[0]})}).catch(function(t){var a=d.get("firstLineItem.product.title")
if(l.default.isEnabled("daconvertenabled")&&i.default.userConsentRequired(t))return n.default.done(),e.handlePreconditionFailedForDigitalAttach(t,a)
throw t}):Ember.RSVP.all([c,f]).then(function(e){var t=e[0]
return h.default.set("OrderId",t.get("orderId")),(l.default.isEnabled("purchasedblocked")&&"RU".equalsIgnoreCase(h.default.get().Market)||l.default.isEnabled("purchasedblockedby")&&"BY".equalsIgnoreCase(h.default.get().Market))&&!"PASS".equalsIgnoreCase(t.get("firstLineItem.productType"))&&t.get("firstLineItem.listPrice")>0?Ember.RSVP.reject(new w.default("PurchaseRejected")):t})},checkoutOrder:function(e){var a=this
return this.get("user").getDefaultAddress().then(function(r){if(e.selectedPi){var d={}
if(a.isAutoRenewalConsentRequired(e,r)&&a.get("autoRenewalConsent").addAutoRenewalConsent(),d.csvTopOffPaymentInstrumentId=e.selectedBackupPi?e.selectedBackupPi.get("id"):null,d.paymentInstrumentId=e.selectedPi.get("id"),d.sessionId=t.default._sessionIds.getSessionId(d.paymentInstrumentId,d.csvTopOffPaymentInstrumentId),d.soldToAddressId=e.soldToAddressRequired?r.id:null,e.order.set("billingInformation",d),"US".equalsIgnoreCase(h.default.get().Market)&&d.soldToAddressId){var u=a.get("user").getAddressZipCodeInfo(r)
P.default.captureContentPageAction({name:"zipPlusFour"},{soldToAddressId:d.soldToAddressId,soldToaddressIdRequired:e.soldToAddressRequired,zipCodeLength:u.zipCodeLength,zipCodeHasHyphen:u.hasHyphen,zipPlusFour:u.zipPlusFour,addressRegionInRegionList:u.addressRegionInRegionList,transationType:"purchase"})}}if(h.default.get().IsDigitalAttachment)Ember.set(e,"showTotalAndTax",!0)
else{e.order.set("orderState","CheckingOut")
var c=s.default.isSaturnXbox()&&a.get("model.order.firstLineItem.isSubscriptionItem")&&l.default.isEnabled("saturnsub");(a.isXboxUltimateGamePass(e.order)||s.default.isModernXboxClient()&&!c)&&n.default.busy(),e.checkoutPromise=e.order.save().catch(function(t){if(e.order.rollbackAttributes(),i.default.isInvalidOrderStateForOperationError(t))return a.get("store").findRecord("order",e.order.id,{reload:!0}).then(function(e){if(e.get("isPurchased")){var a=e.get("lineItems"),r={orderId:e.get("orderId"),count:a&&a.length||0,lineItems:a&&a.map(function(e){return e.serialize({full:!0})})}
return n.default.busy(),void o.default.pop("success",r)}throw t},function(){throw t})
throw t}).catch(function(t){var r=e.order.get("isOmexProduct")
if(r&&(t=m.default.getError(t)),l.default.isEnabled("skippreview")&&r&&i.default.userConsentRequired(t)){n.default.done()
var s=S(t)
s?(a.set("routeToDowngrade",!0),a.set("downgradeContext",s),e.routeToDowngrade=a.get("routeToDowngrade"),e.downgradeContext=a.get("downgradeContext")):a.replaceWith("error",t)}else a.isXboxUltimateGamePass(e.order)&&n.default.done(),a.replaceWith("error",t)}).finally(function(){c?Ember.set(e,"showTotalAndTax",!1):(s.default.isModernXboxClient()||s.default.isSaturnDesktop())&&(Ember.set(e,"showTotalAndTax",!0),n.default.done())}),a.isXboxUltimateGamePass(e.order)&&e.checkoutPromise.then(function(){n.default.done()})}t.default._sessionIds||(t.default._sessionIds=_.default.create()),t.default._sessionIds.greenId=e.order.get("sessionId")})},checkPendingOrders:function(e){var t=this
return this.get("store").query("order",{orderState:"Pending"}).then(function(n){var a=n.find(function(t){return function(e,t){var n=e&&e.get("firstLineItem"),a=t&&t.get("firstLineItem")
if(n&&a)return n.get("productId")===a.get("productId")&&n.get("skuId")===a.get("skuId")&&n.get("availabilityId")===a.get("availabilityId")
return!1}(t,e.order)})
if(a)return t.get("rds").queryUserPayState(a.get("sessionId")).then(function(n){if("success".equalsIgnoreCase(n.session_state)){var r=a.get("orderId")
return h.default.set("OrderId",r),t.loadOrder(r).then(function(t){e.order=t,e.pendingOrderWithRDSSuccess=!0})}}).catch(function(e){if(404!==e.status)throw e})})},completePendingOrder:function(e){var t=this
return n.default.busy(),e.set("billingInformation.tokenizedPaymentInstrumentData",h.default.get().tokenizedRiskData),e.set("orderState","Purchased"),e.save().then(function(e){e.get("isPurchased")?(P.default.capturePurchaseStatePageAction("Purchased",{asyncPi:!0},"PURCHASECOMPLETE"),o.default.pop("success",e)):(n.default.done(),t.replaceWith("purchase.redirectRetry","asyncPurchase"))}).catch(function(n){e.rollbackAttributes(),P.default.capturePurchaseStatePageAction("Failed",{asyncPi:!0}),t.replaceWith("error",n)})},isCsvSufficient:function(e){var t=e.selectedPi?e.selectedPi.get("details.balance"):0,n=e.order.get("firstLineItem.requiredCsvBalance")
return!t||t>=n},csvBalance:function(e){var t=e.selectedPi?e.selectedPi.get("details.balance"):0
return t},handleFreeProducts:function(e){e.isPiRequiredButFree=e.order.get("firstLineItem.isPIRequired")&&0===e.order.get("firstLineItem.listPrice")&&e.order.get("firstLineItem.product.isBook"),e.isFreeNonSubscriptionProduct=!e.order.get("firstLineItem.isPIRequired")&&!e.order.get("firstLineItem.isSubscriptionItem")&&0===e.order.get("firstLineItem.listPrice"),e.noPaymentInstruments=(0,p.default)(!0,e.isPiRequiredButFree)},handleConversion:function(e,t){var a=this
if(this.userPreviouslyConsented(e));else if(!l.default.isEnabled("giftnodowngrade")||!e.get("firstLineItem.giftee")){if(t){var r=e.get("firstLineItem")
return r.set("userConsent",t),r.save()}return e.set("previewEligibility",!0),e.set("orderState","Editing"),e.save().catch(function(t){if(e.rollbackAttributes(),i.default.upgradeWithConsent(t)){var r=(0,C.default)(t)
return n.default.done(),a.set("routeToInterstitial",!1),(0,x.default)(a.get("store"),t,a.isXboxUltimateGamePass(e)||a.isXboxUltimateFamily(e),e.get("isOmexProduct")).then(function(t){return a.replaceWith("purchase.subscriptionUpgrade",{queryParams:{newExpirationDate:r,posterImage:a.posterImage(e),lineItemTitle:e.get("firstLineItem.product.title"),showModernConversion:!!a.isModernConversionUpgrade(e)||null,conversionDetailsUrl:t}})})}if(R(t))throw new w.default("ConversionUnavailable")
if(i.default.userConsentRequired(t)){var s=S(t)
if(s)return n.default.done(),a.replaceWith("purchase.subscriptionDowngrade",{queryParams:s})
throw t}throw l.default.isEnabled("conversionblockedxaa")&&i.default.conversionBlockedForXaaSubscription(t)?(t.productTitle=e.get("firstLineItem.product.title"),l.default.isEnabled("xaaconversionexpirationdate")&&(t.newXaaExpirationDate=(0,I.default)(t)),t):t}).finally(function(){e.set("previewEligibility",!1)})}},handleDowngrade:function(e,t){var a=this
if(!l.default.isEnabled("giftnodowngrade")||!e.get("firstLineItem.giftee")){if(t){var r=e.get("firstLineItem")
return r.set("userConsent",t),r.save()}return e.set("previewEligibility",!0),e.set("orderState","Editing"),e.save().catch(function(t){if(e.rollbackAttributes(),i.default.userConsentRequired(t)){if(R(t))throw new w.default("ConversionUnavailable")
var r=S(t)
if(r)return n.default.done(),a.replaceWith("purchase.subscriptionDowngrade",{queryParams:r})}throw t}).finally(function(){e.set("previewEligibility",!1)})}},isXboxUltimateGamePass:function(e){return e.get("firstLineItem.product.isXboxUltimate")},isXboxUltimateFamily:function(e){return e.get("firstLineItem.product.isXboxUltimateFamily")},isModernConversionEligibleProduct:function(e){return this.isXboxUltimateGamePass(e)||this.isXboxUltimateFamily(e)||e.get("isOmexProduct")},isModernConversionUpgrade:function(e){return l.default.isEnabled("modernconversion")&&this.isModernConversionEligibleProduct(e)},isLegacyUpgrade:function(e){return!l.default.isEnabled("modernconversion")&&(this.isXboxUltimateGamePass(e)||this.isXboxUltimateFamily(e))},handleUpgrade:function(e,t){var a=this
if(this.userPreviouslyConsented(e)||s.default.isMercuryDunningScenario());else if(!e.get("firstLineItem.giftee")){if(t){var r=e.get("firstLineItem")
return r.set("userConsent",t),r.save()}return e.set("previewEligibility",!0),e.set("orderState","Editing"),e.save().catch(function(t){if(i.default.upgradeWithConsent(t)){var r=(0,C.default)(t)
return n.default.done(),a.set("routeToInterstitial",!1),(0,x.default)(a.get("store"),t,a.isXboxUltimateGamePass(e)||a.isXboxUltimateFamily(e),e.get("isOmexProduct")).then(function(t){return a.replaceWith("purchase.subscriptionUpgrade",{queryParams:{newExpirationDate:r,posterImage:a.posterImage(e),lineItemTitle:e.get("firstLineItem.product.title"),showModernConversion:!!a.isModernConversionUpgrade(e)||null,conversionDetailsUrl:t}})})}throw l.default.isEnabled("conversionblockedxaa")&&i.default.conversionBlockedForXaaSubscription(t)?(t.productTitle=e.get("firstLineItem.product.title"),l.default.isEnabled("xaaconversionexpirationdate")&&(t.newXaaExpirationDate=(0,I.default)(t)),t):t}).finally(function(){e.set("previewEligibility",!1)})}},posterImage:function(e){var t=e.get("firstLineItem.imageList"),n="",a=""
for(var r in t)if(!isNaN(parseInt(r))){if("poster".equalsIgnoreCase(t[r].ImagePurpose))return t[r].Uri
"boxart".equalsIgnoreCase(t[r].ImagePurpose)?n=t[r].Uri:"brandedkeyart".equalsIgnoreCase(t[r].ImagePurpose)&&(a=t[r].Uri)}return s.default.isModernXboxClient()?a||n:""},userPreviouslyConsented:function(e){return!!e.get("firstLineItem.userConsent")},hasPiIfRequired:function(e){return!(e.selectedPi&&e.selectedPi.get("isCsv")&&!e.selectedBackupPi&&e.order.get("isSubscriptionItem")&&e.piContainer.get("allowedPaymentInstruments.length")>1)&&((!e.selectedPi||0!==this.get("store").peekAll("payment-instrument").get("length"))&&(!!e.selectedPi||!e.order.get("isPiRequired")))},validateOrder:function(e){var t=this
if(!l.default.isEnabled("disableblendsda")&&h.default.get().IsDigitalAttachment&&e.order.get("isPurchased"))return o.default.clear(),o.default.push(o.default.flowNames.DigitalAttach),e.isPurchaseAllowed=!1,P.default.capturePurchaseStatePageAction("Purchased",{},"PURCHASECOMPLETE"),this.replaceWith("purchase.complete",e.order.get("id"),{queryParams:{scenario:"digitalAttach"}}),Ember.RSVP.resolve()
if(e.noDefaultAddress=!1,e.noProfileAddressFound=!1,e.noMsaProfile=!1,e.noEmailAddress=!1,e.isPurchaseAllowed=!0,e.noBeneficiaryDefaultAddress=!1,e.noBeneficiaryProfileAddressFound=!1,e.noBeneficiaryMsaProfile=!1,e.noBeneficiaryEmailAddress=!1,e.hasPiIfRequired=this.hasPiIfRequired(e),this.handleAskToBuy(e))return n.default.done(),e.isPurchaseAllowed=!1,Ember.RSVP.resolve()
var a=e.order.get("firstLineItem")
if(a.get("isExclusivityFailed"))return Ember.RSVP.reject(new w.default("ExclusivityFailed"))
if(!e.hasPiIfRequired)return e.isPurchaseAllowed=!1,Ember.RSVP.resolve()
if(e.selectedPi&&e.selectedPi.get("exceededMaxPrice"))return e.isPurchaseAllowed=!1,Ember.RSVP.resolve()
if(e.selectedPi&&e.selectedPi.get("display_info.isDirectDebitChallengeRequired"))return e.isPurchaseAllowed=!1,Ember.RSVP.resolve()
if(l.default.isEnabled("enableccsmd")){var r=e.selectedPi&&e.selectedPi.get("smdCreditCardCountry")||null
this.get("creditCardCountry").setCountry(r)}if(e.order.get("isEditing")){n.default.busy(),s.default.isModernXboxClient()&&!e.order.get("isPiRequired")&&P.default.captureContentPageAction({name:"MERCURYFREENOPIREQUIRED"},{orderState:"Editing"}),e.soldToAddressRequired=e.selectedPi&&e.selectedPi.get("soldToAddressRequired"),"cfq7ttc0k5df".equalsIgnoreCase(a.get("productId"))&&(e.soldToAddressRequired=!0)
var i=void 0
i=l.default.isEnabled("enableccsmd")?this.get("user").getProfile(null,e.soldToAddressRequired,!1,this.get("creditCardCountry").getCountry()||h.default.get().Market):this.get("user").getProfile(null,e.soldToAddressRequired)
var d=e.order.get("isBeneficiarySoldToAddressRequired")?this.get("user").getProfile(e.order.get("beneficiaryPuid")):Ember.RSVP.resolve()
return Ember.RSVP.all([i,d]).then(function(a){var r=a[0],s=a[1],i=s||r
if(l.default.isEnabled("saveprofile")&&(e.profile=r),r.get("hasFullName")||(e.noMsaProfile=!0),r.get("email_address")||(e.noEmailAddress=!0),r.get("hasProfileAddress")?r.get("hasDefaultAddress")||(e.noDefaultAddress=!0):e.noProfileAddressFound=!0,e.selectedPi&&e.selectedPi.get("paymentMethod.paymentMethodFamily")&&(e.selectedPiFamily=e.selectedPi.get("paymentMethod.paymentMethodFamily")),e.selectedPi&&e.selectedPi.get("paymentMethod.paymentMethodType")&&(e.selectedPiType=e.selectedPi.get("paymentMethod.paymentMethodType")),e.soldToAddressRequired&&(e.noProfileAddressFound||e.noDefaultAddress)){var o={operationType:e.noProfileAddressFound?"AddAddress":"SelectAddress",isDefaultAddressCompliant:!0}
if(l.default.isEnabled("enablezipplusfour")&&"US".equalsIgnoreCase(h.default.get().Market)){var d=t.get("user").getOriginalDefaultAddress()
d&&(o.isDefaultAddressCompliant=t.get("user").isZipPlusFourCompliant(d,!0),o.addressRegionInRegionList=t.get("user").getAddressZipCodeInfo(d).addressRegionInRegionList)}P.default.captureContentPageAction({name:"addAddressOrSelectAddress"},o)}if(!e.soldToAddressRequired)return(e.order.get("isPiRequired")||e.order.get("isOmexProduct"))&&(i.get("isNew")||i.getDirtyAttributes())?(e.isPurchaseAllowed=!1,i.get("hasFullName")&&i.get("email_address")?t.replaceWith("paymentAndBilling.addName",{queryParams:{context:"addprofile",puid:t.get("model.isAddressMissingForBeneficiary")?t.get("model.order.beneficiaryPuid"):"me"}}).catch(function(){n.default.done()}):void 0):e.order.get("isPiRequired")&&!i.get("email_address")?void(e.isPurchaseAllowed=!1):void 0
if(!r.get("isNew")&&r.get("hasDefaultAddress")&&r.get("hasProfileAddress")&&(r.get("email_address")&&r.get("hasFullName")||!e.order.get("isPiRequired"))){if(s){if(s.get("hasFullName")||(e.noMsaProfile=!0,e.noBeneficiaryMsaProfile=!0),s.get("hasProfileAddress")?s.get("hasDefaultAddress")||(e.noDefaultAddress=!0,e.noBeneficiaryDefaultAddress=!0):(e.noProfileAddressFound=!0,e.noBeneficiaryProfileAddressFound=!0),s.get("email_address")||(e.noEmailAddress=!0,e.noBeneficiaryEmailAddress=!0),!(s.get("hasFullName")&&s.get("email_address")&&!s.get("isNew")&&s.get("hasDefaultAddress")&&s.get("hasProfileAddress")))return e.isAddressMissingForBeneficiary=!0,void(e.isPurchaseAllowed=!1)
if(s.get("isNew")||!s.get("hasDefaultAddress")||!s.get("hasProfileAddress"))return e.isAddressMissingForBeneficiary=!0,void(e.isPurchaseAllowed=!1)}}else e.isPurchaseAllowed=!1}).then(function(){n.default.done()})}return e.order.get("isCheckingOut")||e.order.get("isPending")?Ember.RSVP.resolve():(e.isPurchaseAllowed=!1,Ember.RSVP.reject(new w.default("UnexpectedOrderState","orderState:"+e.order.get("orderState"))))},handleAskToBuy:function(e){var t=e.order,n=t.get("firstLineItem"),a=n.get("purchaseApprovalState"),r=n.get("isPurchaserChild"),i=this.get("constants").askToBuy.reasons,o=!!n.get("giftee"),d=n.get("askToBuySetting"),u={redirectedFrom:e.redirectedFrom,orderId:t.id,selectedPiId:e.selectedPi?e.selectedPi.id:""}
if(o&&("blockedbyage"===a||"blockedbypolicy"===a||"on"===d))return this.replaceWith("purchase.askToBuy.block"),!0
if(l.default.isEnabled("xbetaskaparent")&&r&&s.default.isXboxOneClient()&&n.get("product.isXbetAskAParentEligible")&&s.default.hasWlidToken())return this.replaceWith("purchase.askToBuy",{queryParams:{redirectedFrom:e.redirectedFrom,orderId:t.id,selectedPiId:e.selectedPi?e.selectedPi.id:"",isXbetAskAParent:!0}}),!0
if("block"===d)return this.replaceWith("purchase.askToBuy.block"),!0
if("off".equalsIgnoreCase(d)&&"blockedbyage".equalsIgnoreCase(a)&&n.get("isSubscriptionItem"))return this.replaceWith("purchase.askToBuy.block"),!0
if(r&&"blockedbyage"===a)return u.reason=i.age,this.replaceWith("purchase.askToBuy",{queryParams:u}),!0
if(0===n.get("listPrice"))return!1
if("on"===d){if(!e.hasPiIfRequired)return u.reason=i.noPi,this.replaceWith("purchase.askToBuy",{queryParams:u}),!0
if(e.selectedPi&&e.selectedPi.get("isCsv")&&!e.isCsvSufficient)return u.reason=i.insufficientCsv,this.replaceWith("purchase.askToBuy",{queryParams:u}),!0}return!1},updateWarrantySessionId:function(e){return this.get("store").findRecord("warranty",h.default.get().DeviceSerialNumber).then(function(t){var n=e.order.get("firstLineItem"),a=t.get("WarrantySessionId")
return n.get("fulfillmentSessionId")?n.get("fulfillmentSessionId")!==a?(n.set("fulfillmentSessionId",a),n.save()):void 0:Ember.RSVP.reject(new w.default("NoFulfillmentIdFound"))})},showRecurringInterstitial:function(e,t){return!t.isDesktopClient()&&e.order&&e.order.get("isPiRequired")&&e.order.get("firstLineItem.isSubscriptionItem")&&!h.default.get().IsDigitalAttachment&&!t.isWebClient()&&this.get("routeToInterstitial")&&!t.isMercuryDunningScenario()&&!this.get("recurringConsent")},handlePreconditionFailedForDigitalAttach:function(e,t){if(l.default.isEnabled("daconvertenabled")&&h.default.get().IsDigitalAttachment)try{var n={orderId:""},a=e.innerError.innererror.message,r=a.indexOf("{"),s=a.lastIndexOf("}"),i=JSON.parse(a.substr(r,s-r+1)).innererror.PurchaseLineItemExceptionContext
if(i&&i.length){var o=i[0]
if(o){var d=o.CurrentSubscriptionDetail
d&&(n.ownedBigId={productId:d.BigId.split("/")[0],skuId:d.BigId.split("/")[1]},n.expirationDate=d.ExpirationDate,n.sharedType=d.SharedType)
var u=o.ConvertibleProducts.find(function(e){return"Prorate"===e.ConversionType})
if(u){var c=u.BigId?u.BigId:o.ProductId+"/"+o.SkuId
n.scenario="Prorate",n.convertBigId={productId:c.split("/")[0],skuId:c.split("/")[1]},l.default.isEnabled("daproratedynamic")&&(n.newExpirationDate=(0,k.default)(o.NewExpirationDate),n.currentExpirationDate=(0,k.default)(o.CurrentSubscriptionDetail.ExpirationDate))}(u=o.ConvertibleProducts.find(function(e){return"UpgradeWithConsent"===e.ConversionType}))&&(n.scenario="UpgradeWithConsent",n.upgradeBigId={productId:o.ProductId,skuId:o.SkuId,availabilityId:o.AvailabilityId},n.newExpirationDate=o.NewExpirationDate),n.originalBigId={productId:o.ProductId,skuId:o.SkuId,availabilityId:o.AvailabilityId}}}"UpgradeWithConsent"===n.scenario?this.replaceWith("purchase.subscriptionUpgrade",{queryParams:{newExpirationDate:(0,C.default)(n,h.default.get().Market,n.newExpirationDate),daUpgradeBigId:n.upgradeBigId.productId+"/"+n.upgradeBigId.skuId+"/"+n.upgradeBigId.availabilityId,lineItemTitle:t}}):this.replaceWith("digitalAttach.prorate",JSON.stringify(n))}catch(e){this.replaceWith("error",e)}},isAutoRenewalConsentRequired:function(e,t){var n=t&&t.get("region"),a=h.default.get().Market,r=this.get("autoRenewalConsent").supportedRegions,s=e.order&&e.order.get("firstLineItem")
return!!("US".equalsIgnoreCase(a)&&r.containsAnyIgnoreCase(n)&&s.get("isSubscriptionItem"))},mercuryGoToScreen:function(){var e=s.default.modernXboxClientCustomParameters()
return"primary"===h.default.get().GoToScreen||"backup"===h.default.get().GoToScreen||!(!e||!e.screenData)}})}),define("web-blends/routes/purchase/gift",["exports","web-blends/routes/base","web-blends/modules/busy","sfw-telemetry/utils/client","sfw-telemetry/utils/start-data","sfw-components/utils/order-bi-data","sfw-services/errors/app-error"],function(e,t,n,a,r,s,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({title:Ember.computed(function(){return this.get("strings.Purchase_Gift_SendGift")}),beforeModel:function(){if(this._super.apply(this,arguments),a.default.isAskPurchaserScenario()&&!r.default.get().AskPurchaserRequest)throw new i.default("AskPurchaserInvalid","Invalid request")},model:function(){var e=a.default.isXboxOneClient()?0:1
a.default.isMercuryGiftWithGamertag()&&(e=1)
var t=a.default.isAskPurchaserScenario()||a.default.isGamingAppGiftWithGamertag()?2:e,l={currentIndex:t,startIndex:t,endIndex:2}
if(r.default.get().ProductId&&r.default.get().SkuId){var o=r.default.get().ProductId+"/"+r.default.get().SkuId,d=r.default.get().OrderId&&this.store.peekRecord("order",r.default.get().OrderId)
if(d&&d.get("firstLineItem.giftee"))return n.default.done(),l.order=d,l
var u={productId:r.default.get().ProductId,skuId:r.default.get().SkuId,isGift:!0},c=this.get("store")
return c.findRecord("product",o).then(function(e){u.title=e.get("ProductTitle")
var t=e.get("GiftAvailabilityId")
if(t){u.availabilityId=t
var d=c.createRecord("orderLineItem",{availabilityId:t,beneficiary:r.default.get().IdentityType&&r.default.get().IdentityValue?{identityType:r.default.get().IdentityType,identityValue:r.default.get().IdentityValue}:null,productId:r.default.get().ProductId,quantity:+r.default.get().Quantity||1,skuId:r.default.get().SkuId,campaignId:r.default.get().CampaignId||null,devOfferId:r.default.get().DevOfferId,optionalCampaignId:r.default.get().OptionalCampaignId||null,giftee:c.createRecord("giftee")}),m={},f=!1
return r.default.get().CallerApplicationId&&(m.callerApplicationId=r.default.get().CallerApplicationId,f=!0),r.default.get().UniversalAffiliateId&&(m.universalAffiliateId=r.default.get().UniversalAffiliateId,f=!0),c.createRecord("order",{orderAdditionalMetadata:f?JSON.stringify(m):null,clientContext:a.default.getContext(),language:r.default.get().Languages||r.default.get().Culture,market:r.default.get().Market,orderState:"Editing",lineItems:[d]}).save().then(function(e){return r.default.set("OrderId",e.get("orderId")),u.orderInfo=(0,s.default)(e),n.default.done(),l.order=e,l.pageDetails=u,l}).catch(function(e){throw e.pageDetails=u,e})}throw new i.default("NoGiftAvailabilityFound","bigId:"+o+", title:"+u.title)})}throw new i.default("InvalidOrderData","ProductId:"+r.default.get().ProductId)}})}),define("web-blends/routes/purchase/mobi-challenge",["exports","web-blends/routes/base"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({title:Ember.computed(function(){return this.get("strings.PurchaseMobiChallengePageTitle")}),model:function(){return this.modelFor("purchase.confirm")}})})
define("web-blends/routes/purchase/redirect-confirm",["exports","web-blends/routes/base"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({title:Ember.computed(function(){return this.get("strings.PurchaseRedirectConfirmPageTitle")}),model:function(e){var t=this.modelFor("purchase.confirm")
return t.type=e.type,t},renderTemplate:function(e,t){switch(t.type){case"riskChallenge":this.render("purchase/redirectConfirmRisk")
break
case"asyncPurchase":this.render("purchase/redirectConfirmAsync")
break
default:this.replaceWith("error","InvalidData")}}})}),define("web-blends/routes/purchase/redirect-continue",["exports","web-blends/routes/base"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({title:Ember.computed(function(){return this.get("strings.PurchaseRedirectContinuePageTitle")}),model:function(e){var t=this.modelFor("purchase.confirm")
return t.type=e.type,t},renderTemplate:function(e,t){switch(t.type){case"riskChallenge":this.render("purchase/redirectContinueRisk")
break
case"asyncPurchase":this.render("purchase/redirectContinueAsync")
break
default:this.replaceWith("error","InvalidData")}}})}),define("web-blends/routes/purchase/redirect-retry",["exports","web-blends/routes/base"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({model:function(e){var t={},n=this.modelFor("purchase.confirm")
if(!n)throw new Error("Missing purchaseConfirmModel in redirect-retry route")
var a=n.selectedPi
if(!a)throw new Error("Missing selectedPi in redirect-retry route")
if(t.showFoundExistingPendingOrderMessage="fromRedirectContinue"!==e.context,t.paymentProviderDisplayName=a.get("paymentMethod.display.name"),!t.paymentProviderDisplayName)throw new Error("Missing paymentProviderDisplayName in redirect-retry route")
if(t.waitTimeMinutes=a.get("paymentMethod.properties.purchaseWaitTime")||20,!t.waitTimeMinutes)throw new Error("Missing waitTimeMinutes in redirect-retry route")
if(t.asyncPurchaseLogo=a.get("display_info.preferredLogo"),t.selectedPi=a,t.order=n.order,!t.order)throw new Error("Missing order in redirect-retry route")
return t}})}),define("web-blends/routes/purchase/rewards-reactive",["exports","web-blends/routes/base","web-blends/modules/busy","web-blends/modules/flow-stack","sfw-components/utils/order-bi-data","sfw-telemetry/utils/start-data","sfw-telemetry/utils/blend-bi-tracker"],function(e,t,n,a,r,s,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({paymentIncentive:Ember.inject.service(),model:function(){var e=this
return this.get("paymentIncentive").fetchRewardsInfo(!0).then(function(){return e.get("paymentIncentive").isUserEligibleToSeeIncentive().then(function(t){t?(e.get("paymentIncentive").offerShown(),n.default.done()):e.cancel()})},function(){return e.cancel()})},cancel:function(){var e=this.get("store").peekRecord("order",s.default.get().OrderId),t={orderInfo:(0,r.default)(e,null,null,!0)}
i.default.capturePurchaseStatePageAction("Cancelled",t),a.default.clearAndDone("cancel")}})}),define("web-blends/routes/purchase/rewards-thanks",["exports","web-blends/routes/base"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({paymentIncentive:Ember.inject.service(),model:function(){this.get("paymentIncentive").offerClaimed()}})}),define("web-blends/routes/purchase/risk-challenge-sdk",["exports","web-blends/routes/base","sfw-telemetry/utils/blend-bi-tracker","sfw-telemetry/utils/start-data","web-blends/mixins/pidl-sdk-container","sfw-components/utils/order-bi-data","sfw-services/errors/service-error","sfw-services/errors/app-error","sfw-services/services/payment-instrument","web-blends/modules/busy","web-blends/modules/flow-stack","sfw-telemetry/utils/flight-config","sfw-services/utils/redirection-service-url","web-blends/utils/feature-enable"],function(e,t,n,a,r,s,i,l,o,d,u,c,m,f){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend(r.default,{telemetryBi:Ember.inject.service(),title:Ember.computed(function(){return this.get("strings.Purchase_NonSimMobiChallenge_Title")}),model:function(e,t){if(!t.queryParams.context||!t.queryParams.challengeType||!["sms","cvv","threeds2"].containsAnyIgnoreCase(t.queryParams.challengeType))throw new l.default("InvalidOrMissingParamsInRoute")
if("threeds2".equalsIgnoreCase(t.queryParams.challengeType)&&!t.data.paymentSession)throw new l.default("InvalidOrMissingParamsInRoute")
if(["sms","cvv"].containsAnyIgnoreCase(t.queryParams.challengeType)&&(!t.data.order||!t.data.selectedPi))throw new l.default("InvalidOrMissingParamsInRoute")
var n="redeem".equalsIgnoreCase(t.data.returnFlow),a=t.data.selectedBackupPiId&&"ewallet".equalsIgnoreCase(t.data.selectedPi.get("payment_method_family"))&&"stored_value".equalsIgnoreCase(t.data.selectedPi.get("payment_method_type")),r=n?{}:t.data.order,s=""
n||(s=a?t.data.selectedBackupPiId:t.data.selectedPi.id),"threeds2".equalsIgnoreCase(t.queryParams.challengeType)?this.get("telemetryBi").setDidStartPSD2Challenge(!0):"sms".equalsIgnoreCase(t.queryParams.challengeType)?this.get("telemetryBi").setDidStartSMSChallenge(!0):"cvv".equalsIgnoreCase(t.queryParams.challengeType)&&this.get("telemetryBi").setDidStartCVVChallenge(!0)
var i={context:t.queryParams.context,order:r,piId:s,selectedPi:t.data.selectedPi,selectedBackupPiId:t.data.selectedBackupPiId,puid:t.queryParams.puid||"me",type:"threeds2".equalsIgnoreCase(t.queryParams.challengeType)?"threeds":t.queryParams.challengeType,resourceType:"paymentInstrument",sessionId:n?"":r.get("sessionId"),returnFlow:t.data.returnFlow,pageName:"purchase_riskChallengeSdk",pidlPageNavigator:{},paymentSession:t.data.paymentSession,threedsSectionClass:"threeds2".equalsIgnoreCase(t.queryParams.challengeType)?"threedsSectionClass":"",returnOptions:{callbacks:{success:this.successCallback(this),failure:this.failureCallback(this),gohome:this.cancelCallback(this)}},callbacks:{submit:this.submitCallback(this)}}
if(c.default.isEnabled("returnurl")&&"threeds2".equalsIgnoreCase(t.queryParams.challengeType)){var o=m.default.syncPiPurchaseResultUrls()
i.returnOptions.urls={success:o.successUrl,failure:o.failureUrl},i.callbacks={}}return c.default.isEnabled("enablepidlspinner")&&"threeds2".equalsIgnoreCase(t.queryParams.challengeType)&&(i.displayOptions={busyBlockShowHideHandler:function(e){e?d.default.busy():d.default.done()}}),i},successCallback:function(e){return function(t){var r=e.getCurrentModel(),i={orderInfo:(0,s.default)(r.order,r.selectedPi,r.selectedBackupPiId),context:r.context,challengeType:r.type,source:"purchase",pageId:t.pageId}
if("threeds".equalsIgnoreCase(r.type)?e.get("telemetryBi").setDidFinishPSD2Challenge(!0):"sms".equalsIgnoreCase(r.type)?e.get("telemetryBi").setDidFinishSMSChallenge(!0):"cvv".equalsIgnoreCase(r.type)&&e.get("telemetryBi").setDidFinishCVVChallenge(!0),"cvv".equalsIgnoreCase(r.type))n.default.capturePaymentStatePageAction("Success",i),a.default.get().tokenizedRiskData=t.response.data.cvvToken,"confirmoobe".equalsIgnoreCase(r.returnFlow)?e.replaceWith("purchase.confirmOobe",{queryParams:{autoConfirm:!0}}):e.replaceWith("purchase.confirm",{queryParams:{autoConfirm:!0}})
else if("threeds".equalsIgnoreCase(r.type)){var o=t&&t.id,d=t&&t.challengeStatus,u="redeem".equalsIgnoreCase(r.returnFlow),c={orderInfo:(0,s.default)(r.order,r.selectedPi,r.selectedBackupPiId),isRedeemFlow:u,context:r.context,challengeType:r.type,source:u?"redeem":"purchase"}
if("succeeded".equalsIgnoreCase(d)&&o){var m={queryParams:{autoConfirm:!0,threeDsSessionId:o}}
n.default.captureContentPageAction({name:"threedsChallengeSuccess"},{moreInfo:c}),n.default.capturePaymentStatePageAction("Success",c),u?e.replaceWith("redeem.redeemConfirm",m):"confirmoobe".equalsIgnoreCase(r.returnFlow)?e.replaceWith("purchase.confirmOobe",m):e.replaceWith("purchase.confirm",m)}else if(d&&"succeeded".equalsIgnoreCase(d)){if(!o){n.default.capturePaymentStatePageAction("Failed",c)
var f=new l.default("NoSessionFound")
f.message={threeDsChallenge:!0,challengeStatus:d,moreInfo:c},e.replaceWith("error",f)}}else{n.default.capturePaymentStatePageAction("Failed",c)
var p=new l.default("ChallengeStatusFailure")
p.message={threeDsChallenge:!0,challengeStatus:d,moreInfo:c},e.replaceWith("error",p)}}else n.default.capturePaymentStatePageAction("Success",i),e.replaceWith("purchase.confirm",{queryParams:{autoConfirm:!0}})}},failureCallback:function(e){return function(t){var a=e.getCurrentModel(),r="redeem".equalsIgnoreCase(a.returnFlow),o={orderInfo:(0,s.default)(a.order,a.selectedPi,a.selectedBackupPiId),isRedeemFlow:r,context:a.context,challengeType:a.type,source:r?"redeem":"purchase"}
n.default.capturePaymentStatePageAction("Failed",o),r||n.default.capturePurchaseStatePageAction("Failed",o)
var d=void 0,u=t&&t.innererror||t&&t.error&&t.error.innererror,m=u&&u.InnerError&&u.InnerError.Message,p="threeds".equalsIgnoreCase(a.type)
if(p&&m)if("Failed".equalsIgnoreCase(m)){var g=u&&u.InnerError.ErrorCode
d="ValidatePIOnAttachFailed".equalsIgnoreCase(g)?new l.default("ValidatePIOnAttachFailed"):new l.default("ChallengeFailure")}else d="TimedOut".equalsIgnoreCase(m)?new l.default("ChallengeTimedOut"):new l.default("PidlSDKError")
else d=((f.default.isIndia3DSFeatureEnabled(r)||c.default.isEnabled("parsepidlerror"))&&t||u)&&new i.PidlSdkError(t)||new l.default("PidlSDKError")
d.message={threeDsChallenge:p,error:t,moreInfo:o},e.replaceWith("error",d)}},cancelCallback:function(e){return function(){var t=e.getCurrentModel(),r="redeem".equalsIgnoreCase(t.returnFlow),i={orderInfo:(0,s.default)(t.order,t.selectedPi,t.selectedBackupPiId),isRedeemFlow:r,context:t.context,challengeType:t.type,source:r?"redeem":"purchase"}
n.default.capturePaymentStatePageAction("Cancelled",i),"threeds2".equalsIgnoreCase(t.type)?e.get("telemetryBi").setDidFinishPSD2Challenge(!1):"sms".equalsIgnoreCase(t.type)?e.get("telemetryBi").setDidFinishSMSChallenge(!1):"cvv".equalsIgnoreCase(t.type)&&e.get("telemetryBi").setDidFinishCVVChallenge(!1),"threeds".equalsIgnoreCase(t.type)?"IN".equalsIgnoreCase(a.default.get().Market)&&f.default.isIndia3DSFeatureEnabled(r)&&c.default.isEnabled("cancelinchallenge")?e.replaceWith("purchase.confirm"):(d.default.busy(),i.threeDsChallengeCancel=!0,r||n.default.capturePurchaseStatePageAction("Cancelled",i),n.default.captureContentPageAction({name:"threedsChallengeCancelled"},{moreInfo:i}),u.default.clearAndDone("cancel")):"confirmoobe".equalsIgnoreCase(t.returnFlow)?e.replaceWith("purchase.confirmOobe"):e.replaceWith("purchase.confirm")}},submitCallback:function(e){return function(t,a,r,i){var l=e.getCurrentModel(),d={orderInfo:(0,s.default)(l.order,l.selectedPi,l.selectedBackupPiId),context:l.context,challengeType:l.type,source:"purchase"}
n.default.capturePaymentStatePageAction("Submitted",d),"sms".equalsIgnoreCase(l.type)?o.default.purchaseValidateChallenge("sms",l.sessionId,t.data.pin).then(function(){r(t)},function(e){i(e)}):r(t)}},actions:{cancel:function(){this.controller.get("model").pidlPageNavigator.movePrevPage()}}})}),define("web-blends/routes/purchase/risk-challenge",["exports","web-blends/routes/payment-and-billing/base","sfw-services/utils/pidl-data","sfw-services/services/challenge-descriptions","web-blends/modules/busy","sfw-components/utils/pidl-validator2"],function(e,t,n,a,r,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({title:Ember.computed(function(){return this.get("strings.Purchase_NonSimMobiChallenge_Title")}),model:function(e){return r.default.busy(),this.getModelPromise(e).then(function(e){return r.default.done(),e.displayIndex=1,e})},getModelPromise:function(e){var t=this,r=t.modelFor("purchase.confirm")
return e.challengeType?a.default.get(e.challengeType).then(function(a){if("cvv".equalsIgnoreCase(e.challengeType)){if(r&&r.selectedPi){var s=r.selectedBackupPi?r.selectedBackupPi:r.selectedPi
return{pidlDocuments:[n.default.prepareModel(a,null,null,null,s.get("paymentMethod.paymentMethodType"))],originalPidl:[a],pidl_blend_id_prefix:n.default.pidl_blend_id_prefix,piModel:s,confirmPurchaseOrderModel:r,data:e}}t.replaceWith("error","InvalidData")}else if("sms".equalsIgnoreCase(e.challengeType)){if(e.context&&("addPaymentInstrument"===e.context||"purchase"===e.context))return{pidlDocuments:[n.default.prepareModel(a)],originalPidl:[a],pidl_blend_id_prefix:n.default.pidl_blend_id_prefix,confirmPurchaseOrderModel:r,data:e}
t.replaceWith("error","InvalidData")}else t.replaceWith("error","InvalidData")}):null},afterModel:function(e){this._super(e),Ember.run.scheduleOnce("afterRender",this,function(){setTimeout(function(){s.default.focusValidElementOnPage($("#riskChallengeContainer"))},200)})}})}),define("web-blends/routes/purchase/save-to-cart",["exports","web-blends/routes/base","sfw-telemetry/utils/start-data"],function(e,t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({title:Ember.computed(function(){return"Add to your cart"}),model:function(){return n.default.get().Auth&&n.default.get().OrderId?this.store.findRecord("order",n.default.get().OrderId).then(function(e){return{ProductId:e.get("firstLineItem.productId"),SkuId:e.get("firstLineItem.skuId"),AvailabilityId:e.get("firstLineItem.availabilityId")}}):{ProductId:n.default.get().ProductId,SkuId:n.default.get().SkuId,AvailabilityId:n.default.get().AvailabilityId}}})}),define("web-blends/routes/purchase/select-address",["exports","web-blends/routes/base","web-blends/modules/busy"],function(e,t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({title:Ember.computed(function(){return this.get("strings.PurchaseSelectAddressPageTitle")}),user:Ember.inject.service(),model:function(e){var t=e&&e.puid?e.puid:"me"
return n.default.busy(),this.get("user").getAddresses(t).then(function(e){return e.length>0?{accountAddresses:e,puid:t}:null},function(){return null}).finally(function(){n.default.done()})}})}),define("web-blends/routes/purchase/select-pi",["exports","web-blends/routes/base","web-blends/modules/busy","sfw-services/utils/supported-payment-instruments","web-blends/modules/settings/no-payment-instruments","sfw-services/utils/risky-pis","sfw-services/utils/user-pis","sfw-telemetry/utils/app-globals","web-blends/modules/flow-stack","sfw-telemetry/utils/client"],function(e,t,n,a,r,s,i,l,o,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({telemetryBi:Ember.inject.service(),paymentInstruments:Ember.inject.service(),title:Ember.computed(function(){return this.get("strings.PurchaseSelectPiPageTitle")}),isTvod:!1,order:null,model:function(e,t){var i=this
this.context=e&&e.context
t&&t.queryParams&&t.queryParams,o.default.push(o.default.flowNames.SelectPaymentInstrument)
var l,u=this.modelFor("purchase.confirmOobe");(u||(u=this.modelFor("purchase.confirm"))||(u=this.modelFor("purchase.confirmTvod"))&&(i.isTvod=!0),d.default.isOfficeClient()||d.default.isOfficeDIMEClient())&&(l=(u&&u.piContainer&&u.piContainer.allPaymentInstruments).filter(function(e){return e.isAllowed}),u.piContainer.set("allPaymentInstruments",l))
var c=!1
u||(u=this.modelFor("redeem.redeemConfirm"))&&(c=!0),this.order=Ember.get(u,"order")
var m="backupPiSufficient"===e.context,f="backupPiError"===e.context,p="backupPi"===e.context||f||m,g="piError"===e.context
if(p&&this.get("telemetryBi").setDidStartSelectBackup(!0),u&&u.piContainer&&u.piContainer.get("enumerated")){var b=function(e){if(e.set("hasPi",u.piContainer.get("hasPi")),e.set("selectedPi",u.selectedPi),e.set("selectedBackupPi",u.selectedBackupPi),e.set("selectBackup",p),e.set("selectBackupForSufficientCsv",m),e.set("isRedeem",c),e.set("noPaymentInstruments",(0,r.default)()),void 0!==u.mercuryDunningScenario&&e.set("mercuryDunningScenario",u.mercuryDunningScenario),g?e.set("selectedPi.display_info.isBadPi",!0):f&&e.set("selectedBackupPi.display_info.isBadPi",!0),i.isTvod||c)return e
n.default.busy()
var t=void 0,l=i.store.peekRecord("payment-method","ewallet-stored_value")
return l&&(t=Ember.RSVP.resolve(Ember.A([l]))),t||(t=i.store.findAll("payment-method")),t.then(function(t){var n=u&&u.order,r=u&&u.isTvod,i=n&&n.get("orderId")
if(i){return s.default.filterPaymentMethods(t,i).then(function(t){var s=a.default.paymentMethodsForAddPi(t,n,!1,!1,c,r)
return e.set("showRedeemLink",!d.default.isWindowsOobeGamePassClient()&&s.isCsvAllowed),e})}return e}).finally(function(){n.default.done()})}
if(p)return u.piContainer.get("backupPis").then(function(e){var t=e||[]
return t.includes(u.selectedPi)&&t.removeObject(u.selectedPi),b(t)})
var h=u.piContainer.get("allPaymentInstruments")||[]
return b(h)}n.default.busy()
var y=this.get("paymentInstruments"),P=u&&u.order&&u.order.get("isOmexProduct"),_=u&&u.order&&u.order.get("legacyPurchaseType")
return y.enumerate(this.store,P,_).then(function(e){if(p)return a.default.backupPi(e).then(function(e){return e&&(e.length>0&&(e.hasPi=!0),e.selectBackup=p,e.noPaymentInstruments=(0,r.default)()),n.default.done(),e})
n.default.done()
var t=[]
return t.selectBackup=p,t.noPaymentInstruments=(0,r.default)(),t},function(e){i.replaceWith("error",e)})},afterModel:function(e){if(e.pageDetails={userPis:i.default.get(e),context:this.context},e.get("selectedPi.display_info.isBadPi")&&e.get("selectedPi.isAsyncPi"))return l.default._sessionIds.reset(),this.order.set("orderState","Editing"),this.order.save()}})}),define("web-blends/routes/purchase/subscription-downgrade",["exports","web-blends/modules/busy","web-blends/routes/base"],function(e,t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n.default.extend({telemetryBi:Ember.inject.service(),model:function(e){var n=e.convertBigId.split("/")[0],a=this.get("store").findRecord("product",e.ownedBigId),r=this.get("store").findRecord("product",n)
return this.get("telemetryBi").setDidStartDowngrade(!0),t.default.busy(),Ember.RSVP.all([a,r]).then(function(n){return t.default.done(),{ownedProduct:n[0],convertProduct:n[1],expirationDate:e.expirationDate,sharedType:e.sharedType}})}})}),define("web-blends/routes/purchase/subscription-interstitial",["exports","web-blends/routes/base","web-blends/modules/flow-stack"],function(e,t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({model:function(e,t){var n=void 0,a=void 0,r=void 0,s=void 0,i=void 0,l=void 0,o=void 0,d=void 0,u=void 0,c=void 0,m=void 0,f=void 0
return t&&t.queryParams&&(n=t.queryParams.retailPrice?t.queryParams.retailPrice:void 0,a=t.queryParams.listPrice?t.queryParams.listPrice:void 0,r=t.queryParams.currencyCode?t.queryParams.currencyCode:void 0,s=t.queryParams.lineItemTitle?t.queryParams.lineItemTitle:void 0,i=t.queryParams.recurrencePrice?t.queryParams.recurrencePrice:void 0,l=t.queryParams.isTrial?t.queryParams.isTrial:void 0,o=t.queryParams.localizedTrialDurationString?t.queryParams.localizedTrialDurationString:void 0,d=t.queryParams.initialChargeFrequency?t.queryParams.initialChargeFrequency:void 0,u=t.queryParams.localizedChargeFrequency?t.queryParams.localizedChargeFrequency:void 0,c=t.queryParams.promotionalCoreDurationUnitType?t.queryParams.promotionalCoreDurationUnitType:void 0,m=t.queryParams.promotionalCoreDurationUnits?t.queryParams.promotionalCoreDurationUnits:void 0,f=t.queryParams.posterImage?t.queryParams.posterImage:void 0),{retailPrice:n,listPrice:a,currencyCode:r,lineItemTitle:s,recurrencePrice:i,isTrial:l,localizedTrialDurationString:o,initialChargeFrequency:d,localizedChargeFrequency:u,promotionalCoreDurationUnitType:c,promotionalCoreDurationUnits:m,posterImage:f}},actions:{cancel:function(){n.default.clearAndDone("cancel")},continue:function(){this.replaceWith("purchase.confirm",{queryParams:{recurringConsent:!0}})}}})}),define("web-blends/routes/purchase/subscription-upgrade",["exports","web-blends/routes/base","web-blends/modules/flow-stack","sfw-telemetry/utils/flight-config"],function(e,t,n,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({title:Ember.computed(function(){return this.get("strings.Ultimate_Upgrade_Title")}),telemetryBi:Ember.inject.service(),model:function(e,t){var n=void 0,r=void 0,s=void 0,i=void 0,l=void 0
return t&&t.queryParams&&(n=t.queryParams.newExpirationDate?t.queryParams.newExpirationDate:void 0,r=t.queryParams.posterImage?t.queryParams.posterImage:void 0,s=t.queryParams.lineItemTitle?t.queryParams.lineItemTitle:void 0,i=t.queryParams.showModernConversion?t.queryParams.showModernConversion:void 0,l=t.queryParams.conversionDetailsUrl?t.queryParams.conversionDetailsUrl:void 0),a.default.isEnabled("upgradetelemetry")&&this.get("telemetryBi").setDidStartUpgrade(!0),{newExpirationDate:n,posterImage:r,daUpgradeBigId:t&&t.queryParams&&t.queryParams.daUpgradeBigId,lineItemTitle:s,showModernConversion:i,conversionDetailsUrl:l}},actions:{cancel:function(){n.default.clearAndDone("cancel")},continue:function(){var e={upgradeConsent:"UpgradeWithConsent",daUpgradeBigId:this.getCurrentModel().daUpgradeBigId}
this.replaceWith("purchase.confirm",{queryParams:e}),a.default.isEnabled("upgradetelemetry")&&this.get("telemetryBi").setDidFinishUpgrade(!0)}}})}),define("web-blends/routes/purchase/tvod-resume",["exports","web-blends/routes/base","sfw-telemetry/utils/start-data"],function(e,t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({model:function(){var e=n.default.get().resumeId
return e||this.replaceWith("error","TvodMissingResumeId"),{resumeId:e}}})}),define("web-blends/routes/redeem/enter-code",["exports","web-blends/routes/base","web-blends/modules/busy","sfw-telemetry/utils/start-data","sfw-telemetry/utils/flight-config","sfw-telemetry/utils/blend-bi-tracker","sfw-telemetry/utils/client"],function(e,t,n,a,r,s,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({productImages:Ember.inject.service(),title:Ember.computed(function(){return this.get("strings.RedeemEnterCodePageTitle")}),user:Ember.inject.service(),setupController:function(e,t){if("redeemErrorValidatePIOnAttachFailed"===e.get("invokeType")&&e.set("tokenString",""),this._super(e,t),"redeemAnother"===e.get("invokeType"))e.set("tokenString",null)
else{var n=a.default.get().tokenString
e.set("tokenString",n)}},model:function(){var e={tokenInfo:{},product:null,productBigIds:[],displaySkuAvailability:null,activeAvailability:null,piRequiredAvailability:null,nonPiRequiredAvailability:null,tokenContentType:null,parentProducts:null,userConsent:null,imageUrl:{},isRedeem:!0}
if(n.default.busy(),r.default.isEnabled("setupofficeredirect")&&a.default.get().redirectContext){var t={redirectContext:a.default.get().redirectContext,source:a.default.get().CallerApplicationId,ctid:a.default.get().ctid,encryptedtoken:a.default.get().encryptedtoken,tokenhash:a.default.get().tokenhash}
s.default.captureContentPageAction({name:"redirectContext"},t)}return this.get("user").getProfile().then(function(t){return n.default.done(),e.emailAddress=t.get("msa_primary_alias")||t.get("email_address"),e},function(){return n.default.done(),e})},afterModel:function(e){if(this._super(e),Ember.run.scheduleOnce("afterRender",this,this.focusTokenStringText),i.default.isBuddyPassScenario()){var t=this
this.store.findRecord("product",a.default.get().ProductId).then(function(n){e.product=n,e.productBigIds=[{productId:a.default.get().ProductId,skuId:a.default.get().SkuId}],e.displaySkuAvailability=n.get("DisplaySkuAvailabilities").find(function(e){return e.Sku.SkuId.toLowerCase()===a.default.get().SkuId.toLowerCase()}).Availabilities.find(function(e){return e.OrderManagementData.Price.IsPIRequired}),e.activeAvailability=e.displaySkuAvailability,e.tokenInfo={id:"BuddyPassScenario"},t.get("productImages").getImageUrl(e.product).then(function(n){return e.imageUrl=n,t.replaceWith("redeem.redeemConfirm")})})}},focusTokenStringText:function(){$("#tokenString").focus()}})}),define("web-blends/routes/redeem/prorate",["exports","web-blends/routes/base","web-blends/modules/flow-stack","sfw-telemetry/utils/blend-bi-tracker","sfw-messaging/utils/open-terms","sfw-telemetry/utils/start-data"],function(e,t,n,a,r,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({productImages:Ember.inject.service(),model:function(e,t){var n=this,a=e.context.split(","),r={productId:a[0].split("/")[0],skuId:a[0].split("/")[1]},s={productId:a[1].split("/")[0],skuId:a[1].split("/")[1]},i={productId:a[2].split("/")[0],skuId:a[2].split("/")[1]},l=[this.get("store").findRecord("product",r.productId),this.get("store").findRecord("product",s.productId),this.get("store").findRecord("product",i.productId)]
return Ember.RSVP.Promise.all(l).then(function(e){var a={isDowngradeAllowed:t&&t.queryParams&&"true"===t.queryParams.isDowngradeAllowed},r=e[0]
a.prorateBigId=s,a.prorateProduct=e[1],a.convertBigId=i,a.convertProduct=e[2]
var l=a.prorateProduct.get("isXboxUltimate"),o=a.prorateProduct.get("DisplaySkuAvailabilities").filter(function(e){return e.Sku.SkuId===s.skuId}),d=void 0,u=void 0
if(l){a.isXboxUltimate=l,a.currentProductTitle=r.get("ProductTitle")
var c=t&&t.queryParams&&t.queryParams.newExpirationDate,m=t&&t.queryParams&&t.queryParams.currentExpirationDate
a.convertSkuTitle=n.skuTitle(a.convertProduct,i.skuId)||a.convertProduct.get("ProductTitle"),a.prorateDescription=n.ultimateProrateDurationString(a.currentProductTitle,a.convertSkuTitle,i.productId,i.skuId,c,m),a.currentExpirationDateDescription=n.currentExpirationDateString(a.currentProductTitle,m),a.newExpirationDateDescription=n.newExpirationDateString(a.currentProductTitle,c),a.prorateDescription||n.replaceWith("error","UltimateConversionUnavailable")}else t&&t.queryParams&&t.queryParams.prorateUnitType&&t.queryParams.prorateUnits&&(d=t.queryParams.prorateUnitType,u=t.queryParams.prorateUnits),d&&u||(d=o[0].Sku.RecurrencePolicy.Duration.UnitType,u=o[0].Sku.RecurrencePolicy.Duration.Units),a.prorateStrings=r.get("LocalizedProperties.0.UXDowngradeShortDescription")||[],a.prorateStrings.push(n.prorateDurationString(d,u)),a.currentProductTitle=r.get("ProductTitle"),a.convertProductTitle=a.convertProduct.get("ProductTitle"),a.downgradeStrings=a.convertProduct.get("LocalizedProperties.0.UXDowngradeShortDescription")||[]
return a},function(e){n.replaceWith("error",e)})},actions:{keep:function(){var e=this.getCurrentModel()
this.setProductAndTransitionToRedeemConfirm(e.prorateProduct,[e.prorateBigId],"Prorate")},getLess:function(){this.replaceWith("redeem.redeemConfirm",{queryParams:{userConsent:"Downgrade"}})},cancel:function(){n.default.clearAndDone("cancel")},viewTerms:function(){var e="CN".equalsIgnoreCase(s.default.get().Market)
a.default.captureContentPageAction({name:"ViewTermsButtonClicked"},{source:"prorate"})
var t=void 0
t=e?"msa":"gifttou",r.default.open(t)}},setProductAndTransitionToRedeemConfirm:function(e,t,n){var a=this
this.get("productImages").getImageUrl(e).then(function(r){var s=a.modelFor("redeem.enterCode")
Ember.set(s,"imageUrl",r),a.setProductAndTransition(s,e,t,n)})},setProductAndTransition:function(e,t,n,a){Ember.set(e,"product",t),Ember.set(e,"productBigIds",n),Ember.set(e,"allowAutoRenew",void 0),this.replaceWith("redeem.redeemConfirm",{queryParams:{userConsent:a}})},prorateDurationString:function(e,t){var n=e.toLowerCase()
n=n.charAt(0).toUpperCase()+n.slice(1),t>1&&(n+="s")
var a=this.get("strings")["Subscribe_Prorate_Duration_"+n]
return a?a.replace("{units}",t):this.get("strings.Subscribe_Prorate_Duration").replace("{Unit}",t).replace("{UnitType}",e)},skuTitle:function(e,t){var n=e.get("DisplaySkuAvailabilities").filter(function(e){return e.Sku.SkuId===t}),a=void 0
return n&&n.length&&(a=this.skuLocalizedProperties(n[0].Sku)),a&&a.SkuTitle},skuLocalizedProperties:function(e){var t=e.LocalizedProperties
if(!t)return null
var n=s.default.get().Market
return t.find(function(e){return e.Markets.find(function(e){return e&&e.toLowerCase&&e.toLowerCase()===n.toLowerCase()})})},currentExpirationDateString:function(e,t){return this.get("strings.Ultimate_Upgrade_Message_Current_Renewal_Date").replace("{currentProductTitle}",e).replace("{current_date}",t)},newExpirationDateString:function(e,t){return this.get("strings.Ultimate_Upgrade_Message_End_Renewal_Date").replace("{currentProductTitle}",e).replace("{end_date}",t)},ultimateProrateDurationString:function(e,t,n,r,s,i){a.default.captureContentPageAction({name:"getUltimateProrateString"},{currentProductTitle:e,convertSkuTitle:t,convertProductId:n,convertSkuId:r})
var l=void 0
s&&i&&(l=this.get("strings.Ultimate_Prorate_Description").replace("{redeemingSkuTitle}",t).replace("{currentProductTitle}",e).replace("{currentProductTitle}",e))
return l},ultimateProrateDuration:function(e,t){switch(e.toUpperCase()){case"CFQ7TTC0K5DJ":switch(t.toUpperCase()){case"001C":return{Units:2,UnitType:"day"}
case"001G":return{Units:3,UnitType:"day"}
case"001D":return{Units:5,UnitType:"day"}
case"000P":return{Units:9,UnitType:"day"}
case"0001":return{Units:20,UnitType:"day"}
case"0002":return{Units:1,UnitType:"month"}
case"0005":return{Units:2,UnitType:"month"}
case"0007":return{Units:4,UnitType:"month"}
case"000B":return{Units:8,UnitType:"month"}
default:return null}case"CFQ7TTC0K6L8":switch(t.toUpperCase()){case"000K":return{Units:2,UnitType:"day"}
case"0007":return{Units:3,UnitType:"day"}
case"000L":return{Units:5,UnitType:"day"}
case"000D":return{Units:9,UnitType:"day"}
case"000C":return{Units:20,UnitType:"day"}
case"000H":return{Units:2,UnitType:"month"}
case"000Q":return{Units:4,UnitType:"month"}
case"000G":return{Units:5,UnitType:"month"}
case"000J":return{Units:10,UnitType:"month"}
default:return null}case"CFQ7TTC0KGQ8":switch(t.toUpperCase()){case"0004":return{Units:20,UnitType:"day"}
case"000P":return{Units:40,UnitType:"day"}
case"0006":return{Units:2,UnitType:"month"}
case"000H":return{Units:4,UnitType:"month"}
case"0009":return{Units:8,UnitType:"month"}
default:return null}case"CFQ7TTC0K5DH":switch(t.toUpperCase()){case"0001":return{Units:10,UnitType:"day"}
case"0002":return{Units:2,UnitType:"month"}
case"0003":return{Units:10,UnitType:"day"}
case"0004":return{Units:4,UnitType:"month"}
default:return null}case"CFQ7TTC0L7S5":switch(t.toUpperCase()){case"0003":case"0004":return{Units:1,UnitType:"month"}
default:return null}default:return null}}})}),define("web-blends/routes/redeem/redeem-confirm",["exports","web-blends/routes/base","sfw-telemetry/utils/app-globals","web-blends/modules/settings/no-payment-instruments","web-blends/modules/flow-stack","web-blends/modules/busy","sfw-services/models/session-ids","sfw-telemetry/utils/flight-config","sfw-services/utils/error-equals","sfw-telemetry/utils/start-data","sfw-telemetry/utils/client","sfw-components/utils/order-bi-data","sfw-services/utils/new-expiration-date","sfw-services/utils/new-xaa-expiration-date","sfw-services/utils/get-local-date","sfw-services/utils/supported-payment-instruments","web-blends/utils/selected-pi","sfw-services/errors/app-error","sfw-services/utils/conversion-details-url"],function(e,t,n,a,r,s,i,l,o,d,u,c,m,f,p,g,b,h,y){Object.defineProperty(e,"__esModule",{value:!0})
var P=function(e,t){var n
if(e&&t){var a=t.split("/")[1],r=e.get("DisplaySkuAvailabilities")
if(r){var s=r.find(function(e){return e.Sku.SkuId.toLowerCase()===a.toLowerCase()})
s&&(n=s.Availabilities.find(function(e){return e.OrderManagementData.Price.IsPIRequired}))}}return n}
e.default=t.default.extend({title:Ember.computed(function(){return this.get("strings.Redeem_ConfirmPage_Title")}),user:Ember.inject.service(),paymentInstruments:Ember.inject.service(),creditCardCountry:Ember.inject.service(),autoRenewalConsent:Ember.inject.service(),upgradeConsent:!1,activate:function(){this._super(),Ember.run.scheduleOnce("afterRender",this,function(){$("#confirmButton").focus()})},beforeModel:function(e){var t=this,a=this.modelFor("redeem.enterCode"),r=a.product&&a.product.get("isXboxUltimate")||!1,g=a.product&&a.product.get("isXboxUltimateFamily")||!1,b=a.product&&a.product.get("isOmexProduct")||!1,P=l.default.isEnabled("modernconversion")&&(r||g||b)||!1,_=r||g||P,v=e.queryParams&&e.queryParams.userConsent
if(!e.queryParams||!e.queryParams.autoConfirm){if(e.queryParams&&e.queryParams.upgradeConsent&&this.set("upgradeConsent",e.queryParams.upgradeConsent),l.default.isEnabled("subupgrade")&&_&&!v&&a.product.get("supportsConversion")&&!this.get("upgradeConsent")){if(l.default.isEnabled("ultimateupgrade")){var w=this.store.createRecord("order",{checkEligibility:!0,clientContext:u.default.getContext(),language:d.default.get().Languages||d.default.get().Culture,market:d.default.get().Market,orderState:"Editing",lineItems:[]})
n.default._sessionIds||(n.default._sessionIds=i.default.create())
var C={sessionId:n.default._sessionIds.getNewSessionId(),paymentInstrumentType:"Token",paymentInstrumentId:a.tokenInfo.get("id")}
return w.set("billingInformation",C),w.save().catch(function(e){if(o.default.upgradeWithConsent(e)){var n=(0,m.default)(e)
return s.default.done(),(0,y.default)(t.store,e,r||g,b).then(function(e){return t.replaceWith("redeem.subscriptionUpgrade",{queryParams:{newExpirationDate:n,lineItemTitle:a.product.get("title"),showModernConversion:!!P||null,conversionDetailsUrl:e}})})}l.default.isEnabled("conversionblockedxaa")&&o.default.conversionBlockedForXaaSubscription(e)?(e.productTitle=a.product.get("title"),e.pageDetails={orderInfo:(0,c.default)(w),productId:a.product.id},l.default.isEnabled("xaaconversionexpirationdate")&&(e.newXaaExpirationDate=(0,f.default)(e)),t.replaceWith("error",e)):(e.pageDetails={orderInfo:(0,c.default)(w),productId:a.product.id},t.replaceWith("error",e))})}return this.replaceWith("redeem.subscriptionUpgrade",{queryParams:{lineItemTitle:a.product.get("title")}})}if(!(this.get("upgradeConsent")||v&&(v.equalsIgnoreCase("Prorate")||v.equalsIgnoreCase("Downgrade")||v.equalsIgnoreCase("ChildNewSubscription")))){var x=e.queryParams.aveTryAgain
if(a.product&&a.product.get("supportsConversion")&&!u.default.isBuddyPassScenario()){this.set("model.tokenContentType","product")
var I=this.store.createRecord("order",{checkEligibility:!0,clientContext:u.default.getContext(),language:d.default.get().Languages||d.default.get().Culture,market:d.default.get().Market,orderState:"Editing",lineItems:[]})
n.default._sessionIds||(n.default._sessionIds=i.default.create())
var k={sessionId:n.default._sessionIds.getNewSessionId(),paymentInstrumentType:"Token",paymentInstrumentId:a.tokenInfo.get("id")}
return I.set("billingInformation",k),s.default.busy(),I.save().catch(function(e){if(o.default.userConsentRequired(e)){var n=[],r=e.innerError.innererror.PurchaseLineItemExceptionContext[0]
n.push(r.CurrentSubscriptionDetail.BigId)
var s=r.ConvertibleProducts,i=s.filter(function(e){return e.ConversionType.equalsIgnoreCase("prorate")})
i.length>0&&n.push(i[0].BigId)
var d=s.filter(function(e){return r.CurrentSubscriptionDetail.SharedType&&r.CurrentSubscriptionDetail.SharedType.equalsIgnoreCase("Family")&&e.ConversionType.equalsIgnoreCase("childnewsubscription")||e.ConversionType.equalsIgnoreCase("downgrade")}),u=s.filter(function(e){return e.ConversionType.equalsIgnoreCase("blocked")})
if(0===d.length&&u.length>0&&(d=u),0===i.length&&u.length>0&&!u[0].BigId)throw new h.default("ConversionUnavailable")
if(d.length>0&&(d[0].BigId||(d[0].BigId=r.ProductId+"/"+r.SkuId),n.push(d[0].BigId)),0===i.length&&d.length>0){var m={ownedBigId:r.CurrentSubscriptionDetail.BigId,expirationDate:r.CurrentSubscriptionDetail.ExpirationDate,convertBigId:d[0].BigId,sharedType:r.CurrentSubscriptionDetail.SharedType,context:"redeem"}
t.replaceWith("purchase.subscriptionDowngrade",{queryParams:m})}else{var f=n.join(","),g=i.length&&i[0].Duration,b=r.NewExpirationDate,y=r.CurrentSubscriptionDetail.ExpirationDate
l.default.isEnabled("proratedynamic")?t.replaceWith("redeem.prorate",f,{queryParams:{isDowngradeAllowed:0===u.length,newExpirationDate:(0,p.default)(b),currentExpirationDate:(0,p.default)(y)}}):t.replaceWith("redeem.prorate",f,{queryParams:{prorateUnitType:g&&g.UnitType,prorateUnits:g&&g.Units,isDowngradeAllowed:0===u.length}})}}else o.default.userAveRequired(e)?x?t.replaceWith("redeem.redirectRetry"):t.replaceWith("redeem.redirectConfirm"):(e.pageDetails={orderInfo:(0,c.default)(I),productId:a.product.id},t.replaceWith("error",e))}).finally(function(){s.default.done()})}}}},model:function(e){var t,o=function(e,t){var n=void 0
return e&&e.Availabilities&&e.Availabilities.find&&(n=e.Availabilities.find(function(e){return e.OrderManagementData.Price.IsPIRequired===t})),n},c=this.modelFor("redeem.enterCode")
if(c.autoConfirm=e&&e.autoConfirm||!1,u.default.isBuddyPassScenario()&&Ember.set(c,"tokenContentType","product"),c.autoConfirm)return c
if(c.sessionId||(n.default._sessionIds||(n.default._sessionIds=i.default.create()),l.default.isEnabled("profilesdk")?Ember.set(c,"sessionId",n.default._sessionIds.getNewSessionId()):c.sessionId=n.default._sessionIds.getNewSessionId()),e.userConsent&&(c.userConsent=e.userConsent,"Prorate"===e.userConsent)){var m=function(e,t){var n,a,r=t[0].skuId
return(n=e.get("DisplaySkuAvailabilities"))&&n.find&&(a=n.find(function(e){return e.Sku.SkuId.toLowerCase()===r.toLowerCase()})),a}(c.product,c.productBigIds),f=o(m,!1),p=o(m,!0)
c.productBigIds=[],c.displaySkuAvailability=m,p&&f?(c.activeAvailability=p,c.piRequiredAvailability=p,c.nonPiRequiredAvailability=f,c.productBigIds.push({productId:c.product.id,skuId:p.SkuId,availabilityId:p.AvailabilityId}),c.productBigIds.push({productId:c.product.id,skuId:f.SkuId,availabilityId:f.AvailabilityId})):(c.nonPiRequiredAvailability=f,c.activeAvailability=f,c.productBigIds.push({productId:c.product.id,skuId:f.SkuId,availabilityId:f.AvailabilityId}))}var h=c.product&&c.product.get("isXboxUltimate")||!1,y=c.product&&c.product.get("isXboxUltimateFamily")||!1
if(l.default.isEnabled("ultimateupgrade")&&(h||y)&&c.product.get("supportsConversion")&&this.get("upgradeConsent")&&(c.userConsent=this.get("upgradeConsent")),c.productBigIds&&c.productBigIds.length&&void 0===c.allowAutoRenew)if(c.allowAutoRenew=!1,c.productBigIds.length>1&&!c.tokenInfo.get("isPartnerBilling"))(t=P(c.product,c.piRequiredAvailability.RenewalBigId))?c.allowAutoRenew=!0:c.activeAvailability=c.nonPiRequiredAvailability
else if(1===c.productBigIds.length){var _=c.activeAvailability
_&&_.OrderManagementData&&_.OrderManagementData.Price&&_.OrderManagementData.Price.IsPIRequired&&(t=P(c.product,_.RenewalBigId))&&(c.redeemWithPi=!0,c.allowAutoRenew=!0)}if(c.allowAutoRenew){r.default.clear(),r.default.push(r.default.flowNames.Redeem),c.order||(c.order=this.store.createRecord("order",{isPIRequired:!0}),c.redeemWithPi?(c.orderLineItemAutoRenewOn=this.store.createRecord("order-line-item",{isPIRequired:!0,availabilityId:t.AvailabilityId,skuId:t.SkuId,productId:c.productBigIds[0].productId,product:c.product,isRedeem:!0,isAutoRenew:!0}),c.order.set("lineItems",Ember.A([c.orderLineItemAutoRenewOn]))):(c.orderLineItemAutoRenewOn=this.store.createRecord("order-line-item",{isPIRequired:!0,availabilityId:t.AvailabilityId,skuId:t.SkuId,productId:c.productBigIds[0].productId,product:c.product,isRedeem:!0,isAutoRenew:!0}),c.order.set("lineItems",Ember.A([c.orderLineItemAutoRenewOn])),c.orderLineItemAutoRenewOff=this.store.createRecord("order-line-item",{isPIRequired:!1,availabilityId:c.nonPiRequiredAvailability.AvailabilityId,skuId:c.piRequiredAvailability.SkuId,productId:c.productBigIds[0].productId,product:c.product,isRedeem:!0,isAutoRenew:!1}))),s.default.busy()
var v=this
return l.default.isEnabled("enableccsmd")?(Ember.set(c,"piContainer",v.get("paymentInstruments")),Ember.set(c,"noPaymentInstruments",(0,a.default)(!0)),c.piContainer.enumerate(v.store,!1,null,null,!1,!0).then(function(){var e=c.piContainer.allPaymentInstruments,t=c.order,a=e&&g.default.getPisAllowedForOrder(e,t),r=n.default._selectPiData&&n.default._selectPiData.selectedPis
Ember.set(c,"changedPis",r)
var i=(0,b.default)(a,null,r&&r.id),l=i&&i.get("smdCreditCardCountry")||null
return v.get("creditCardCountry").setCountry(l),Ember.set(c,"selectedPi",i),v.get("user").getProfile(null,!0,!1,v.get("creditCardCountry").getCountry()||d.default.get().Market).then(function(e){return Ember.set(c,"noMsaProfile",!e.get("hasFullName")),Ember.set(c,"noEmailAddress",!e.get("email_address")),Ember.set(c,"noProfileAddressFound",!e.get("hasProfileAddress")),Ember.set(c,"defaultAddressId",e.get("defaultAddressId")),e.get("hasProfileAddress")&&Ember.set(c,"noDefaultAddress",!e.get("hasDefaultAddress")),Ember.set(c,"profileDefaultAddress",e.get("default_address")),s.default.done(),c},function(e){v.replaceWith("error",e)})})):v.get("user").getProfile().then(function(e){var t=e&&e.get("default_address")&&e.get("default_address").get("region"),r=d.default.get().Market,i=v.get("autoRenewalConsent").supportedRegions,l=c&&c.displaySkuAvailability&&c.displaySkuAvailability.Sku&&c.displaySkuAvailability.Sku.RecurrencePolicy&&c.displaySkuAvailability.Sku.RecurrencePolicy.InitialDuration
return"US".equalsIgnoreCase(r)&&i.containsAnyIgnoreCase(t)&&l&&v.get("autoRenewalConsent").addAutoRenewalConsent(),Ember.set(c,"noMsaProfile",!e.get("hasFullName")),Ember.set(c,"noEmailAddress",!e.get("email_address")),Ember.set(c,"noProfileAddressFound",!e.get("hasProfileAddress")),e.get("hasProfileAddress")&&Ember.set(c,"noDefaultAddress",!e.get("hasDefaultAddress")),Ember.set(c,"profileDefaultAddress",e.get("default_address")),Ember.set(c,"piContainer",v.get("paymentInstruments")),Ember.set(c,"noPaymentInstruments",(0,a.default)(!0)),c.piContainer.enumerate(v.store,!1,null,null,!1,!0).then(function(){return Ember.set(c,"changedPis",n.default._selectPiData&&n.default._selectPiData.selectedPis),s.default.done(),c})},function(e){v.replaceWith("error",e)})}return c},actions:{didTransition:function(){(this._super.apply(this,arguments),this.getCurrentModel().autoConfirm)&&this.controllerFor("redeem.redeemConfirm").send("redeemToken")}}})}),define("web-blends/routes/redeem/redirect-confirm",["exports","web-blends/routes/base"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({model:function(){var e=this.modelFor("redeem.enterCode")
return e},renderTemplate:function(){this.render("redeem/redirectConfirm")}})}),define("web-blends/routes/redeem/redirect-continue",["exports","web-blends/routes/base"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({model:function(){var e=this.modelFor("redeem.enterCode")
return e},renderTemplate:function(){this.render("redeem/redirectContinue")}})}),define("web-blends/routes/redeem/redirect-retry",["exports","web-blends/routes/base","web-blends/modules/flow-stack"],function(e,t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({actions:{cancel:function(){n.default.clearAndDone("cancel")},tryAgain:function(){this.replaceWith("redeem.redirectContinue")}}})}),define("web-blends/routes/redeem/subscription-upgrade",["exports","web-blends/routes/base","web-blends/modules/flow-stack"],function(e,t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({title:Ember.computed(function(){return this.get("strings.Ultimate_Upgrade_Title")}),model:function(e,t){var n=void 0,a=void 0,r=void 0,s=void 0
return t&&t.queryParams&&t.queryParams.newExpirationDate&&(n=t.queryParams.newExpirationDate,a=t.queryParams.lineItemTitle?t.queryParams.lineItemTitle:void 0,r=t.queryParams.showModernConversion?t.queryParams.showModernConversion:void 0,s=t.queryParams.conversionDetailsUrl?t.queryParams.conversionDetailsUrl:void 0),{newExpirationDate:n,lineItemTitle:a,showModernConversion:r,conversionDetailsUrl:s}},actions:{cancel:function(){n.default.clearAndDone("cancel")},continue:function(){this.replaceWith("redeem.redeemConfirm",{queryParams:{upgradeConsent:"UpgradeWithConsent"}})}}})}),define("web-blends/routes/redeem/success",["exports","web-blends/routes/base","web-blends/modules/busy","sfw-telemetry/utils/blend-bi-tracker","sfw-services/utils/external-urls","sfw-telemetry/utils/client","sfw-telemetry/utils/user-agent","sfw-services/utils/constant-links","sfw-telemetry/utils/flight-config"],function(e,t,n,a,r,s,i,l,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({title:Ember.computed(function(){return this.get("strings.RedeemSuccessPageTitle")}),activate:function(){this._super(),Ember.run.scheduleOnce("afterRender",this,function(){$("#actionLink").focus()})},getNewCSVBalance:function(e){var t=[],r=this.store.findAll("payment-instrument").then(function(t){t.forEach(function(t){var n=t&&t.get("payment_method_type")&&t.get("payment_method_type").toLowerCase(),a=t&&t.get("payment_method_family")&&t.get("payment_method_family").toLowerCase()
"stored_value"===n&&"ewallet"===a&&(e.csvPi=t)})}).catch(function(t){e.hideBalance=!0
var n={message:"getPaymentInstrumentError"}
n.err=t,a.default.capturePurchaseStatePageAction("NeedCsvUpdatedBalance",n)})
return t.push(r),Ember.RSVP.Promise.all(t).then(function(){return n.default.done(),e})},model:function(e,t){var a={}
if(t.queryParams.fromRewardsClaimIncentive)return a.hasCsv=!0,this.getNewCSVBalance(a)
var d=this.modelFor("redeem.redeemConfirm")
if(d&&d.tokenInfo){if(a.product=d.product,a.productSkuId=d.productBigIds&&d.productBigIds.length?d.productBigIds[0].skuId:null,a.parentProducts=d.parentProducts,a.tokenInfo=d.tokenInfo,a.imageUrl=d.imageUrl,a.orderId=t.queryParams.orderId,a.tokenInfo&&(a.hasCsv=a.tokenInfo.csvTokenDescription,a.hasXbox360=a.tokenInfo.xbox360TokenDescription),a.hasCsv)return this.getNewCSVBalance(a)
if(a.orderResult=d.createOrderResult,!a.hasXbox360){var u=function(e){var t=[]
if(e){var n=e.Conditions.ClientConditions.AllowedPlatforms
n&&(t=n.map(function(e){return e.PlatformName}))}return t}(d.activeAvailability)
a.platformCompatibilities=function(e,t){var n=[]
return e&&e.Sku&&e.Sku.Properties&&e.Sku.Properties.Packages&&e.Sku.Properties.Packages.length>0&&e.Sku.Properties.Packages.forEach(function(e){e.PlatformDependencies&&e.PlatformDependencies.length>0&&e.PlatformDependencies.forEach(function(e){var a=e.PlatformName
t.containsAnyIgnoreCase(a)&&((a.toLowerCase().indexOf("universal")>-1||a.toLowerCase().indexOf("phone8x")>-1||a.toLowerCase().indexOf("mobile")>-1)&&!n.containsAnyIgnoreCase("mobile")&&n.push("mobile"),(a.toLowerCase().indexOf("universal")>-1||a.toLowerCase().indexOf("windows8x")>-1||a.toLowerCase().indexOf("desktop")>-1)&&!n.containsAnyIgnoreCase("desktop")&&n.push("desktop"),a.toLowerCase().indexOf("xbox")>-1&&!n.containsAnyIgnoreCase("xbox")&&n.push("xbox"))})}),n}(d.displaySkuAvailability,u),a.targetUrlInfo=function(e,t,n){var a,d=e.get("ParentProductIds")
a=t&&t.get("firstObject")?t.get("firstObject").id:d&&d.length>0?d[0]:e&&e.id
var u={canLinkToClientStoreApp:!0}
return o.default.isEnabled("skipomexcheck")&&e.get("postRedemptionPdp")||e.get("postRedemptionPdp")&&e.get("isOmexProduct")?"all"===e.get("postRedemptionPdp")&&(s.default.isDesktopClient()||s.default.isMobileClient()||s.default.isXboxOneClient()||i.default.isFromThresholdDevice()||i.default.isFromWinPhone10Device())?u.targetUrl=r.default.get("StoreLinkThreshold").toString().replace("{0}",a):(u.targetUrl=l.default.get().officeAccountUrl,u.canLinkToClientStoreApp=!1):e.get("isGamePassProduct")&&s.default.isWebClient()?u.targetUrl=r.default.get("XboxApp").toString():s.default.isDesktopClient()||s.default.isMobileClient()||s.default.isXboxOneClient()?u.targetUrl=r.default.get("StoreLinkThreshold").toString().replace("{0}",a):o.default.isEnabled("skipomexcheck")&&e.get("postRedemptionPdp")||e.get("isOmexProduct")?(u.targetUrl=r.default.get("ShopDefaultStoreAppsUrl").toString().replace("{0}",a),u.canLinkToClientStoreApp=!1):n.containsAnyIgnoreCase("desktop")&&i.default.isFromThresholdDevice()?u.targetUrl=r.default.get("StoreLinkThreshold").toString().replace("{0}",a):n.containsAnyIgnoreCase("mobile")&&i.default.isFromWinPhone10Device()?u.targetUrl=r.default.get("StoreLinkThreshold").toString().replace("{0}",a):e.get("IsPublishedToLegacyWindowsStore")&&i.default.isFromWin8XDevice()?u.targetUrl=r.default.get("StoreLinkWin8x").toString().replace("{0}",e.get("LegacyPfnId")):e.get("IsPublishedToLegacyWindowsPhoneStore")&&i.default.isFromWinPhone81Device()?u.targetUrl=r.default.get("StoreLinkPhone81").toString().replace("{0}",e.get("LegacyPhoneAppId")):e.get("IsPublishedToLegacyWindowsPhoneStore")&&i.default.isFromWinPhone8Device()?u.targetUrl=r.default.get("StoreLinkPhone807x").toString().replace("{0}",e.get("LegacyPhoneAppId")):e.get("IsPublishedToLegacyWindowsPhoneStore")&&i.default.isFromWinPhone7XDevice()?u.targetUrl=r.default.get("StoreLinkPhone807x").toString().replace("{0}",e.get("LegacyPhoneAppId")):(u.targetUrl=r.default.get("ShopDefaultStoreAppsUrl").toString().replace("{0}",a),u.canLinkToClientStoreApp=!1),u}(a.product,a.parentProducts,a.platformCompatibilities)}return n.default.done(),a}}})}),define("web-blends/routes/rewards/claim-incentive",["exports","web-blends/routes/base","sfw-services/errors/app-error","sfw-telemetry/utils/start-data","web-blends/modules/busy","web-blends/utils/rewards"],function(e,t,n,a,r,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({title:Ember.computed(function(){return this.get("strings.RewardsClaimIncentivePageTitle")}),model:function(){r.default.busy()
var e=a.default.get().OfferId,t={offerId:e}
return this.get("store").findRecord("reward","me",{reload:!1}).then(function(a){var i=s.default.findEligibleOffer(a,e)
if(!(i&&i.attributes&&i.attributes.scenario&&i.attributes.offerid))throw new n.default("RewardsUserIneligible")
return t.isRewardsMember=!0,t.rewardsScenario=i.attributes.scenario,t.rewardsOfferId=i.attributes.offerid,r.default.done(),t}).catch(function(e){if(404===e.statusCode)return t.isRewardsMember=!1,r.default.done(),t
throw e})}})}),define("web-blends/serializers/address",["exports","sfw-services/serializers/address"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/serializers/auth-token",["exports","sfw-services/serializers/auth-token"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/serializers/billing-information",["exports","sfw-services/serializers/billing-information"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/serializers/contact-preference",["exports","sfw-services/serializers/contact-preference"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/serializers/create-rewards-user",["exports","sfw-services/serializers/create-rewards-user"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/serializers/error-details",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.RESTSerializer.extend({isNewSerializerAPI:!0,normalizeResponse:function(e,t,n,a,r){return n.data=n.errorData,delete n.data,this._super(e,t,n,a,r)}})}),define("web-blends/serializers/friends-info",["exports","sfw-services/serializers/friends-info"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})})
define("web-blends/serializers/giftee",["exports","sfw-services/serializers/giftee"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/serializers/order-line-item",["exports","sfw-services/serializers/order-line-item"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/serializers/order",["exports","sfw-services/serializers/order"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/serializers/payment-instrument",["exports","sfw-services/serializers/payment-instrument"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/serializers/payment-method",["exports","sfw-services/serializers/payment-method"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/serializers/product",["exports","sfw-services/serializers/product"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/serializers/profile",["exports","sfw-services/serializers/profile"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/serializers/reward",["exports","sfw-services/serializers/reward"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/serializers/rewards-claim-promotion",["exports","sfw-services/serializers/rewards-claim-promotion"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/serializers/save-to-cart",["exports","sfw-services/serializers/save-to-cart"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/serializers/token",["exports","sfw-services/serializers/token"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/serializers/warranty",["exports","sfw-services/serializers/warranty"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/services/auto-renewal-consent",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Service.extend({supportedRegions:["vt","dc"],autoRenewalConsentRequired:!1,showAutoRenewalConsentError:!1,addAutoRenewalConsent:function(){this.set("autoRenewalConsentRequired",!0)},setAutoRenewalConsentError:function(e){this.set("showAutoRenewalConsentError",e)}})}),define("web-blends/services/busy-state",["exports","sfw-components/services/busy-state"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/services/contact-preference",["exports","sfw-services/services/contact-preference"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/services/correlation-context",["exports","sfw-services/services/correlation-context"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/services/credit-card-country",["exports","sfw-services/services/credit-card-country"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/services/parental-approval",["exports","sfw-services/services/parental-approval"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/services/payment-incentive",["exports","sfw-services/services/payment-incentive"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/services/payment-instruments",["exports","sfw-services/services/payment-instruments"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/services/pidl-model-builder",["exports","sfw-services/services/pidl-model-builder"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/services/pidl",["exports","ember-pidlsdk/services/pidl"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/services/post-pi-info",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Service.extend({piData:{},addingPi:null,setPiInfo:function(e){this.set("piData",e)},setAddingPi:function(e){this.set("addingPi",e)}})}),define("web-blends/services/product-images",["exports","sfw-services/services/product-images"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/services/product-renderer",["exports","sfw-services/services/product-renderer"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/services/purchase-tracker",["exports","sfw-telemetry/services/tracker","sfw-telemetry/utils/start-data","sfw-telemetry/utils/client","sfw-telemetry/utils/flight-config"],function(e,t,n,a,r){Object.defineProperty(e,"__esModule",{value:!0})
var s=void 0
e.default=t.default.extend({store:Ember.inject.service(),getPurchaseContext:function(){return s||(s={culture:n.default.get().Culture,specificCulture:n.default.get()._SpecificCulture,language:n.default.get().Culture&&n.default.get().Culture.substring(0,2),market:n.default.get().Market,client:a.default.getClientType(),deviceFamily:a.default.getDeviceFamily(),appFullName:n.default.get().AppFullName,cid:n.default.get().CampaignId,ocid:n.default.get().OptionalCampaignId,orderId:n.default.get().OrderId,testClient:n.default.get().TestClient,errorDetail:"",urlRef:n.default.get().UrlRef}),s},capturePageView:function(e,t){if(!r.default.isEnabled("pagenamemunge")){var a=e.split(".")
e=a.length<2?a[0]:"askToBuy"===a[1]?e.replace(".","_"):a[0]+"_"+a[1]}t=t||{},$.extend(s,t),s.orderId||(s.orderId=n.default.get().OrderId),!s.orderId&&t.pageDetails&&(s.orderId=t.pageDetails.orderId)
var i=this.get("store").peekAll("product").filter(function(e){return e.id.startsWithIgnoreCase(n.default.get().ProductId)})[0]
return s.productCategory=i&&i.get("productCategory"),this._super(e,s)}})}),define("web-blends/services/rds",["exports","sfw-services/services/rds"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/services/telemetry-bi",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Service.extend({didStartAddPi:!1,didFinishAddPi:!1,didCancelAddPi:!1,didStartAddAddress:!1,didFinishAddAddress:!1,didCancelChoosePiToAdd:!1,addPIType:"",addPIFamily:"",didStartSelectBackup:!1,didFinishSelectBackup:!1,didStartAddBackup:!1,didFinishAddBackup:!1,didStartPSD2Challenge:!1,didFinishPSD2Challenge:!1,didStartSMSChallenge:!1,didFinishSMSChallenge:!1,didStartCVVChallenge:!1,didFinishCVVChallenge:!1,didStartDowngrade:!1,didFinishDowngrade:!1,didStartYearlySubscription:!1,didFinishYearlySubscription:!1,didHavePi:void 0,didRedirectReturn:!1,didStartUpgrade:!1,didFinishUpgrade:!1,setDidStartAddPi:function(e){this.set("didStartAddPi",e)},setDidFinishAddPi:function(e){this.set("didFinishAddPi",e)},setDidCancelAddPi:function(e){this.set("didCancelAddPi",e)},setDidCancelChoosePiToAdd:function(e){this.set("didCancelChoosePiToAdd",e)},setDidStartAddAddress:function(e){this.set("didStartAddAddress",e)},setDidFinishAddAddress:function(e){this.set("didFinishAddAddress",e)},setAddPIType:function(e){this.set("addPIType",e)},setAddPIFamily:function(e){this.set("addPIFamily",e)},setDidStartSelectBackup:function(e){this.set("didStartSelectBackup",e)},setDidFinishSelectBackup:function(e){this.set("didFinishSelectBackup",e)},setDidStartAddBackup:function(e){this.set("didStartAddBackup",e)},setDidFinishAddBackup:function(e){this.set("didFinishAddBackup",e)},setDidStartPSD2Challenge:function(e){this.set("didStartPSD2Challenge",e)},setDidFinishPSD2Challenge:function(e){this.set("didFinishPSD2Challenge",e)},setDidStartSMSChallenge:function(e){this.set("didStartSMSChallenge",e)},setDidFinishSMSChallenge:function(e){this.set("didFinishSMSChallenge",e)},setDidStartCVVChallenge:function(e){this.set("didStartCVVChallenge",e)},setDidFinishCVVChallenge:function(e){this.set("didFinishCVVChallenge",e)},setDidStartDowngrade:function(e){this.set("didStartDowngrade",e)},setDidFinishDowngrade:function(e){this.set("didFinishDowngrade",e)},setDidStartYearlySubscription:function(e){this.set("didStartYearlySubscription",e)},setDidFinishYearlySubscription:function(e){this.set("didFinishYearlySubscription",e)},setDidHavePi:function(e){void 0===this.get("didHavePi")&&this.set("didHavePi",e)},setDidRedirectReturn:function(e){this.set("didRedirectReturn",e)},setDidStartUpgrade:function(e){this.set("didStartUpgrade",e)},setDidFinishUpgrade:function(e){this.set("didFinishUpgrade",e)}})}),define("web-blends/services/user-data-resetter",["exports","sfw-telemetry/utils/app-globals"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Service.extend({user:Ember.inject.service(),reset:function(){this.get("user").clear(),t.default._userPidlData&&t.default._userPidlData.reset&&t.default._userPidlData.reset(),t.default._userAddressPidlData&&Object.keys(t.default._userAddressPidlData).forEach(function(e){t.default._userAddressPidlData[e].reset&&t.default._userAddressPidlData[e].reset()}),t.default._selectPiData&&t.default._selectPiData.reset&&t.default._selectPiData.reset()}})}),define("web-blends/services/user",["exports","sfw-services/services/user"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})})
define("web-blends/services/xbet",["exports","sfw-services/services/xbet"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/templates/application",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"eZlLaMiI",block:'{"symbols":[],"statements":[[1,[18,"outlet"],false]],"hasEval":false}',meta:{moduleName:"web-blends/templates/application.hbs"}})}),define("web-blends/templates/components/address-display-data",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"JREVbpV4",block:'{"symbols":[],"statements":[[6,"div"],[10,"class",[26,["address_line1 fullSpan ",[25,"if",[[20,["address","address_line1"]],"showInfo","hideInfo"],null]]]],[7],[0,"\\n    "],[1,[20,["address","address_line1"]],false],[0,"\\n"],[8],[0,"\\n"],[6,"div"],[10,"class",[26,["address_line2 fullSpan ",[25,"if",[[20,["address","address_line2"]],"showInfo","hideInfo"],null]]]],[7],[0,"\\n    "],[1,[20,["address","address_line2"]],false],[0,"\\n"],[8],[0,"\\n"],[6,"div"],[10,"class",[26,["address_line3 fullSpan ",[25,"if",[[20,["address","address_line3"]],"showInfo","hideInfo"],null]]]],[7],[0,"\\n    "],[1,[20,["address","address_line3"]],false],[0,"\\n"],[8],[0,"\\n"],[6,"div"],[9,"id","subAddress"],[9,"class","fullSpan"],[7],[0,"\\n    "],[6,"span"],[10,"class",[26,["city ",[25,"if",[[20,["address","city"]],"showInfo","hideInfo"],null]]]],[7],[0,"\\n        "],[1,[20,["address","city"]],false],[0,",\\n    "],[8],[0,"\\n    "],[6,"span"],[10,"class",[26,["region ",[25,"if",[[20,["address","region"]],"showInfo","hideInfo"],null]]]],[7],[0,"\\n        "],[1,[20,["address","region"]],false],[0,"\\n    "],[8],[0,"\\n    "],[6,"span"],[10,"class",[26,["postal_code ",[25,"if",[[20,["address","postal_code"]],"showInfo","hideInfo"],null]]]],[7],[0,"\\n        "],[1,[20,["address","postal_code"]],false],[0,"\\n    "],[8],[0,"\\n    "],[6,"span"],[10,"class",[26,["country ",[25,"if",[[20,["address","country"]],"showInfo","hideInfo"],null]]]],[7],[0,"\\n        "],[1,[20,["address","country"]],false],[0,"\\n    "],[8],[0,"\\n"],[8],[0,"\\n"],[6,"div"],[9,"class","changeText"],[7],[0,"\\n    "],[1,[20,["strings","Shared_Label_Select"]],false],[0,"\\n"],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/components/address-display-data.hbs"}})}),define("web-blends/templates/components/address-summary",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"n8cZP5ed",block:'{"symbols":[],"statements":[[4,"if",[[20,["pidlData","displayData","0","accountHolderName"]]],null,{"statements":[[6,"div"],[9,"class","piName"],[7],[1,[20,["pidlData","displayData","0","accountHolderName"]],false],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[20,["pidlData","displayData","0","paymentMethodType"]]],null,{"statements":[[4,"if",[[20,["isDirectDebit"]]],null,{"statements":[[0,"        "],[6,"div"],[9,"id","summaryPI"],[7],[0,"\\n            "],[6,"span"],[7],[1,[20,["pidlData","displayData","0","bankName"]],false],[8],[0,"\\n            "],[6,"br"],[7],[8],[0,"\\n            "],[6,"span"],[7],[1,[18,"bankCodeTitle"],false],[0,":"],[8],[0," "],[6,"span"],[7],[1,[20,["pidlData","displayData","0","bankCode"]],false],[8],[0,"\\n            "],[6,"br"],[7],[8],[0,"\\n            "],[6,"span"],[7],[1,[18,"accountTokenTitle"],false],[0,":"],[8],[0," "],[6,"span"],[7],[1,[20,["pidlData","displayData","0","accountToken"]],false],[8],[0,"\\n            "],[6,"br"],[7],[8],[0,"\\n        "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"        "],[6,"div"],[9,"id","summaryPI"],[7],[0,"\\n            "],[6,"span"],[7],[1,[20,["pidlData","displayData","0","paymentMethodType"]],false],[8],[0," "],[6,"span"],[7],[1,[20,["pidlData","payment_instrument_identifier"]],false],[8],[0," "],[6,"span"],[7],[1,[20,["pidlData","displayData","0","expiryMonth"]],false],[0,"/"],[1,[20,["pidlData","displayData","0","expiryYear"]],false],[8],[0,"\\n        "],[8],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null],[4,"if",[[20,["pidlData","displayData","0","address","address_line1"]]],null,{"statements":[[6,"div"],[9,"class","address_line1 fullSpan"],[7],[0,"\\n    "],[1,[20,["pidlData","displayData","0","address","address_line1"]],false],[0,"\\n"],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[20,["pidlData","displayData","0","address","address_line2"]]],null,{"statements":[[6,"div"],[9,"class","address_line2"],[7],[1,[20,["pidlData","displayData","0","address","address_line2"]],false],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[20,["pidlData","displayData","0","address","address_line3"]]],null,{"statements":[[6,"div"],[9,"class","address_line3"],[7],[1,[20,["pidlData","displayData","0","address","address_line3"]],false],[8],[0,"\\n"]],"parameters":[]},null],[6,"div"],[9,"id","subAddress"],[9,"class","fullSpan"],[7],[0,"\\n"],[4,"if",[[20,["pidlData","displayData","0","address","city"]]],null,{"statements":[[0,"    "],[6,"span"],[9,"class","city"],[7],[1,[20,["pidlData","displayData","0","address","city"]],false],[0,","],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[20,["pidlData","displayData","0","address","region"]]],null,{"statements":[[0,"    "],[6,"span"],[9,"class","region"],[7],[1,[20,["pidlData","displayData","0","address","region"]],false],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[20,["pidlData","displayData","0","address","postal_code"]]],null,{"statements":[[0,"    "],[6,"span"],[9,"class","postal_code"],[7],[1,[20,["pidlData","displayData","0","address","postal_code"]],false],[8],[0,"\\n"]],"parameters":[]},null],[8],[0,"\\n"],[4,"if",[[20,["pidlData","displayData","0","address","country"]]],null,{"statements":[[6,"div"],[9,"class","country"],[7],[1,[20,["pidlData","displayData","0","address","country"]],false],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[20,["isTaxIdDescription"]]],null,{"statements":[[4,"if",[[20,["taxId","value"]]],null,{"statements":[[0,"    "],[6,"div"],[9,"class","taxId"],[7],[1,[20,["taxId","title"]],false],[0," "],[1,[20,["taxId","value"]],false],[8],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"web-blends/templates/components/address-summary.hbs"}})}),define("web-blends/templates/components/auto-renew-switch",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"ftoTU8/K",block:'{"symbols":[],"statements":[[6,"label"],[9,"class","switch cli_slider"],[7],[0,"\\n  "],[6,"input"],[9,"id","toggleSlider"],[9,"type","checkbox"],[9,"role","button"],[10,"checked",[18,"checkBoxClicked"],null],[9,"name","RecurringPaymentsSLider"],[10,"aria-pressed",[26,[[18,"checkBoxClicked"]]]],[9,"aria-label","RecurringPaymentsSlider"],[3,"action",[[19,0,[]],"toggle"],[["on","preventDefault"],["change",false]]],[7],[8],[0,"\\n  "],[6,"div"],[9,"class","slider round"],[7],[8],[0,"\\n"],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/components/auto-renew-switch.hbs"}})}),define("web-blends/templates/components/auto-renewal-consent",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"GHLkcc8o",block:'{"symbols":[],"statements":[[4,"if",[[20,["isModernXboxClient"]]],null,{"statements":[[0,"    "],[6,"button"],[10,"class",[26,["btn btn-auto-renew ",[18,"mercuryCheckedClass"]]]],[3,"action",[[19,0,[]],"onChange"],[["on"],["click"]]],[7],[1,[18,"mercuryAutoRenewalConsentCheckboxText"],false],[8],[0,"\\n"],[4,"if",[[20,["autoRenewalConsentError"]]],null,{"statements":[[4,"unless",[[20,["isChecked"]]],null,{"statements":[[0,"            "],[6,"div"],[9,"class","autoRenewalError"],[7],[0,"\\n                "],[6,"div"],[9,"class","errorIcon"],[7],[0,"\\n                    "],[6,"i"],[9,"class","icon xbox-icon-status-circle-outer"],[7],[8],[0,"\\n                    "],[6,"i"],[9,"class","icon xbox-icon-status-circle-exclamation"],[7],[8],[0,"\\n                "],[8],[0,"\\n                "],[6,"span"],[7],[1,[20,["strings","Auto_Renewal_Consent_Error_Message"]],false],[8],[0,"\\n            "],[8],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},{"statements":[[0,"        "],[6,"div"],[9,"class","autoRenewalRequired"],[7],[6,"span"],[7],[1,[18,"mercuryAutoRenewalConsentRequiredText"],false],[8],[8],[0,"\\n"]],"parameters":[]}]],"parameters":[]},{"statements":[[0,"    "],[6,"div"],[9,"class","c-checkbox"],[7],[0,"\\n        "],[6,"label"],[9,"class","c-label autoRenewalConsentLabel"],[7],[0,"\\n            "],[6,"input"],[9,"id","autoRenewalConsent"],[9,"type","checkbox"],[10,"checked",[18,"isChecked"],null],[10,"aria-checked",[26,[[18,"isChecked"]]]],[9,"aria-labelledby","autoRenewalConsentMessage"],[3,"action",[[19,0,[]],"onChange"],[["on","preventDefault"],["change",false]]],[7],[8],[0,"\\n            "],[6,"span"],[9,"aria-hidden","true"],[9,"id","autoRenewalConsentMessage"],[7],[0,"\\n                "],[1,[20,["strings","Auto_Renewal_Consent_Message"]],false],[0,"\\n            "],[8],[0,"\\n        "],[8],[0,"\\n    "],[8],[0,"\\n\\n"],[4,"if",[[20,["autoRenewalConsentError"]]],null,{"statements":[[4,"unless",[[20,["isChecked"]]],null,{"statements":[[0,"            "],[6,"p"],[9,"id","autoRenewalConsentError"],[7],[0,"\\n                "],[1,[20,["strings","Auto_Renewal_Consent_Error_Message"]],false],[0,"\\n            "],[8],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"web-blends/templates/components/auto-renewal-consent.hbs"}})}),define("web-blends/templates/components/call-to-action",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"AyLWY/kV",block:'{"symbols":[],"statements":[[4,"if",[[20,["showCancelNotModernXboxClient"]]],null,{"statements":[[0,"    "],[6,"button"],[9,"class","btn btn-default btn-back cli_cancelButton"],[9,"id","cancelButton"],[10,"data-bi-slot",[18,"cancel_bi_slot"],null],[10,"data-bi-name",[18,"cancel_bi_name"],null],[9,"data-bi-mto",""],[9,"role","button"],[3,"action",[[19,0,[]],"cancel"]],[7],[1,[18,"cancelButtonText"],false],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[20,["needToAddPi"]]],null,{"statements":[[4,"if",[[20,["isNotAskAPurchaserEligible"]]],null,{"statements":[[0,"        "],[6,"button"],[9,"class","btn btn-primary cli_nextButton"],[9,"id","nextButton"],[10,"data-bi-slot",[18,"confirm_bi_slot"],null],[10,"data-bi-name",[18,"nextAddPi_bi_name"],null],[9,"data-bi-bhvr","85"],[9,"data-bi-mto",""],[9,"role","button"],[3,"action",[[19,0,[]],"addPi"]],[7],[1,[20,["strings","Shared_Button_Next"]],false],[8],[0,"\\n"],[4,"if",[[20,["showBuyFirst"]]],null,{"statements":[[0,"            "],[6,"button"],[9,"class","btn btn-default btn-back cli_cancelButton"],[9,"id","cancelButton"],[10,"data-bi-slot",[18,"cancel_bi_slot"],null],[10,"data-bi-name",[18,"cancel_bi_name"],null],[9,"data-bi-mto",""],[9,"role","button"],[3,"action",[[19,0,[]],"cancel"]],[7],[1,[18,"cancelButtonText"],false],[8],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null]],"parameters":[]},{"statements":[[4,"if",[[20,["isDirectDebitChallengeRequired"]]],null,{"statements":[[0,"        "],[6,"button"],[9,"class","btn btn-primary cli_verifyButton"],[9,"id","verifyButton"],[9,"data-bi-slot","1"],[9,"data-bi-name","VerifyPi"],[9,"data-bi-bhvr","85"],[9,"data-bi-mto",""],[9,"role","button"],[3,"action",[[19,0,[]],"verifyPi"]],[7],[1,[20,["strings","Shared_Label_Verify"]],false],[8],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[20,["showAddAddress"]]],null,{"statements":[[0,"            "],[6,"button"],[9,"class","btn btn-primary cli_nextButton"],[9,"id","nextButton"],[10,"data-bi-slot",[18,"confirm_bi_slot"],null],[9,"data-bi-name","addAddress"],[9,"data-bi-bhvr","85"],[9,"data-bi-mto",""],[9,"role","button"],[3,"action",[[19,0,[]],"addAddress"]],[7],[1,[20,["strings","Shared_Button_Next"]],false],[8],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[20,["showAddBackupPi"]]],null,{"statements":[[0,"            "],[6,"button"],[9,"class","btn btn-primary cli_nextButton"],[9,"id","nextButton"],[10,"data-bi-slot",[18,"confirm_bi_slot"],null],[10,"data-bi-name",[18,"nextAddPi_bi_name"],null],[9,"data-bi-bhvr","85"],[9,"data-bi-mto",""],[9,"role","button"],[3,"action",[[19,0,[]],"addBackupPi"]],[7],[1,[20,["strings","Shared_Button_Next"]],false],[8],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[20,["selectedPi","isAsyncPiWithWaitTime"]]],null,{"statements":[[0,"            "],[6,"button"],[9,"class","btn btn-primary cli_nextButton"],[9,"id","nextButton"],[10,"data-bi-slot",[18,"confirm_bi_slot"],null],[9,"data-bi-name","nextAsyncPi"],[9,"data-bi-bhvr","85"],[9,"data-bi-mto",""],[9,"role","button"],[3,"action",[[19,0,[]],"redirectForAsyncPi"]],[7],[1,[20,["strings","Shared_Button_Next"]],false],[8],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[20,["showSelectAddressNextButton"]]],null,{"statements":[[0,"             "],[6,"button"],[9,"class","btn btn-primary cli_nextButton"],[9,"id","nextButton"],[10,"data-bi-slot",[18,"confirm_bi_slot"],null],[9,"data-bi-name","selectAddress"],[9,"data-bi-bhvr","85"],[9,"data-bi-mto",""],[9,"role","button"],[3,"action",[[19,0,[]],"selectAddress"]],[7],[1,[20,["strings","Shared_Button_Next"]],false],[8],[0,"   \\n"]],"parameters":[]},{"statements":[[4,"if",[[20,["isModernXboxClient"]]],null,{"statements":[[0,"                "],[6,"button"],[10,"onFocus",[25,"action",[[19,0,[]],"displayXPriceAffirmationTooltip"],null],null],[10,"onBlur",[25,"action",[[19,0,[]],"hideXPriceAffirmationTooltip"],null],null],[9,"class","btn btn-primary cli_buyButton"],[9,"id","confirmButton"],[10,"disabled",[18,"isDisabled"],null],[9,"aria-live","polite"],[10,"data-bi-slot",[18,"confirm_bi_slot"],null],[10,"data-bi-name",[18,"confirm_bi_name"],null],[9,"data-bi-bhvr","80"],[9,"data-bi-mto",""],[9,"aria-labelledby","MercuryOrderSummary OrderTotalAmount OrderSummary"],[9,"role","button"],[3,"action",[[19,0,[]],"purchase"]],[7],[1,[18,"confirmButtonText"],false],[8],[0,"\\n"],[4,"if",[[20,["hasXPriceAffirmationString"]]],null,{"statements":[[0,"                    "],[6,"div"],[9,"class","AffirmationTooltip"],[7],[0,"\\n                        "],[6,"div"],[9,"class","AffirmationText"],[7],[1,[18,"getXPriceAffirmationString"],false],[8],[0,"\\n                    "],[8],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},{"statements":[[0,"                "],[6,"button"],[9,"class","btn btn-primary cli_buyButton"],[9,"id","confirmButton"],[10,"disabled",[18,"isDisabled"],null],[9,"aria-live","polite"],[10,"data-bi-slot",[18,"confirm_bi_slot"],null],[10,"data-bi-name",[18,"confirm_bi_name"],null],[9,"data-bi-bhvr","80"],[9,"data-bi-mto",""],[9,"aria-labelledby","ProductContainer PriceContainer confirmButton"],[9,"role","button"],[3,"action",[[19,0,[]],"purchase"]],[7],[1,[18,"confirmButtonText"],false],[8],[0,"\\n"]],"parameters":[]}],[0,"        "]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}],[4,"if",[[20,["showBuyFirst"]]],null,{"statements":[[0,"            "],[6,"button"],[9,"class","btn btn-default btn-back cli_cancelButton"],[9,"id","cancelButton"],[10,"data-bi-slot",[18,"cancel_bi_slot"],null],[10,"data-bi-name",[18,"cancel_bi_name"],null],[9,"data-bi-mto",""],[9,"role","button"],[3,"action",[[19,0,[]],"cancel"]],[7],[1,[18,"cancelButtonText"],false],[8],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}]],"parameters":[]}],[4,"if",[[20,["isXboxOne"]]],null,{"statements":[[0,"    "],[6,"button"],[9,"id","viewTerms"],[9,"class","btn btn-legal"],[9,"data-bi-slot","1"],[9,"data-bi-name","ViewTerms"],[9,"data-bi-mto",""],[9,"role","button"],[3,"action",[[19,0,[]],"viewTerms"]],[7],[0,"\\n        "],[1,[20,["strings","View_Terms_Button"]],false],[0,"\\n    "],[8],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"web-blends/templates/components/call-to-action.hbs"}})}),define("web-blends/templates/components/close-button",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"D9JTqhNK",block:'{"symbols":[],"statements":[[4,"if",[[20,["isSuccess"]]],null,{"statements":[[0,"    "],[6,"button"],[9,"class","btn-close cli_closeButton"],[10,"aria-label",[26,[[20,["strings","Button_Close"]]]]],[9,"id","closeXButton"],[9,"data-bi-slot","3"],[9,"data-bi-name","CloseSuccess"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"closeWithSuccess"]],[7],[0,"îœ‘"],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[6,"button"],[9,"class","btn-close cli_closeButton"],[10,"aria-label",[26,[[20,["strings","Button_Close"]]]]],[9,"id","closeXButton"],[9,"data-bi-slot","3"],[9,"data-bi-name","CloseCancel"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"closeWithCancel"]],[7],[0,"îœ‘"],[8],[0,"\\n"]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"web-blends/templates/components/close-button.hbs"}})}),define("web-blends/templates/components/csv-link",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"d9skkMYX",block:'{"symbols":[],"statements":[[6,"a"],[10,"href",[26,[[18,"url"]]]],[10,"id",[26,["link-",[20,["csvLink","name"]]]]],[10,"data-bi-slot",[26,[[20,["csvLink","slot"]]]]],[10,"data-bi-name",[26,[[18,"dataBiName"]]]],[3,"action",[[19,0,[]],"PostOpenUrlMessage"]],[7],[0,"\\n    "],[6,"i"],[10,"class",[26,["redeemIcon ",[18,"icon"]]]],[10,"id",[26,["redeemIcon-",[20,["csvLink","name"]]]]],[9,"aria-hidden","true"],[7],[8],[0,"\\n    "],[6,"h4"],[9,"class","iconTitle"],[7],[1,[18,"title"],false],[8],[0,"\\n    "],[6,"p"],[9,"class","iconMessage"],[7],[1,[18,"message"],false],[8],[0,"\\n"],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/components/csv-link.hbs"}})}),define("web-blends/templates/components/digital-attach-prorate-page",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"D9Ik7edq",block:'{"symbols":[],"statements":[[6,"section"],[9,"class","RedeemContainer"],[9,"role","main"],[9,"data-bi-area","RedeemProrate"],[7],[0,"\\n    "],[6,"div"],[9,"class","content"],[9,"role","form"],[7],[0,"\\n        "],[6,"h1"],[9,"class","cli_title"],[7],[1,[18,"prorateTitle"],false],[8],[0,"\\n"],[4,"if",[[20,["model","isXboxUltimate"]]],null,{"statements":[[0,"            "],[6,"p"],[9,"class","cli_text"],[7],[0,"\\n                "],[1,[25,"message-with-links",null,[["messageParts","action","tagName"],[[20,["ultimateProrateLegal"]],"viewTermsLink","p"]]],false],[0,"\\n            "],[8],[0,"\\n"],[4,"if",[[20,["isProrateDynamicEnabled"]]],null,{"statements":[[0,"                "],[6,"p"],[7],[1,[20,["model","currentExpirationDateDescription"]],false],[8],[0,"\\n                "],[6,"p"],[7],[1,[20,["model","newExpirationDateDescription"]],false],[8],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},{"statements":[[0,"            "],[6,"p"],[9,"class","cli_text"],[7],[1,[18,"downgradeDescription"],false],[8],[0,"\\n            "],[6,"p"],[9,"class","bold prorateText cli_prorateText"],[7],[1,[18,"keepExistingOption"],false],[8],[0,"\\n            "],[1,[25,"bullet-list",null,[["listItems"],[[20,["model","prorateStrings"]]]]],false],[0,"\\n"]],"parameters":[]}],[0,"    "],[8],[0,"\\n    "],[6,"div"],[9,"class","CTAContainer"],[7],[0,"\\n        "],[6,"button"],[9,"id","keepCurrentButton"],[9,"class","btn btn-primary btn-wide cli_keepButton"],[3,"action",[[19,0,[]],"keep"]],[7],[1,[18,"keepCurrentButton"],false],[8],[0,"\\n        "],[6,"button"],[9,"id","cancelButton"],[9,"class","btn btn-wide cli_cancelButton"],[3,"action",[[19,0,[]],"cancel"]],[7],[1,[20,["strings","Shared_Button_Cancel"]],false],[8],[0,"\\n"],[4,"if",[[20,["isXboxOne"]]],null,{"statements":[[4,"unless",[[20,["model","isXboxUltimate"]]],null,{"statements":[[0,"                "],[6,"button"],[9,"id","viewTerms"],[9,"class","btn btn-legal cli_viewTerms"],[9,"data-bi-slot","1"],[9,"data-bi-name","ViewTerms"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"viewTerms"]],[7],[0,"\\n                    "],[1,[20,["strings","View_Terms_Button"]],false],[0,"\\n                "],[8],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"    "],[8],[0,"\\n"],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/components/digital-attach-prorate-page.hbs"}})}),define("web-blends/templates/components/error-info",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"Tb/Nb5TQ",block:'{"symbols":[],"statements":[[6,"div"],[9,"id","errorCode"],[7],[0,"\\n    "],[6,"div"],[9,"class","cli_errorcode"],[7],[1,[18,"errorCode"],false],[8],[0,"\\n"],[4,"if",[[20,["showCvAndTimestamp"]]],null,{"statements":[[0,"\\t    "],[6,"div"],[9,"class","cli_mscv"],[7],[1,[18,"mscv"],false],[8],[0,"\\n\\t    "],[6,"div"],[9,"class","cli_timestamp"],[7],[1,[18,"timestamp"],false],[8],[0,"\\n"]],"parameters":[]},null],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/components/error-info.hbs"}})}),define("web-blends/templates/components/gift-details",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"ujuJ3dBM",block:'{"symbols":[],"statements":[[4,"if",[[20,["isGamingApp"]]],null,{"statements":[[0,"    "],[6,"button"],[9,"class","gift-details btn-link btn-back cli_changeButton"],[10,"disabled",[18,"isDisabled"],null],[9,"data-bi-name","changeGiftInfo"],[3,"action",[[19,0,[]],"changeGift"]],[7],[0,"        \\n        "],[6,"div"],[9,"class","gift-to-from"],[7],[0,"\\n            "],[6,"div"],[9,"class","gift-to"],[7],[0,"\\n                "],[6,"div"],[9,"class","gift-to-label"],[7],[1,[18,"toLabel"],false],[8],[0,"\\n                "],[6,"div"],[9,"class","gift-to"],[7],[1,[18,"recipientText"],false],[8],[0,"\\n            "],[8],[0,"\\n            "],[6,"div"],[9,"class","gift-from"],[7],[0,"\\n                "],[6,"div"],[9,"class","gift-from-label"],[7],[1,[18,"fromLabel"],false],[8],[0,"\\n                "],[6,"div"],[9,"class","gift-from"],[7],[1,[18,"senderText"],false],[8],[0,"\\n            "],[8],[0,"\\n        "],[8],[0,"\\n        "],[6,"div"],[10,"aria-label",[26,[[20,["strings","Shared_Label_Edit"]]]]],[9,"class","gift-edit-container"],[7],[0,"\\n            "],[1,[20,["strings","Shared_Label_Edit"]],false],[0,"\\n            "],[6,"i"],[9,"class","icon icon-chevron-left"],[7],[8],[0,"\\n        "],[8],[0,"\\n    "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[20,["isXboxOne"]]],null,{"statements":[[0,"        "],[6,"button"],[9,"class","gift-details btn-back selectedPi cli_changeButton"],[10,"disabled",[18,"isDisabled"],null],[9,"data-bi-name","changeGiftInfo"],[3,"action",[[19,0,[]],"changeGift"]],[7],[0,"\\n            "],[6,"div"],[9,"class","to-from"],[7],[0,"\\n                "],[6,"div"],[7],[1,[18,"recipientText"],false],[8],[0,"\\n                "],[6,"div"],[7],[1,[18,"senderText"],false],[8],[0,"\\n            "],[8],[0,"\\n"],[4,"if",[[20,["isModernXboxClient"]]],null,{"statements":[[0,"                "],[6,"div"],[9,"class","change-text"],[7],[1,[20,["strings","Purchase_Label_Change"]],false],[0,"\\n                    "],[6,"i"],[9,"class","icon icon-chevron-left"],[7],[8],[0,"\\n                "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                "],[6,"div"],[9,"class","change-text"],[7],[1,[20,["strings","Purchase_Gift_Change"]],false],[0,"\\n                    "],[6,"i"],[9,"class","icon icon-chevron-left"],[7],[8],[0,"\\n                "],[8],[0,"\\n"]],"parameters":[]}],[0,"        "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"        "],[6,"div"],[9,"class","gift-details"],[7],[0,"\\n            "],[6,"div"],[7],[1,[20,["strings","Purchase_Gift_Details_Label"]],false],[0,"\\n                "],[6,"button"],[9,"class","btn-link btn-back cli_changeButton"],[10,"aria-label",[26,[[20,["strings","Purchase_Gift_Change"]]]]],[10,"disabled",[18,"isDisabled"],null],[9,"data-bi-name","changeGiftInfo"],[3,"action",[[19,0,[]],"changeGift"]],[7],[1,[20,["strings","Purchase_Label_Change"]],false],[0," "],[8],[0,"\\n            "],[8],[0,"\\n            "],[6,"div"],[9,"class","gift-to"],[7],[1,[18,"recipientText"],false],[8],[0,"\\n            "],[6,"div"],[9,"class","gift-from"],[7],[1,[18,"senderText"],false],[8],[0,"\\n        "],[8],[0,"\\n"]],"parameters":[]}]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"web-blends/templates/components/gift-details.hbs"}})}),define("web-blends/templates/components/mobi-terms",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"CVoU8LY2",block:'{"symbols":["part"],"statements":[[6,"div"],[9,"class","cli_mobiTermsAndConditionsContainer"],[9,"id","mobiTermsAndConditionsContainer"],[7],[0,"\\n    "],[6,"p"],[9,"class","cli_mobiTermsAndConditions"],[10,"aria-label",[20,["selectedPi","display_info","termsAndConditions"]],null],[7],[0,"\\n"],[4,"each",[[20,["mobiTermParts"]]],null,{"statements":[[4,"if",[[19,1,["isToken"]]],null,{"statements":[[0,"                "],[6,"a"],[10,"href",[19,1,["value"]],null],[10,"id",[19,1,["id"]],null],[10,"class",[19,1,["css"]],null],[3,"action",[[19,0,[]],"viewMobiTerms",[19,1,["value"]]]],[7],[1,[19,1,["tokenText"]],false],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                "],[1,[19,1,["value"]],false],[0,"\\n"]],"parameters":[]}]],"parameters":[1]},null],[0,"    "],[8],[0,"\\n"],[8],[0,"\\n"],[6,"div"],[9,"class","moreMobiLegal"],[7],[0,"\\n    "],[6,"span"],[9,"tabindex","0"],[3,"action",[[19,0,[]],"toggleTextView"]],[7],[1,[18,"moreLessToggleText"],false],[8],[0,"\\n"],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/components/mobi-terms.hbs"}})}),define("web-blends/templates/components/payment-instrument-subscription",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"8JdIh6nC",block:'{"symbols":["info"],"statements":[[6,"button"],[10,"class",[26,["selectedPi ",[25,"if",[[20,["canShowCsvTips"]],"withTip"],null]," ",[25,"if",[[20,["canShowBackupTips"]],"withTip backupPi"],null]," ",[18,"cli_class"]]]],[10,"id",[18,"buttonId"],null],[10,"disabled",[18,"isDisabled"],null],[9,"aria-live","polite"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"submit"]],[7],[0,"\\n    "],[6,"div"],[9,"class","piSvgLogo"],[7],[0,"\\n        "],[6,"img"],[9,"alt",""],[10,"src",[20,["display_info","preferredLogo"]],null],[7],[8],[0,"\\n    "],[8],[0,"\\n    "],[6,"div"],[9,"class","piDisplayData"],[7],[0,"\\n        "],[6,"span"],[9,"class","screen-reader"],[7],[1,[20,["strings","Choose_PaymentMethodFamily_Title"]],false],[8],[0,"\\n"],[4,"with",[[20,["display_info"]]],null,{"statements":[[4,"if",[[19,1,["payment_instrument_identifier"]]],null,{"statements":[[0,"                "],[6,"span"],[9,"class","screen-reader"],[7],[1,[19,1,["payment_method_display_name"]],false],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[19,1,["canShowName"]]],null,{"statements":[[0,"                "],[6,"div"],[9,"class","piName"],[7],[1,[19,1,["account_holder_name"]],false],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[19,1,["isCsv"]]],null,{"statements":[[0,"                "],[6,"div"],[9,"class","piCsv piFullSpan cli_PiCsv"],[7],[1,[19,1,["payment_method_display_name"]],false],[0," "],[1,[25,"formatted-price",null,[["number","currencyCode"],[[19,1,["balance"]],[19,1,["currency"]]]]],false],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[20,["selectedPi","isAsyncPi"]]],null,{"statements":[[0,"                "],[6,"div"],[9,"class","isAsyncPi piFullSpan cli_AsyncPi"],[7],[1,[19,1,["payment_method_display_name"]],false],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[19,1,["alipayBa_account_name"]]],null,{"statements":[[0,"                "],[6,"div"],[9,"class","isAlipayBa piFullSpan cli_AlipayBa"],[7],[1,[19,1,["alipayBa_account_name"]],false],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[19,1,["showExpiredLabel"]]],null,{"statements":[[0,"                "],[6,"div"],[9,"class","piExpired"],[7],[1,[20,["strings","Shared_Label_Expired"]],false],[8],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[19,1,["payment_instrument_identifier"]]],null,{"statements":[[0,"                    "],[6,"div"],[10,"class",[26,[[25,"if",[[19,1,["account_holder_name"]],"piIdentifier","piFullSpan"],null]," ",[25,"if",[[19,1,["isMobi"]],"cli_Mobi"],null]]]],[7],[1,[19,1,["payment_instrument_identifier"]],false],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[19,1,["expiry_month"]]],null,{"statements":[[0,"                    "],[6,"div"],[10,"class",[26,["piExpiration ",[25,"if",[[19,1,["expired"]],"piExpirationItalic"],null]]]],[7],[1,[19,1,["expiry_month"]],false],[0,"/"],[1,[19,1,["expiry_year"]],false],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[19,1,["createUpdateLabel"]]],null,{"statements":[[0,"                    "],[6,"div"],[9,"class","piUpdate"],[7],[1,[20,["strings","Shared_Label_Update"]],false],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[19,1,["expired"]]],null,{"statements":[[0,"                    "],[6,"div"],[9,"class","piExpired"],[7],[1,[20,["strings","Shared_Label_Update"]],false],[8],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}],[4,"if",[[19,1,["isBadPi"]]],null,{"statements":[[0,"                "],[6,"div"],[9,"class","badPiLogo"],[7],[0,"\\n                    "],[6,"i"],[9,"class","icon-error"],[9,"aria-hidden","true"],[7],[8],[0,"\\n                "],[8],[0,"\\n"]],"parameters":[]},null],[0,"            "],[6,"div"],[9,"class","changeText"],[9,"aria-hidden","false"],[7],[1,[18,"changeLabel"],false],[0,"\\n                "],[6,"i"],[9,"class","icon icon-chevron-left"],[9,"aria-hidden","false"],[7],[8],[0,"\\n            "],[8],[0,"\\n"]],"parameters":[1]},null],[0,"    "],[8],[0,"\\n"],[4,"if",[[20,["piTips"]]],null,{"statements":[[0,"        "],[6,"div"],[9,"class","piTips"],[7],[1,[18,"piTips"],false],[8],[0,"\\n"]],"parameters":[]},null],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/components/payment-instrument-subscription.hbs"}})}),define("web-blends/templates/components/payment-instrument",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"lnmYsE3Z",block:'{"symbols":["info"],"statements":[[4,"if",[[20,["display_info","showMercuryExpiredPiLabel"]]],null,{"statements":[[0,"    "],[6,"p"],[9,"class","showExpiredPIText"],[7],[0,"\\n        "],[6,"span"],[9,"class","errorIcon"],[7],[0,"\\n            "],[6,"i"],[9,"class","icon xbox-icon-status-circle-outer"],[7],[8],[0,"\\n            "],[6,"i"],[9,"class","icon xbox-icon-status-circle-exclamation"],[7],[8],[0,"\\n        "],[8],[0,"\\n        "],[1,[20,["strings","Mercury_CC_Expired"]],false],[0,"\\n    "],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[20,["display_info","showMercuryUpdatePiLabel"]]],null,{"statements":[[0,"    "],[6,"p"],[9,"class","showUpdatePIText"],[7],[0,"\\n        "],[6,"span"],[9,"class","errorIcon"],[7],[0,"\\n            "],[6,"i"],[9,"class","icon xbox-icon-status-circle-outer"],[7],[8],[0,"\\n            "],[6,"i"],[9,"class","icon xbox-icon-status-circle-exclamation"],[7],[8],[0,"\\n        "],[8],[0,"\\n        "],[1,[20,["strings","Mercury_Payment_Method_Needs_Update"]],false],[0,"\\n    "],[8],[0,"\\n"]],"parameters":[]},null],[6,"button"],[10,"class",[26,["selectedPi ",[18,"cli_class"]]]],[10,"id",[18,"buttonId"],null],[10,"disabled",[18,"isDisabled"],null],[9,"aria-live","polite"],[9,"role","listitem"],[9,"data-bi-mto",""],[10,"aria-describedby",[25,"if",[[20,["useListAccessibility"]],[20,["accessibilityLabelId"]]],null],null],[3,"action",[[19,0,[]],"submit"]],[7],[0,"\\n    "],[6,"div"],[9,"class","piDisplayData"],[10,"id",[26,[[18,"paymentMethodDisplayName"]]]],[7],[0,"\\n"],[4,"with",[[20,["display_info"]]],null,{"statements":[[0,"            "],[6,"div"],[9,"class","piSvgLogo"],[7],[0,"\\n                "],[6,"img"],[9,"alt",""],[10,"src",[19,1,["preferredLogo"]],null],[7],[8],[0,"\\n            "],[8],[0,"\\n"],[4,"if",[[19,1,["canShowName"]]],null,{"statements":[[0,"                "],[6,"div"],[10,"class",[26,["piName ",[25,"if",[[19,1,["mercuryShowAsRed"]],"piExpirationRed"],null]]]],[7],[1,[19,1,["account_holder_name"]],false],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[19,1,["isCsv"]]],null,{"statements":[[0,"                "],[6,"div"],[10,"class",[26,["piCsv piFullSpan cli_PiCsv ",[25,"if",[[19,1,["mercuryShowAsRed"]],"piExpirationRed"],null]]]],[7],[1,[19,1,["payment_method_display_name"]],false],[8],[0,"\\n                "],[6,"div"],[10,"class",[26,["piCsvBalance ",[25,"if",[[19,1,["mercuryShowAsRed"]],"piExpirationRed"],null]]]],[7],[1,[25,"formatted-price",null,[["number","currencyCode"],[[19,1,["balance"]],[19,1,["currency"]]]]],false],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[20,["selectedPi","isAsyncPi"]]],null,{"statements":[[0,"                "],[6,"div"],[10,"class",[26,["isAsyncPi piFullSpan cli_AsyncPi ",[25,"if",[[19,1,["mercuryShowAsRed"]],"piExpirationRed"],null]]]],[7],[1,[19,1,["payment_method_display_name"]],false],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[19,1,["alipayBa_account_name"]]],null,{"statements":[[0,"                "],[6,"div"],[10,"class",[26,["isAlipayBa piFullSpan cli_AlipayBa ",[25,"if",[[19,1,["mercuryShowAsRed"]],"piExpirationRed"],null]]]],[7],[1,[19,1,["alipayBa_account_name"]],false],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[19,1,["issuer"]]],null,{"statements":[[0,"                "],[6,"div"],[10,"class",[26,["piIssuer ",[25,"if",[[19,1,["mercuryShowAsRed"]],"piExpirationRed"],null]]]],[7],[1,[19,1,["issuer"]],false],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[19,1,["showExpiredLabel"]]],null,{"statements":[[0,"                "],[6,"div"],[9,"class","piExpired cli_expired"],[7],[1,[20,["strings","Shared_Label_Expired"]],false],[8],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[19,1,["payment_instrument_identifier"]]],null,{"statements":[[0,"                    "],[6,"span"],[9,"class","screen-reader"],[7],[1,[19,1,["payment_method_display_name"]],false],[8],[0,"\\n"],[4,"if",[[20,["isModernXboxClient"]]],null,{"statements":[[4,"if",[[20,["isSelectPiContext"]]],null,{"statements":[[0,"                            "],[6,"div"],[10,"class",[26,[[25,"if",[[19,1,["account_holder_name"]],"piIdentifier","piFullSpan"],null]," ",[25,"if",[[19,1,["isMobi"]],"cli_Mobi"],null]," ",[25,"if",[[19,1,["mercuryShowAsRed"]],"piExpirationRed"],null]]]],[7],[1,[19,1,["select_pi_payment_instrument_identifier"]],false],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                            "],[6,"div"],[10,"class",[26,[[25,"if",[[19,1,["account_holder_name"]],"piIdentifier","piFullSpan"],null]," ",[25,"if",[[19,1,["isMobi"]],"cli_Mobi"],null]," ",[25,"if",[[19,1,["mercuryShowAsRed"]],"piExpirationRed"],null]]]],[7],[1,[19,1,["payment_instrument_identifier"]],false],[8],[0,"\\n"]],"parameters":[]}]],"parameters":[]},{"statements":[[0,"                        "],[6,"div"],[10,"class",[26,[[25,"if",[[19,1,["account_holder_name"]],"piIdentifier","piFullSpan"],null]," ",[25,"if",[[19,1,["isMobi"]],"cli_Mobi"],null]]]],[7],[1,[19,1,["payment_instrument_identifier"]],false],[8],[0,"\\n"]],"parameters":[]}]],"parameters":[]},{"statements":[[0,"                    "],[6,"span"],[9,"class","screen-reader"],[7],[1,[18,"paymentMethodDisplayName"],false],[8],[0,"\\n"]],"parameters":[]}],[4,"unless",[[20,["canHideCreditCardExpiryDate"]]],null,{"statements":[[4,"if",[[20,["isModernXboxClient"]]],null,{"statements":[[4,"if",[[19,1,["expiry_month"]]],null,{"statements":[[0,"                            "],[6,"div"],[10,"class",[26,["piExpiration ",[25,"if",[[19,1,["expired"]],"piExpirationRed"],null]," ",[25,"if",[[19,1,["mercuryShowAsRed"]],"piExpirationRed"],null]]]],[7],[1,[18,"mercuryExpiryDate"],false],[8],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},{"statements":[[4,"if",[[19,1,["expiry_month"]]],null,{"statements":[[0,"                            "],[6,"div"],[10,"class",[26,["piExpiration ",[25,"if",[[19,1,["expired"]],"piExpirationItalic"],null]]]],[7],[1,[19,1,["expiry_month"]],false],[0,"/"],[1,[19,1,["expiry_year"]],false],[8],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}]],"parameters":[]},null],[4,"unless",[[20,["isModernXboxClient"]]],null,{"statements":[[4,"if",[[19,1,["createUpdateLabel"]]],null,{"statements":[[0,"                        "],[6,"div"],[9,"class","piUpdate"],[7],[1,[20,["strings","Shared_Label_Update"]],false],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[19,1,["expired"]]],null,{"statements":[[0,"                        "],[6,"div"],[9,"class","piExpired cli_expired"],[7],[1,[20,["strings","Shared_Label_Update"]],false],[8],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[4,"if",[[19,1,["isDirectDebitChallengeRequired"]]],null,{"statements":[[0,"                    "],[6,"div"],[9,"class","piPending"],[7],[1,[18,"pendingLabel"],false],[8],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}],[4,"if",[[19,1,["isBadPi"]]],null,{"statements":[[0,"                "],[6,"div"],[9,"class","badPiLogo"],[7],[0,"\\n                    "],[6,"i"],[9,"class","icon-error"],[9,"aria-hidden","true"],[7],[8],[0,"\\n                "],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[19,1,["showMercuryUpdateLabel"]]],null,{"statements":[[0,"                "],[6,"div"],[9,"class","piUpdateLabel"],[7],[1,[20,["strings","Shared_Label_Update"]],false],[0,"\\n                    "],[6,"span"],[9,"class","screen-reader"],[7],[1,[20,["strings","Shared_Label_Update"]],false],[8],[0,"\\n                "],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[19,1,["showMercuryTryAgainLabel"]]],null,{"statements":[[0,"                "],[6,"div"],[9,"class","piIssuesContainer"],[7],[0,"\\n                    "],[6,"div"],[9,"class","piIssuesIcon"],[7],[0,"\\n                        "],[6,"i"],[9,"class","icon xbox-icon-status-circle-outer"],[7],[8],[0,"\\n                        "],[6,"i"],[9,"class","icon xbox-icon-status-circle-exclamation"],[7],[8],[0,"\\n                    "],[8],[0,"\\n                    "],[6,"div"],[9,"class","piIssuesLabel"],[7],[1,[20,["strings","Mercury_Payment_Method_Issue"]],false],[0,"\\n                        "],[6,"span"],[9,"class","screen-reader"],[7],[1,[20,["strings","Mercury_Payment_Method_Issue"]],false],[8],[0,"\\n                    "],[8],[0,"\\n                "],[8],[0,"\\n                "],[6,"div"],[9,"class","piTryAgainLabel"],[7],[1,[20,["strings","Mercury_CC_Try_Again_Label"]],false],[0,"\\n                    "],[6,"span"],[9,"class","screen-reader"],[7],[1,[20,["strings","Mercury_CC_Try_Again_Label"]],false],[8],[0,"\\n                "],[8],[0,"                \\n"]],"parameters":[]},null]],"parameters":[1]},null],[4,"if",[[20,["showChangeLabel"]]],null,{"statements":[[0,"            "],[6,"div"],[9,"class","changeText"],[7],[1,[18,"changeLabel"],false],[0,"\\n                "],[6,"i"],[9,"class","icon icon-chevron-left"],[9,"aria-hidden","true"],[7],[8],[0,"\\n                "],[6,"span"],[9,"class","screen-reader"],[7],[1,[20,["strings","Purchase_Label_Change_Payment"]],false],[8],[0,"\\n            "],[8],[0,"\\n"]],"parameters":[]},null],[0,"    "],[8],[0,"\\n"],[8],[0,"\\n"],[4,"if",[[20,["useListAccessibility"]]],null,{"statements":[[0,"            "],[6,"span"],[9,"class","screen-reader"],[10,"id",[18,"accessibilityLabelId"],null],[7],[1,[18,"getListAccessibilityLabel"],false],[8],[0,"\\n"]],"parameters":[]},null],[0,"    "]],"hasEval":false}',meta:{moduleName:"web-blends/templates/components/payment-instrument.hbs"}})}),define("web-blends/templates/components/payment-instruments-subscription",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"dcBh9EsS",block:'{"symbols":[],"statements":[[4,"if",[[20,["model","piContainer","enumerated"]]],null,{"statements":[[0,"    "],[6,"div"],[9,"id","PiContainer"],[7],[0,"\\n"],[4,"if",[[20,["showProfileLink"]]],null,{"statements":[[0,"            "],[12,"purchase/addProfileAction",[]],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[20,["showSelectAddressLink"]]],null,{"statements":[[0,"                "],[12,"purchase/selectAddressAction",[]],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[20,["showAddAddressLink"]]],null,{"statements":[[0,"                    "],[12,"purchase/addAddressAction",[]],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[20,["hasAllowedPaymentInstruments"]]],null,{"statements":[[4,"if",[[20,["model","selectedPi"]]],null,{"statements":[[4,"if",[[20,["model","selectedPi","exceededMaxPrice"]]],null,{"statements":[[0,"                                "],[12,"purchase/add-pi-action",[]],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                                "],[6,"div"],[7],[0,"\\n"],[4,"if",[[25,"and",[[20,["isSaturnDesktop"]],[20,["showBackupPi"]]],null]],null,{"statements":[[0,"                                        "],[6,"div"],[9,"class","orderPayWith"],[7],[0,"\\n                                            "],[1,[25,"reseller-detail",null,[["order","selectedPi"],[[20,["model","order"]],[20,["model","selectedPi"]]]]],false],[0,"\\n                                            "],[6,"span"],[7],[1,[20,["strings","Mercury_Order_Pay_With"]],false],[8],[0,"\\n                                        "],[8],[0,"\\n"]],"parameters":[]},null],[0,"                                    "],[1,[25,"payment-instrument-subscription",null,[["canPostPiSelectedMessage","selectedPi","canShowExpiredLabel","canShowUpdateLabel","canShowCsvTips","submit","updatePi","cli_class","bi_slot","bi_source","bi_name","change_label"],[true,[20,["model","selectedPi"]],true,false,[20,["showBackupPi"]],"selectPi","selectPi","cli_selectedPi","1","pi","SelectedPi","Purchase_Label_Change"]]],false],[0,"\\n                                "],[8],[0,"\\n                                "],[6,"div"],[7],[0,"\\n"],[4,"if",[[20,["showBackupPi"]]],null,{"statements":[[4,"if",[[20,["isSaturnDesktop"]]],null,{"statements":[[4,"if",[[20,["showTotalAndTax"]]],null,{"statements":[[0,"                                                "],[6,"div"],[9,"class","orderPayRemainingBalanceWith"],[7],[0,"\\n                                                    "],[6,"span"],[7],[1,[25,"formatted-price",null,[["number","currencyCode","displayFormat"],[[20,["remainingBalance"]],[20,["model","order","firstLineItem","currencyCode"]],[20,["payWithRemainingFormat"]]]]],false],[8],[0,"\\n                                                "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                                                "],[6,"div"],[9,"class","orderPayRemainingBalanceWith"],[7],[0,"\\n                                                    "],[6,"span"],[7],[1,[20,["strings","Mercury_Pay_Remaining_With_NoBalance"]],false],[8],[0,"\\n                                                "],[8],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null],[0,"                                        "],[1,[25,"payment-instrument-subscription",null,[["canPostPiSelectedMessage","selectedPi","canShowBackupTips","submit","cli_class","bi_slot","bi_source","bi_name","change_label"],[true,[20,["model","selectedBackupPi"]],true,"selectBackupPi","cli_selectedBackupPi","2","pi","SelectedBackupPi","Purchase_Label_Change"]]],false],[0,"\\n                                        "]],"parameters":[]},{"statements":[[4,"if",[[20,["showSelectBackupPiLink"]]],null,{"statements":[[0," "],[12,"purchase/add-backup-pi-action",[]],[0,"\\n                                    "]],"parameters":[]},null]],"parameters":[]}],[0,"                                "],[8],[0,"\\n"]],"parameters":[]}],[0,"                            "],[2," selectedPi.exceededMaxPrice "],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                            "],[12,"purchase/select-pi-action",[]],[0,"\\n"]],"parameters":[]}],[0,"                        "],[2," model.selectedPi "],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                        "],[12,"purchase/add-pi-action",[]],[0,"\\n"]],"parameters":[]}],[0,"                    "],[2," hasAllowedPaymentInstruments "],[0,"\\n"]],"parameters":[]}],[0,"                "],[2," showAddAddressLink "],[0,"\\n"]],"parameters":[]}],[0,"            "],[2," showSelectAddressLink "],[0,"\\n"]],"parameters":[]}],[0,"        "],[2," showProfileLink "],[0,"\\n    "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[6,"div"],[9,"id","PiContainer"],[7],[0,"\\n"],[4,"if",[[20,["showProfileLink"]]],null,{"statements":[[0,"            "],[12,"purchase/addProfileAction",[]],[0,"\\n"]],"parameters":[]},null],[0,"        "],[2," showProfileLink when no pi is required "],[0,"\\n"],[4,"if",[[20,["xBoxShowAddAddress"]]],null,{"statements":[[0,"            "],[12,"purchase/addAddressAction",[]],[0,"\\n"]],"parameters":[]},null],[0,"    "],[8],[0,"\\n"]],"parameters":[]}],[2," piContainer.enumerated "]],"hasEval":true}',meta:{moduleName:"web-blends/templates/components/payment-instruments-subscription.hbs"}})}),define("web-blends/templates/components/payment-instruments",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"GZbAdXi0",block:'{"symbols":[],"statements":[[4,"if",[[20,["model","piContainer","enumerated"]]],null,{"statements":[[6,"div"],[9,"id","PiContainer"],[7],[0,"\\n"],[4,"if",[[20,["showSelectAddressLink"]]],null,{"statements":[[0,"        "],[12,"purchase/selectAddressAction",[]],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[20,["showAddAddressLink"]]],null,{"statements":[[0,"            "],[12,"purchase/addAddressAction",[]],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[20,["showProfileLink"]]],null,{"statements":[[0,"                "],[12,"purchase/addProfileAction",[]],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[20,["hasAllowedPaymentInstruments"]]],null,{"statements":[[4,"if",[[20,["model","selectedPi"]]],null,{"statements":[[4,"if",[[20,["model","selectedPi","exceededMaxPrice"]]],null,{"statements":[[0,"                            "],[6,"div"],[9,"class","cli_exceedMaxPrice"],[7],[0,"\\n                                "],[1,[20,["strings","Purchase_Message_MobiExceedsMax"]],false],[0,"\\n                            "],[8],[0,"\\n                                "],[12,"purchase/add-pi-action",[]],[0,"\\n"]],"parameters":[]},{"statements":[[4,"unless",[[20,["isModernXboxClient"]]],null,{"statements":[[0,"                                "],[6,"div"],[7],[0,"\\n                                    "],[1,[25,"reseller-detail",null,[["order","selectedPi"],[[20,["order"]],[20,["model","selectedPi"]]]]],false],[0,"\\n                                "],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[20,["isSaturnDesktop"]]],null,{"statements":[[0,"                                "],[6,"div"],[9,"class","orderPayWith"],[7],[0,"\\n                                    "],[1,[25,"reseller-detail",null,[["order","selectedPi"],[[20,["model","order"]],[20,["model","selectedPi"]]]]],false],[0,"\\n                                    "],[6,"span"],[7],[1,[20,["strings","Mercury_Order_Pay_With"]],false],[8],[0,"\\n                                "],[8],[0,"\\n"]],"parameters":[]},null],[0,"                            "],[6,"div"],[7],[0,"\\n                                "],[1,[25,"payment-instrument",null,[["mercuryStopShowingUpdate","mercuryDunningScenario","buttonId","canPostPiSelectedMessage","selectedPi","canShowExpiredLabel","canShowUpdateLabel","submit","updatePi","cli_class","bi_slot","bi_source","bi_name","change_label"],[[20,["mercuryStopShowingUpdate"]],[20,["model","mercuryDunningScenario"]],[20,["buttonId"]],true,[20,["model","selectedPi"]],true,false,"selectPi","selectPi","cli_selectedPi","1","pi","SelectedPi","Purchase_Label_Change"]]],false],[0,"\\n                            "],[8],[0,"\\n"],[4,"if",[[20,["showBackupPi"]]],null,{"statements":[[4,"if",[[20,["isSaturnDesktop"]]],null,{"statements":[[4,"if",[[20,["showTotalAndTax"]]],null,{"statements":[[0,"                                        "],[6,"div"],[9,"class","orderPayRemainingBalanceWith"],[7],[0,"\\n                                            "],[6,"span"],[7],[1,[25,"formatted-price",null,[["number","currencyCode","displayFormat"],[[20,["remainingBalance"]],[20,["model","order","firstLineItem","currencyCode"]],[20,["payWithRemainingFormat"]]]]],false],[8],[0,"\\n                                        "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                                        "],[6,"div"],[9,"class","orderPayRemainingBalanceWith"],[7],[0,"\\n                                            "],[6,"span"],[7],[1,[20,["strings","Mercury_Pay_Remaining_With_NoBalance"]],false],[8],[0,"\\n                                        "],[8],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null],[0,"                                "],[6,"div"],[7],[0,"\\n                                    "],[1,[25,"payment-instrument",null,[["mercuryStopShowingUpdate","mercuryDunningScenario","buttonId","canPostPiSelectedMessage","selectedPi","submit","cli_class","bi_slot","bi_source","bi_name","change_label"],[[20,["mercuryStopShowingUpdate"]],[20,["model","mercuryDunningScenario"]],[20,["backupButtonId"]],true,[20,["model","selectedBackupPi"]],"selectBackupPi","cli_selectedBackupPi","2","pi","SelectedBackupPi","Purchase_Label_Change"]]],false],[0,"\\n                                "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[20,["showSelectBackupPiLink"]]],null,{"statements":[[0,"                                "],[6,"div"],[7],[0,"\\n                                    "],[12,"purchase/add-backup-pi-action",[]],[0,"\\n                                "],[8],[0,"\\n                            "]],"parameters":[]},null]],"parameters":[]}],[0,"                        "]],"parameters":[]}],[0," "],[2," model.selectedPi.exceededMaxPrice "],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                        "],[12,"purchase/select-pi-action",[]],[0,"\\n                    "]],"parameters":[]}],[0," "],[2," model.selectedPi "],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                    "],[12,"purchase/add-pi-action",[]],[0,"\\n                "]],"parameters":[]}],[0," "],[2," hasAllowedPaymentInstruments "],[0,"\\n            "]],"parameters":[]}],[0,"  "],[2," showProfileLink "],[0,"\\n        "]],"parameters":[]}],[0," "],[2," showAddAddressLink "],[0,"\\n    "]],"parameters":[]}],[2," showSelectAddressLink "],[0,"\\n"],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[6,"div"],[9,"id","PiContainer"],[7],[0,"\\n"],[4,"if",[[20,["showProfileLink"]]],null,{"statements":[[0,"            "],[12,"purchase/addProfileAction",[]],[0,"\\n        "]],"parameters":[]},null],[0," "],[2," showProfileLink when no pi is required "],[0,"\\n"],[4,"if",[[20,["xBoxShowAddAddress"]]],null,{"statements":[[0,"            "],[12,"purchase/addAddressAction",[]],[0,"\\n"]],"parameters":[]},null],[0,"    "],[8],[0,"\\n"]],"parameters":[]}],[0," "],[2," piContainer.enumerated "]],"hasEval":true}',meta:{moduleName:"web-blends/templates/components/payment-instruments.hbs"}})}),define("web-blends/templates/components/redeem-gift-card",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"cKG0A19N",block:'{"symbols":[],"statements":[[6,"button"],[9,"tabindex","0"],[9,"id","redeemAction"],[9,"class","selectedPi cli_redeemLink redeemLink"],[9,"data-bi-name","RedeemFromSelectPI"],[10,"role",[26,[[25,"if",[[20,["isRoleRequired"]],"listitem"],null]]]],[10,"aria-describedby",[25,"if",[[20,["useListAccessibility"]],[20,["accessibilityLabelId"]]],null],null],[3,"action",[[19,0,[]],"redeem"]],[7],[0,"\\n    "],[6,"div"],[9,"class","piDisplayData"],[7],[0,"\\n"],[4,"if",[[20,["isModernXboxClient"]]],null,{"statements":[[0,"            "],[6,"div"],[9,"class","changeLink"],[7],[0,"\\n                "],[6,"i"],[9,"class","icon icon-giftcard"],[9,"aria-hidden","true"],[7],[8],[0,"\\n                "],[6,"div"],[9,"class","redeemCardText"],[7],[0,"\\n                    "],[6,"span"],[7],[1,[20,["strings","Purchase_Redeem_Gift_Card"]],false],[8],[0,"\\n                "],[8],[0,"\\n            "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[6,"div"],[9,"class","changeLink"],[7],[0,"\\n                "],[6,"i"],[9,"class","icon icon-giftcard"],[9,"aria-hidden","true"],[7],[8],[0," "],[1,[20,["strings","Purchase_Redeem_Gift_Card"]],false],[0,"\\n            "],[8],[0,"\\n"]],"parameters":[]}],[0,"    "],[8],[0,"\\n"],[8],[0,"\\n"],[4,"if",[[20,["useListAccessibility"]]],null,{"statements":[[0,"    "],[6,"span"],[9,"class","screen-reader"],[10,"id",[18,"accessibilityLabelId"],null],[7],[1,[18,"getListAccessibilityLabel"],false],[8],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"web-blends/templates/components/redeem-gift-card.hbs"}})}),define("web-blends/templates/components/redeem-prorate-page",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"lIIHOF3L",block:'{"symbols":[],"statements":[[6,"section"],[9,"class","RedeemContainer"],[9,"role","main"],[9,"data-bi-area","RedeemProrate"],[7],[0,"\\n    "],[6,"div"],[9,"class","content"],[9,"role","form"],[7],[0,"\\n        "],[6,"h1"],[9,"class","cli_title"],[7],[1,[18,"prorateTitle"],false],[8],[0,"\\n"],[4,"if",[[20,["model","isXboxUltimate"]]],null,{"statements":[[0,"            "],[6,"p"],[9,"class","cli_text"],[7],[0,"\\n                "],[1,[25,"message-with-links",null,[["messageParts","action","tagName"],[[20,["ultimateProrateLegal"]],"viewTermsLink","p"]]],false],[0,"\\n            "],[8],[0,"\\n"],[4,"if",[[20,["isProrateDynamicEnabled"]]],null,{"statements":[[0,"                "],[6,"p"],[7],[1,[20,["model","currentExpirationDateDescription"]],false],[8],[0,"\\n                "],[6,"p"],[7],[1,[20,["model","newExpirationDateDescription"]],false],[8],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},{"statements":[[0,"            "],[6,"p"],[9,"class","cli_text"],[7],[1,[18,"downgradeDescription"],false],[8],[0,"\\n"],[4,"if",[[20,["downgradeAllowed"]]],null,{"statements":[[0,"                "],[6,"p"],[9,"class","bold red prorateText cli_recommended"],[7],[1,[20,["strings","Office_Recommended_Title"]],false],[8],[0,"\\n"]],"parameters":[]},null],[0,"            "],[6,"p"],[9,"class","bold prorateText cli_prorateText"],[7],[1,[18,"keepExistingOption"],false],[8],[0,"\\n            "],[1,[25,"bullet-list",null,[["listItems"],[[20,["model","prorateStrings"]]]]],false],[0,"\\n"],[4,"if",[[20,["downgradeAllowed"]]],null,{"statements":[[0,"                "],[6,"p"],[9,"class","prorateText cli_downgradeText"],[7],[1,[18,"getLessOption"],false],[8],[0,"\\n                "],[1,[25,"bullet-list",null,[["listItems"],[[20,["model","downgradeStrings"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}],[0,"    "],[8],[0,"\\n    "],[6,"div"],[9,"class","CTAContainer"],[7],[0,"\\n        "],[6,"button"],[9,"id","keepCurrentButton"],[9,"class","btn btn-primary btn-wide cli_keepButton"],[3,"action",[[19,0,[]],"keep"]],[7],[1,[18,"keepCurrentButton"],false],[8],[0,"\\n"],[4,"if",[[20,["downgradeAllowed"]]],null,{"statements":[[0,"            "],[6,"button"],[9,"id","downgradeConfirmButton"],[9,"class","btn btn-wide cli_getLessButton"],[3,"action",[[19,0,[]],"getLess"]],[7],[1,[18,"getLessOfficeButton"],false],[8],[0,"\\n"]],"parameters":[]},null],[0,"        "],[6,"button"],[9,"id","cancelButton"],[9,"class","btn btn-wide cli_cancelButton"],[3,"action",[[19,0,[]],"cancel"]],[7],[1,[20,["strings","Shared_Button_Cancel"]],false],[8],[0,"\\n"],[4,"if",[[20,["isXboxOne"]]],null,{"statements":[[4,"unless",[[20,["model","isXboxUltimate"]]],null,{"statements":[[0,"                "],[6,"button"],[9,"id","viewTerms"],[9,"class","btn btn-legal cli_viewTerms"],[9,"data-bi-slot","1"],[9,"data-bi-name","ViewTerms"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"viewTerms"]],[7],[0,"\\n                    "],[1,[20,["strings","View_Terms_Button"]],false],[0,"\\n                "],[8],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"    "],[8],[0,"\\n"],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/components/redeem-prorate-page.hbs"}})}),define("web-blends/templates/components/redirect-retry-page",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"byLJhFUx",block:'{"symbols":[],"statements":[[6,"div"],[7],[0,"\\n    "],[6,"img"],[9,"class","asyncLogo cli_asyncLogo"],[10,"src",[26,[[18,"asyncPurchaseLogo"]]]],[9,"aria-hidden","true"],[7],[8],[0,"\\n"],[8],[0,"\\n"],[4,"if",[[20,["showFoundExistingPendingOrderMessage"]]],null,{"statements":[[0,"    "],[6,"h1"],[9,"class","cli_dialogTitle"],[7],[1,[20,["strings","Purchase_Title_Hang_Tight_V1"]],false],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[6,"h1"],[9,"class","cli_dialogTitle"],[7],[1,[20,["strings","Purchase_Title_Wait_A_Few_Minutes"]],false],[8],[0,"\\n"]],"parameters":[]}],[6,"div"],[9,"class","cli_message"],[7],[1,[18,"processingMessage"],false],[8],[0,"\\n"],[6,"div"],[9,"class","CTAContainer"],[7],[0,"\\n    "],[6,"button"],[9,"class","btn btn-primary btn-wide cli_tryAgainButton"],[9,"id","tryAgainButton"],[10,"data-bi-slot",[18,"tryAgain_bi_slot"],null],[9,"data-bi-name","checkMyPaymentStatus"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"tryAgain"]],[7],[1,[20,["strings","Purchase_Button_Payment_Status"]],false],[8],[0,"\\n    "],[6,"button"],[9,"class","btn btn-alternate btn-wide cli_goToPDPButton"],[9,"id","goToPDPButton"],[10,"data-bi-slot",[18,"goToPDP_bi_slot"],null],[9,"data-bi-name","goToPDP"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"goToPDP"]],[7],[1,[18,"gotoProductPage"],false],[8],[0,"\\n"],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/components/redirect-retry-page.hbs"}})}),define("web-blends/templates/components/reseller-detail",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"zFVtqPbU",block:'{"symbols":["&default"],"statements":[[4,"if",[[20,["mappedReseller"]]],null,{"statements":[[0,"    "],[6,"div"],[9,"class","resellerContainer"],[7],[0,"\\n        "],[6,"div"],[9,"class","cli_resellerName resellerName"],[7],[1,[18,"formattedResellerName"],false],[8],[0,"\\n"],[4,"if",[[20,["formattedResellerCode"]]],null,{"statements":[[0,"        "],[6,"div"],[9,"class","cli_resellerCode"],[7],[1,[18,"formattedResellerCode"],false],[8],[0,"\\n"]],"parameters":[]},null],[0,"    "],[8],[0,"\\n"]],"parameters":[]},null],[11,1],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"web-blends/templates/components/reseller-detail.hbs"}})}),define("web-blends/templates/components/shop-link",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"taK+9dSz",block:'{"symbols":[],"statements":[[0,"\\n"],[6,"section"],[9,"class","shop-link-content-container"],[7],[0,"\\n    "],[6,"a"],[10,"href",[26,[[18,"url"]]]],[10,"data-bi-name",[26,[[18,"dataBiName"]]]],[3,"action",[[19,0,[]],"postOpenUrlMessage"]],[7],[0,"\\n        "],[6,"img"],[10,"src",[18,"imageUrl"],null],[10,"alt",[18,"imageAltText"],null],[7],[8],[0,"\\n        "],[6,"h3"],[9,"class","shop-link-heading"],[7],[1,[18,"title"],false],[8],[0,"\\n        "],[6,"div"],[9,"class","shop-content"],[7],[0,"\\n"],[4,"collapsible-content",null,null,{"statements":[[0,"                "],[6,"p"],[9,"class","shop-link-paragraph"],[7],[1,[18,"message"],false],[8],[0,"\\n"]],"parameters":[]},null],[0,"        "],[8],[0,"\\n    "],[8],[0,"\\n    "],[6,"button"],[9,"class","btn btn-primary"],[10,"data-bi-name",[26,[[18,"dataBiName"],"-Button"]]],[3,"action",[[19,0,[]],"postOpenUrlMessage"]],[7],[0,"\\n        "],[1,[20,["strings","Shared_Button_Shop"]],false],[0,"\\n    "],[8],[0,"\\n"],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/components/shop-link.hbs"}})}),define("web-blends/templates/components/subscription-interstitial",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"1KF3ZzFf",block:'{"symbols":[],"statements":[[6,"section"],[9,"role","alert"],[9,"aria-labelledby","interstitialTitle interstitialItemTitle interstitialProductPrice"],[9,"class","SubscriptionIterstitialContainer"],[9,"role","main"],[9,"data-bi-area","SubscriptionInterstitial"],[7],[0,"\\n    "],[6,"div"],[9,"class","content"],[7],[0,"\\n        "],[6,"img"],[9,"aria-hidden","true"],[9,"id","GamingAppGiftProductImage"],[9,"class","cli_giftProductImage"],[10,"src",[26,[[18,"posterImage"]]]],[7],[8],[0,"\\n        "],[6,"div"],[9,"class","interstitialContent"],[7],[0,"\\n            "],[6,"p"],[9,"role","heading"],[9,"aria-level","1"],[9,"id","interstitialTitle"],[10,"role",[26,[[25,"if",[[20,["isModernDesktopClient"]],"none"],null]]]],[9,"class","interstitialTitle"],[7],[1,[18,"interstitialTitle"],false],[8],[0,"\\n            "],[6,"p"],[9,"role","heading"],[9,"aria-level","2"],[9,"id","interstitialItemTitle"],[10,"role",[26,[[25,"if",[[20,["isModernDesktopClient"]],"none"],null]]]],[9,"class","interstitialItemTitle"],[7],[1,[18,"lineItemTitle"],false],[8],[0,"\\n"],[4,"if",[[20,["isTrial"]]],null,{"statements":[[0,"                "],[6,"span"],[9,"id","interstitialTrialDurationMessage"],[9,"class","final"],[7],[1,[18,"localizedTrialDurationString"],false],[8],[0,"\\n"]],"parameters":[]},null],[0,"            "],[6,"span"],[9,"id","interstitialProductPrice"],[9,"class","final"],[7],[1,[18,"interstitialProductPrice"],false],[8],[0,"\\n            "],[6,"p"],[9,"id","interstitialBody"],[9,"class","interstitialBody"],[7],[1,[18,"interstitialBody"],true],[8],[0,"\\n"],[4,"if",[[25,"and",[[20,["isAdditionalInfoMarket"]],[25,"not",[[20,["isXboxOne"]]],null]],null]],null,{"statements":[[0,"                "],[6,"a"],[10,"href",[18,"interstitialAdditionalInfoLink"],null],[3,"action",[[19,0,[]],"clickToRedirect",[20,["interstitialAdditionalInfoLink"]],"msTou"]],[7],[1,[20,["strings","Purchase_SubscriptionInterstitial_AdditionalInfoButtonText"]],false],[8],[0,"\\n"]],"parameters":[]},null],[0,"            "],[6,"div"],[9,"class","CTAContainer"],[7],[0,"\\n"],[4,"if",[[20,["isXboxOne"]]],null,{"statements":[[0,"                "],[6,"button"],[9,"id","continueButton"],[9,"class","btn btn-primary cli_continueButton"],[3,"action",[[19,0,[]],"continue"]],[7],[1,[20,["strings","Shared_Button_Continue"]],false],[8],[0,"\\n"],[4,"if",[[20,["isAdditionalInfoMarket"]]],null,{"statements":[[0,"                    "],[6,"a"],[10,"href",[18,"interstitialAdditionalInfoLink"],null],[3,"action",[[19,0,[]],"clickToRedirect",[20,["interstitialAdditionalInfoLink"]],"msTou"]],[7],[1,[20,["strings","Purchase_SubscriptionInterstitial_AdditionalInfoButtonText"]],false],[8],[0,"\\n"]],"parameters":[]},null],[0,"                "],[6,"button"],[9,"id","cancelButton"],[9,"class","btn cli_cancelButton"],[3,"action",[[19,0,[]],"cancel"]],[7],[1,[20,["strings","Shared_Button_Cancel"]],false],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                    "],[6,"button"],[9,"id","cancelButton"],[9,"class","btn cli_cancelButton"],[3,"action",[[19,0,[]],"cancel"]],[7],[1,[20,["strings","Shared_Button_Cancel"]],false],[8],[0,"\\n                    "],[6,"button"],[9,"id","continueButton"],[9,"class","btn btn-primary cli_continueButton"],[3,"action",[[19,0,[]],"continue"]],[7],[1,[20,["strings","Shared_Button_Continue"]],false],[8],[0,"\\n"]],"parameters":[]}],[0,"\\n            "],[8],[0,"\\n        "],[8],[0,"\\n    "],[8],[0,"\\n"],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/components/subscription-interstitial.hbs"}})}),define("web-blends/templates/components/subscription-upgrade",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"YdqMtk6r",block:'{"symbols":[],"statements":[[6,"section"],[9,"class","SubscriptionUpgradeContainer"],[9,"role","main"],[9,"data-bi-area","SubscriptionUpgrade"],[7],[0,"\\n    "],[6,"div"],[9,"class","content"],[7],[0,"\\n        "],[6,"img"],[9,"id","GamingAppGiftProductImage"],[9,"class","cli_giftProductImage"],[10,"src",[26,[[18,"posterImage"]]]],[7],[8],[0,"\\n        "],[6,"div"],[9,"class","subscriptionUpdateContent"],[7],[0,"\\n            "],[6,"h1"],[10,"role",[26,[[25,"if",[[20,["isModernDesktopClient"]],"none"],null]]]],[9,"class","cli_title"],[7],[1,[18,"upgradeTitle"],false],[8],[0,"\\n"],[4,"if",[[20,["showModernConversion"]]],null,{"statements":[[0,"                "],[6,"p"],[9,"class","cli_text1"],[7],[1,[18,"upgradeDescription"],false],[8],[0,"\\n"],[4,"if",[[20,["renewalDateString"]]],null,{"statements":[[0,"                "],[6,"p"],[9,"class","cli_text2"],[7],[1,[18,"renewalDateString"],false],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[20,["conversionDetailsLink"]]],null,{"statements":[[0,"                "],[6,"a"],[10,"href",[18,"conversionDetailsLink"],null],[9,"data-bi-name","ConvertionDetailsLink"],[3,"action",[[19,0,[]],"viewTermsLink",[20,["conversionDetailsLink"]],"msTou"]],[7],[1,[20,["strings","ModCon_UpgradeConversionDetails"]],false],[8],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},{"statements":[[4,"if",[[20,["valenciaUpgradeMessage"]]],null,{"statements":[[0,"                    "],[6,"p"],[9,"class","cli_text1"],[7],[1,[18,"valenciaUpgradeMessage"],false],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                    "],[6,"p"],[9,"class","cli_text1"],[7],[1,[20,["strings","Ultimate_Upgrade_Message_v2_With_EA_Play"]],false],[8],[0,"\\n"]],"parameters":[]}],[4,"if",[[20,["renewalDateString"]]],null,{"statements":[[0,"                "],[6,"p"],[9,"class","cli_text2"],[7],[1,[18,"renewalDateString"],false],[8],[0,"\\n"]],"parameters":[]},null],[0,"                "],[6,"p"],[9,"class","cli_text3"],[7],[0,"\\n                    "],[1,[25,"message-with-links",null,[["messageParts","action","tagName"],[[20,["ultimateUpgradeLegalV2"]],"viewTermsLink","p"]]],false],[0,"\\n                "],[8],[0,"\\n"]],"parameters":[]}],[0,"            "],[6,"div"],[9,"class","CTAContainer"],[7],[0,"\\n"],[4,"if",[[20,["garrisonUIAccessibility"]]],null,{"statements":[[4,"if",[[20,["isXboxOne"]]],null,{"statements":[[0,"                        "],[6,"button"],[9,"id","continueButton"],[9,"class","btn btn-primary cli_continueButton"],[3,"action",[[19,0,[]],"continue"]],[7],[1,[20,["strings","Shared_Button_Continue"]],false],[8],[0,"\\n                        "],[6,"button"],[9,"id","cancelButton"],[9,"class","btn cli_cancelButton"],[3,"action",[[19,0,[]],"cancel"]],[7],[1,[20,["strings","Shared_Button_Cancel"]],false],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                        "],[6,"button"],[9,"id","cancelButton"],[9,"class","btn cli_cancelButton"],[3,"action",[[19,0,[]],"cancel"]],[7],[1,[20,["strings","Shared_Button_Cancel"]],false],[8],[0,"\\n                        "],[6,"button"],[9,"id","continueButton"],[9,"class","btn btn-primary cli_continueButton"],[3,"action",[[19,0,[]],"continue"]],[7],[1,[20,["strings","Shared_Button_Continue"]],false],[8],[0,"\\n"]],"parameters":[]}]],"parameters":[]},{"statements":[[0,"                    "],[6,"button"],[9,"id","continueButton"],[9,"class","btn btn-primary btn-wide btn-size cli_continueButton"],[3,"action",[[19,0,[]],"continue"]],[7],[1,[20,["strings","Shared_Button_Continue"]],false],[8],[0,"\\n                    "],[6,"button"],[9,"id","cancelButton"],[9,"class","btn btn-wide btn-size cli_cancelButton"],[3,"action",[[19,0,[]],"cancel"]],[7],[1,[20,["strings","Shared_Button_Cancel"]],false],[8],[0,"\\n"]],"parameters":[]}],[0,"            "],[8],[0,"\\n        "],[8],[0,"\\n    "],[8],[0,"\\n"],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/components/subscription-upgrade.hbs"}})}),define("web-blends/templates/digital-attach/prorate",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"k0xR/KNb",block:'{"symbols":[],"statements":[[1,[25,"digital-attach-prorate-page",null,[["model","keep","getLess","cancel","viewTerms"],[[20,["model"]],"keep","getLess","cancel","viewTerms"]]],false]],"hasEval":false}',meta:{moduleName:"web-blends/templates/digital-attach/prorate.hbs"}})}),define("web-blends/templates/error",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"Z+6kRskj",block:'{"symbols":[],"statements":[[6,"section"],[9,"id","errorPage"],[9,"role","main"],[7],[0,"\\n    "],[6,"div"],[9,"class","content"],[9,"id","errorContainer"],[7],[0,"\\n"],[4,"if",[[20,["showWarning"]]],null,{"statements":[[0,"            "],[6,"h1"],[9,"class","type-t2 cli_instruction"],[7],[1,[20,["strings","Maturity_Age_Gating_Title"]],false],[8],[0,"\\n            "],[6,"div"],[9,"id","errorDescription"],[9,"class","cli_description"],[7],[1,[20,["strings","Maturity_Age_Gating_Page_V1"]],false],[8],[0,"\\n            "],[6,"div"],[9,"id","screenReaderError"],[9,"class","screen-reader"],[7],[0,"\\n                "],[1,[20,["strings","Maturity_Age_Gating_Title_V1"]],false],[0,"\\n                "],[1,[20,["strings","Maturity_Age_Gating_Page_V1"]],false],[0,"\\n                "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[6,"div"],[9,"class","content_header"],[7],[0,"\\n                "],[6,"h1"],[9,"class","type-t2 cli_instruction"],[7],[1,[20,["model","displayData","ShortDescription"]],true],[8],[0,"\\n                "],[6,"div"],[9,"id","errorDescription"],[9,"class","cli_description"],[7],[1,[20,["model","displayData","LongDescription"]],true],[8],[0,"\\n"],[4,"if",[[20,["model","displayData","ExtendedDescription"]]],null,{"statements":[[0,"                "],[6,"div"],[9,"class","extendedErrorDescription cli_description"],[7],[1,[20,["model","displayData","ExtendedDescription"]],false],[8],[0,"\\n"]],"parameters":[]},null],[0,"                "],[6,"div"],[9,"id","screenReaderError"],[9,"class","screen-reader"],[7],[1,[20,["model","displayData","ShortDescription"]],false],[0," "],[1,[20,["model","displayData","LongDescription"]],true],[0," "],[1,[20,["model","displayData","ExtendedDescription"]],false],[8],[0,"\\n            "],[8],[0,"\\n"],[4,"if",[[20,["showOobeErrorMessage"]]],null,{"statements":[[0,"            "],[6,"div"],[9,"class","oobe_content_body"],[7],[0,"\\n                "],[6,"div"],[9,"id","oobeErrorCode"],[7],[0,"\\n"],[4,"if",[[20,["model","displayData","ErrorMessage"]]],null,{"statements":[[0,"                    "],[6,"div"],[9,"class","oobeErrorMessage"],[7],[1,[20,["model","displayData","ErrorMessage"]],false],[8],[0,"\\n"]],"parameters":[]},null],[0,"                    "],[6,"div"],[9,"class","oobeErrorCode"],[7],[0,"\\n"],[4,"if",[[20,["showCode"]]],null,{"statements":[[0,"                        "],[6,"div"],[9,"class","cli_errorCode"],[7],[1,[20,["model","fullName"]],false],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[20,["showCvAndTimestamp"]]],null,{"statements":[[0,"                        "],[6,"div"],[9,"class","cli_mscv"],[7],[1,[20,["model","cv"]],false],[8],[0,"\\n                        "],[6,"div"],[9,"class","cli_timestamp"],[7],[1,[20,["model","timestamp"]],false],[8],[0,"\\n"]],"parameters":[]},null],[0,"                    "],[8],[0,"\\n                "],[8],[0,"\\n            "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[6,"div"],[9,"class","content_body"],[7],[0,"\\n                "],[6,"div"],[9,"id","errorCode"],[7],[0,"\\n"],[4,"if",[[20,["showCode"]]],null,{"statements":[[0,"                        "],[6,"div"],[9,"class","cli_errorCode"],[7],[1,[20,["model","fullName"]],false],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[20,["showCvAndTimestamp"]]],null,{"statements":[[0,"                        "],[6,"div"],[9,"class","cli_mscv"],[7],[1,[20,["model","cv"]],false],[8],[0,"\\n                        "],[6,"div"],[9,"class","cli_timestamp"],[7],[1,[20,["model","timestamp"]],false],[8],[0,"\\n"]],"parameters":[]},null],[0,"                "],[8],[0,"\\n            "],[8],[0,"\\n"]],"parameters":[]}]],"parameters":[]}],[0,"    "],[8],[0,"\\n    "],[6,"div"],[9,"class","CTAContainer"],[7],[0,"\\n"],[4,"if",[[20,["showWarning"]]],null,{"statements":[[0,"            "],[6,"button"],[9,"id","cancelButton"],[9,"class","btn btn-default btn-back cli_close_button"],[9,"data-bi-name","Close"],[9,"data-bi-slot","1"],[9,"aria-labelledby","screenReaderError cancelButton"],[3,"action",[[19,0,[]],"close"]],[7],[0,"\\n                "],[1,[20,["strings","Shared_Button_Cancel"]],false],[0,"\\n            "],[8],[0,"\\n            "],[6,"button"],[9,"id","nextButton"],[9,"class","btn btn-primary cli_next_button"],[9,"autofocus",""],[9,"data-bi-name","next"],[9,"data-bi-slot","2"],[9,"aria-labelledby","screenReaderError nextButton"],[3,"action",[[19,0,[]],"purchase"]],[7],[0,"\\n                "],[1,[20,["strings","Shared_Button_Next"]],false],[0,"\\n            "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[20,["showOkayButton"]]],null,{"statements":[[0,"            "],[6,"button"],[9,"id","okButton"],[9,"class","btn btn-primary cli_ok_button"],[9,"autofocus",""],[9,"data-bi-name","Ok"],[9,"data-bi-slot","1"],[9,"aria-labelledby","screenReaderError okButton"],[3,"action",[[19,0,[]],"selectPi"]],[7],[0,"\\n                "],[1,[20,["strings","Shared_Button_OK"]],false],[0,"\\n            "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[20,["isRedeemFlow"]]],null,{"statements":[[0,"            "],[6,"button"],[9,"id","cancelButton"],[9,"class","btn btn-default btn-back cli_close_button"],[9,"data-bi-name","Close"],[9,"data-bi-slot","1"],[9,"aria-labelledby","screenReaderError cancelButton"],[3,"action",[[19,0,[]],"close"]],[7],[0,"\\n                "],[1,[20,["strings","Shared_Button_Cancel"]],false],[0,"\\n            "],[8],[0,"\\n"],[4,"unless",[[20,["isUserAlreadyOwnsContentError"]]],null,{"statements":[[0,"                "],[6,"button"],[9,"id","okButton"],[9,"class","btn btn-primary cli_next_button"],[9,"autofocus",""],[9,"data-bi-name","next"],[9,"data-bi-slot","2"],[9,"aria-labelledby","screenReaderError okButton"],[3,"action",[[19,0,[]],"redeem"]],[7],[0,"\\n                    "],[1,[20,["strings","Shared_Button_OK"]],false],[0,"\\n                "],[8],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},{"statements":[[4,"if",[[20,["model","allowRetry"]]],null,{"statements":[[4,"if",[[20,["showOobeErrorMessage"]]],null,{"statements":[[0,"            "],[6,"button"],[9,"id","retryOobeButton"],[9,"class","btn btn-primary cli_next_button"],[9,"autofocus",""],[9,"data-bi-name","retry"],[9,"data-bi-slot","2"],[9,"aria-labelledby","screenReaderError retryButton"],[3,"action",[[19,0,[]],"retry"]],[7],[0,"\\n                "],[1,[20,["strings","Retry_Button"]],false],[0,"\\n            "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[6,"button"],[9,"id","cancelButton"],[9,"class","btn btn-default cli_close_button"],[9,"data-bi-name","Close"],[9,"data-bi-slot","1"],[9,"aria-labelledby","screenReaderError cancelButton"],[3,"action",[[19,0,[]],"close"]],[7],[0,"\\n                "],[1,[25,"if",[[20,["isInlineClient"]],[20,["strings","Shared_Button_Cancel"]],[20,["strings","Button_Close"]]],null],false],[0,"\\n            "],[8],[0,"\\n            "],[6,"button"],[9,"id","retryButton"],[9,"class","btn btn-primary cli_next_button"],[9,"autofocus",""],[9,"data-bi-name","retry"],[9,"data-bi-slot","2"],[9,"aria-labelledby","screenReaderError retryButton"],[3,"action",[[19,0,[]],"retry"]],[7],[0,"\\n                "],[1,[20,["strings","Retry_Button"]],false],[0,"\\n            "],[8],[0,"\\n"]],"parameters":[]}]],"parameters":[]},{"statements":[[4,"if",[[20,["showFixableButton"]]],null,{"statements":[[0,"            "],[6,"button"],[9,"id","cancelButton"],[9,"class","btn btn-default btn-back cli_close_button"],[9,"data-bi-name","Close"],[9,"data-bi-slot","1"],[9,"aria-labelledby","screenReaderError cancelButton"],[3,"action",[[19,0,[]],"close"]],[7],[0,"\\n                "],[1,[20,["strings","Shared_Button_Cancel"]],false],[0,"\\n            "],[8],[0,"\\n            "],[6,"button"],[9,"class","btn btn-primary cli_fix_button"],[9,"autofocus",""],[9,"data-bi-name","fix"],[9,"data-bi-slot","2"],[9,"aria-labelledby","screenReaderError fixButton"],[3,"action",[[19,0,[]],"fix"]],[7],[0,"\\n                "],[1,[20,["strings","Fix_Button"]],false],[0,"\\n            "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[6,"button"],[9,"id","cancelButton"],[9,"class","btn btn-primary cli_close_button"],[9,"autofocus",""],[9,"data-bi-name","Close"],[9,"data-bi-slot","1"],[9,"aria-labelledby","screenReaderError cancelButton"],[3,"action",[[19,0,[]],"close"]],[7],[0,"\\n                "],[1,[18,"defaultCancelButtonText"],false],[0,"\\n            "],[8],[0,"\\n        "]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}],[0,"    "],[8],[0,"\\n"],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/error.hbs"}})}),define("web-blends/templates/payment-and-billing",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"whIuzTei",block:'{"symbols":[],"statements":[[1,[18,"outlet"],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"web-blends/templates/payment-and-billing.hbs"}})}),define("web-blends/templates/payment-and-billing/add-address",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"zO9rzN8M",block:'{"symbols":["pidlDocument"],"statements":[[6,"section"],[9,"id","payment_method_family_container"],[9,"role","main"],[9,"data-bi-area","PaymentAndBillingAddAddress"],[7],[0,"\\n    "],[6,"div"],[9,"class","content"],[7],[0,"\\n        "],[6,"h1"],[9,"class","type-t2"],[7],[1,[18,"title"],false],[8],[0,"\\n"],[4,"unless",[[20,["model","isXboxOne"]]],null,{"statements":[[0,"            "],[6,"div"],[9,"id","AddAddressTextContainer"],[9,"class","cli_addAddressTextContainer"],[7],[1,[18,"addAddressText"],false],[8],[0,"\\n"]],"parameters":[]},null],[0,"        "],[6,"form"],[9,"id","addAddress"],[9,"class","cli_addAddressContainer"],[9,"role","form"],[3,"action",[[19,0,[]],"enterPressed"],[["on"],["submit"]]],[7],[0,"\\n"],[4,"each",[[20,["model","pidlDocuments"]]],null,{"statements":[[0,"                "],[1,[25,"pidl-document",null,[["pidl","model"],[[19,1,["pidlModel"]],[20,["model"]]]]],false],[0,"\\n"]],"parameters":[1]},null],[4,"if",[[20,["model","isXboxOne"]]],null,{"statements":[[4,"if",[[20,["canShowProfileUpdateNotice"]]],null,{"statements":[[0,"                    "],[6,"div"],[9,"id","AddAddressTextContainer"],[9,"class","cli_addAddressTextContainer"],[7],[1,[18,"addAddressText"],false],[8],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[4,"if",[[20,["canShowPrivacyMessage"]]],null,{"statements":[[0,"                "],[1,[25,"privacy-statement",null,[["action","tagName"],["privacyStatement","p"]]],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[20,["model","isXboxOne"]]],null,{"statements":[[0,"                "],[2,"This hidden submit button is required to fire the submit event with enter key on the form."],[0,"\\n                "],[1,[25,"input",null,[["type","tabindex","class"],["submit","-1",[25,"concat",["hiddenSubmitButton"," "],null]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"        "],[8],[0,"\\n    "],[8],[0,"\\n    "],[6,"div"],[9,"class","CTAContainer"],[7],[0,"\\n"],[4,"if",[[20,["canShowXboxBackButton"]]],null,{"statements":[[0,"            "],[6,"button"],[9,"class","btn btn-default btn-back cli_backButton"],[9,"data-bi-name","XboxAddAddressFormBack"],[9,"data-bi-slot","1"],[3,"action",[[19,0,[]],"back"]],[7],[1,[20,["strings","Shared_Button_Back"]],false],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[6,"button"],[9,"class","btn btn-default btn-back cli_cancelButton"],[9,"data-bi-name","AddAddressFormCancel"],[9,"data-bi-slot","1"],[3,"action",[[19,0,[]],"cancel"]],[7],[1,[20,["strings","Shared_Button_Cancel"]],false],[8],[0,"\\n"]],"parameters":[]}],[4,"if",[[20,["canShowXboxNextButton"]]],null,{"statements":[[0,"            "],[6,"button"],[9,"class","btn btn-primary btn-xbox-submit cli_saveButton"],[9,"data-bi-name","XboxAddAddressFormNext"],[9,"data-bi-slot","2"],[3,"action",[[19,0,[]],"next"]],[7],[1,[20,["strings","Shared_Button_Next"]],false],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[6,"button"],[9,"class","btn btn-primary btn-xbox-submit cli_saveButton"],[9,"data-bi-name","AddAddressFormNext"],[9,"data-bi-slot","2"],[3,"action",[[19,0,[]],"addAddress"]],[7],[1,[20,["strings","Shared_Button_Next"]],false],[8],[0,"\\n"]],"parameters":[]}],[0,"        "],[2,"  update to following once its enabled for xbox\\n{{#if canShowPrivacyMessage}}\\n            {{#if model.isXboxOne}}\\n                <button id=\\"viewTerms\\" class=\\"btn btn-legal\\" data-bi-slot=\'1\' data-bi-name=\'ViewTerms\' data-bi-mto=\\"\\" {{action \'viewTerms\' }}>{{strings.View_Terms_Button}}</button>\\n            {{/if}}\\n        {{/if}} "],[0,"\\n    "],[8],[0,"\\n"],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/payment-and-billing/add-address.hbs"}})}),define("web-blends/templates/payment-and-billing/add-email",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"G00ZHRVr",block:'{"symbols":["pidlDocument"],"statements":[[6,"section"],[9,"id","payment_method_family_container"],[9,"role","main"],[9,"data-bi-area","PaymentAndBillingAddEmail"],[7],[0,"\\n    "],[6,"div"],[9,"class","content"],[7],[0,"\\n        "],[6,"h1"],[9,"class","type-t2"],[7],[1,[18,"title"],false],[8],[0,"\\n        "],[6,"form"],[9,"id","addEmail"],[9,"class","cli_addEmailContainer"],[9,"role","form"],[3,"action",[[19,0,[]],"enterPressed"],[["on"],["submit"]]],[7],[0,"\\n"],[4,"each",[[20,["model","pidlDocuments"]]],null,{"statements":[[0,"                "],[1,[25,"pidl-document",null,[["pidl","model","userProfile"],[[19,1,["pidlModel"]],[20,["model"]],[20,["model","userProfile"]]]]],false],[0,"\\n"]],"parameters":[1]},null],[0,"            "],[1,[25,"privacy-statement",null,[["action"],["privacyStatement"]]],false],[0,"\\n"],[4,"if",[[20,["model","isXboxOne"]]],null,{"statements":[[0,"                "],[2,"This hidden submit button is required to fire the submit event with enter key on the form."],[0,"\\n                "],[1,[25,"input",null,[["type","tabindex","class"],["submit","-1",[25,"concat",["hiddenSubmitButton"," "],null]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"        "],[8],[0,"\\n    "],[8],[0,"\\n    "],[6,"div"],[9,"class","CTAContainer"],[7],[0,"\\n        "],[6,"button"],[9,"class","btn btn-default btn-back cli_cancelButton"],[9,"data-bi-name","AddEmailFormCancel"],[9,"data-bi-slot","1"],[3,"action",[[19,0,[]],"cancel"]],[7],[1,[20,["strings","Shared_Button_Cancel"]],false],[8],[0,"\\n        "],[6,"button"],[9,"class","btn btn-primary btn-xbox-submit cli_saveButton"],[9,"data-bi-name","AddEmailFormNext"],[9,"data-bi-slot","2"],[3,"action",[[19,0,[]],"addEmail"]],[7],[1,[20,["strings","Shared_Button_Next"]],false],[8],[0,"\\n        "],[2,"  update to following once its enabled for xbox\\n{{#if canShowPrivacyMessage}}\\n            {{#if isXboxOne}}\\n                <button id=\\"viewTerms\\" class=\\"btn btn-legal\\" data-bi-slot=\'1\' data-bi-name=\'ViewTerms\' data-bi-mto=\\"\\" {{action \'viewTerms\' }}>{{strings.View_Terms_Button}}</button>\\n            {{/if}}\\n        {{/if}} "],[0,"\\n    "],[8],[0,"\\n"],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/payment-and-billing/add-email.hbs"}})}),define("web-blends/templates/payment-and-billing/add-name",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"3Fy4sQ8g",block:'{"symbols":["pidlDocument"],"statements":[[6,"section"],[9,"id","payment_method_family_container"],[9,"role","main"],[9,"data-bi-area","PaymentAndBillingAddName"],[7],[0,"\\n    "],[6,"div"],[9,"class","content"],[7],[0,"\\n        "],[6,"h1"],[9,"class","type-t2"],[7],[1,[18,"title"],false],[8],[0,"\\n        "],[6,"form"],[9,"id","addName"],[9,"class","cli_addNameContainer"],[9,"role","form"],[3,"action",[[19,0,[]],"enterPressed"],[["on"],["submit"]]],[7],[0,"\\n"],[4,"each",[[20,["model","pidlDocuments"]]],null,{"statements":[[0,"                "],[1,[25,"pidl-document",null,[["pidl","model","userProfile"],[[19,1,["pidlModel"]],[20,["model"]],[20,["model","userProfile"]]]]],false],[0,"\\n"]],"parameters":[1]},null],[4,"if",[[20,["canShowPrivacyMessage"]]],null,{"statements":[[0,"                "],[1,[25,"privacy-statement",null,[["action","tagName"],["privacyStatement","p"]]],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[20,["model","isXboxOne"]]],null,{"statements":[[0,"                "],[2,"This hidden submit button is required to fire the submit event with enter key on the form."],[0,"\\n                "],[1,[25,"input",null,[["type","tabindex","class"],["submit","-1",[25,"concat",["hiddenSubmitButton"," "],null]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"        "],[8],[0,"\\n    "],[8],[0,"\\n    "],[6,"div"],[9,"class","CTAContainer"],[7],[0,"\\n"],[4,"if",[[20,["canShowXboxBackButton"]]],null,{"statements":[[0,"            "],[6,"button"],[9,"class","btn btn-default btn-back cli_cancelButton"],[9,"data-bi-name","AddNameXboxFieldBack"],[9,"data-bi-slot","1"],[3,"action",[[19,0,[]],"back"]],[7],[1,[20,["strings","Shared_Button_Back"]],false],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[6,"button"],[9,"class","btn btn-default btn-back cli_cancelButton"],[9,"data-bi-name","AddNameFormCancel"],[9,"data-bi-slot","1"],[3,"action",[[19,0,[]],"cancel"]],[7],[1,[20,["strings","Shared_Button_Cancel"]],false],[8],[0,"\\n"]],"parameters":[]}],[4,"if",[[20,["canShowXboxNextButton"]]],null,{"statements":[[0,"            "],[6,"button"],[9,"class","btn btn-primary btn-xbox-submit cli_saveButton"],[9,"data-bi-name","AddNameXboxFieldNext"],[9,"data-bi-slot","2"],[3,"action",[[19,0,[]],"next"]],[7],[1,[20,["strings","Shared_Button_Next"]],false],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[6,"button"],[9,"class","btn btn-primary btn-xbox-submit cli_saveButton"],[9,"data-bi-name","AddNameFormNext"],[9,"data-bi-slot","2"],[3,"action",[[19,0,[]],"addName"]],[7],[1,[20,["strings","Shared_Button_Next"]],false],[8],[0,"\\n"]],"parameters":[]}],[0,"        "],[2,"  update to following once its enabled for xbox\\n{{#if canShowPrivacyMessage}}\\n            {{#if isXboxOne}}\\n                <button id=\\"viewTerms\\" class=\\"btn btn-legal\\" data-bi-slot=\'1\' data-bi-name=\'ViewTerms\' data-bi-mto=\\"\\" {{action \'viewTerms\' }}>{{strings.View_Terms_Button}}</button>\\n            {{/if}}\\n        {{/if}} "],[0,"\\n    "],[8],[0,"\\n"],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/payment-and-billing/add-name.hbs"}})})
define("web-blends/templates/payment-and-billing/add-payment-instrument",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"I2VcVrdX",block:'{"symbols":[],"statements":[[6,"section"],[9,"id","payment_method_family_container"],[9,"role","main"],[9,"onclick","$(\'.pidlDisplayHelp\').hide();"],[9,"data-bi-area","PaymentAndBillingAddPaymentInstrument"],[7],[0,"\\n    "],[1,[18,"outlet"],false],[0,"\\n"],[8],[0,"\\n"],[4,"if",[[20,["model","sessionId"]]],null,{"statements":[[0,"    "],[1,[25,"fingerprint-tagging",null,[["sessionId"],[[20,["model","sessionId"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"web-blends/templates/payment-and-billing/add-payment-instrument.hbs"}})}),define("web-blends/templates/payment-and-billing/add-payment-instrument/card",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"C1AF1+70",block:'{"symbols":[],"statements":[[1,[18,"outlet"],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"web-blends/templates/payment-and-billing/add-payment-instrument/card.hbs"}})}),define("web-blends/templates/payment-and-billing/add-payment-instrument/card/credit-card",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"vioQzZN/",block:'{"symbols":[],"statements":[[6,"div"],[9,"class","content"],[7],[0,"\\n    "],[6,"h1"],[9,"class","type-t2"],[7],[0,"\\n"],[4,"if",[[20,["model","editMode"]]],null,{"statements":[[0,"            "],[1,[20,["strings","Update_Payment_Instrument_Title"]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[1,[20,["strings","Add_CreditCard_Or_DebitCard_Title"]],false],[0,"\\n"]],"parameters":[]}],[0,"    "],[8],[0,"\\n    "],[6,"form"],[9,"id","addPaymentInstrument"],[9,"class","cli_addPiContainer"],[9,"role","form"],[3,"action",[[19,0,[]],"enterPressed"],[["on"],["submit"]]],[7],[0,"\\n"],[4,"if",[[20,["model","canShowCcIcons"]]],null,{"statements":[[0,"            "],[1,[25,"credit-card-icons",null,[["supportedCreditCardPaymentMethods","id"],[[20,["model","supportedCreditCardPaymentMethods"]],"supportedCardTypes"]]],false],[0,"\\n"]],"parameters":[]},null],[0,"        "],[1,[25,"add-payment-instrument-form",null,[["model"],[[20,["model"]]]]],false],[0,"\\n"],[4,"if",[[20,["model","canShowPrivacyMessage"]]],null,{"statements":[[0,"            "],[1,[25,"privacy-statement",null,[["action","tagName"],["privacyStatement","p"]]],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[20,["model","isXboxOne"]]],null,{"statements":[[0,"            "],[2,"This hidden submit button is required to fire the submit event with enter key on the form."],[0,"\\n            "],[1,[25,"input",null,[["type","tabindex","class"],["submit","-1",[25,"concat",["hiddenSubmitButton"," "],null]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"    "],[8],[0,"\\n"],[8],[0,"\\n"],[6,"div"],[9,"class","CTAContainer"],[7],[0,"\\n"],[4,"if",[[20,["model","editMode"]]],null,{"statements":[[4,"if",[[20,["model","canShowXboxBackButton"]]],null,{"statements":[[0,"            "],[6,"button"],[9,"class","btn btn-default btn-back cli_cancelButton"],[9,"id","backButton"],[9,"data-bi-name","XboxEditPiFormBack"],[9,"data-bi-slot","1"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"back"]],[7],[0,"\\n                "],[1,[20,["strings","Shared_Button_Back"]],false],[0,"\\n            "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[6,"button"],[9,"class","btn btn-default btn-back cli_cancelButton"],[9,"id","cancelButton"],[9,"data-bi-name","EditPiFormCancel"],[9,"data-bi-slot","1"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"cancel"]],[7],[0,"\\n                "],[1,[20,["strings","Shared_Button_Cancel"]],false],[0,"\\n            "],[8],[0,"\\n"]],"parameters":[]}],[4,"if",[[20,["model","canShowXboxNextButton"]]],null,{"statements":[[0,"            "],[6,"button"],[9,"class","btn btn-primary btn-xbox-submit cli_saveButton"],[9,"id","nextButton"],[9,"data-bi-name","XboxEditPiFormNext"],[9,"data-bi-slot","2"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"next"]],[7],[0,"\\n                "],[1,[20,["strings","Shared_Button_Next"]],false],[0,"\\n            "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[6,"button"],[9,"class","btn btn-primary btn-xbox-submit cli_saveButton"],[9,"id","saveButton"],[9,"data-bi-name","EditPiFormNext"],[9,"data-bi-slot","2"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"addPaymentInstrument"]],[7],[0,"\\n                "],[1,[20,["strings","Shared_Button_Next"]],false],[0,"\\n            "],[8],[0,"\\n"]],"parameters":[]}]],"parameters":[]},{"statements":[[4,"if",[[20,["model","canShowXboxBackButton"]]],null,{"statements":[[0,"            "],[6,"button"],[9,"class","btn btn-default btn-back cli_cancelButton"],[9,"id","backButton"],[9,"data-bi-name","XboxAddPiFormBack"],[9,"data-bi-slot","1"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"back"]],[7],[0,"\\n                "],[1,[20,["strings","Shared_Button_Back"]],false],[0,"\\n            "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[6,"button"],[9,"class","btn btn-default btn-back cli_cancelButton"],[9,"id","cancelButton"],[9,"data-bi-name","AddPiFormCancel"],[9,"data-bi-slot","1"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"cancel"]],[7],[0,"\\n                "],[1,[20,["strings","Shared_Button_Cancel"]],false],[0,"\\n            "],[8],[0,"\\n"]],"parameters":[]}],[4,"if",[[20,["model","canShowXboxNextButton"]]],null,{"statements":[[0,"            "],[6,"button"],[9,"class","btn btn-primary btn-xbox-submit cli_saveButton"],[9,"id","nextButton"],[9,"data-bi-name","XboxAddPiFormNext"],[9,"data-bi-slot","2"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"next"]],[7],[0,"\\n                "],[1,[20,["strings","Shared_Button_Next"]],false],[0,"\\n            "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[6,"button"],[9,"class","btn btn-primary btn-xbox-submit cli_saveButton"],[9,"id","saveButton"],[9,"data-bi-name","AddPiFormNext"],[9,"data-bi-slot","2"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"addPaymentInstrument"]],[7],[0,"\\n                "],[1,[20,["strings","Shared_Button_Next"]],false],[0,"\\n            "],[8],[0,"\\n"]],"parameters":[]}]],"parameters":[]}],[4,"if",[[20,["model","canShowPrivacyMessage"]]],null,{"statements":[[4,"if",[[20,["model","isXboxOne"]]],null,{"statements":[[0,"            "],[6,"button"],[9,"id","viewTerms"],[9,"class","btn btn-legal"],[9,"data-bi-slot","1"],[9,"data-bi-name","ViewTerms"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"viewTerms"]],[7],[1,[20,["strings","View_Terms_Button"]],false],[8],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/payment-and-billing/add-payment-instrument/card/credit-card.hbs"}})}),define("web-blends/templates/payment-and-billing/add-payment-instrument/card/direct-debit",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"3ujKQjS/",block:'{"symbols":[],"statements":[[6,"div"],[9,"class","content"],[7],[0,"\\n    "],[6,"h1"],[9,"class","type-t2"],[7],[1,[20,["strings","Add_Direct_Debit_Title"]],false],[8],[0,"\\n"],[4,"if",[[20,["isDirectDebit"]]],null,{"statements":[[0,"        "],[6,"p"],[7],[1,[20,["strings","Add_Direct_Debit_Message"]],false],[8],[0,"\\n"]],"parameters":[]},null],[0,"    "],[6,"form"],[9,"id","addPaymentInstrument"],[9,"class","cli_addPiContainer"],[9,"role","form"],[3,"action",[[19,0,[]],"enterPressed"],[["on"],["submit"]]],[7],[0,"\\n        "],[1,[25,"add-payment-instrument-form",null,[["model"],[[20,["model"]]]]],false],[0,"\\n"],[4,"if",[[20,["canShowPrivacyMessage"]]],null,{"statements":[[0,"            "],[1,[25,"privacy-statement",null,[["action","tagName"],["privacyStatement","p"]]],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[20,["isXboxOne"]]],null,{"statements":[[0,"            "],[2,"This hidden submit button is required to fire the submit event with enter key on the form."],[0,"\\n            "],[1,[25,"input",null,[["type","tabindex","class"],["submit","-1",[25,"concat",["hiddenSubmitButton"," "],null]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"    "],[8],[0,"\\n"],[8],[0,"\\n"],[6,"div"],[9,"class","CTAContainer"],[7],[0,"\\n    "],[6,"button"],[9,"id","cancelButton"],[9,"class","btn btn-default btn-back cli_cancelButton"],[9,"data-bi-name","AddPiFormCancel"],[9,"data-bi-slot","1"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"cancel"]],[7],[0,"\\n        "],[1,[20,["strings","Shared_Button_Cancel"]],false],[0,"\\n    "],[8],[0,"\\n    "],[6,"button"],[9,"id","saveButton"],[9,"class","btn btn-primary btn-xbox-submit cli_saveButton"],[9,"data-bi-name","AddPiFormNext"],[9,"data-bi-slot","2"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"addPaymentInstrument"]],[7],[0,"\\n        "],[1,[20,["strings","Shared_Button_Next"]],false],[0,"\\n    "],[8],[0,"\\n"],[4,"if",[[20,["canShowPrivacyMessage"]]],null,{"statements":[[4,"if",[[20,["isXboxOne"]]],null,{"statements":[[0,"            "],[6,"button"],[9,"id","viewTerms"],[9,"class","btn btn-legal"],[9,"data-bi-slot","1"],[9,"data-bi-name","ViewTerms"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"viewTerms"]],[7],[1,[20,["strings","View_Terms_Button"]],false],[8],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/payment-and-billing/add-payment-instrument/card/direct-debit.hbs"}})}),define("web-blends/templates/payment-and-billing/add-payment-instrument/sms-challenge",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"nWemuLB/",block:'{"symbols":[],"statements":[[1,[18,"outlet"],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"web-blends/templates/payment-and-billing/add-payment-instrument/sms-challenge.hbs"}})}),define("web-blends/templates/payment-and-billing/add-payment-instrument/sms-challenge/alipay-billing-agreement",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"siXCQ/9c",block:'{"symbols":[],"statements":[[6,"div"],[9,"class","content"],[7],[0,"\\n    "],[6,"h1"],[9,"class","type-t2"],[7],[1,[20,["strings","Add_AlipayBA_Title"]],false],[8],[0,"\\n    "],[6,"form"],[9,"id","addPaymentInstrument"],[9,"class","cli_addPiContainer"],[9,"role","form"],[3,"action",[[19,0,[]],"enterPressed"],[["on"],["submit"]]],[7],[0,"\\n        "],[1,[25,"add-payment-instrument-form",null,[["model"],[[20,["model"]]]]],false],[0,"\\n"],[4,"if",[[20,["model","canShowPrivacyMessage"]]],null,{"statements":[[0,"            "],[6,"p"],[9,"class","cli_privacyStatementLabel"],[7],[0,"\\n                "],[1,[25,"message-with-links",null,[["messageParts","action","tagName"],[[20,["model","alipayTermsOfUseTextParts"]],"privacyStatement","p"]]],false],[0,"\\n            "],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[20,["model","isXboxOne"]]],null,{"statements":[[0,"            "],[2,"This hidden submit button is required to fire the submit event with enter key on the form."],[0,"\\n            "],[1,[25,"input",null,[["type","tabindex","class"],["submit","-1",[25,"concat",["hiddenSubmitButton"," "],null]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"    "],[8],[0,"\\n"],[8],[0,"\\n"],[6,"div"],[9,"class","CTAContainer"],[7],[0,"\\n"],[4,"if",[[20,["model","canShowXboxBackButton"]]],null,{"statements":[[0,"        "],[6,"button"],[9,"id","backButton"],[9,"class","btn btn-default btn-back cli_cancelButton"],[9,"data-bi-name","XboxAddAlipayBaFormBack"],[9,"data-bi-slot","1"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"back"]],[7],[0,"\\n            "],[1,[20,["strings","Shared_Button_Back"]],false],[0,"\\n        "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"        "],[6,"button"],[9,"id","cancelButton"],[9,"class","btn btn-default btn-back cli_cancelButton"],[9,"data-bi-name","AddAlipayBaFormCancel"],[9,"data-bi-slot","1"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"cancel"]],[7],[0,"\\n            "],[1,[20,["strings","Shared_Button_Cancel"]],false],[0,"\\n        "],[8],[0,"\\n"]],"parameters":[]}],[4,"if",[[20,["model","canShowXboxNextButton"]]],null,{"statements":[[0,"        "],[6,"button"],[9,"id","nextButton"],[9,"class","btn btn-primary btn-xbox-submit cli_saveButton"],[9,"data-bi-name","XboxAddAlipayBaFormNext"],[9,"data-bi-slot","2"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"next"]],[7],[0,"\\n            "],[1,[20,["strings","Shared_Button_Next"]],false],[0,"\\n        "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"        "],[6,"button"],[9,"id","saveButton"],[9,"class","btn btn-primary btn-xbox-submit cli_saveButton"],[9,"data-bi-name","AddAlipayBaFormNext"],[9,"data-bi-slot","2"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"addPaymentInstrument"]],[7],[0,"\\n            "],[1,[20,["strings","Shared_Button_Next"]],false],[0,"\\n        "],[8],[0,"\\n"]],"parameters":[]}],[4,"if",[[20,["model","canShowPrivacyMessage"]]],null,{"statements":[[4,"if",[[20,["model","isXboxOne"]]],null,{"statements":[[0,"            "],[6,"button"],[9,"id","viewTerms"],[9,"class","btn btn-legal"],[9,"data-bi-slot","1"],[9,"data-bi-name","ViewTerms"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"viewTerms"]],[7],[1,[20,["strings","View_Terms_Button"]],false],[8],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/payment-and-billing/add-payment-instrument/sms-challenge/alipay-billing-agreement.hbs"}})}),define("web-blends/templates/payment-and-billing/add-payment-instrument/sms-challenge/mobile-billing-non-sim",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"8HnWjQ3H",block:'{"symbols":[],"statements":[[6,"div"],[9,"class","content"],[7],[0,"\\n    "],[6,"h1"],[9,"class","type-t2"],[7],[1,[20,["strings","Add_Mobile_Phone_Title"]],false],[8],[0,"\\n    "],[6,"form"],[9,"id","addPaymentInstrument"],[9,"class","cli_addPiContainer"],[9,"role","form"],[3,"action",[[19,0,[]],"enterPressed"],[["on"],["submit"]]],[7],[0,"\\n        "],[1,[25,"add-payment-instrument-form",null,[["model"],[[20,["model"]]]]],false],[0,"\\n"],[4,"if",[[20,["model","canShowPrivacyMessage"]]],null,{"statements":[[0,"            "],[6,"p"],[7],[0,"\\n                "],[1,[25,"message-with-bolded-buttonNames",null,[["messageParts"],[[20,["addMobiTextParts"]]]]],false],[0,"\\n            "],[8],[0,"\\n            "],[6,"p"],[7],[0,"\\n                "],[1,[20,["strings","Mobile_Operator_Statement"]],false],[0,"\\n            "],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[20,["model","isXboxOne"]]],null,{"statements":[[0,"            "],[2,"This hidden submit button is required to fire the submit event with enter key on the form."],[0,"\\n            "],[1,[25,"input",null,[["type","tabindex","class"],["submit","-1",[25,"concat",["hiddenSubmitButton"," "],null]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"    "],[8],[0,"\\n"],[8],[0,"\\n"],[6,"div"],[9,"class","CTAContainer"],[7],[0,"\\n"],[4,"if",[[20,["model","canShowXboxBackButton"]]],null,{"statements":[[0,"        "],[6,"button"],[9,"id","backButton"],[9,"class","btn btn-default btn-back cli_cancelButton"],[9,"data-bi-name","XboxAddPiFormBack"],[9,"data-bi-slot","1"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"back"]],[7],[0,"\\n            "],[1,[20,["strings","Shared_Button_Back"]],false],[0,"\\n        "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"        "],[6,"button"],[9,"id","cancelButton"],[9,"class","btn btn-default btn-back cli_cancelButton"],[9,"data-bi-name","AddNonSimMobileFormCancel"],[9,"data-bi-slot","1"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"cancel"]],[7],[0,"\\n            "],[1,[20,["strings","Shared_Button_Cancel"]],false],[0,"\\n        "],[8],[0,"\\n"]],"parameters":[]}],[4,"if",[[20,["model","canShowXboxNextButton"]]],null,{"statements":[[0,"        "],[6,"button"],[9,"id","nextButton"],[9,"class","btn btn-primary btn-xbox-submit cli_saveButton"],[9,"data-bi-name","XboxAddPiFormNext"],[9,"data-bi-slot","2"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"next"]],[7],[0,"\\n            "],[1,[20,["strings","Shared_Button_Next"]],false],[0,"\\n        "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"        "],[6,"button"],[9,"id","saveButton"],[9,"class","btn btn-primary btn-xbox-submit cli_saveButton"],[9,"data-bi-name","AddNonSimMobileFormNext"],[9,"data-bi-slot","2"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"addPaymentInstrument"]],[7],[0,"\\n            "],[1,[20,["strings","Shared_Button_Next"]],false],[0,"\\n        "],[8],[0,"\\n"]],"parameters":[]}],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/payment-and-billing/add-payment-instrument/sms-challenge/mobile-billing-non-sim.hbs"}})}),define("web-blends/templates/payment-and-billing/choose-payment-method-family",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"lMDzr5iV",block:'{"symbols":["paymentMethodFamily"],"statements":[[6,"section"],[9,"id","payment_method_family_container"],[9,"role","main"],[9,"data-bi-area","PaymentAndBillingChoosePaymentMethodFamily"],[7],[0,"\\n    "],[6,"div"],[9,"class","content"],[9,"id","choosePaymentMethodFamily"],[7],[0,"\\n        "],[6,"h1"],[9,"class","type-t2 addPiStart"],[7],[1,[18,"treatedTitle"],false],[8],[0,"\\n        "],[6,"div"],[10,"id",[26,[[18,"treatedPaymentMethodInputContainer"]]]],[10,"class",[26,["cli_paymentMethodsContainer ",[18,"treatedPaymentMethodInputContainer"]]]],[7],[0,"\\n"],[4,"each",[[20,["model","paymentMethodFamilies"]]],null,{"statements":[[0,"                "],[6,"button"],[10,"class",[26,[[18,"treatedSelectedPaymentMethod"]," cli_paymentMethod"]]],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"getPaymentInstrumentDescriptions",[19,1,[]]]],[7],[0,"\\n                    "],[6,"div"],[10,"class",[26,[[18,"treatedPaymentMethodDisplayData"]]]],[7],[0,"\\n"],[4,"if",[[19,1,["paymentMethodType"]]],null,{"statements":[[4,"if",[[19,1,["display","categoryName"]]],null,{"statements":[[0,"                                "],[6,"div"],[10,"id",[19,1,["paymentMethodType"]],null],[10,"class",[26,[[18,"treatedLinkTextStyle"]]]],[7],[1,[19,1,["display","categoryName"]],false],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                                "],[6,"div"],[10,"id",[19,1,["paymentMethodType"]],null],[10,"class",[26,[[18,"treatedLinkTextStyle"]]]],[7],[1,[19,1,["display","name"]],false],[8],[0,"\\n"]],"parameters":[]}]],"parameters":[]},{"statements":[[4,"if",[[19,1,["display","categoryName"]]],null,{"statements":[[0,"                                "],[6,"div"],[10,"id",[19,1,["paymentMethodFamily"]],null],[10,"class",[26,[[18,"treatedLinkTextStyle"]]]],[7],[1,[19,1,["display","categoryName"]],false],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                                "],[6,"div"],[10,"id",[19,1,["paymentMethodFamily"]],null],[10,"class",[26,[[18,"treatedLinkTextStyle"]]]],[7],[1,[19,1,["display","name"]],false],[8],[0,"\\n"]],"parameters":[]}]],"parameters":[]}],[0,"                    "],[8],[0,"\\n"],[4,"if",[[20,["treatedChoosePMLayout"]]],null,{"statements":[[0,"                        "],[6,"div"],[9,"class","choosePaymentMethodButton"],[7],[1,[20,["strings","AddPI_ChoosePaymentMethod_AddButton"]],false],[8],[0,"\\n"]],"parameters":[]},null],[0,"                "],[8],[0,"\\n"]],"parameters":[1]},null],[4,"if",[[20,["model","showRedeemLink"]]],null,{"statements":[[4,"if",[[20,["treatedRedeemButton"]]],null,{"statements":[[0,"                    "],[2," If treated version is adopted, move this button code to the redeem-gift-card component "],[0,"\\n                    "],[6,"button"],[9,"tabindex","0"],[9,"id","redeemAction"],[10,"class",[26,[[18,"treatedSelectedPaymentMethod"]," cli_redeemLink redeemLink"]]],[9,"data-bi-name","RedeemFromSelectPI"],[3,"action",[[19,0,[]],"replaceWithRedeem"]],[7],[0,"\\n                        "],[6,"div"],[10,"class",[26,[[18,"treatedPaymentMethodDisplayData"]]]],[7],[0,"\\n                            "],[6,"div"],[9,"class","linktext"],[7],[1,[20,["strings","Purchase_Redeem_Gift_Card"]],false],[8],[0,"\\n                        "],[8],[0,"\\n                        "],[6,"div"],[9,"class","choosePaymentMethodButton"],[7],[1,[20,["strings","AddPI_ChoosePaymentMethod_RedeemButton"]],false],[8],[0,"\\n                    "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                    "],[1,[25,"redeem-gift-card",null,[["action"],["replaceWithRedeem"]]],false],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null],[0,"        "],[8],[0,"\\n    "],[8],[0,"\\n    "],[6,"div"],[9,"class","CTAContainer"],[7],[0,"\\n        "],[6,"button"],[9,"class","btn btn-default btn-back cli_cancelButton"],[9,"id","cancelButton"],[9,"data-bi-slot","1"],[9,"data-bi-name","ChoosePaymentMethodCancel"],[3,"action",[[19,0,[]],"cancel"]],[7],[0,"\\n"],[4,"if",[[20,["isModernXboxClient"]]],null,{"statements":[[0,"                "],[1,[20,["strings","Shared_Button_Back"]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                "],[1,[20,["strings","Shared_Button_Cancel"]],false],[0,"\\n"]],"parameters":[]}],[0,"        "],[8],[0,"\\n    "],[8],[0,"\\n"],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/payment-and-billing/choose-payment-method-family.hbs"}})}),define("web-blends/templates/payment-and-billing/direct-debit-challenge",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"L//IRknP",block:'{"symbols":["pidlDocument"],"statements":[[6,"section"],[9,"id","PaymentAndBillingDirectDebitChallenge"],[9,"role","main"],[9,"data-bi-area","PaymentAndBillingDirectDebitChallenge"],[7],[0,"\\n    "],[6,"div"],[9,"class","content"],[7],[0,"\\n        "],[6,"h1"],[9,"class","header cli_directDebitChallengeTitle"],[7],[1,[20,["strings","DirectDebit_Validation_Title"]],false],[8],[0,"\\n        "],[6,"div"],[9,"id","TextContainer"],[7],[0,"\\n            "],[6,"p"],[9,"class","cli_directDebitChallengeText"],[7],[1,[20,["strings","DirectDebit_Validation_Message"]],false],[8],[0,"\\n        "],[8],[0,"\\n        "],[6,"div"],[9,"id","directDebitChallengeContainer"],[9,"class","cli_directDebitChallengeContainer"],[9,"role","form"],[7],[0,"\\n"],[4,"each",[[20,["model","pidlDocuments"]]],null,{"statements":[[0,"                "],[1,[25,"pidl-document",null,[["pidl","model","userProfile"],[[19,1,["pidlModel"]],[20,["model"]],[20,["model","userProfile"]]]]],false],[0,"\\n"]],"parameters":[1]},null],[0,"        "],[8],[0,"\\n        "],[6,"div"],[9,"id","challengeAttempt"],[9,"class","cli_challengeAttempt"],[9,"aria-live","polite"],[7],[1,[18,"attemptMessage"],false],[8],[0,"\\n    "],[8],[0,"\\n    "],[6,"div"],[9,"class","CTAContainer"],[7],[0,"\\n        "],[6,"button"],[9,"class","btn btn-default btn-back cli_directDebitChallengeCancel"],[9,"id","directDebitChallengeCancel"],[9,"data-bi-name","DirectDebitChallengeCancel"],[9,"data-bi-slot","1"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"cancel"]],[7],[0,"\\n            "],[1,[20,["strings","Shared_Button_Cancel"]],false],[0,"\\n        "],[8],[0,"\\n        "],[6,"button"],[9,"id","nextButton"],[9,"class","btn btn-primary btn-xbox-submit cli_directDebitChallengeTitleNext"],[9,"data-bi-name","DirectDebitChallengeNext"],[9,"data-bi-slot","2"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"next"]],[7],[0,"\\n            "],[1,[20,["strings","Shared_Button_Next"]],false],[0,"\\n        "],[8],[0,"\\n    "],[8],[0,"\\n"],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/payment-and-billing/direct-debit-challenge.hbs"}})}),define("web-blends/templates/payment-and-billing/edit-payment-instrument",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"nSAPJLuU",block:'{"symbols":[],"statements":[[1,[18,"outlet"],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"web-blends/templates/payment-and-billing/edit-payment-instrument.hbs"}})}),define("web-blends/templates/payment-and-billing/redirect-confirm-new",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"drPJ+IaW",block:'{"symbols":[],"statements":[[6,"section"],[9,"id","payment_billing_redirect_confirm"],[9,"class","newPaypalFlow"],[9,"role","main"],[9,"data-bi-area","PaymentAndBillingRedirectConfirm"],[7],[0,"\\n    "],[6,"div"],[9,"class","content"],[7],[0,"\\n        "],[6,"div"],[9,"class","paypalLogo"],[10,"style",[26,["background: url(",[20,["model","logo"]],") center center no-repeat; background-size: 110%"]]],[7],[8],[0,"\\n        "],[6,"h1"],[9,"class","type-t2 cli_addPiRedirectConfirmTitle"],[7],[1,[20,["strings","Add_PayPal_Title"]],false],[8],[0,"\\n        "],[6,"p"],[7],[0,"\\n            "],[1,[20,["strings","Add_PayPal_Text_New"]],false],[0,"\\n        "],[8],[0,"\\n        "],[1,[25,"privacy-statement",null,[["action","tagName"],["privacyStatement","p"]]],false],[0,"\\n"],[4,"if",[[20,["showPopup"]]],null,{"statements":[[0,"            "],[6,"p"],[9,"class","allowPopupText cli_allowPopup"],[7],[0,"\\n                "],[1,[20,["strings","PaymentInstrument_Paypal_Allow_Popups"]],false],[0,"\\n            "],[8],[0,"\\n"]],"parameters":[]},null],[0,"    "],[8],[0,"\\n    "],[6,"div"],[9,"class","CTAContainer"],[7],[0,"\\n"],[4,"unless",[[20,["isInPageRedirection"]]],null,{"statements":[[0,"            "],[6,"div"],[9,"class","redirect-footer"],[7],[0,"\\n                "],[1,[20,["strings","Purchase_Label_New_Browser"]],false],[0,"\\n            "],[8],[0,"\\n"]],"parameters":[]},null],[0,"        "],[6,"button"],[9,"id","nextButton"],[9,"class","btn btn-wide btn-primary cli_addPiRedirectConfirmNext"],[9,"data-bi-name","AddPiRedirectConfirmNext"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"addPiRedirectConfirmNext"]],[7],[0,"\\n            "],[1,[18,"nextButtonText"],false],[0,"\\n        "],[8],[0,"\\n        "],[6,"button"],[9,"id","cancelButton"],[9,"class","btn btn-wide btn-default btn-back cli_addPiRedirectConfirmCancel"],[9,"data-bi-name","AddPiRedirectConfirmCancel"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"addPiRedirectConfirmCancel"]],[7],[0,"\\n            "],[1,[20,["strings","Shared_Button_Cancel"]],false],[0,"\\n        "],[8],[0,"\\n    "],[8],[0,"\\n"],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/payment-and-billing/redirect-confirm-new.hbs"}})}),define("web-blends/templates/payment-and-billing/redirect-confirm",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"M20e60fU",block:'{"symbols":[],"statements":[[6,"section"],[9,"id","payment_billing_redirect_confirm"],[9,"role","main"],[9,"data-bi-area","PaymentAndBillingRedirectConfirm"],[7],[0,"\\n    "],[6,"div"],[9,"class","content"],[7],[0,"\\n        "],[6,"h1"],[9,"class","type-t2 cli_addPiRedirectConfirmTitle"],[7],[1,[20,["strings","Add_PayPal_Title"]],false],[8],[0,"\\n        "],[6,"p"],[7],[0,"\\n            "],[1,[25,"message-with-bolded-buttonNames",null,[["messageParts"],[[20,["redirectConfirmTextParts"]]]]],false],[0,"\\n        "],[8],[0,"\\n        "],[1,[25,"privacy-statement",null,[["action","tagName"],["privacyStatement","p"]]],false],[0,"\\n"],[4,"if",[[20,["showPopup"]]],null,{"statements":[[0,"            "],[6,"p"],[9,"class","allowPopupText cli_allowPopup"],[7],[0,"\\n                "],[1,[20,["strings","PaymentInstrument_Paypal_Allow_Popups"]],false],[0,"\\n            "],[8],[0,"\\n"]],"parameters":[]},null],[0,"    "],[8],[0,"\\n    "],[6,"div"],[9,"class","CTAContainer"],[7],[0,"\\n        "],[6,"button"],[9,"id","cancelButton"],[9,"class","btn btn-default btn-back cli_addPiRedirectConfirmCancel"],[9,"data-bi-name","AddPiRedirectConfirmCancel"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"addPiRedirectConfirmCancel"]],[7],[0,"\\n            "],[1,[20,["strings","Shared_Button_Cancel"]],false],[0,"\\n        "],[8],[0,"\\n        "],[6,"button"],[9,"id","nextButton"],[9,"class","btn btn-primary cli_addPiRedirectConfirmNext"],[9,"data-bi-name","AddPiRedirectConfirmNext"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"addPiRedirectConfirmNext"]],[7],[0,"\\n            "],[1,[20,["strings","Shared_Button_Next"]],false],[0,"\\n        "],[8],[0,"\\n        "],[2,"  update to following once its enabled for xbox\\n{{#if canShowPrivacyMessage}}\\n                {{#if isXboxOne}}\\n                    <button id=\\"viewTerms\\" class=\\"btn btn-legal\\" data-bi-slot=\'1\' data-bi-name=\'ViewTerms\' data-bi-mto=\\"\\" {{action \'viewTerms\' }}>{{strings.View_Terms_Button}}</button>\\n                {{/if}}\\n            {{/if}} "],[0,"\\n    "],[8],[0,"\\n"],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/payment-and-billing/redirect-confirm.hbs"}})}),define("web-blends/templates/payment-and-billing/redirect-continue-new",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"p9WymQSw",block:'{"symbols":[],"statements":[[6,"section"],[9,"id","PaymentAndBillingRedirectContinue"],[9,"class","newPaypalFlow"],[9,"role","main"],[9,"data-bi-area","PaymentAndBillingRedirectContinue"],[7],[0,"\\n    "],[6,"div"],[9,"class","content"],[7],[0,"\\n        "],[6,"div"],[9,"class","paypalLogo"],[10,"style",[26,["background: url(",[20,["model","logo"]],") center center no-repeat; background-size: 110%"]]],[7],[8],[0,"\\n        "],[6,"h1"],[9,"class","type-t2 cli_RedirectContinueTitle"],[7],[0,"\\n            "],[1,[20,["model","contentTitle"]],false],[0,"\\n        "],[8],[0,"\\n        "],[6,"p"],[7],[0,"\\n            "],[1,[20,["model","contentText"]],false],[0,"\\n        "],[8],[0,"\\n    "],[8],[0,"\\n    "],[6,"div"],[9,"class","CTAContainer"],[7],[0,"\\n        "],[6,"button"],[9,"id","continueButton"],[9,"class","btn btn-wide btn-primary cli_redirectContinueContinue"],[9,"data-bi-name","RedirectContinueContinue"],[3,"action",[[19,0,[]],"complete"]],[7],[0,"\\n            "],[1,[20,["strings","Shared_Button_Wrap_Things_Up"]],false],[0,"\\n        "],[8],[0,"\\n        "],[6,"button"],[9,"class","btn btn-wide btn-alternate cli_redirectContinueRetry"],[9,"data-bi-name","RedirectContinueRetry"],[3,"action",[[19,0,[]],"retry"]],[7],[0,"\\n            "],[1,[20,["strings","Shared_Button_No_Try_Again"]],false],[0,"\\n        "],[8],[0,"\\n        "],[6,"button"],[9,"id","closeButton"],[9,"class","btn btn-wide btn-default btn-back cli_redirectContinueClose"],[9,"data-bi-name","RedirectContinueClose"],[3,"action",[[19,0,[]],"close"]],[7],[0,"\\n            "],[1,[20,["strings","Shared_Button_Cancel"]],false],[0,"\\n        "],[8],[0,"\\n    "],[8],[0,"\\n"],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/payment-and-billing/redirect-continue-new.hbs"}})}),define("web-blends/templates/payment-and-billing/redirect-continue",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"DUrErS/E",block:'{"symbols":[],"statements":[[6,"section"],[9,"id","PaymentAndBillingRedirectContinue"],[9,"role","main"],[9,"data-bi-area","PaymentAndBillingRedirectContinue"],[7],[0,"\\n    "],[6,"div"],[9,"class","content"],[7],[0,"\\n        "],[6,"h1"],[9,"class","type-t2 cli_RedirectContinueTitle"],[7],[0,"\\n            "],[1,[20,["model","contentTitle"]],false],[0,"\\n        "],[8],[0,"\\n        "],[6,"p"],[7],[0,"\\n            "],[1,[25,"message-with-bolded-buttonNames",null,[["messageParts"],[[20,["redirectContinueTextParts"]]]]],false],[0,"\\n        "],[8],[0,"\\n    "],[8],[0,"\\n    "],[6,"div"],[9,"class","CTAContainer"],[7],[0,"\\n"],[4,"if",[[20,["model","isDirectDebit"]]],null,{"statements":[[0,"            "],[6,"button"],[9,"id","closeButton"],[9,"class","btn btn-default btn-back cli_redirectContinueNo"],[9,"data-bi-name","RedirectContinueNo"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"close"]],[7],[0,"\\n                "],[1,[20,["strings","Shared_Button_No"]],false],[0,"\\n            "],[8],[0,"\\n            "],[6,"button"],[9,"id","continueButton"],[9,"class","btn btn-primary cli_redirectContinueYes"],[9,"data-bi-name","RedirectContinueYes"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"complete"]],[7],[0,"\\n                "],[1,[20,["strings","Shared_Button_Yes"]],false],[0,"\\n            "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[6,"button"],[9,"id","closeButton"],[9,"class","btn btn-default btn-back cli_redirectContinueClose"],[9,"data-bi-name","RedirectContinueClose"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"close"]],[7],[0,"\\n                "],[1,[20,["strings","Button_Close"]],false],[0,"\\n            "],[8],[0,"\\n            "],[6,"button"],[9,"id","continueButton"],[9,"class","btn btn-primary cli_redirectContinueContinue"],[9,"data-bi-name","RedirectContinueContinue"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"complete"]],[7],[0,"\\n                "],[1,[20,["strings","Shared_Button_Continue"]],false],[0,"\\n            "],[8],[0,"\\n"]],"parameters":[]}],[0,"    "],[8],[0,"\\n"],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/payment-and-billing/redirect-continue.hbs"}})}),define("web-blends/templates/payment-and-billing/redirect-retry",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"jSqPguPN",block:'{"symbols":[],"statements":[[6,"section"],[9,"id","PaymentAndBillingRedirectRetry"],[9,"class","newPaypalFlow"],[9,"role","main"],[9,"data-bi-area","PaymentAndBillingRedirectRetry"],[7],[0,"\\n    "],[6,"div"],[9,"class","content"],[7],[0,"\\n        "],[6,"h1"],[9,"class","type-t2 cli_RedirectRetryTitle"],[7],[0,"\\n            "],[1,[20,["strings","Add_PayPal_Error_Title"]],false],[0,"\\n        "],[8],[0,"\\n        "],[6,"p"],[7],[0,"\\n            "],[1,[20,["strings","Add_PayPal_Error_Text"]],false],[0,"\\n        "],[8],[0,"\\n    "],[8],[0,"\\n    "],[6,"div"],[9,"class","CTAContainer"],[7],[0,"\\n        "],[6,"button"],[9,"class","btn btn-wide btn-primary cli_redirectRetryAddOther"],[9,"data-bi-name","RedirectAddOther"],[3,"action",[[19,0,[]],"addOther"]],[7],[0,"\\n            "],[1,[20,["strings","Shared_Button_Use_Another_Way"]],false],[0,"\\n        "],[8],[0,"\\n        "],[6,"button"],[9,"class","btn btn-wide btn-alternate cli_redirectRetryRetry"],[9,"data-bi-name","RedirectRetryRetry"],[3,"action",[[19,0,[]],"retry"]],[7],[0,"\\n            "],[1,[20,["strings","Shared_Button_Sign_In_Again"]],false],[0,"\\n        "],[8],[0,"\\n        "],[6,"button"],[9,"class","btn btn-wide btn-default btn-back cli_redirectRetryClose"],[9,"data-bi-name","RedirectRetryClose"],[3,"action",[[19,0,[]],"close"]],[7],[0,"\\n            "],[1,[20,["strings","Shared_Button_Cancel"]],false],[0,"\\n        "],[8],[0,"\\n    "],[8],[0,"\\n"],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/payment-and-billing/redirect-retry.hbs"}})}),define("web-blends/templates/payment-and-billing/summary",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"3pDTeeOt",block:'{"symbols":[],"statements":[[6,"section"],[9,"id","payment_billing_summary_container"],[9,"role","main"],[9,"data-bi-area","PaymentAndBillingSummary"],[9,"data-bi-name","PaymentAndBillingSummary"],[7],[0,"\\n    "],[6,"div"],[9,"class","content"],[7],[0,"\\n        "],[6,"h1"],[9,"class","type-t2"],[7],[0,"\\n            "],[1,[20,["strings","Information_Summary_Title"]],false],[0,"\\n        "],[8],[0,"\\n        "],[6,"div"],[9,"class","summaryContainer"],[9,"data-bi-mto",""],[7],[0,"\\n            "],[1,[25,"address-summary",null,[["pidlData","isDirectDebit","isTaxIdDescription"],[[20,["model","pidlData"]],[20,["isDirectDebit"]],[20,["isTaxIdDescription"]]]]],false],[0,"\\n            "],[6,"button"],[9,"class","btn-link editLink btn-back"],[9,"data-bi-name","EditSummary"],[9,"id","editSummary"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"edit"]],[7],[0,"\\n                "],[1,[20,["strings","Shared_Label_Change"]],false],[0,"\\n            "],[8],[0,"\\n        "],[8],[0,"\\n"],[4,"if",[[20,["isAddressDescription"]]],null,{"statements":[[0,"            "],[6,"p"],[9,"id","summaryEmail"],[7],[1,[18,"billingAddressNote"],false],[8],[0,"\\n            "],[6,"p"],[9,"id","legalStatementContainer"],[7],[0,"\\n                "],[1,[25,"message-with-links",null,[["messageParts","action","tagName"],[[20,["legalStatementTextParts"]],"legalStatement","p"]]],false],[0,"\\n            "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[20,["model","noDefaultProfileAddressFound"]]],null,{"statements":[[0,"                "],[6,"p"],[9,"class","summaryEmail"],[7],[1,[20,["strings","Billing_Address_Note"]],false],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[20,["isDirectDebit"]]],null,{"statements":[[0,"                "],[6,"p"],[9,"id","summaryNote"],[7],[0,"\\n                    "],[6,"span"],[7],[1,[18,"billingSummaryNote"],false],[8],[0,"\\n                    "],[1,[25,"message-with-links",null,[["messageParts","inline","action","tagName"],[[20,["legalStatementTextParts"]],true,"legalStatement","span"]]],false],[0,"\\n                "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                "],[6,"p"],[7],[1,[18,"billingSummaryNote"],false],[8],[0,"\\n                "],[1,[25,"message-with-links",null,[["messageParts","action","tagName"],[[20,["legalStatementTextParts"]],"legalStatement","p"]]],false],[0,"\\n"]],"parameters":[]}]],"parameters":[]}],[0,"\\n"],[4,"if",[[20,["isDirectDebit"]]],null,{"statements":[[0,"            "],[6,"p"],[9,"id","redirectNote"],[7],[1,[20,["strings","Docusign_Redirect_Text"]],false],[8],[0,"\\n            "],[6,"p"],[9,"id","popUpNote"],[7],[1,[20,["strings","Allow_Popups_Text"]],false],[8],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"unless",[[20,["isAddressDescription"]]],null,{"statements":[[4,"if",[[20,["billingNoChargeNote"]]],null,{"statements":[[0,"                "],[6,"p"],[9,"id","billingNoChargeNote"],[7],[0,"\\n                    "],[6,"span"],[7],[1,[18,"billingNoChargeNote"],false],[8],[0,"\\n                "],[8],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"    "],[8],[0,"\\n    "],[6,"div"],[9,"class","CTAContainer"],[7],[0,"\\n"],[4,"if",[[20,["isDirectDebit"]]],null,{"statements":[[0,"            "],[6,"button"],[9,"class","btn btn-default cli_cancelButton"],[9,"id","cancelButton"],[9,"data-bi-name","AddPiSummaryRedirectCancel"],[9,"data-bi-slot","1"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"cancel"]],[7],[0,"\\n                "],[1,[20,["strings","Shared_Button_Cancel"]],false],[0,"\\n            "],[8],[0,"\\n            "],[6,"button"],[9,"class","btn btn-primary btn-xbox-submit cli_saveButton"],[9,"id","saveButton"],[9,"data-bi-name","AddPiSummaryRedirectOk"],[9,"data-bi-slot","2"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"save"]],[7],[0,"\\n                "],[1,[20,["strings","Shared_Button_OK"]],false],[0,"\\n            "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[20,["isAddressDescription"]]],null,{"statements":[[0,"            "],[6,"button"],[9,"class","btn btn-default cli_cancelButton"],[9,"id","cancelButton"],[9,"data-bi-name","AddAddressSummaryCancel"],[9,"data-bi-slot","1"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"cancel"]],[7],[0,"\\n                "],[1,[20,["strings","Shared_Button_Cancel"]],false],[0,"\\n            "],[8],[0,"\\n            "],[6,"button"],[9,"class","btn btn-primary btn-xbox-submit cli_saveButton"],[9,"id","saveButton"],[9,"data-bi-name","AddAddressSummarySave"],[9,"data-bi-slot","2"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"save"]],[7],[0,"\\n                "],[1,[20,["strings","Payment_Button_Save"]],false],[0,"\\n            "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[20,["editMode"]]],null,{"statements":[[0,"            "],[6,"button"],[9,"class","btn btn-default cli_cancelButton"],[9,"id","cancelButton"],[9,"data-bi-name","EditPiSummaryCancel"],[9,"data-bi-slot","1"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"cancel"]],[7],[0,"\\n                "],[1,[20,["strings","Shared_Button_Cancel"]],false],[0,"\\n            "],[8],[0,"\\n            "],[6,"button"],[9,"class","btn btn-primary btn-xbox-submit cli_saveButton"],[9,"id","saveButton"],[9,"data-bi-name","EditPiSummarySave"],[9,"data-bi-slot","2"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"save"]],[7],[0,"\\n                "],[1,[20,["strings","Payment_Button_Save"]],false],[0,"\\n            "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[6,"button"],[9,"class","btn btn-default cli_cancelButton"],[9,"id","cancelButton"],[9,"data-bi-name","AddPiSummaryCancel"],[9,"data-bi-slot","1"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"cancel"]],[7],[0,"\\n                "],[1,[20,["strings","Shared_Button_Cancel"]],false],[0,"\\n            "],[8],[0,"\\n            "],[6,"button"],[9,"class","btn btn-primary btn-xbox-submit cli_saveButton"],[9,"id","saveButton"],[9,"data-bi-name","AddPiSummarySave"],[9,"data-bi-slot","2"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"save"]],[7],[0,"\\n                "],[1,[20,["strings","Payment_Button_Save"]],false],[0,"\\n            "],[8],[0,"\\n        "]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}],[0,"    "],[8],[0,"\\n"],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/payment-and-billing/summary.hbs"}})}),define("web-blends/templates/pidl-sdk-container",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"9FuKn/bC",block:'{"symbols":[],"statements":[[0,"\\n"],[6,"div"],[10,"class",[26,[[25,"if",[[20,["model","extraContainerClass"]],"addpaymentluminositycontrast"],null]," ",[25,"if",[[20,["model","extraStyleClass"]],"addscrollstyle"],null]," pidlInline"]]],[7],[0,"\\n"],[1,[25,"pidl-sdk",null,[["additionalHeaders","allowedPaymentMethods","billableAccountId","classicProduct","client","completePrerequisites","deviceFamily","displayOptions","filters","language","market","orderId","operation","pageName","type","partner","paymentInstrumentId","paymentMethodFamily","paymentMethodType","prefillData","resourceType","returnOptions","scenario","sdkEnvironment","sdkEventHandler","sessionId","userId","greenId","profileId","callbacks","pidlPageNavigator","paymentSession","threedsSectionClass","avsSuggest","setAsDefaultBilling"],[[20,["model","additionalHeaders"]],[20,["model","allowedPaymentMethods"]],[20,["model","billableAccountId"]],[20,["model","legacyPurchaseType"]],[20,["model","client"]],[20,["model","completePrerequisites"]],[20,["model","deviceFamily"]],[20,["model","displayOptions"]],[20,["model","filters"]],[20,["model","language"]],[20,["model","market"]],[20,["model","orderId"]],[20,["model","context"]],[20,["model","pageName"]],[20,["model","type"]],[20,["model","partner"]],[20,["model","piId"]],[20,["model","paymentMethodFamily"]],[20,["model","paymentMethodType"]],[20,["model","prefillData"]],[20,["model","resourceType"]],[20,["model","returnOptions"]],[20,["model","scenario"]],[20,["model","sdkEnvironment"]],[20,["model","sdkEventHandler"]],[20,["model","sessionId"]],[20,["model","puid"]],[20,["model","greenId"]],[20,["model","profileId"]],[20,["model","callbacks"]],[20,["model","pidlPageNavigator"]],[20,["model","paymentSession"]],[20,["model","threedsSectionClass"]],[20,["model","avsSuggest"]],[20,["model","setAsDefaultBilling"]]]]],false],[0,"\\n"],[8],[0,"\\n"],[4,"if",[[20,["needsFingerprintTagging"]]],null,{"statements":[[0,"    "],[1,[25,"fingerprint-tagging",null,[["sessionId"],[[20,["model","greenId"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"web-blends/templates/pidl-sdk-container.hbs"}})}),define("web-blends/templates/purchase",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"bq9FjEah",block:'{"symbols":[],"statements":[[1,[18,"outlet"],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"web-blends/templates/purchase.hbs"}})}),define("web-blends/templates/purchase/add-address-action",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"ftxHJkpH",block:'{"symbols":[],"statements":[[6,"button"],[9,"tabindex","0"],[9,"id","addAddressAction"],[9,"class","selectedPi cli_addAddressAction"],[9,"data-bi-name","AddProfileAddress"],[9,"data-bi-slot","1"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"addAddress"]],[7],[0,"\\n    "],[6,"div"],[9,"class","piDisplayData"],[7],[0,"\\n        "],[6,"div"],[9,"class","changeLink"],[7],[0,"\\n            "],[6,"i"],[9,"class","icon icon-addto"],[9,"aria-hidden","true"],[7],[8],[0," "],[1,[18,"addAddressString"],false],[0,"\\n        "],[8],[0,"\\n    "],[8],[0,"\\n"],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/purchase/add-address-action.hbs"}})}),define("web-blends/templates/purchase/add-backup-pi-action",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"HRGkSJsu",block:'{"symbols":[],"statements":[[4,"if",[[20,["backUpPiLinkUpsellString"]]],null,{"statements":[[0,"    "],[6,"div"],[9,"class","backupLinkTip"],[7],[0," "],[1,[18,"backUpPiLinkUpsellString"],false],[0," "],[8],[0,"\\n"]],"parameters":[]},null],[6,"button"],[9,"tabindex","0"],[9,"class","selectedPi cli_addPiAction addBackupPiLink"],[9,"data-bi-name","AddBackupPi"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"selectBackupPi",[20,["backUpPiAdd"]]]],[7],[0,"\\n    "],[6,"div"],[9,"class","piDisplayData"],[7],[0,"\\n        "],[6,"div"],[9,"class","changeLink"],[7],[0,"\\n            "],[1,[18,"backUpPiLinkString"],false],[0,"\\n        "],[8],[0,"\\n    "],[8],[0,"\\n"],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/purchase/add-backup-pi-action.hbs"}})}),define("web-blends/templates/purchase/add-pi-action",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"1l8D/t/s",block:'{"symbols":[],"statements":[[6,"button"],[9,"tabindex","0"],[9,"id","addPiAction"],[9,"class","selectedPi cli_addPiAction"],[9,"data-bi-name","AddPi"],[9,"data-bi-mto",""],[9,"aria-describedby","addPiContainer"],[10,"role",[26,[[25,"if",[[25,"eq",[[20,["showOobeExperience"]],false],null],"listitem"],null]]]],[3,"action",[[19,0,[]],"addPi"]],[7],[0,"\\n    "],[6,"div"],[9,"class","piDisplayData"],[7],[0,"\\n"],[4,"if",[[20,["isModernXboxClient"]]],null,{"statements":[[0,"            "],[6,"div"],[9,"class","changeLink"],[7],[0,"\\n                "],[6,"i"],[9,"class","icon icon-addto"],[9,"aria-hidden","true"],[7],[8],[0,"\\n                "],[6,"div"],[9,"class","addPiText"],[7],[0,"\\n                    "],[6,"span"],[7],[1,[20,["model","noPaymentInstruments","addPiMessage"]],false],[8],[0,"\\n                "],[8],[0,"\\n            "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[6,"div"],[9,"class","changeLink"],[7],[0,"\\n                "],[6,"i"],[9,"class","icon icon-addto"],[9,"aria-hidden","true"],[7],[8],[0," "],[1,[20,["model","noPaymentInstruments","addPiMessage"]],false],[0,"\\n            "],[8],[0,"\\n"]],"parameters":[]}],[0,"    "],[8],[0,"\\n"],[8],[0,"\\n\\n"],[4,"if",[[20,["model","noPaymentInstruments","isCreditCardPurgeEnabled"]]],null,{"statements":[[0,"    "],[6,"div"],[9,"id","CCPurgeContainer"],[7],[0,"\\n        "],[6,"p"],[9,"id","CCPurgeMessage"],[7],[0,"\\n            "],[1,[20,["model","noPaymentInstruments","creditCardPurgeShortText"]],false],[0,"\\n        "],[8],[0,"\\n    "],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[20,["model","noPaymentInstruments","isLongCreditCardPurgeEnabled"]]],null,{"statements":[[0,"    "],[6,"div"],[9,"id","CCPurgeContainer"],[7],[0,"\\n        "],[6,"p"],[9,"id","CCPurgeMessage"],[7],[0,"\\n            "],[1,[20,["model","noPaymentInstruments","creditCardPurgeText"]],false],[0,"\\n        "],[8],[0,"\\n    "],[8],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"web-blends/templates/purchase/add-pi-action.hbs"}})}),define("web-blends/templates/purchase/add-profile-action",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"+ikDheca",block:'{"symbols":[],"statements":[[6,"button"],[9,"tabindex","0"],[9,"id","addProfileAction"],[9,"class","selectedPi cli_addProfileAction"],[9,"data-bi-name","AddProfile"],[9,"data-bi-slot","1"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"addProfile"]],[7],[0,"\\n    "],[6,"div"],[9,"class","piDisplayData"],[7],[0,"\\n        "],[6,"div"],[9,"class","changeLink"],[7],[0,"\\n            "],[6,"i"],[9,"class","icon icon-addto"],[9,"aria-hidden","true"],[7],[8],[0," "],[1,[20,["strings","Add_Profile_Button"]],false],[0,"\\n        "],[8],[0,"\\n    "],[8],[0,"\\n"],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/purchase/add-profile-action.hbs"}})}),define("web-blends/templates/purchase/ask-purchaser/index",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"aStccAe8",block:'{"symbols":[],"statements":[[6,"section"],[9,"id","askAPurchaserContainer"],[9,"role","main"],[9,"data-bi-area","AskAPurchaserIndex"],[7],[0,"\\n    "],[6,"div"],[9,"class","content"],[7],[0,"\\n        "],[1,[18,"waitForPurchaser"],false],[0,"\\n    "],[8],[0,"\\n"],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/purchase/ask-purchaser/index.hbs"}})}),define("web-blends/templates/purchase/ask-purchaser/success",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"EkUAIxtB",block:'{"symbols":[],"statements":[[6,"section"],[9,"id","askAPurchaserContainer"],[9,"role","main"],[9,"data-bi-area","AskAPurchaserSuccess"],[7],[0,"\\n    "],[6,"div"],[9,"class","content"],[7],[0,"\\n        "],[6,"h1"],[9,"class","type-t2 cli_dialogTitle"],[7],[1,[20,["strings","AskAPurchaser_Success_Title"]],false],[8],[0,"\\n\\n        "],[6,"p"],[9,"class","cli_message"],[7],[0,"\\n            "],[1,[20,["strings","AskAPurchaser_Success_Message"]],false],[0,"\\n        "],[8],[0,"\\n        "],[6,"div"],[9,"id","askAPurchaserSuccessAriaLabel"],[9,"class","screen-reader"],[7],[1,[20,["strings","AskAPurchaser_Success_Title"]],false],[0," "],[1,[20,["strings","AskAPurchaser_Success_Message"]],false],[0," "],[1,[20,["strings","Button_Close"]],false],[8],[0,"\\n    "],[8],[0,"\\n    "],[6,"div"],[9,"class","CTAContainer"],[7],[0,"\\n        "],[6,"button"],[9,"class","btn btn-primary cli_closeButton"],[9,"data-bi-name","Close"],[9,"data-bi-slot","1"],[9,"aria-labelledby","askAPurchaserSuccessAriaLabel"],[3,"action",[[19,0,[]],"close"]],[7],[0,"\\n            "],[1,[20,["strings","Button_Close"]],false],[0,"\\n        "],[8],[0,"\\n    "],[8],[0,"\\n"],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/purchase/ask-purchaser/success.hbs"}})}),define("web-blends/templates/purchase/ask-to-buy/block",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"ESy5S5xD",block:'{"symbols":[],"statements":[[6,"section"],[9,"id","askToBuy"],[9,"role","main"],[9,"data-bi-area","AskToBuyBlock"],[7],[0,"\\n    "],[6,"div"],[9,"class","content"],[9,"id","askToBuyContainer"],[7],[0,"\\n        "],[6,"h1"],[9,"class","type-t2 cli_dialogTitle"],[7],[1,[20,["strings","AskToBuy_Block_Title_V1"]],false],[8],[0,"\\n        "],[6,"p"],[7],[0,"\\n            "],[1,[20,["strings","AskToBuy_Block_Message1"]],false],[0,"\\n        "],[8],[0,"\\n        "],[6,"p"],[7],[0,"\\n            "],[1,[20,["strings","AskToBuy_Block_Message2_V1"]],false],[0,"\\n        "],[8],[0,"\\n    "],[8],[0,"\\n    "],[6,"div"],[9,"class","CTAContainer"],[7],[0,"\\n        "],[6,"button"],[9,"class","btn btn-primary cli_closeButton"],[9,"autofocus",""],[9,"data-bi-name","Close"],[9,"data-bi-slot","1"],[3,"action",[[19,0,[]],"close"]],[7],[0,"\\n            "],[1,[20,["strings","Button_Close"]],false],[0,"\\n        "],[8],[0,"\\n    "],[8],[0,"\\n"],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/purchase/ask-to-buy/block.hbs"}})}),define("web-blends/templates/purchase/ask-to-buy/index",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"9XJTgbQ4",block:'{"symbols":[],"statements":[[6,"section"],[9,"id","askToBuyContainer"],[9,"role","main"],[9,"data-bi-area","AskToBuyIndex"],[9,"aria-labelledby","askToBuyNewTitle askToBuyTitle"],[7],[0,"\\n"],[4,"if",[[20,["shouldShowNewPageVersion"]]],null,{"statements":[[0,"        "],[6,"div"],[9,"class","content"],[7],[0,"\\n            "],[6,"h1"],[9,"id","askToBuyNewTitle"],[9,"class","type-t2 cli_dialogTitle"],[7],[1,[20,["strings","AskToBuy_New_Index_Title_V1"]],false],[8],[0,"\\n"],[4,"if",[[20,["shouldShowRedeemMessage"]]],null,{"statements":[[0,"                "],[6,"p"],[9,"class","cli_redeemMessage"],[7],[0,"\\n                    "],[1,[25,"formatted-price",null,[["number","currencyCode","displayFormat"],[[20,["csvDetails","balance"]],[20,["csvDetails","currency"]],[20,["strings","AskToBuy_Index_Redeem_Message"]]]]],false],[0,"\\n                "],[8],[0,"\\n"]],"parameters":[]},null],[0,"\\n            "],[6,"p"],[9,"class","cli_message1"],[7],[0,"\\n                "],[1,[18,"askToBuyMessage"],false],[0,"\\n            "],[8],[0,"\\n\\n"],[4,"if",[[20,["shouldShowRedeemLink"]]],null,{"statements":[[0,"                "],[2," This is a short-term fix for bug #14716299 given the time we have, long term fix is being planned. "],[0,"\\n"],[4,"if",[[20,["isXboxOneClient"]]],null,{"statements":[[0,"                    "],[6,"button"],[9,"id","redeemAction"],[9,"class","btn btn-autoWidth cli_redeemLink"],[10,"data-bi-name",[18,"biName"],null],[3,"action",[[19,0,[]],"replaceWithRedeem"]],[7],[0,"\\n                        "],[1,[25,"if",[[20,["isFromRedeem"]],[20,["strings","AskToBuy_Redeem_Another_Gift_Card_Link_Text"]],[20,["strings","AskToBuy_Redeem_Gift_Card_Link_Text"]]],null],false],[0,"\\n                    "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                    "],[6,"a"],[9,"id","redeemAction"],[9,"class","cli_redeemLink"],[9,"href","#"],[10,"data-bi-name",[18,"biName"],null],[3,"action",[[19,0,[]],"replaceWithRedeem"]],[7],[0,"\\n                        "],[1,[25,"if",[[20,["isFromRedeem"]],[20,["strings","AskToBuy_Redeem_Another_Gift_Card_Link_Text"]],[20,["strings","AskToBuy_Redeem_Gift_Card_Link_Text"]]],null],false],[0,"\\n                    "],[8],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null],[0,"        "],[8],[0,"\\n        "],[6,"div"],[9,"class","CTAContainer"],[7],[0,"\\n            "],[6,"button"],[9,"class","btn btn-default btn-back cli_cancelButton"],[9,"data-bi-name","Cancel"],[9,"data-bi-slot","1"],[3,"action",[[19,0,[]],"cancel"]],[7],[0,"\\n                "],[1,[20,["strings","AskToBuy_New_Button_Cancel"]],false],[0,"\\n            "],[8],[0,"\\n            "],[6,"button"],[9,"class","btn btn-primary cli_askNowButton"],[9,"autofocus",""],[9,"data-bi-name","AskToBuy"],[9,"data-bi-slot","2"],[3,"action",[[19,0,[]],"submitAskToBuyRequest"]],[7],[0,"\\n                "],[1,[20,["strings","AskToBuy_New_Button_AskNow"]],false],[0,"\\n            "],[8],[0,"\\n        "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"        "],[6,"div"],[9,"class","content"],[7],[0,"\\n            "],[6,"h1"],[9,"id","askToBuyTitle"],[9,"class","type-t2 cli_dialogTitle"],[7],[1,[20,["strings","AskToBuy_Index_Title_V1"]],false],[8],[0,"\\n"],[4,"if",[[20,["shouldShowRedeemMessage"]]],null,{"statements":[[0,"                "],[6,"p"],[9,"class","cli_redeemMessage"],[7],[0,"\\n                    "],[1,[25,"formatted-price",null,[["number","currencyCode","displayFormat"],[[20,["csvDetails","balance"]],[20,["csvDetails","currency"]],[20,["strings","AskToBuy_Index_Redeem_Message"]]]]],false],[0,"\\n                "],[8],[0,"\\n"]],"parameters":[]},null],[0,"\\n            "],[6,"p"],[9,"class","cli_message1"],[7],[0,"\\n                "],[1,[20,["strings","AskToBuy_Index_Message_V1"]],false],[0,"\\n            "],[8],[0,"\\n\\n"],[4,"if",[[20,["shouldShowRedeemLink"]]],null,{"statements":[[0,"                "],[2," This is a short-term fix for bug #14716299 given the time we have, long term fix is being planned. "],[0,"\\n"],[4,"if",[[20,["isXboxOneClient"]]],null,{"statements":[[0,"                    "],[6,"button"],[9,"id","redeemAction"],[9,"class","btn btn-autoWidth cli_redeemLink"],[10,"data-bi-name",[18,"biName"],null],[3,"action",[[19,0,[]],"replaceWithRedeem"]],[7],[0,"\\n                        "],[1,[25,"if",[[20,["isFromRedeem"]],[20,["strings","AskToBuy_Redeem_Another_Gift_Card_Link_Text"]],[20,["strings","AskToBuy_Redeem_Gift_Card_Link_Text"]]],null],false],[0,"\\n                    "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                    "],[6,"a"],[9,"id","redeemAction"],[9,"class","cli_redeemLink"],[9,"href","#"],[10,"data-bi-name",[18,"biName"],null],[3,"action",[[19,0,[]],"replaceWithRedeem"]],[7],[0,"\\n                        "],[1,[25,"if",[[20,["isFromRedeem"]],[20,["strings","AskToBuy_Redeem_Another_Gift_Card_Link_Text"]],[20,["strings","AskToBuy_Redeem_Gift_Card_Link_Text"]]],null],false],[0,"\\n                    "],[8],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null],[0,"        "],[8],[0,"\\n        "],[6,"div"],[9,"class","CTAContainer"],[7],[0,"\\n            "],[6,"button"],[9,"class","btn btn-default btn-back cli_cancelButton"],[9,"data-bi-name","Cancel"],[9,"data-bi-slot","1"],[3,"action",[[19,0,[]],"cancel"]],[7],[0,"\\n                "],[1,[20,["strings","Shared_Button_Cancel"]],false],[0,"\\n            "],[8],[0,"\\n            "],[6,"button"],[9,"class","btn btn-primary cli_askNowButton"],[9,"autofocus",""],[9,"data-bi-name","AskToBuy"],[9,"data-bi-slot","2"],[3,"action",[[19,0,[]],"submitAskToBuyRequest"]],[7],[0,"\\n                "],[1,[20,["strings","AskToBuy_Button_AskNow"]],false],[0,"\\n            "],[8],[0,"\\n        "],[8],[0,"    \\n"]],"parameters":[]}],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/purchase/ask-to-buy/index.hbs"}})}),define("web-blends/templates/purchase/ask-to-buy/success",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"Au3kOfSz",block:'{"symbols":[],"statements":[[6,"section"],[9,"id","askToBuyContainer"],[9,"role","main"],[9,"data-bi-area","AskToBuySuccess"],[7],[0,"\\n"],[4,"if",[[25,"is-flight-enabled",["newatbmsg"],null]],null,{"statements":[[0,"        "],[6,"div"],[9,"class","content"],[7],[0,"\\n            "],[6,"h1"],[9,"class","type-t2 cli_dialogTitle"],[7],[1,[20,["strings","AskToBuy_New_Success_Title"]],false],[8],[0,"\\n            "],[6,"p"],[9,"class","cli_message"],[7],[0,"\\n                "],[1,[20,["strings","AskToBuy_New_Success_Message"]],false],[0,"\\n            "],[8],[0,"\\n        "],[8],[0,"\\n        "],[6,"div"],[9,"class","CTAContainer"],[7],[0,"\\n            "],[6,"button"],[9,"class","btn btn-primary cli_closeButton"],[9,"autofocus",""],[9,"data-bi-name","Close"],[9,"data-bi-slot","1"],[3,"action",[[19,0,[]],"close"]],[7],[0,"\\n                "],[1,[20,["strings","AskToBuy_New_Success_Close"]],false],[0,"\\n            "],[8],[0,"\\n        "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"        "],[6,"div"],[9,"class","content"],[7],[0,"\\n            "],[6,"h1"],[9,"class","type-t2 cli_dialogTitle"],[7],[1,[20,["strings","AskToBuy_Success_Title_V1"]],false],[8],[0,"\\n            "],[6,"p"],[9,"class","cli_message"],[7],[0,"\\n                "],[1,[20,["strings","Ask_ToBuy_Success_Message_V1"]],false],[0,"\\n            "],[8],[0,"\\n        "],[8],[0,"\\n        "],[6,"div"],[9,"class","CTAContainer"],[7],[0,"\\n            "],[6,"button"],[9,"class","btn btn-primary cli_closeButton"],[9,"autofocus",""],[9,"data-bi-name","Close"],[9,"data-bi-slot","1"],[3,"action",[[19,0,[]],"close"]],[7],[0,"\\n                "],[1,[20,["strings","Button_Close"]],false],[0,"\\n            "],[8],[0,"\\n        "],[8],[0,"\\n"]],"parameters":[]}],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/purchase/ask-to-buy/success.hbs"}})}),define("web-blends/templates/purchase/complete",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"GtG8NBL9",block:'{"symbols":[],"statements":[[6,"section"],[10,"class",[26,["complete-container ",[18,"gamingAppThemeVersionClass"]," ",[18,"gamingAppGiftClass"]]]],[9,"id","congratsContainer"],[9,"role","main"],[9,"data-bi-area","Congrats"],[9,"data-bi-view","Congrats"],[9,"data-bi-source","PurchaseCatalog"],[7],[0,"\\n    "],[6,"div"],[10,"class",[26,["content ",[18,"twoCTAContentClass"]]]],[7],[0,"\\n        "],[6,"div"],[9,"class","gamertag cli_gamertag"],[7],[1,[18,"gamertag"],false],[8],[0,"            \\n        "],[6,"div"],[9,"class","complete-container"],[7],[0,"\\n"],[4,"if",[[20,["isGamingApp"]]],null,{"statements":[[4,"if",[[20,["isScenarioGift"]]],null,{"statements":[[0,"                    "],[6,"img"],[10,"src",[20,["model","order","imageProductUrl"]],null],[9,"class","thankYouProductImage cli_dialogImage cli_giftThankYouImage"],[7],[8],[0,"\\n                    "],[6,"img"],[9,"src","/uniblends/REL20231025.1/assets/images/EC1F-64.svg"],[9,"class","thankYouGiftBox"],[7],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                    "],[6,"img"],[9,"src","/uniblends/REL20231025.1/assets/images/thankyouisland.png"],[9,"class","thankYouProductImage cli_dialogImage"],[9,"aria-hidden","true"],[7],[8],[0,"\\n"]],"parameters":[]}],[0,"                "],[6,"h1"],[9,"class","thankYouTitle cli_dialogTitle"],[7],[1,[18,"thankYouTitle"],false],[8],[0,"\\n                "],[6,"div"],[9,"class","thankYouDescription cli_dialogDescription"],[7],[0,"\\n                    "],[1,[18,"thankYouDescription"],false],[0,"\\n                "],[8],[0,"\\n                "],[6,"div"],[9,"class","thankYouFeedback cli_dialogFeedback"],[7],[0,"\\n                    "],[1,[20,["strings","GamingApp_ThankYou_Feedback_PartOne"]],false],[0," \\n                    "],[6,"a"],[9,"href","https://support.xbox.com/survey/store.csat.postpurchase"],[9,"target","_blank"],[7],[1,[20,["strings","GamingApp_ThankYou_Feedback_PartTwo"]],false],[8],[0,"\\n                "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[20,["isDigitalAttach"]]],null,{"statements":[[0,"                    "],[6,"h1"],[9,"class","type-t2 cli_dialogTitle"],[7],[1,[20,["strings","Shared_Success"]],false],[8],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[20,["isScenarioDLCThankYou"]]],null,{"statements":[[0,"                    "],[6,"h1"],[9,"class","type-t2 cli_dialogTitle"],[7],[1,[20,["strings","Purchase_Complete_DLC_Title"]],false],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                    "],[6,"h1"],[9,"class","type-t2 cli_dialogTitle"],[7],[1,[25,"if",[[20,["isManualReview"]],[20,["strings","Purchase_Gift_Congrats_ManualReview_Title"]],[20,["strings","Purchase_Gift_Congrats_ThankYou"]]],null],false],[8],[0,"\\n                "]],"parameters":[]}]],"parameters":[]}],[0,"                "],[6,"div"],[9,"class","product-row"],[9,"data-bi-area","Congrats"],[9,"data-bi-name","productInfo"],[9,"data-bi-id","productInfo"],[7],[0,"\\n"],[4,"if",[[20,["showImage"]]],null,{"statements":[[0,"                        "],[6,"div"],[9,"class","column-image"],[7],[0,"\\n                            "],[6,"img"],[9,"id","productImage"],[10,"src",[20,["model","order","imageProductUrl"]],null],[10,"alt",[18,"imageAltText"],null],[7],[8],[0,"\\n                        "],[8],[0,"\\n"]],"parameters":[]},null],[0,"                    "],[6,"div"],[9,"class","column-product"],[7],[0,"\\n"],[4,"if",[[25,"not",[[20,["isDigitalAttach"]]],null]],null,{"statements":[[0,"                            "],[6,"h2"],[9,"class","type-t3 cli_productTitle"],[7],[1,[18,"productTitle"],false],[8],[0,"\\n"]],"parameters":[]},null],[0,"                    "],[8],[0,"\\n                "],[8],[0,"\\n                "],[6,"div"],[9,"class","information-container"],[7],[0,"\\n"],[4,"if",[[20,["isDigitalAttach"]]],null,{"statements":[[0,"                        "],[6,"p"],[9,"class","cli_digitalAttachMessageOne"],[7],[1,[20,["strings","Purchase_DigitalAttach_ThankYou_Message_One"]],false],[8],[0,"\\n                        "],[6,"p"],[9,"class","cli_digitalAttachMessageTwo"],[7],[1,[20,["strings","Purchase_DigitalAttach_ThankYou_Message_Two"]],false],[8],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[20,["isScenarioDLCThankYou"]]],null,{"statements":[[0,"                        "],[6,"p"],[9,"class","cli_scenarioDLCThankYouMessage"],[7],[1,[20,["strings","Purchase_Complete_DLC_Message"]],false],[8],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[20,["isScenarioGift"]]],null,{"statements":[[0,"                            "],[6,"p"],[7],[1,[25,"if",[[20,["isManualReview"]],[20,["strings","Purchase_Gift_Congrats_ManualReview_Body"]],[20,["recipientText"]]],null],false],[8],[0,"\\n"],[4,"if",[[20,["isXboxOne"]]],null,{"statements":[[0,"                                "],[1,[20,["strings","Purchase_Gift_Congrats_OrderTracking_Xbox"]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                                "],[1,[25,"message-with-links",null,[["messageParts","action","tagName"],[[20,["orderTrackingTerms"]],"giftOrderTrackingStatement","p"]]],false],[0,"\\n"]],"parameters":[]}]],"parameters":[]},{"statements":[[0,"                            "],[1,[25,"message-with-bolded-button-names",null,[["messageParts","tagName"],[[20,["xboxDownloadInstructions"]],"p"]]],false],[0,"\\n                            "],[1,[25,"message-with-bolded-button-names",null,[["messageParts","tagName"],[[20,["pcDownloadInstructions"]],"p"]]],false],[0,"\\n"]],"parameters":[]}],[0,"                    "]],"parameters":[]}]],"parameters":[]}],[0,"                "],[8],[0,"\\n"]],"parameters":[]}],[0,"        "],[8],[0,"\\n    "],[8],[0,"\\n    "],[6,"div"],[9,"class","CTAContainer"],[7],[0,"\\n"],[4,"if",[[20,["isGamingApp"]]],null,{"statements":[[0,"            "],[6,"button"],[9,"id","doneButton"],[9,"class","btn btn-primary cli_doneButton"],[9,"data-bi-slot","1"],[9,"data-bi-name","DoneButton"],[3,"action",[[19,0,[]],"done"]],[7],[0,"\\n                "],[1,[18,"thankYouCTAText"],false],[0,"\\n            "],[8],[0,"\\n"],[4,"if",[[25,"and",[[20,["isScenarioGift"]],[20,["hasAddons"]]],null]],null,{"statements":[[0,"                "],[6,"div"],[9,"class","orSeparatorLine"],[7],[0,"\\n                    "],[6,"span"],[9,"class","orText"],[7],[1,[20,["strings","GamingApp_ThankYou_Gift_Or"]],false],[8],[0,"\\n                "],[8],[0,"\\n                "],[6,"button"],[9,"id","backButton"],[9,"class","btn btn-default cli_exploreButton"],[9,"data-bi-slot","2"],[9,"data-bi-name","ExploreButton"],[3,"action",[[19,0,[]],"doneSecondary"]],[7],[0,"\\n                    "],[1,[18,"thankYouCTASecondText"],false],[0,"\\n                "],[8],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},{"statements":[[0,"            "],[6,"button"],[9,"id","doneButton"],[9,"class","btn btn-primary cli_doneButton"],[9,"data-bi-slot","1"],[9,"data-bi-name","GiftDoneButton"],[3,"action",[[19,0,[]],"done"]],[7],[0,"\\n"],[4,"if",[[20,["isScenarioDLCThankYou"]]],null,{"statements":[[0,"                    "],[1,[20,["strings","Purchase_Complete_DLC_Button"]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                    "],[1,[20,["strings","Shared_Button_Done"]],false],[0,"\\n"]],"parameters":[]}],[0,"            "],[8],[0,"\\n"]],"parameters":[]}],[0,"    "],[8],[0,"\\n"],[4,"if",[[20,["isGamingApp"]]],null,{"statements":[[4,"if",[[20,["showClose"]]],null,{"statements":[[0,"        "],[6,"div"],[10,"title",[20,["strings","Button_Close"]],null],[7],[0,"\\n            "],[1,[25,"close-button",null,[["isSuccess"],[true]]],false],[0,"\\n        "],[8],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/purchase/complete.hbs"}})}),define("web-blends/templates/purchase/confirm-oobe",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"Xu9bbIV4",block:'{"symbols":[],"statements":[[6,"section"],[9,"class","PurchaseContainer"],[9,"id","PurchaseContainer"],[9,"role","main"],[9,"data-bi-area","ConfirmOobePurchase"],[9,"data-bi-name","PurchaseOobeContainer"],[9,"data-bi-view","ItemsToPurchase"],[9,"data-bi-source","PurchaseCatalog"],[7],[0,"\\n    "],[6,"div"],[10,"class",[26,[[18,"contentContainerClassName"]," cli_confirmPurchaseContainer"]]],[9,"id","ViewCart"],[7],[0,"\\n"],[4,"if",[[20,["model","order","lineItems"]]],null,{"statements":[[0,"            "],[6,"div"],[9,"class","content_header"],[7],[0,"\\n                "],[6,"div"],[9,"id","ProductContainer"],[9,"class","cli_orderItemContainer"],[10,"data-bi-name",[18,"lineItemTitle"],null],[10,"data-bi-id",[20,["model","order","firstLineItem","productId"]],null],[9,"data-bi-slot","0"],[7],[0,"\\n                    "],[6,"h1"],[9,"class","type-t2 cli_dialogTitle"],[7],[1,[18,"titleString"],false],[8],[0,"\\n                "],[8],[0,"\\n"],[4,"if",[[20,["isNewLegalStringFlightDisabled"]]],null,{"statements":[[0,"                "],[6,"div"],[9,"class","metaContainer"],[7],[0,"\\n                    "],[6,"div"],[9,"class","cli_renewalPriceAndFrequency"],[7],[0,"\\n                        "],[1,[25,"formatted-price",null,[["number","currencyCode","displayFormat"],[[20,["priceInfo","price"]],[20,["priceInfo","currencyCode"]],[20,["lineItemPriceSubtitle"]]]]],false],[0,"\\n                    "],[8],[0,"\\n"],[4,"if",[[20,["isNotTrial"]]],null,{"statements":[[0,"                        "],[6,"div"],[9,"class","renewalTitle cli_renewalPriceAndFrequencySub"],[7],[0,"\\n                            "],[1,[25,"formatted-price",null,[["number","currencyCode","displayFormat"],[[20,["renewalInfo","price"]],[20,["renewalInfo","currencyCode"]],[20,["lineItemRenewalPriceSubtitle"]]]]],false],[0,"\\n                        "],[8],[0,"\\n"]],"parameters":[]},null],[0,"                "],[8],[0,"\\n"]],"parameters":[]},null],[0,"            "],[8],[0,"\\n            "],[6,"div"],[9,"class","content_body"],[7],[0,"\\n                "],[6,"div"],[9,"id","PiContainer"],[10,"class",[26,[[18,"piChangeButtonClassName"]]]],[7],[0,"\\n                    "],[1,[25,"payment-instrument",null,[["buttonId","canPostPiSelectedMessage","selectedPi","showChangeLabel","canShowUpdateLabel","cli_class","bi_slot","bi_source","bi_name","change_label","submit","updatePi","isOobe"],["ChangePi",true,[20,["model","selectedPi"]],[20,["model","showChangeButton"]],false,"cli_selectedPi btn-primary","1","pi","SelectedPi","Purchase_Label_Change","selectPi","selectPi",true]]],false],[0,"\\n                "],[8],[0,"\\n            "],[8],[0,"\\n            "],[6,"div"],[9,"class","content_footer"],[7],[0,"\\n                "],[6,"div"],[7],[0,"\\n                    "],[1,[25,"reseller-detail",null,[["order","selectedPi"],[[20,["order"]],[20,["model","selectedPi"]]]]],false],[0,"\\n                "],[8],[0,"\\n                "],[1,[25,"legal-terms",null,[["order","orderLineItem","actionText","clickToRedirect","disableCollapse","isPiRequiredButFree","legalStrings","showSelectBackupPiLink","showBackupPi"],[[20,["model","order"]],[20,["model","order","firstLineItem"]],[20,["confirmButtonText"]],"viewTou",true,[20,["model","isPiRequiredButFree"]],[20,["legalStrings"]],[20,["showSelectBackupPiLink"]],[20,["showBackupPi"]]]]],false],[0,"\\n                "],[1,[25,"message-with-links",null,[["messageParts","action","selectedPi","tagName"],[[20,["eNotaTermParts"]],"viewEnotaTerms",[20,["model","selectedPi"]],"p"]]],false],[0,"\\n"],[4,"if",[[20,["isKoreanTransactionFeeEnabled"]]],null,{"statements":[[0,"                    "],[6,"p"],[9,"id","transactionFeeLegal"],[7],[1,[25,"if",[[20,["isKoreaTransactionFeeV1Enabled"]],[20,["strings","Purchase_Korea_International_Transaction_Fee_V1"]],[20,["strings","Purchase_Korea_International_Transaction_Fee"]]],null],false],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[20,["isArgentinaTransactionFeeEnabled"]]],null,{"statements":[[4,"if",[[20,["isArgentinaTransactionFeeV1Enabled"]]],null,{"statements":[[0,"                        "],[6,"p"],[9,"id","transactionFeeLegal"],[7],[1,[20,["strings","Purchase_Argentina_International_Transaction_Fee_V1"]],false],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                        "],[6,"p"],[9,"id","transactionFeeLegal"],[7],[1,[20,["strings","Purchase_Argentina_International_Transaction_Fee"]],false],[8],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null],[0,"            "],[8],[0,"\\n"],[4,"if",[[20,["autoRenewalConsentRequired"]]],null,{"statements":[[0,"                "],[6,"div"],[9,"class","mainCheckBoxContainer"],[7],[0,"\\n                    "],[1,[25,"auto-renewal-consent",null,[["string","controller"],[[20,["strings"]],[19,0,[]]]]],false],[0,"\\n                "],[8],[0," \\n"]],"parameters":[]},null]],"parameters":[]},{"statements":[[0,"            "],[6,"h2"],[9,"class","type-t3 cli_noItemsMessage"],[9,"data-bi-name","NoItemsMessage"],[9,"data-bi-slot","0"],[7],[0,"\\n                "],[1,[20,["strings","Purchase_Message_NoItems"]],false],[0,"\\n            "],[8],[0,"\\n"]],"parameters":[]}],[0,"    "],[8],[0,"\\n    "],[6,"div"],[9,"class","CTAContainer"],[7],[0,"\\n        "],[6,"button"],[9,"class","btn btn-primary cli_buyButton"],[9,"id","confirmButton"],[10,"disabled",[18,"isDisabled"],null],[9,"aria-live","polite"],[10,"data-bi-slot",[18,"confirm_bi_slot"],null],[9,"data-bi-name","StartTrial"],[9,"data-bi-mto",""],[9,"aria-labelledby","ProductContainer PriceContainer confirmButton"],[3,"action",[[19,0,[]],"purchase"]],[7],[1,[18,"confirmButtonText"],false],[0,"\\n        "],[8],[0,"\\n    "],[8],[0,"\\n"],[4,"if",[[20,["needsFingerprintTagging"]]],null,{"statements":[[0,"        "],[1,[25,"fingerprint-tagging",null,[["sessionId"],[[20,["model","order","sessionId"]]]]],false],[0,"\\n"]],"parameters":[]},null],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/purchase/confirm-oobe.hbs"}})}),define("web-blends/templates/purchase/confirm-tvod",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"l57pE302",block:'{"symbols":[],"statements":[[6,"section"],[9,"class","PurchaseContainer"],[9,"id","tvodPurchase"],[9,"role","main"],[9,"data-bi-area","PurchaseConfirmTvod"],[7],[0,"\\n    "],[6,"div"],[9,"class","content cli_confirmPurchaseContainer"],[7],[0,"\\n        "],[6,"div"],[9,"id","ProductContainer"],[9,"class","cli_orderItemContainer"],[7],[0,"\\n"],[4,"if",[[20,["isChina"]]],null,{"statements":[[0,"                "],[6,"div"],[9,"id","besTvLogo"],[9,"class","besTvLogo"],[7],[0,"\\n                    "],[6,"img"],[9,"src","/uniblends/REL20231025.1/assets/images/bestv.svg"],[10,"alt",[26,[[20,["strings","Tvod_BesTvLogoAltText"]]]]],[7],[8],[0,"\\n                "],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[20,["ismoderngamertagenabled"]]],null,{"statements":[[0,"                "],[6,"div"],[9,"id","GamertagContainer"],[7],[0,"\\n                    "],[6,"div"],[9,"class","gamertagÂ cli_gamertag"],[7],[1,[18,"moderngamertag"],false],[8],[0,"\\n                    "],[6,"div"],[9,"class","gamertagsuffixÂ cli_gamertagsuffix"],[7],[1,[18,"moderngamertagsuffix"],false],[8],[0,"\\n                "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[20,["gamertag"]]],null,{"statements":[[0,"                "],[6,"div"],[9,"id","GamertagContainer"],[7],[0,"\\n                    "],[6,"div"],[9,"id","gamerTagText"],[9,"class","gamertag"],[7],[1,[18,"gamertag"],false],[8],[0,"\\n                "],[8],[0,"Â \\n            "]],"parameters":[]},null]],"parameters":[]}],[0,"            "],[6,"h1"],[9,"class","type-t2 cli_dialogTitle"],[7],[1,[20,["model","ProductTitle"]],false],[8],[0,"\\n            "],[6,"div"],[9,"id","PriceContainer"],[9,"aria-live","polite"],[7],[0,"\\n                "],[6,"div"],[9,"class","priceTax cli_totalPrice"],[7],[0,"\\n                    "],[1,[18,"priceString"],false],[0,"\\n                "],[8],[0,"\\n            "],[8],[0,"\\n            "],[6,"div"],[9,"id","LegalContainer"],[7],[0,"\\n"],[4,"if",[[20,["isChina"]]],null,{"statements":[[0,"                    "],[1,[18,"chinaLegalString"],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[20,["hasPi"]]],null,{"statements":[[0,"                        "],[6,"p"],[9,"id","tvodLegalText"],[7],[1,[18,"legalString"],false],[8],[0,"\\n"]],"parameters":[]},null],[0,"                    "],[2," That\'s right. Don\'t show product description for China. "],[0,"\\n                    "],[6,"p"],[9,"id","productDescriptionText"],[7],[1,[18,"productDescriptionTruncated"],false],[8],[0,"\\n"]],"parameters":[]}],[0,"            "],[8],[0,"\\n        "],[8],[0,"\\n\\n"],[4,"if",[[20,["isChina"]]],null,{"statements":[[0,"            "],[6,"div"],[9,"id","chinaPaymentProviderString"],[7],[1,[20,["strings","Tvod_China_Payment_Provider"]],false],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[6,"div"],[9,"id","PiContainer"],[7],[0,"\\n"],[4,"if",[[20,["hasPi"]]],null,{"statements":[[0,"                    "],[6,"div"],[7],[0,"\\n                        "],[1,[25,"payment-instrument",null,[["canPostPiSelectedMessage","selectedPi","canShowExpiredLabel","canShowUpdateLabel","submit","updatePi","cli_class","bi_slot","bi_source","bi_name","change_label"],[false,[20,["selectedPi"]],true,false,"changePi","changePi","cli_selectedPi","1","pi","SelectedPi","Purchase_Label_Change"]]],false],[0,"\\n                    "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                    "],[12,"purchase/add-pi-action",[]],[0,"\\n"]],"parameters":[]}],[0,"            "],[8],[0,"\\n"]],"parameters":[]}],[0,"\\n    "],[8],[0,"\\n    "],[6,"div"],[9,"class","CTAContainer"],[7],[0,"\\n        "],[6,"button"],[9,"class","btn btn-default btn-back cli_cancelButton"],[9,"id","cancelButton"],[9,"data-bi-slot","1"],[9,"data-bi-name","cancel"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"cancel"]],[7],[1,[20,["strings","Shared_Button_Cancel"]],false],[8],[0,"\\n"],[4,"if",[[20,["isChina"]]],null,{"statements":[[0,"            "],[6,"button"],[9,"class","btn btn-primary cli_nextButton"],[9,"id","buyornextButton"],[9,"data-bi-slot","2"],[9,"data-bi-name","next"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"purchase"]],[7],[1,[20,["strings","Shared_Button_Next"]],false],[8],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[20,["hasPi"]]],null,{"statements":[[0,"                "],[6,"button"],[9,"class","btn btn-primary cli_buyButton"],[9,"id","buyornextButton"],[9,"data-bi-slot","2"],[9,"data-bi-name","buy"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"purchase"]],[7],[1,[20,["strings","Shared_Button_Buy"]],false],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                "],[6,"button"],[9,"class","btn btn-primary cli_nextButton"],[9,"id","buyornextButton"],[9,"data-bi-slot","2"],[9,"data-bi-name","nextNoPi"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"addPi"]],[7],[1,[20,["strings","Shared_Button_Next"]],false],[8],[0,"\\n"]],"parameters":[]}]],"parameters":[]}],[0,"        "],[6,"button"],[9,"id","viewTerms"],[9,"class","btn btn-legal"],[9,"data-bi-slot","3"],[9,"data-bi-name","ViewTerms"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"viewTerms"]],[7],[1,[20,["strings","View_Terms_Button"]],false],[8],[0,"\\n    "],[8],[0,"\\n"],[8]],"hasEval":true}',meta:{moduleName:"web-blends/templates/purchase/confirm-tvod.hbs"}})})
define("web-blends/templates/purchase/confirm",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"pXAgI+PV",block:'{"symbols":[],"statements":[[6,"section"],[10,"class",[26,["PurchaseContainer ",[18,"gamingAppThemeVersionClass"]," ",[18,"gamingAppGiftClass"]]]],[10,"id",[18,"getPurchaseContainerId"],null],[9,"role","main"],[9,"data-bi-area","ConfirmPurchase"],[9,"data-bi-name","PurchaseContainer"],[9,"data-bi-view","ItemsToPurchase"],[9,"data-bi-source","PurchaseCatalog"],[7],[0,"\\n"],[4,"if",[[20,["showJapanLegalBanner"]]],null,{"statements":[[0,"        "],[6,"div"],[9,"class","japanLegalBanner"],[7],[1,[20,["strings","Confirmation_Commercial_Transactions_Legal"]],false],[8],[0,"\\n"]],"parameters":[]},null],[0,"    "],[6,"div"],[9,"class","content cli_confirmPurchaseContainer"],[9,"id","ViewCart"],[7],[0,"\\n"],[4,"if",[[20,["isXboxOne"]]],null,{"statements":[[4,"if",[[20,["isChina"]]],null,{"statements":[[0,"                "],[6,"div"],[9,"id","besTvLogo"],[9,"class","besTvLogo"],[7],[0,"\\n                    "],[6,"img"],[9,"src","/uniblends/REL20231025.1/assets/images/bestv.svg"],[10,"alt",[26,[[20,["strings","Tvod_BesTvLogoAltText"]]]]],[7],[8],[0,"\\n                "],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[20,["ismoderngamertagenabled"]]],null,{"statements":[[0,"            "],[6,"div"],[9,"id","GamertagContainer"],[9,"labelledby","gamertag gamertagsuffix"],[7],[0,"\\n                "],[6,"div"],[9,"class","gamertag cli_gamertag"],[7],[1,[18,"moderngamertag"],false],[8],[0,"\\n                "],[6,"div"],[9,"class","gamertagsuffix cli_gamertagsuffix"],[7],[1,[18,"moderngamertagsuffix"],false],[8],[0,"\\n"],[4,"if",[[25,"and",[[20,["isModernXboxClient"]],[20,["gamerpic"]]],null]],null,{"statements":[[0,"                    "],[6,"img"],[9,"class","gamerpic cli_gamerpic"],[10,"src",[26,[[18,"gamerpic"]]]],[7],[8],[0,"\\n"]],"parameters":[]},null],[0,"            "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[20,["gamertag"]]],null,{"statements":[[0,"                    "],[6,"div"],[9,"id","GamertagContainer"],[7],[0,"\\n                        "],[6,"div"],[9,"class","gamertag cli_gamertag"],[9,"data-bi-name","gamerTag"],[7],[1,[18,"gamertag"],false],[8],[0,"\\n"],[4,"if",[[25,"and",[[20,["isModernXboxClient"]],[20,["gamerpic"]]],null]],null,{"statements":[[0,"                            "],[6,"img"],[9,"class","gamerpic cli_gamerpic"],[10,"src",[26,[[18,"gamerpic"]]]],[7],[8],[0,"\\n"]],"parameters":[]},null],[0,"                    "],[8],[0,"\\n"]],"parameters":[]},null],[0,"Â Â Â Â Â Â \\n"]],"parameters":[]}]],"parameters":[]},null],[4,"if",[[20,["model","order","lineItems"]]],null,{"statements":[[0,"            "],[6,"div"],[9,"class","ProductInfoContainer"],[7],[0," \\n"],[4,"if",[[25,"or",[[20,["isGamingAppV2Theme"]],[20,["isSaturnDesktop"]]],null]],null,{"statements":[[0,"                    "],[6,"div"],[9,"id","ProductHero"],[9,"class","cli_orderItemImage"],[10,"style",[26,["background-image: linear-gradient(180deg, rgba(23,23,23,0) 0%, #171717 100%), url(\'",[18,"heroImage"],"\');"]]],[7],[8],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"if",[[25,"and",[[20,["iconUri"]],[25,"or",[[20,["isGamingAppV2Theme"]],[20,["isSaturnDesktop"]]],null]],null]],null,{"statements":[[0,"                    "],[6,"img"],[9,"id","ProductImage"],[9,"class","cli_orderItemImage"],[10,"src",[26,[[18,"iconUri"]]]],[7],[8],[0,"\\n"]],"parameters":[]},null],[0,"                \\n"],[4,"if",[[20,["isSaturnDesktop"]]],null,{"statements":[[0,"                    "],[6,"div"],[9,"id","ProductContainer"],[9,"class","cli_orderItemContainer"],[10,"data-bi-name",[18,"lineItemTitle"],null],[10,"data-bi-id",[20,["model","order","firstLineItem","productId"]],null],[9,"data-bi-slot","0"],[7],[0,"\\n                    "],[6,"h1"],[9,"class","type-t2 cli_dialogTitle"],[7],[1,[18,"dialogTitle"],false],[8],[0,"\\n                    "],[6,"div"],[9,"class","saturnPriceContainer"],[7],[0,"\\n"],[4,"if",[[20,["showTotalAndTax"]]],null,{"statements":[[0,"                            "],[6,"div"],[9,"class","saturnTotal"],[7],[0,"\\n                                "],[1,[25,"formatted-price",null,[["number","currencyCode"],[[20,["model","order","firstLineItem","totalAmount"]],[20,["model","order","firstLineItem","currencyCode"]]]]],false],[0,"\\n                            "],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[25,"not",[[20,["orderTaxesIncluded"]]],null]],null,{"statements":[[0,"                            "],[6,"div"],[9,"class","saturnSubTotal"],[7],[0,"\\n"],[4,"if",[[20,["showTotalAndTax"]]],null,{"statements":[[0,"                                    "],[1,[25,"formatted-price",null,[["number","currencyCode"],[[20,["model","order","firstLineItem","listPrice"]],[20,["model","order","firstLineItem","currencyCode"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                                    "],[1,[25,"formatted-price",null,[["number","currencyCode"],[[20,["model","order","firstLineItem","totalAmount"]],[20,["model","order","firstLineItem","currencyCode"]]]]],false],[0,"\\n"]],"parameters":[]}],[0,"                            "],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[20,["showTotalAndTax"]]],null,{"statements":[[4,"if",[[20,["orderTaxesIncluded"]]],null,{"statements":[[0,"                                    "],[6,"div"],[9,"class","saturnTaxIncluded"],[7],[0,"\\n                                                "],[1,[25,"formatted-price",null,[["number","currencyCode","displayFormat"],[[20,["model","order","firstLineItem","taxAmount"]],[20,["model","order","firstLineItem","currencyCode"]],[20,["saturnDesktopPriceTaxString"]]]]],false],[0,"\\n                                    "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                                    "],[6,"div"],[9,"class","saturnTaxValue"],[7],[0,"\\n                                        "],[6,"span"],[9,"class","plusSign"],[7],[8],[0,"\\n                                        "],[1,[25,"formatted-price",null,[["number","currencyCode"],[[20,["model","order","firstLineItem","taxAmount"]],[20,["model","order","firstLineItem","currencyCode"]]]]],false],[0,"\\n                                        "],[6,"span"],[9,"class","salesTaxLegend"],[7],[1,[20,["strings","Mercury_Order_Sales_Tax"]],false],[8],[0,"\\n                                    "],[8],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null],[0,"                    "],[8],[0,"\\n                    "],[8],[0,"\\n"]],"parameters":[]},null],[0,"            "],[8],[0,"\\n\\n"],[4,"if",[[20,["isOfficeDIMEClient"]]],null,{"statements":[[4,"if",[[20,["needToAddPi"]]],null,{"statements":[[0,"                    "],[6,"div"],[7],[0,"\\n                        "],[6,"h1"],[9,"class","cli_purchasingProductHeader"],[7],[1,[18,"youArePurchasingProductMessage"],false],[8],[0,"\\n                    "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                    "],[6,"div"],[7],[0,"\\n                        "],[6,"h1"],[9,"class","cli_subscribeToCompleteHeader"],[7],[1,[20,["strings","Purchase_Subscribe_To_Complete_Title"]],false],[8],[0,"\\n                    "],[8],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null],[0,"\\n"],[4,"if",[[25,"and",[[20,["isMonthlyEquivalentPricingExperimentActive"]],[20,["model","order","isCheckingOut"]]],null]],null,{"statements":[[0,"                "],[1,[25,"component",[[20,["paymentInstrumentsComponentName"]]],[["model","buttonId","handleTransition","allowedPaymentInstruments","hasAllowedPaymentInstruments","isCsvSufficient","showBackupPi","showSelectBackupPiLink","hasPiIfRequired","showAddAddressLink","showSelectAddressLink","showProfileLink","isPiRequiredButFree"],[[20,["model"]],"ChangePi","handleTransition",[20,["model","piContainer","allowedPaymentInstruments"]],[20,["hasAllowedPaymentInstruments"]],[20,["isCsvSufficient"]],[20,["showBackupPi"]],[20,["showSelectBackupPiLink"]],[20,["hasPiIfRequired"]],[20,["showAddAddressLink"]],[20,["showSelectAddressLink"]],[20,["showProfileLink"]],[20,["model","isPiRequiredButFree"]]]]],false],[0,"\\n                "],[1,[25,"item-price-info-monthlyequivalent",null,[["orderLineItem","order"],[[20,["model","order","firstLineItem"]],[20,["model","order"]]]]],false],[0,"\\n                    "],[1,[25,"legal-terms",null,[["order","orderLineItem","actionText","clickToRedirect","isPiRequiredButFree","legalStrings","showSelectBackupPiLink","showBackupPi"],[[20,["model","order"]],[20,["model","order","firstLineItem"]],[20,["confirmButtonText"]],"viewTou",[20,["model","isPiRequiredButFree"]],[20,["legalStrings"]],[20,["showSelectBackupPiLink"]],[20,["showBackupPi"]]]]],false],[0,"\\n"],[4,"if",[[20,["showContactPreference"]]],null,{"statements":[[0,"                        "],[1,[25,"contact-preference",null,[["orderLineItems"],[[20,["model","order","lineItems"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},{"statements":[[4,"if",[[20,["isGamingAppGift"]]],null,{"statements":[[0,"                    "],[6,"div"],[9,"id","ProductContainer"],[9,"class","cli_orderItemContainer"],[10,"data-bi-name",[18,"lineItemTitle"],null],[10,"data-bi-id",[20,["model","order","firstLineItem","productId"]],null],[9,"data-bi-slot","0"],[7],[0,"\\n                        "],[6,"h1"],[9,"class","type-t2 cli_dialogTitle"],[7],[1,[20,["strings","Purchase_Gift_ConfirmGiftDetails"]],false],[8],[0,"\\n                        "],[6,"div"],[9,"id","GiftPurchaseContainer"],[7],[0,"\\n                            "],[6,"div"],[9,"class","title-price-container"],[9,"id","title-price-container"],[7],[0,"\\n                                "],[6,"img"],[9,"id","GamingAppGiftProductImage"],[9,"class","cli_giftProductImage"],[10,"src",[26,[[18,"iconUri"]]]],[7],[8],[0,"\\n                                "],[6,"div"],[9,"class","type-t3 gift-title-container"],[7],[1,[18,"dialogTitle"],false],[8],[0,"\\n                                "],[6,"div"],[9,"class","gift-price-container"],[7],[0,"\\n                                    "],[1,[25,"component",[[20,["itemPriceInfoComponentName"]]],[["orderLineItem"],[[20,["model","order","firstLineItem"]]]]],false],[0,"\\n                                "],[8],[0,"\\n                            "],[8],[0,"\\n                        "],[8],[0,"\\n                    "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[4,"unless",[[20,["isSaturnDesktop"]]],null,{"statements":[[0,"                        "],[6,"div"],[9,"id","ProductContainer"],[9,"class","cli_orderItemContainer"],[10,"data-bi-name",[18,"lineItemTitle"],null],[10,"data-bi-id",[20,["model","order","firstLineItem","productId"]],null],[9,"data-bi-slot","0"],[7],[0,"\\n"],[4,"unless",[[20,["isModernXboxClient"]]],null,{"statements":[[0,"                                "],[6,"h1"],[9,"class","type-t2 cli_dialogTitle"],[7],[1,[18,"dialogTitle"],false],[8],[0,"\\n"]],"parameters":[]},null],[0,"                        "],[8],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}],[0,"\\n                "],[6,"div"],[10,"class",[26,["moreScroll ",[18,"mercurySubscriptionClass"]]]],[7],[0,"\\n"],[4,"if",[[20,["isModernXboxClient"]]],null,{"statements":[[4,"if",[[20,["isSaturnXbox"]]],null,{"statements":[[0,"                            "],[6,"div"],[9,"class","orderConfirmPaymentLabel"],[7],[1,[20,["strings","Purchase_Saturn_ConfirmPaymentTitle"]],false],[8],[0,"\\n"]],"parameters":[]},null],[0,"                        "],[6,"div"],[9,"class","orderSummaryLabel"],[7],[1,[20,["strings","Mercury_Order_Summary"]],false],[8],[0,"\\n                        "],[6,"div"],[9,"id","OrderSummary"],[7],[0,"\\n                            "],[6,"span"],[9,"class","screen-reader"],[7],[1,[20,["strings","Mercury_Order_Summary"]],false],[8],[0,"\\n                            "],[6,"div"],[9,"class","orderSubtotalSection"],[7],[0,"\\n                                "],[6,"div"],[9,"class","orderSubtotalText"],[7],[0,"\\n                                    "],[6,"span"],[7],[1,[20,["strings","Purchase_Subtotal"]],false],[8],[0,"\\n                                "],[8],[0,"\\n                                "],[6,"div"],[9,"class","orderSubtotalAmount"],[7],[0,"\\n"],[4,"if",[[20,["mercuryShowSubscriptionTrialPrice"]]],null,{"statements":[[0,"                                        "],[6,"span"],[9,"class","strikethrough"],[7],[1,[25,"formatted-price",null,[["number","currencyCode","displayFormat"],[[20,["mercuryRecurrencePrice"]],[20,["model","order","firstLineItem","currencyCode"]],[20,["mercuryFormattedListPrice"]]]]],false],[8],[0,"\\n                                        "],[6,"span"],[7],[1,[20,["strings","Purchase_SubscriptionTrial_Text"]],false],[8],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[20,["shouldShowMercuryStrikethrough"]]],null,{"statements":[[0,"                                            "],[6,"span"],[9,"class","strikethrough"],[7],[1,[25,"formatted-price",null,[["number","currencyCode","displayFormat"],[[20,["model","order","firstLineItem","retailPrice"]],[20,["model","order","firstLineItem","currencyCode"]],[20,["mercuryFormattedRetailPrice"]]]]],false],[8],[0,"\\n"]],"parameters":[]},null],[0,"                                            "],[1,[25,"formatted-price",null,[["number","currencyCode","displayFormat"],[[20,["model","order","firstLineItem","listPrice"]],[20,["model","order","firstLineItem","currencyCode"]],[20,["mercuryFormattedListPrice"]]]]],false],[0,"\\n"]],"parameters":[]}],[0,"                                "],[8],[0,"\\n                            "],[8],[0,"\\n"],[4,"if",[[25,"not",[[20,["orderTaxesIncluded"]]],null]],null,{"statements":[[0,"                                "],[6,"div"],[9,"class","orderSalesTaxSection"],[7],[0,"\\n                                    "],[6,"div"],[9,"class","orderSalesTaxText"],[7],[0,"\\n                                        "],[6,"span"],[7],[1,[20,["strings","Mercury_Order_Sales_Tax"]],false],[8],[0,"\\n                                    "],[8],[0,"\\n                                    "],[6,"div"],[9,"class","orderSalesTaxAmount"],[7],[0,"\\n"],[4,"if",[[20,["showTotalAndTax"]]],null,{"statements":[[0,"                                        "],[1,[25,"formatted-price",null,[["number","currencyCode"],[[20,["model","order","firstLineItem","taxAmount"]],[20,["model","order","firstLineItem","currencyCode"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                                        Â \\n"]],"parameters":[]}],[0,"                                    "],[8],[0,"\\n                                "],[8],[0,"\\n"]],"parameters":[]},null],[0,"                            "],[6,"hr"],[9,"class","orderLineSeparator"],[7],[8],[0,"\\n                            "],[6,"div"],[9,"class","orderTotalSection"],[7],[0,"\\n                                "],[6,"div"],[9,"class","orderTotalText"],[7],[0,"\\n                                    "],[6,"span"],[7],[1,[20,["strings","Mercury_Order_Total"]],false],[8],[0,"\\n                                "],[8],[0,"\\n                                "],[6,"div"],[9,"id","OrderTotalAmount"],[9,"class","orderTotalAmount"],[7],[0,"\\n"],[4,"if",[[20,["showSaturnXboxWithoutTaxes"]]],null,{"statements":[[0,"                                        "],[1,[25,"formatted-price",null,[["number","currencyCode","displayFormat"],[[20,["model","order","firstLineItem","listPrice"]],[20,["model","order","firstLineItem","currencyCode"]],[20,["mercuryPriceFormatWithTaxString"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[20,["showTotalAndTax"]]],null,{"statements":[[4,"if",[[20,["orderTaxesIncluded"]]],null,{"statements":[[0,"                                                    "],[1,[25,"formatted-price",null,[["number","currencyCode","displayFormat"],[[20,["model","order","firstLineItem","totalAmount"]],[20,["model","order","firstLineItem","currencyCode"]],[20,["mercuryPriceFormatWithTaxString"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                                                    "],[1,[25,"formatted-price",null,[["number","currencyCode"],[[20,["model","order","firstLineItem","totalAmount"]],[20,["model","order","firstLineItem","currencyCode"]]]]],false],[0,"\\n"]],"parameters":[]}]],"parameters":[]},{"statements":[[0,"                                                Â \\n"]],"parameters":[]}]],"parameters":[]}],[0,"                                "],[8],[0,"\\n                            "],[8],[0,"\\n"],[4,"if",[[20,["showKoreaTransactionFee"]]],null,{"statements":[[4,"if",[[20,["isGamingAppV2Theme"]]],null,{"statements":[],"parameters":[]},{"statements":[[4,"if",[[20,["isModernXboxClientGift"]]],null,{"statements":[[0,"                                    "],[6,"div"],[9,"class","legaltransactionfeemercurygifttext"],[7],[0,"\\n                                        "],[6,"p"],[7],[1,[25,"if",[[20,["isKoreaTransactionFeeV1Enabled"]],[20,["strings","Purchase_Korea_International_Transaction_Fee_V1"]],[20,["strings","Purchase_Korea_International_Transaction_Fee"]]],null],false],[8],[0,"\\n                                    "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                                    "],[6,"div"],[9,"class","legaltransactionfeetext"],[7],[0,"\\n                                        "],[6,"p"],[7],[1,[25,"if",[[20,["isKoreaTransactionFeeV1Enabled"]],[20,["strings","Purchase_Korea_International_Transaction_Fee_V1"]],[20,["strings","Purchase_Korea_International_Transaction_Fee"]]],null],false],[8],[0,"\\n                                    "],[8],[0,"\\n                                "]],"parameters":[]}]],"parameters":[]}]],"parameters":[]},null],[4,"if",[[20,["showArgentinaTransactionFee"]]],null,{"statements":[[4,"if",[[20,["isGamingAppV2Theme"]]],null,{"statements":[],"parameters":[]},{"statements":[[4,"if",[[20,["isModernXboxClientGift"]]],null,{"statements":[[0,"                                    "],[6,"div"],[9,"class","legaltransactionfeemercurygifttext"],[7],[0,"\\n"],[4,"if",[[20,["isArgentinaTransactionFeeV1Enabled"]]],null,{"statements":[[0,"                                            "],[6,"p"],[7],[1,[20,["strings","Purchase_Argentina_International_Transaction_Fee_V1"]],false],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                                            "],[6,"p"],[7],[1,[20,["strings","Purchase_Argentina_International_Transaction_Fee"]],false],[8],[0,"\\n"]],"parameters":[]}],[0,"                                    "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                                    "],[6,"div"],[9,"class","legaltransactionfeetext"],[7],[0,"\\n"],[4,"if",[[20,["isArgentinaTransactionFeeV1Enabled"]]],null,{"statements":[[0,"                                            "],[6,"p"],[7],[1,[20,["strings","Purchase_Argentina_International_Transaction_Fee_V1"]],false],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                                            "],[6,"p"],[7],[1,[20,["strings","Purchase_Argentina_International_Transaction_Fee"]],false],[8],[0,"\\n"]],"parameters":[]}],[0,"                                    "],[8],[0,"\\n                                "]],"parameters":[]}]],"parameters":[]}]],"parameters":[]},null],[0,"                        "],[8],[0,"\\n\\n                        "],[6,"div"],[9,"id","PaymentSummary"],[10,"class",[18,"paymentSummaryClass"],null],[7],[0,"\\n"],[4,"if",[[20,["hasAllowedPaymentInstruments"]]],null,{"statements":[[0,"                                "],[6,"div"],[9,"class","orderPayWith"],[7],[0,"\\n                                    "],[1,[25,"reseller-detail",null,[["order","selectedPi"],[[20,["model","order"]],[20,["model","selectedPi"]]]]],false],[0,"\\n                                    "],[6,"span"],[7],[1,[20,["strings","Mercury_Order_Pay_With"]],false],[8],[0,"\\n                                "],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[25,"and",[[20,["isModernXboxClient"]],[25,"and",[[20,["csvBalance"]],[25,"not",[[20,["isCsvSufficient"]]],null]],null]],null]],null,{"statements":[[0,"                                "],[6,"div"],[9,"class","orderPayRemainingBalanceWith"],[7],[0,"\\n                                    "],[6,"span"],[7],[1,[20,["strings","Mercury_Pay_Remaining_With_NoBalance"]],false],[8],[0,"\\n                                "],[8],[0,"\\n"]],"parameters":[]},null],[0,"                            "],[1,[25,"component",[[20,["paymentInstrumentsComponentName"]]],[["mercuryStopShowingUpdate","model","buttonId","handleTransition","allowedPaymentInstruments","hasAllowedPaymentInstruments","isCsvSufficient","showBackupPi","showSelectBackupPiLink","hasPiIfRequired","showAddAddressLink","showSelectAddressLink","showProfileLink","isPiRequiredButFree"],[[20,["mercuryStopShowingUpdate"]],[20,["model"]],"ChangePi","handleTransition",[20,["model","piContainer","allowedPaymentInstruments"]],[20,["hasAllowedPaymentInstruments"]],[20,["isCsvSufficient"]],[20,["showBackupPi"]],[20,["showSelectBackupPiLink"]],[20,["hasPiIfRequired"]],[20,["showAddAddressLink"]],[20,["showSelectAddressLink"]],[20,["showProfileLink"]],[20,["model","isPiRequiredButFree"]]]]],false],[0,"\\n                        \\n"],[4,"if",[[20,["isGift"]]],null,{"statements":[[0,"                                "],[1,[25,"gift-details",null,[["order","handleTransition"],[[20,["model","order"]],"handleTransition"]]],false],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"if",[[25,"and",[[20,["isGiftable"]],[20,["isAskAPurchaserEligible"]]],null]],null,{"statements":[[0,"                                "],[6,"button"],[9,"class","selectedPi cli_askAPurchaserButton"],[3,"action",[[19,0,[]],"startAskPurchaserFlow"]],[7],[0,"\\n                                    "],[6,"div"],[9,"class","piDisplayData"],[7],[0,"\\n                                        "],[6,"div"],[7],[1,[20,["strings","AskAPurchaser_Confirm_Button_Text"]],false],[8],[0,"\\n                                    "],[8],[0,"\\n                                "],[8],[0,"\\n"]],"parameters":[]},null],[0,"                        "],[8],[0,"\\n\\n                        "],[6,"img"],[10,"class",[26,["orderDetailsImage ",[18,"mercurySubscriptionClass"]]]],[10,"src",[26,[[18,"posterImage"]]]],[7],[8],[0,"\\n                        "],[6,"img"],[9,"class","orderRatingImage"],[10,"src",[26,[[18,"mercuryRatingImage"]]]],[7],[8],[0,"\\n                        "],[6,"div"],[10,"class",[26,["orderDetailsContainer ",[18,"mercurySubscriptionClass"]]]],[7],[0,"\\n                            "],[6,"div"],[9,"class","orderDetailsTitle"],[7],[0,"\\n                                "],[6,"span"],[7],[1,[18,"dialogTitle"],false],[8],[0,"\\n                            "],[8],[0,"\\n                            "],[6,"div"],[9,"class","orderDetailsPrice"],[7],[0,"\\n                                "],[1,[18,"mercuryFormattedPrice"],false],[0,"\\n"],[4,"if",[[20,["shouldShowMercuryStrikethrough"]]],null,{"statements":[[0,"                                    "],[6,"span"],[9,"class","strikethrough"],[7],[1,[25,"formatted-price",null,[["number","currencyCode"],[[20,["model","order","firstLineItem","retailPrice"]],[20,["model","order","firstLineItem","currencyCode"]]]]],false],[8],[0,"\\n"]],"parameters":[]},null],[0,"                                "],[6,"span"],[9,"class","final"],[7],[1,[25,"formatted-price",null,[["number","currencyCode"],[[20,["model","order","firstLineItem","listPrice"]],[20,["model","order","firstLineItem","currencyCode"]]]]],false],[8],[0,"\\n                            "],[8],[0,"\\n"],[4,"if",[[20,["hasCompatibilityWarning"]]],null,{"statements":[[0,"                                "],[6,"div"],[9,"class","compatibilityWarning"],[7],[0,"\\n                                     "],[6,"div"],[9,"class","compatibilityIcon"],[7],[0,"\\n"],[4,"if",[[25,"eq",[[20,["compatibilityWarningLevel"]],"PartiallyIncompatible"],null]],null,{"statements":[[0,"                                            "],[6,"i"],[9,"class","icon blend-icon-info"],[7],[8],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[25,"eq",[[20,["compatibilityWarningLevel"]],"Incompatible"],null]],null,{"statements":[[0,"                                            "],[6,"i"],[9,"class","icon blend-icon-status-circle-outer"],[7],[8],[0,"\\n                                            "],[6,"i"],[9,"class","icon blend-icon-status-circle-exclamation"],[7],[8],[0,"\\n                                        "]],"parameters":[]},null]],"parameters":[]}],[0,"                                    "],[8],[0,"\\n                                    "],[6,"div"],[9,"class","compatibilityString"],[7],[0,"\\n                                        "],[1,[18,"compatibilityWarningString"],false],[0,"\\n                                    "],[8],[0,"\\n                                "],[8],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"if",[[25,"and",[[20,["displaySubTitles"]],[20,["isModernXboxClient"]]],null]],null,{"statements":[[0,"                                "],[6,"div"],[9,"class","metaContainer"],[7],[0,"\\n"],[4,"if",[[20,["lineItemSubTitle1"]]],null,{"statements":[[0,"                                        "],[6,"div"],[9,"class","cli_subTitle1"],[7],[1,[18,"lineItemSubTitle1"],false],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[20,["lineItemSubTitle2"]]],null,{"statements":[[0,"                                        "],[6,"div"],[9,"class","cli_subTitle2"],[7],[1,[18,"lineItemSubTitle2"],false],[8],[0,"\\n"]],"parameters":[]},null],[0,"                                "],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[20,["mercurySubscriptionClass"]]],null,{"statements":[[4,"unless",[[20,["isNewLegalTextLayoutEnabled"]]],null,{"statements":[[0,"                                    "],[6,"div"],[9,"class","mercurySubscriptionLegalText"],[7],[0,"\\n                                        "],[1,[25,"legal-terms",null,[["order","orderLineItem","actionText","clickToRedirect","isPiRequiredButFree","legalStrings","showSelectBackupPiLink","showBackupPi"],[[20,["model","order"]],[20,["model","order","firstLineItem"]],[20,["confirmButtonText"]],"viewTou",[20,["model","isPiRequiredButFree"]],[20,["legalStrings"]],[20,["showSelectBackupPiLink"]],[20,["showBackupPi"]]]]],false],[0,"\\n                                    "],[8],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"                        "],[8],[0,"\\n"],[4,"if",[[20,["isMercuryDunningScenario"]]],null,{"statements":[[0,"                            "],[6,"div"],[9,"class","mercuryDunningText"],[7],[0,"\\n                                "],[6,"span"],[7],[1,[18,"mercuryDunningText"],false],[8],[0,"\\n                            "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                            "],[6,"div"],[9,"class","orderDetailsRatings"],[7],[0,"\\n                                "],[6,"div"],[9,"class","descriptors"],[7],[6,"span"],[7],[1,[18,"mercuryDescriptors"],false],[8],[8],[0,"\\n"],[4,"if",[[20,["shouldShowMercurySeparator"]]],null,{"statements":[[0,"                                    "],[6,"hr"],[9,"class","orderLineSeparator ratingsSeparator"],[7],[8],[0,"\\n"]],"parameters":[]},null],[0,"                                "],[6,"div"],[9,"class","interactiveElements"],[7],[6,"span"],[7],[1,[18,"mercuryInteractiveElements"],true],[8],[8],[0,"\\n                            "],[8],[0,"\\n"]],"parameters":[]}]],"parameters":[]},{"statements":[[4,"if",[[25,"or",[[20,["model","isPiRequiredButFree"]],[20,["model","isFreeNonSubscriptionProduct"]]],null]],null,{"statements":[[0,"                            "],[6,"div"],[9,"class","cli_freeLabel"],[7],[1,[20,["strings","Shared_Label_Free"]],false],[8],[0,"\\n"]],"parameters":[]},{"statements":[[4,"unless",[[20,["isSaturnDesktop"]]],null,{"statements":[[4,"if",[[20,["isGamingAppGift"]]],null,{"statements":[],"parameters":[]},{"statements":[[0,"                                    "],[1,[25,"component",[[20,["itemPriceInfoComponentName"]]],[["orderLineItem","order"],[[20,["model","order","firstLineItem"]],[20,["model","order"]]]]],false],[0,"\\n"],[4,"if",[[20,["showKoreaTransactionFee"]]],null,{"statements":[[0,"                                        "],[6,"div"],[9,"class","legaltransactionfeetext"],[7],[0,"\\n                                            "],[6,"p"],[7],[1,[25,"if",[[20,["isKoreaTransactionFeeV1Enabled"]],[20,["strings","Purchase_Korea_International_Transaction_Fee_V1"]],[20,["strings","Purchase_Korea_International_Transaction_Fee"]]],null],false],[8],[0,"\\n                                        "],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[20,["showArgentinaTransactionFee"]]],null,{"statements":[[0,"                                        "],[6,"div"],[9,"class","legaltransactionfeetext"],[7],[0,"\\n"],[4,"if",[[20,["isArgentinaTransactionFeeV1Enabled"]]],null,{"statements":[[0,"                                                "],[6,"p"],[7],[1,[20,["strings","Purchase_Argentina_International_Transaction_Fee_V1"]],false],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                                                "],[6,"p"],[7],[1,[20,["strings","Purchase_Argentina_International_Transaction_Fee"]],false],[8],[0,"\\n"]],"parameters":[]}],[0,"                                        "],[8],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}]],"parameters":[]},null]],"parameters":[]}],[4,"if",[[20,["hasXPriceAffirmationString"]]],null,{"statements":[[0,"                            "],[6,"div"],[9,"class","AffirmationText"],[7],[1,[18,"getXPriceAffirmationString"],false],[8],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}],[0,"\\n"],[4,"if",[[25,"and",[[20,["displaySubTitles"]],[25,"not",[[20,["isModernXboxClient"]]],null]],null]],null,{"statements":[[0,"                        "],[6,"div"],[9,"class","metaContainer"],[7],[0,"\\n"],[4,"if",[[20,["lineItemSubTitle1"]]],null,{"statements":[[0,"                                "],[6,"div"],[9,"class","cli_subTitle1"],[7],[1,[18,"lineItemSubTitle1"],false],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[20,["lineItemSubTitle2"]]],null,{"statements":[[0,"                                "],[6,"div"],[9,"class","cli_subTitle2"],[7],[1,[18,"lineItemSubTitle2"],false],[8],[0,"\\n"]],"parameters":[]},null],[0,"                        "],[8],[0,"\\n"]],"parameters":[]},null],[0,"                    \\n"],[4,"if",[[20,["isGamingAppV2Theme"]]],null,{"statements":[],"parameters":[]},{"statements":[[4,"if",[[20,["isGamingAppGift"]]],null,{"statements":[],"parameters":[]},{"statements":[[4,"if",[[20,["isModernXboxClientGift"]]],null,{"statements":[[4,"unless",[[20,["isNewLegalTextLayoutEnabled"]]],null,{"statements":[[0,"                                "],[6,"div"],[9,"class","mercuryGiftLegalTermsContainer"],[7],[0,"                             \\n                                    "],[1,[25,"legal-terms",null,[["order","orderLineItem","actionText","clickToRedirect","isPiRequiredButFree","legalStrings","showSelectBackupPiLink","showBackupPi"],[[20,["model","order"]],[20,["model","order","firstLineItem"]],[20,["confirmButtonText"]],"viewTou",[20,["model","isPiRequiredButFree"]],[20,["legalStrings"]],[20,["showSelectBackupPiLink"]],[20,["showBackupPi"]]]]],false],[0,"\\n                                "],[8],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},{"statements":[[4,"unless",[[20,["isNewLegalTextLayoutEnabled"]]],null,{"statements":[[4,"if",[[25,"and",[[20,["isModernXboxClient"]],[25,"not",[[25,"or",[[20,["mercurySubscriptionClass"]],[20,["saturnSubscriptionClass"]]],null]],null]],null]],null,{"statements":[[0,"                                    "],[6,"button"],[9,"id","btnMercuryLegalTerms"],[9,"class","btn btnMercuryLegalTerms"],[3,"action",[[19,0,[]],"showMercuryLegalModal"]],[7],[0,"\\n                                        "],[1,[25,"legal-terms",null,[["order","orderLineItem","actionText","clickToRedirect","isPiRequiredButFree","legalStrings","showSelectBackupPiLink","showBackupPi"],[[20,["model","order"]],[20,["model","order","firstLineItem"]],[20,["confirmButtonText"]],"viewTou",[20,["model","isPiRequiredButFree"]],[20,["legalStrings"]],[20,["showSelectBackupPiLink"]],[20,["showBackupPi"]]]]],false],[0,"\\n"],[4,"if",[[20,["shouldShowMoreText"]]],null,{"statements":[[0,"                                            "],[6,"div"],[9,"class","mercuryLegalTermsMore"],[7],[0,"\\n                                                "],[1,[20,["strings","Shared_Label_More"]],false],[0,"\\n                                            "],[8],[0,"\\n"]],"parameters":[]},null],[0,"                                    "],[8],[0,"\\n                                    "],[6,"div"],[10,"class",[26,["mercuryLegalModal ",[18,"isMercuryLegalModalVisible"]]]],[7],[0,"\\n                                        "],[6,"div"],[9,"class","mercuryLegalModalContainer"],[7],[0,"\\n                                            "],[6,"div"],[9,"class","fullLegalTextContainer"],[7],[0,"\\n                                                "],[1,[25,"legal-terms",null,[["order","orderLineItem","actionText","clickToRedirect","isPiRequiredButFree","legalStrings","showSelectBackupPiLink","showBackupPi"],[[20,["model","order"]],[20,["model","order","firstLineItem"]],[20,["confirmButtonText"]],"viewTou",[20,["model","isPiRequiredButFree"]],[20,["legalStrings"]],[20,["showSelectBackupPiLink"]],[20,["showBackupPi"]]]]],false],[0,"\\n                                            "],[8],[0,"\\n                                            "],[6,"div"],[9,"class","ctaBar"],[7],[0,"\\n                                                "],[6,"button"],[9,"class","btn btnMercuryLegalModalClose"],[3,"action",[[19,0,[]],"hideMercuryLegalModal"]],[7],[0,"\\n                                                    "],[1,[20,["strings","Button_Close"]],false],[0,"\\n                                                "],[8],[0,"\\n                                            "],[8],[0,"\\n                                        "],[8],[0,"\\n                                    "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[25,"not",[[20,["isModernXboxClient"]]],null]],null,{"statements":[[0,"                                    "],[1,[25,"legal-terms",null,[["order","orderLineItem","actionText","clickToRedirect","isPiRequiredButFree","legalStrings","showSelectBackupPiLink","showBackupPi"],[[20,["model","order"]],[20,["model","order","firstLineItem"]],[20,["confirmButtonText"]],"viewTou",[20,["model","isPiRequiredButFree"]],[20,["legalStrings"]],[20,["showSelectBackupPiLink"]],[20,["showBackupPi"]]]]],false],[0,"\\n                                "]],"parameters":[]},null]],"parameters":[]}],[4,"if",[[25,"or",[[20,["isGamingApp"]],[20,["isSaturnDesktop"]]],null]],null,{"statements":[[0,"                                    "],[6,"p"],[9,"id","AccountText"],[9,"class","collapsibleContent cli_AccountText"],[7],[1,[18,"accountInformation"],false],[8],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"\\n"],[4,"if",[[20,["isModernXboxClient"]]],null,{"statements":[[0,"                                "],[6,"div"],[9,"class","mercuryEnotaTerms"],[7],[0,"\\n                                    "],[1,[25,"message-with-links",null,[["messageParts","action","selectedPi","tagName","class"],[[20,["eNotaTermParts"]],"viewEnotaTerms",[20,["model","selectedPi"]],"p","enotaTerms"]]],false],[0,"\\n                                "],[8],[0,"\\n"],[4,"if",[[20,["mercuryShowSubscriptionTrialPrice"]]],null,{"statements":[[0,"                                    "],[6,"span"],[9,"class","trialMessage"],[7],[1,[18,"mercuryTrialWithRecurrenceMessage"],false],[8],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},{"statements":[[0,"                                "],[1,[25,"message-with-links",null,[["messageParts","action","selectedPi","tagName","class"],[[20,["eNotaTermParts"]],"viewEnotaTerms",[20,["model","selectedPi"]],"p","enotaTerms"]]],false],[0,"\\n"]],"parameters":[]}],[0,"                        "]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}],[0,"\\n"],[4,"if",[[20,["showMobiTerms"]]],null,{"statements":[[0,"                        "],[6,"div"],[9,"class","mobiTermsWrapper"],[7],[0,"\\n                            "],[1,[25,"mobi-terms",null,[["selectedPi"],[[20,["mobiPi"]]]]],false],[0,"\\n                        "],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[20,["model","selectedPi","display_info","isRedirectType"]]],null,{"statements":[[0,"                        "],[6,"div"],[7],[0,"\\n                            "],[6,"p"],[9,"class","cli_redirectInformationContainer"],[9,"id","RetryTextContainer"],[7],[0,"\\n                                "],[1,[20,["strings","Purchase_Message_Redirection"]],false],[0,"\\n                            "],[8],[0,"\\n                        "],[8],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"if",[[25,"not",[[20,["isModernXboxClient"]]],null]],null,{"statements":[[4,"if",[[20,["isSaturnDesktop"]]],null,{"statements":[[4,"if",[[20,["showTotalAndTax"]]],null,{"statements":[[0,"                                "],[1,[25,"component",[[20,["paymentInstrumentsComponentName"]]],[["model","buttonId","handleTransition","allowedPaymentInstruments","hasAllowedPaymentInstruments","isCsvSufficient","showBackupPi","showSelectBackupPiLink","hasPiIfRequired","showAddAddressLink","showSelectAddressLink","showProfileLink","isPiRequiredButFree","remainingBalance","payWithRemainingFormat","showTotalAndTax"],[[20,["model"]],"ChangePi","handleTransition",[20,["model","piContainer","allowedPaymentInstruments"]],[20,["hasAllowedPaymentInstruments"]],[20,["isCsvSufficient"]],[20,["showBackupPi"]],[20,["showSelectBackupPiLink"]],[20,["hasPiIfRequired"]],[20,["showAddAddressLink"]],[20,["showSelectAddressLink"]],[20,["showProfileLink"]],[20,["model","isPiRequiredButFree"]],[20,["remainingBalance"]],[20,["payWithRemainingFormat"]],[20,["showTotalAndTax"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                                "],[1,[25,"component",[[20,["paymentInstrumentsComponentName"]]],[["model","buttonId","handleTransition","allowedPaymentInstruments","hasAllowedPaymentInstruments","isCsvSufficient","showBackupPi","showSelectBackupPiLink","hasPiIfRequired","showAddAddressLink","showSelectAddressLink","showProfileLink","isPiRequiredButFree"],[[20,["model"]],"ChangePi","handleTransition",[20,["model","piContainer","allowedPaymentInstruments"]],[20,["hasAllowedPaymentInstruments"]],[20,["isCsvSufficient"]],[20,["showBackupPi"]],[20,["showSelectBackupPiLink"]],[20,["hasPiIfRequired"]],[20,["showAddAddressLink"]],[20,["showSelectAddressLink"]],[20,["showProfileLink"]],[20,["model","isPiRequiredButFree"]]]]],false],[0,"\\n"]],"parameters":[]}]],"parameters":[]},{"statements":[[0,"                            "],[1,[25,"component",[[20,["paymentInstrumentsComponentName"]]],[["model","buttonId","handleTransition","allowedPaymentInstruments","hasAllowedPaymentInstruments","isCsvSufficient","showBackupPi","showSelectBackupPiLink","hasPiIfRequired","showAddAddressLink","showSelectAddressLink","showProfileLink","isPiRequiredButFree"],[[20,["model"]],"ChangePi","handleTransition",[20,["model","piContainer","allowedPaymentInstruments"]],[20,["hasAllowedPaymentInstruments"]],[20,["isCsvSufficient"]],[20,["showBackupPi"]],[20,["showSelectBackupPiLink"]],[20,["hasPiIfRequired"]],[20,["showAddAddressLink"]],[20,["showSelectAddressLink"]],[20,["showProfileLink"]],[20,["model","isPiRequiredButFree"]]]]],false],[0,"\\n"]],"parameters":[]}],[4,"if",[[25,"and",[[20,["isGiftable"]],[20,["isAskAPurchaserEligible"]]],null]],null,{"statements":[[0,"                            "],[6,"button"],[9,"class","selectedPi cli_askAPurchaserButton"],[3,"action",[[19,0,[]],"startAskPurchaserFlow"]],[7],[0,"\\n                                "],[6,"div"],[9,"class","piDisplayData"],[7],[0,"\\n                                    "],[6,"div"],[7],[1,[20,["strings","AskAPurchaser_Confirm_Button_Text"]],false],[8],[0,"\\n                                "],[8],[0,"\\n                            "],[8],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"\\n"],[4,"if",[[20,["showRewardsIncentive"]]],null,{"statements":[[0,"                        "],[6,"div"],[9,"class","proactive_rewards metaContainer"],[7],[0,"\\n                            "],[1,[20,["strings","Payment_Incentive_Proactive"]],false],[0,"\\n                        "],[8],[0,"\\n                        "],[6,"div"],[9,"class","proactive_legalese metaContainer"],[7],[0,"\\n                            "],[1,[20,["strings","Payment_Incentive_Legal"]],false],[0,"\\n                        "],[8],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"unless",[[20,["isNewLegalTextLayoutEnabled"]]],null,{"statements":[[4,"if",[[20,["showCheckBoxContainer"]]],null,{"statements":[[0,"                            "],[6,"div"],[9,"class","mainCheckBoxContainer"],[7],[0,"\\n"],[4,"if",[[20,["autoRenewalConsentRequired"]]],null,{"statements":[[0,"                                    "],[1,[25,"auto-renewal-consent",null,[["string","controller"],[[20,["strings"]],[19,0,[]]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"                                    \\n"],[4,"if",[[20,["showContactPreference"]]],null,{"statements":[[0,"                                    "],[1,[25,"contact-preference",null,[["orderLineItems"],[[20,["model","order","lineItems"]]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"                            "],[8],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"                    \\n"],[4,"if",[[20,["saturnSubscriptionClass"]]],null,{"statements":[[0,"                        "],[6,"div"],[9,"class","saturnSubscriptionLegalText"],[7],[0,"\\n                            "],[1,[25,"legal-terms",null,[["order","orderLineItem","actionText","clickToRedirect","isPiRequiredButFree","legalStrings","showSelectBackupPiLink","showBackupPi"],[[20,["model","order"]],[20,["model","order","firstLineItem"]],[20,["confirmButtonText"]],"viewTou",[20,["model","isPiRequiredButFree"]],[20,["legalStrings"]],[20,["showSelectBackupPiLink"]],[20,["showBackupPi"]]]]],false],[0,"\\n                        "],[8],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"if",[[25,"and",[[20,["isGift"]],[25,"not",[[20,["isModernXboxClient"]]],null]],null]],null,{"statements":[[0,"                        "],[1,[25,"gift-details",null,[["order","handleTransition"],[[20,["model","order"]],"handleTransition"]]],false],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"if",[[25,"or",[[20,["isGamingAppV2Theme"]],[20,["isGamingAppGift"]]],null]],null,{"statements":[[4,"unless",[[20,["isNewLegalTextLayoutEnabled"]]],null,{"statements":[[0,"                            "],[1,[25,"legal-terms",null,[["order","orderLineItem","actionText","clickToRedirect","isPiRequiredButFree","legalStrings","showSelectBackupPiLink","showBackupPi"],[[20,["model","order"]],[20,["model","order","firstLineItem"]],[20,["confirmButtonText"]],"viewTou",[20,["model","isPiRequiredButFree"]],[20,["legalStrings"]],[20,["showSelectBackupPiLink"]],[20,["showBackupPi"]]]]],false],[0,"\\n"],[4,"if",[[25,"not",[[20,["isGamingAppGift"]]],null]],null,{"statements":[[0,"                                "],[6,"p"],[9,"id","AccountText"],[9,"class","collapsibleContent cli_AccountText"],[7],[1,[18,"accountInformation"],false],[8],[0,"\\n"]],"parameters":[]},null],[0,"                            "],[1,[25,"message-with-links",null,[["messageParts","action","selectedPi","tagName"],[[20,["eNotaTermParts"]],"viewEnotaTerms",[20,["model","selectedPi"]],"p"]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"                    \\n                "],[8],[0,"\\n"]],"parameters":[]}]],"parameters":[]},{"statements":[[0,"            "],[6,"h2"],[9,"class","type-t3 cli_noItemsMessage"],[9,"data-bi-name","NoItemsMessage"],[9,"data-bi-slot","0"],[7],[0,"\\n                "],[1,[20,["strings","Purchase_Message_NoItems"]],false],[0,"\\n            "],[8],[0,"\\n"]],"parameters":[]}],[0,"\\n"],[4,"if",[[20,["isNewLegalTextLayoutEnabled"]]],null,{"statements":[[4,"if",[[20,["model","order","lineItems"]]],null,{"statements":[[0,"                "],[6,"div"],[10,"class",[26,["moreScroll marginTop ",[18,"mercurySubscriptionClass"]]]],[7],[0,"\\n"],[4,"if",[[20,["isModernXboxClient"]]],null,{"statements":[[0,"                        "],[6,"div"],[10,"class",[26,["orderDetailsContainer ",[18,"mercurySubscriptionClass"]]]],[7],[0,"\\n"],[4,"if",[[20,["mercurySubscriptionClass"]]],null,{"statements":[[0,"                                "],[6,"div"],[9,"class","mercurySubscriptionLegalText"],[7],[0,"\\n                                    "],[1,[25,"legal-terms",null,[["order","orderLineItem","actionText","clickToRedirect","isPiRequiredButFree","legalStrings","showSelectBackupPiLink","showBackupPi"],[[20,["model","order"]],[20,["model","order","firstLineItem"]],[20,["confirmButtonText"]],"viewTou",[20,["model","isPiRequiredButFree"]],[20,["legalStrings"]],[20,["showSelectBackupPiLink"]],[20,["showBackupPi"]]]]],false],[0,"\\n                                "],[8],[0,"\\n"]],"parameters":[]},null],[0,"                            "],[2," mercurySubscriptionClass "],[0,"\\n                        "],[8],[0,"\\n"]],"parameters":[]},null],[0,"                    "],[2," isModernXboxClient "],[0,"\\n"],[4,"if",[[20,["isGamingAppV2Theme"]]],null,{"statements":[],"parameters":[]},{"statements":[[4,"if",[[20,["isGamingAppGift"]]],null,{"statements":[],"parameters":[]},{"statements":[[4,"if",[[20,["isModernXboxClientGift"]]],null,{"statements":[[0,"                            "],[6,"div"],[9,"class","mercuryGiftLegalTermsContainer"],[7],[0,"                             \\n                                "],[1,[25,"legal-terms",null,[["order","orderLineItem","actionText","clickToRedirect","isPiRequiredButFree","legalStrings","showSelectBackupPiLink","showBackupPi"],[[20,["model","order"]],[20,["model","order","firstLineItem"]],[20,["confirmButtonText"]],"viewTou",[20,["model","isPiRequiredButFree"]],[20,["legalStrings"]],[20,["showSelectBackupPiLink"]],[20,["showBackupPi"]]]]],false],[0,"\\n                            "],[8],[0,"      \\n"]],"parameters":[]},{"statements":[[4,"if",[[25,"and",[[20,["isModernXboxClient"]],[25,"not",[[25,"or",[[20,["mercurySubscriptionClass"]],[20,["saturnSubscriptionClass"]]],null]],null]],null]],null,{"statements":[[0,"                                "],[6,"button"],[9,"id","btnMercuryLegalTerms"],[9,"class","btn btnMercuryLegalTerms"],[3,"action",[[19,0,[]],"showMercuryLegalModal"]],[7],[0,"\\n                                    "],[1,[25,"legal-terms",null,[["order","orderLineItem","actionText","clickToRedirect","isPiRequiredButFree","legalStrings","showSelectBackupPiLink","showBackupPi"],[[20,["model","order"]],[20,["model","order","firstLineItem"]],[20,["confirmButtonText"]],"viewTou",[20,["model","isPiRequiredButFree"]],[20,["legalStrings"]],[20,["showSelectBackupPiLink"]],[20,["showBackupPi"]]]]],false],[0,"\\n"],[4,"if",[[20,["shouldShowMoreText"]]],null,{"statements":[[0,"                                        "],[6,"div"],[9,"class","mercuryLegalTermsMore"],[7],[0,"\\n                                            "],[1,[20,["strings","Shared_Label_More"]],false],[0,"\\n                                        "],[8],[0,"\\n"]],"parameters":[]},null],[0,"                                     "],[2," shouldShowMoreText "],[0,"\\n                                "],[8],[0,"\\n                                "],[6,"div"],[10,"class",[26,["mercuryLegalModal ",[18,"isMercuryLegalModalVisible"]]]],[7],[0,"\\n                                    "],[6,"div"],[9,"class","mercuryLegalModalContainer"],[7],[0,"\\n                                        "],[6,"div"],[9,"class","fullLegalTextContainer"],[7],[0,"\\n                                            "],[1,[25,"legal-terms",null,[["order","orderLineItem","actionText","clickToRedirect","isPiRequiredButFree","legalStrings","showSelectBackupPiLink","showBackupPi"],[[20,["model","order"]],[20,["model","order","firstLineItem"]],[20,["confirmButtonText"]],"viewTou",[20,["model","isPiRequiredButFree"]],[20,["legalStrings"]],[20,["showSelectBackupPiLink"]],[20,["showBackupPi"]]]]],false],[0,"\\n                                        "],[8],[0,"\\n                                        "],[6,"div"],[9,"class","ctaBar"],[7],[0,"\\n                                            "],[6,"button"],[9,"class","btn btnMercuryLegalModalClose"],[3,"action",[[19,0,[]],"hideMercuryLegalModal"]],[7],[0,"\\n                                                "],[1,[20,["strings","Button_Close"]],false],[0,"\\n                                            "],[8],[0,"\\n                                        "],[8],[0,"\\n                                    "],[8],[0,"\\n                                "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[25,"not",[[20,["isModernXboxClient"]]],null]],null,{"statements":[[0,"                                "],[1,[25,"legal-terms",null,[["order","orderLineItem","actionText","clickToRedirect","isPiRequiredButFree","legalStrings","showSelectBackupPiLink","showBackupPi"],[[20,["model","order"]],[20,["model","order","firstLineItem"]],[20,["confirmButtonText"]],"viewTou",[20,["model","isPiRequiredButFree"]],[20,["legalStrings"]],[20,["showSelectBackupPiLink"]],[20,["showBackupPi"]]]]],false],[0,"\\n                            "]],"parameters":[]},null]],"parameters":[]}],[0,"                            "],[2," isModernXboxClient && (not mercurySubscriptionClass) "],[0,"\\n"],[4,"if",[[25,"or",[[20,["isGamingApp"]],[20,["isSaturnDesktop"]]],null]],null,{"statements":[[0,"                                "],[6,"p"],[9,"id","AccountText"],[9,"class","collapsibleContent cli_AccountText"],[7],[1,[18,"accountInformation"],false],[8],[0,"\\n"]],"parameters":[]},null],[0,"                            "],[2," isGamingApp || isSaturnDesktop "],[0,"\\n                        "]],"parameters":[]}]],"parameters":[]}],[0,"                        "],[2," isGamingAppGift "],[0," \\n"]],"parameters":[]}],[0,"                    "],[2," isGamingAppV2Theme "],[0," \\n                    \\n"],[4,"if",[[20,["showCheckBoxContainer"]]],null,{"statements":[[0,"                        "],[6,"div"],[10,"class",[26,["mainCheckBoxContainer mainCheckBoxContainerNewLegalLayout ",[18,"positionInitialClass"]]]],[7],[0,"\\n"],[4,"if",[[20,["autoRenewalConsentRequired"]]],null,{"statements":[[0,"                                "],[1,[25,"auto-renewal-consent",null,[["string","controller"],[[20,["strings"]],[19,0,[]]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"                            "],[2," autoRenewalConsentRequired "],[0,"     \\n"],[4,"if",[[20,["showContactPreference"]]],null,{"statements":[[0,"                                "],[1,[25,"contact-preference",null,[["orderLineItems"],[[20,["model","order","lineItems"]]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"                            "],[2," showContactPreference "],[0,"    \\n                        "],[8],[0,"\\n"]],"parameters":[]},null],[0,"                    "],[2," showCheckBoxContainer "],[0," \\n                   \\n"],[4,"if",[[25,"or",[[20,["isGamingAppV2Theme"]],[20,["isGamingAppGift"]]],null]],null,{"statements":[[0,"                        "],[1,[25,"legal-terms",null,[["order","orderLineItem","actionText","clickToRedirect","isPiRequiredButFree","legalStrings","showSelectBackupPiLink","showBackupPi"],[[20,["model","order"]],[20,["model","order","firstLineItem"]],[20,["confirmButtonText"]],"viewTou",[20,["model","isPiRequiredButFree"]],[20,["legalStrings"]],[20,["showSelectBackupPiLink"]],[20,["showBackupPi"]]]]],false],[0,"\\n"],[4,"if",[[25,"not",[[20,["isGamingAppGift"]]],null]],null,{"statements":[[0,"                            "],[6,"p"],[9,"id","AccountText"],[9,"class","collapsibleContent cli_AccountText"],[7],[1,[18,"accountInformation"],false],[8],[0,"\\n"]],"parameters":[]},null],[0,"                        "],[2," not isGamingAppGift "],[0,"\\n"]],"parameters":[]},null],[0,"                    "],[2," isGamingAppV2Theme || isGamingAppGift "],[0,"  \\n                "],[8],[0,"\\n"]],"parameters":[]},null],[0,"            "],[2," lineItems "],[0,"  \\n"]],"parameters":[]},null],[0,"        "],[2," isNewLegalTextLayoutEnabled "],[0,"  \\n    "],[8],[0,"\\n\\n"],[4,"if",[[20,["isModernXboxClient"]]],null,{"statements":[[0,"        "],[6,"span"],[9,"id","MercuryOrderSummary"],[9,"class","screen-reader"],[10,"aria-label",[18,"mercuryAccessibilityLabel"],null],[7],[8],[0,"\\n"]],"parameters":[]},null],[0,"\\n    "],[1,[25,"call-to-action",null,[["order","selectedPi","selectedBackupPi","confirmButtonText","model","showErrorPage","includeCancel","readyToTakeAction","needToAddPi","needToAddAddress","isAddingBackupPi","isGift","controller","daUpgradeConsent","showSelectAddressLink"],[[20,["model","order"]],[20,["model","selectedPi"]],[20,["selectedBackupPi"]],[20,["confirmButtonText"]],[20,["model"]],"showErrorPage",[20,["shouldIncludeCancel"]],[20,["readyToTakeAction"]],[20,["needToAddPi"]],[20,["showAddAddressLink"]],[20,["isAddingBackupPi"]],[20,["isGift"]],[19,0,[]],[20,["daUpgradeConsent"]],[20,["showSelectAddressLink"]]]]],false],[0,"\\n"],[4,"if",[[20,["needsFingerprintTagging"]]],null,{"statements":[[0,"        "],[1,[25,"fingerprint-tagging",null,[["sessionId"],[[20,["model","order","sessionId"]]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"if",[[25,"or",[[20,["isGamingAppV2Theme"]],[20,["isSaturnXbox"]]],null]],null,{"statements":[[4,"if",[[20,["showClose"]]],null,{"statements":[[0,"            "],[1,[25,"close-button",null,[["order","selectedPi","controller","isSuccess","paymentIncentive"],[[20,["model","order"]],[20,["model","selectedPi"]],[19,0,[]],false,[20,["paymentIncentive"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/purchase/confirm.hbs"}})}),define("web-blends/templates/purchase/gift",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"eaKZfzJD",block:'{"symbols":[],"statements":[[6,"section"],[9,"class","GiftPurchaseContainer"],[9,"id","GiftPurchaseContainer"],[9,"role","main"],[9,"data-bi-area","PurchaseGiftingOption"],[9,"data-bi-view","PurchaseGiftingOption"],[9,"data-bi-source","PurchaseCatalog"],[7],[0,"\\n    "],[6,"div"],[9,"class","content"],[7],[0,"   \\n"],[4,"if",[[20,["ismoderngamertagenabled"]]],null,{"statements":[[0,"            "],[6,"div"],[9,"id","GamertagContainer"],[9,"labelledby","gamertag gamertagsuffix"],[7],[0,"\\n                "],[6,"div"],[9,"class","gamertag cli_gamertag"],[7],[1,[18,"moderngamertag"],false],[8],[0,"\\n                "],[6,"div"],[9,"class","gamertagsuffix cli_gamertagsuffix"],[7],[1,[18,"moderngamertagsuffix"],false],[8],[0,"\\n"],[4,"if",[[25,"and",[[20,["isModernXboxClient"]],[20,["gamerpic"]]],null]],null,{"statements":[[0,"                    "],[6,"img"],[9,"class","gamerpic cli_gamerpic"],[10,"src",[26,[[18,"gamerpic"]]]],[7],[8],[0,"\\n"]],"parameters":[]},null],[0,"            "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[20,["gamertag"]]],null,{"statements":[[0,"                "],[6,"div"],[9,"id","GamertagContainer"],[7],[0,"\\n                    "],[6,"div"],[9,"class","gamertag cli_gamertag"],[9,"data-bi-name","gamerTag"],[7],[1,[18,"gamertag"],false],[8],[0,"\\n"],[4,"if",[[25,"and",[[20,["isModernXboxClient"]],[20,["gamerpic"]]],null]],null,{"statements":[[0,"                        "],[6,"img"],[9,"class","gamerpic cli_gamerpic"],[10,"src",[26,[[18,"gamerpic"]]]],[7],[8],[0,"\\n"]],"parameters":[]},null],[0,"                "],[8],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}],[0,"        "],[6,"div"],[9,"id","ProductContainer"],[7],[0,"\\n"],[4,"if",[[25,"or",[[20,["isGamingApp"]],[20,["isModernXboxClient"]]],null]],null,{"statements":[[4,"if",[[20,["showGamertagOption"]]],null,{"statements":[[0,"                    "],[6,"h1"],[9,"class","type-t2 cli_dialogTitle"],[7],[1,[20,["strings","Purchase_Gift_BuyAsGift"]],false],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                    "],[6,"h1"],[9,"class","type-t2 cli_dialogTitle"],[7],[1,[20,["strings","Purchase_Mercury_SendYourGift"]],false],[8],[0,"\\n"]],"parameters":[]}]],"parameters":[]},{"statements":[[0,"                "],[6,"h1"],[9,"class","type-t2 cli_dialogTitle"],[7],[1,[20,["strings","Purchase_Gift_SendGift"]],false],[8],[0,"\\n"]],"parameters":[]}],[0,"\\n        "],[8],[0,"\\n\\n"],[4,"if",[[20,["isModernXboxClient"]]],null,{"statements":[[0,"            "],[6,"img"],[9,"class","orderDetailsImage"],[10,"src",[26,[[18,"posterImage"]]]],[7],[8],[0,"\\n            "],[6,"img"],[9,"class","orderRatingImage"],[10,"src",[26,[[18,"mercuryRatingImage"]]]],[7],[8],[0,"\\n            "],[6,"div"],[9,"class","orderDetailsContainer"],[7],[0,"\\n                "],[6,"div"],[9,"class","orderDetailsTitle"],[7],[0,"\\n                    "],[6,"span"],[7],[1,[18,"dialogTitle"],false],[8],[0,"\\n                "],[8],[0,"\\n                "],[6,"div"],[9,"class","orderDetailsPrice"],[7],[0,"\\n"],[4,"if",[[20,["shouldShowMercuryStrikethrough"]]],null,{"statements":[[0,"                        "],[6,"span"],[9,"class","strikethrough"],[7],[1,[25,"formatted-price",null,[["number","currencyCode"],[[20,["model","order","firstLineItem","retailPrice"]],[20,["model","order","firstLineItem","currencyCode"]]]]],false],[8],[0,"\\n"]],"parameters":[]},null],[0,"                    "],[6,"span"],[9,"class","final"],[7],[1,[25,"formatted-price",null,[["number","currencyCode"],[[20,["model","order","firstLineItem","listPrice"]],[20,["model","order","firstLineItem","currencyCode"]]]]],false],[8],[0,"\\n                "],[8],[0,"\\n            "],[8],[0,"\\n            "],[6,"div"],[9,"class","orderDetailsRatings"],[7],[0,"\\n                "],[6,"div"],[9,"class","descriptors"],[7],[6,"span"],[7],[1,[18,"mercuryDescriptors"],false],[8],[8],[0,"\\n"],[4,"if",[[20,["shouldShowMercurySeparator"]]],null,{"statements":[[0,"                    "],[6,"hr"],[9,"class","orderLineSeparator ratingsSeparator"],[7],[8],[0,"\\n"]],"parameters":[]},null],[0,"                "],[6,"div"],[9,"class","interactiveElements"],[7],[6,"span"],[7],[1,[18,"mercuryInteractiveElements"],true],[8],[8],[0,"\\n            "],[8],[0,"\\n            "],[6,"div"],[9,"class","gift-legal-messag cli_legal"],[7],[1,[25,"message-with-links",null,[["messageParts","action","tagName"],[[20,["giftTermParts"]],"viewTerms","p"]]],false],[8],[0,"\\n"]],"parameters":[]},null],[0,"\\n        "],[6,"div"],[9,"class","title-price-container"],[9,"id","title-price-container"],[7],[0,"\\n"],[4,"unless",[[20,["isModernXboxClient"]]],null,{"statements":[[0,"                "],[6,"div"],[9,"class","type-t3 gift-title-container"],[7],[1,[18,"lineItemTitle"],false],[8],[0,"\\n                "],[6,"div"],[9,"class","gift-price-container"],[7],[0,"\\n                    "],[1,[25,"component",[[20,["itemPriceInfoComponentName"]]],[["orderLineItem"],[[20,["model","order","firstLineItem"]]]]],false],[0,"\\n                "],[8],[0,"\\n"],[4,"if",[[20,["isXboxOne"]]],null,{"statements":[[0,"                    "],[6,"div"],[9,"class","gift-legal-messag cli_legal"],[7],[1,[25,"message-with-links",null,[["messageParts","action","tagName"],[[20,["giftTermParts"]],"viewTerms","p"]]],false],[8],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"        "],[8],[0,"\\n\\n        "],[6,"form"],[9,"id","addGiftInfo"],[9,"class","cli_addGiftInfo"],[9,"role","form"],[9,"novalidate",""],[3,"action",[[19,0,[]],"enterPressed"],[["on"],["submit"]]],[7],[0,"\\n"],[4,"if",[[20,["showGamertagOption"]]],null,{"statements":[[4,"unless",[[20,["isModernXboxClient"]]],null,{"statements":[[0,"                    "],[6,"div"],[9,"class","to-from-title cli_to"],[7],[1,[20,["strings","Purchase_Gift_SendingGift"]],false],[8],[0,"\\n"]],"parameters":[]},null],[0,"                "],[6,"div"],[9,"id","giftOptionContainer"],[9,"class","cli_giftOptionContainer"],[7],[0,"\\n                    "],[6,"button"],[9,"class","button-list cli_friendsList"],[9,"id","friendsList"],[9,"data-bi-name","GiftSelectFriendsList"],[3,"action",[[19,0,[]],"getFriendslist"]],[7],[0,"\\n"],[4,"if",[[20,["isModernXboxClient"]]],null,{"statements":[[0,"                            "],[6,"i"],[9,"class","xbox-icon xbox-icon-person"],[9,"aria-hidden","true"],[7],[8],[0,"\\n                            "],[6,"div"],[9,"class","gift-option-display-data"],[7],[1,[20,["strings","Purchase_Gift_Mercury_ChooseFriends"]],false],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                            "],[6,"div"],[9,"class","gift-option-display-data"],[7],[1,[20,["strings","Purchase_Gift_ChooseFriends"]],false],[8],[0,"\\n"]],"parameters":[]}],[0,"                    "],[8],[0,"\\n                    "],[6,"button"],[9,"class","button-list cli_emailAddress"],[9,"id","emailAddress"],[9,"data-bi-name","GiftSelectEmailAddress"],[3,"action",[[19,0,[]],"getEmailAddress"]],[7],[0,"\\n"],[4,"if",[[20,["isModernXboxClient"]]],null,{"statements":[[0,"                            "],[6,"i"],[9,"class","xbox-icon xbox-icon-email"],[9,"aria-hidden","true"],[7],[8],[0,"\\n"]],"parameters":[]},null],[0,"                        "],[6,"div"],[9,"class","gift-option-display-data"],[7],[1,[20,["strings","Purchase_Gift_EnterEmail"]],false],[8],[0,"\\n                    "],[8],[0,"\\n                "],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[20,["isModernXboxClient"]]],null,{"statements":[[4,"if",[[20,["showRecipientInfo"]]],null,{"statements":[[0,"                    "],[6,"div"],[9,"class","to-from-title cli_to"],[7],[1,[20,["strings","Purchase_Gift_Mercury_SendingTo"]],false],[8],[0,"\\n"],[4,"if",[[20,["showRecipientGamertag"]]],null,{"statements":[[4,"if",[[20,["showCancelMercury"]]],null,{"statements":[[0,"                            "],[6,"div"],[9,"class","recipient-unchangable"],[7],[0," \\n                                "],[6,"div"],[9,"class","gamer-pic-unchangable cli_gamerPic"],[7],[0,"\\n                                    "],[6,"img"],[9,"class","recipientGamerPicUnchangable"],[10,"src",[18,"recipientGamerPic"],null],[10,"alt",[18,"recipientGamertag"],null],[7],[8],[0,"\\n                                "],[8],[0,"\\n                                "],[6,"span"],[9,"class","screen-reader"],[7],[1,[20,["strings","Purchase_Gift_Mercury_SendingTo"]],false],[8],[0,"\\n                                "],[6,"div"],[9,"class","gamertag-with-pic-unchangable cli_gamertagWithPic"],[7],[0,"\\n                                    "],[1,[18,"recipientGamertag"],false],[0,"\\n                                    "],[6,"span"],[9,"class","gamertagSuffix-with-pic cli_gamertagSuffixWithPic"],[7],[1,[18,"recipientGamertagSuffix"],false],[8],[0,"\\n                                "],[8],[0,"\\n                            "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                            "],[6,"button"],[9,"class","btn btn-default cli_friendsList"],[9,"id","recipientGamertag"],[9,"data-bi-name","GiftSelectFriendsList"],[3,"action",[[19,0,[]],"getFriendslist"]],[7],[0,"\\n                                "],[6,"div"],[9,"class","gamer-pic cli_gamerPic"],[7],[0,"\\n                                    "],[6,"img"],[9,"class","recipientGamerPic"],[10,"src",[18,"recipientGamerPic"],null],[10,"alt",[18,"recipientGamertag"],null],[7],[8],[0,"\\n                                "],[8],[0,"\\n                                "],[6,"span"],[9,"class","screen-reader"],[7],[1,[20,["strings","Purchase_Gift_Mercury_SendingTo"]],false],[8],[0,"\\n                                "],[6,"div"],[9,"class","gamertag-with-pic cli_gamertagWithPic"],[7],[1,[18,"recipientGamertag"],false],[8],[0,"\\n                                "],[6,"div"],[9,"class","gamertagSuffix-with-pic cli_gamertagSuffixWithPic"],[7],[1,[18,"recipientGamertagSuffix"],false],[8],[0,"\\n                                "],[6,"div"],[9,"class","changeText"],[7],[1,[20,["strings","Shared_Label_Change"]],false],[0,"\\n                                    "],[6,"i"],[9,"class","icon icon-chevron-left"],[9,"aria-hidden","true"],[7],[8],[0,"\\n                                "],[8],[0,"\\n                            "],[8],[0,"\\n"]],"parameters":[]}],[0,"                        "],[6,"div"],[9,"class","to-from-title cli_subTitle"],[7],[1,[20,["strings","Purchase_Gift_Mercury_From"]],false],[8],[0,"\\n                        "],[6,"div"],[9,"class","cli_senderInfoContainer"],[7],[0,"\\n                            "],[1,[25,"input",null,[["type","class","id","value","maxlength","aria-label","enter"],["text","gifting-info","friendSenderInfo",[20,["giftInfo","senderInfo","value"]],"64",[20,["strings","Purchase_Gift_SenderInfo"]],"enterPressed"]]],false],[0,"\\n                            "],[6,"p"],[9,"class","gift-inline-error cli_inlineError"],[10,"style",[18,"showSenderInlineError"],null],[9,"id","senderInfoError"],[9,"role","alert"],[10,"aria-label",[18,"senderInlineError"],null],[7],[1,[18,"senderInlineError"],false],[8],[0,"\\n                        "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                        "],[6,"div"],[9,"id","recipientInfoContainer"],[7],[0,"\\n"],[4,"if",[[20,["placeHolderForIE"]]],null,{"statements":[[0,"                            "],[1,[25,"input",null,[["type","id","value","maxlength","aria-label","input","focus-in","enter"],["email","recipientInfo",[20,["giftInfo","recipientInfo","value"]],"200",[20,["strings","Purchase_Gift_SendingGift"]],[25,"action",[[19,0,[]],"placeHolderHandler"],null],[25,"action",[[19,0,[]],"removePlaceHolderHandler"],null],"enterPressed"]]],false],[0,"\\n                                "],[6,"span"],[9,"id","iePlaceHolder"],[7],[1,[20,["strings","Purchase_Gift_EnterEmail"]],false],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                            "],[1,[25,"input",null,[["type","class","id","value","placeholder","maxlength","aria-label","enter"],["email","gifting-info","recipientInfo",[20,["giftInfo","recipientInfo","value"]],[20,["strings","Purchase_Gift_EnterEmail"]],"200",[20,["strings","Purchase_Gift_SendingGift"]],"enterPressed"]]],false],[0,"\\n"]],"parameters":[]}],[0,"                            "],[6,"p"],[9,"class","gift-inline-error cli_inlineError"],[10,"style",[18,"showRecipientInlineError"],null],[9,"id","recipientInfoError"],[9,"role","alert"],[10,"aria-label",[18,"recipientInlineError"],null],[7],[1,[18,"recipientInlineError"],false],[8],[0,"\\n                        "],[8],[0,"\\n                        "],[6,"div"],[9,"class","to-from-title cli_subTitle"],[7],[1,[20,["strings","Purchase_Gift_SenderInfo"]],false],[8],[0,"\\n                        "],[6,"div"],[9,"class","cli_senderInfoContainer"],[7],[0,"\\n                            "],[1,[25,"input",null,[["type","class","id","value","maxlength","aria-label","enter"],["text","gifting-info","senderInfo",[20,["giftInfo","senderInfo","value"]],"64",[20,["strings","Purchase_Gift_SenderInfo"]],"enterPressed"]]],false],[0,"\\n                            "],[6,"p"],[9,"class","gift-inline-error cli_inlineError"],[10,"style",[18,"showSenderInlineError"],null],[9,"id","senderInfoError"],[9,"role","alert"],[10,"aria-label",[18,"senderInlineError"],null],[7],[1,[18,"senderInlineError"],false],[8],[0,"\\n                        "],[8],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null]],"parameters":[]},{"statements":[[4,"if",[[20,["showRecipientInfo"]]],null,{"statements":[[0,"                    "],[6,"div"],[9,"class","to-from-title cli_to"],[7],[1,[20,["strings","Purchase_Gift_SendingGift"]],false],[8],[0,"\\n"],[4,"if",[[20,["showRecipientGamertag"]]],null,{"statements":[[0,"                        "],[6,"div"],[9,"class","recipient-gamertag-container"],[7],[0,"\\n                            "],[6,"div"],[9,"class","gamer-pic cli_gamerPic"],[7],[0,"\\n                                "],[6,"img"],[10,"src",[18,"recipientGamerPic"],null],[10,"alt",[18,"recipientGamertag"],null],[7],[8],[0,"\\n                            "],[8],[0,"\\n                            "],[6,"div"],[9,"class","gamertag-with-pic cli_gamertagWithPic"],[7],[1,[18,"recipientGamertag"],false],[8],[0,"\\n                            "],[6,"div"],[9,"class","gamertagSuffix-with-pic cli_gamertagSuffixWithPic"],[7],[1,[18,"recipientGamertagSuffix"],false],[8],[0,"\\n                        "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                        "],[6,"div"],[9,"id","recipientInfoContainer"],[7],[0,"\\n"],[4,"if",[[20,["placeHolderForIE"]]],null,{"statements":[[0,"                                "],[1,[25,"input",null,[["type","id","value","maxlength","aria-label","input","focus-in","submit"],["email","recipientInfo",[20,["giftInfo","recipientInfo","value"]],"200",[20,["strings","Purchase_Gift_SendingGift"]],[25,"action",[[19,0,[]],"placeHolderHandler"],null],[25,"action",[[19,0,[]],"removePlaceHolderHandler"],null],"enterPressed"]]],false],[0,"\\n                                "],[6,"span"],[9,"id","iePlaceHolder"],[7],[1,[20,["strings","Purchase_Gift_EnterEmail"]],false],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                                "],[1,[25,"input",null,[["type","id","value","placeholder","maxlength","aria-label","submit"],["email","recipientInfo",[20,["giftInfo","recipientInfo","value"]],[20,["strings","Purchase_Gift_EnterEmail"]],"200",[20,["strings","Purchase_Gift_SendingGift"]],"enterPressed"]]],false],[0,"\\n"]],"parameters":[]}],[0,"                            "],[6,"p"],[9,"class","gift-inline-error cli_inlineError"],[10,"style",[18,"showInlineError"],null],[9,"id","giftError"],[9,"role","alert"],[10,"aria-label",[18,"inlineError"],null],[7],[1,[18,"inlineError"],false],[8],[0,"\\n                        "],[8],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null],[4,"if",[[20,["showSenderInfo"]]],null,{"statements":[[0,"                    "],[6,"div"],[9,"class","to-from-title cli_subTitle"],[7],[1,[20,["strings","Purchase_Gift_SenderInfo"]],false],[8],[0,"\\n                    "],[6,"div"],[9,"class","cli_senderInfoContainer"],[7],[0,"\\n                        "],[1,[25,"input",null,[["type","id","value","maxlength","aria-label"],["text","senderInfo",[20,["giftInfo","senderInfo","value"]],"64",[20,["strings","Purchase_Gift_SenderInfo"]]]]],false],[0,"\\n                        "],[6,"p"],[9,"class","gift-inline-error cli_inlineError"],[10,"style",[18,"showInlineError"],null],[9,"id","giftError"],[9,"role","alert"],[10,"aria-label",[18,"inlineError"],null],[7],[1,[18,"inlineError"],false],[8],[0,"\\n                    "],[8],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}],[0,"        "],[8],[0,"\\n"],[4,"unless",[[20,["isXboxOne"]]],null,{"statements":[[0,"            "],[6,"div"],[9,"class","gift-legal-message cli_legal"],[7],[0,"\\n"],[4,"if",[[20,["isGamingApp"]]],null,{"statements":[[0,"                    "],[6,"h3"],[7],[1,[20,["strings","Shared_How_It_Works"]],false],[8],[0,"\\n"]],"parameters":[]},null],[0,"                "],[1,[25,"message-with-links",null,[["messageParts","action","tagName"],[[20,["giftTermParts"]],"viewTermsLink","p"]]],false],[0,"\\n            "],[8],[0,"\\n"]],"parameters":[]},null],[0,"    "],[8],[0,"\\n        "],[6,"div"],[9,"class","CTAContainer"],[7],[0,"\\n"],[4,"if",[[20,["showCancel"]]],null,{"statements":[[0,"                "],[6,"button"],[9,"class","btn btn-default btn-back cli_cancelButton"],[9,"id","cancelButton"],[9,"data-bi-slot","1"],[9,"data-bi-name","GiftOptionCancel"],[3,"action",[[19,0,[]],"cancel"]],[7],[0,"\\n                    "],[1,[20,["strings","Shared_Button_Cancel"]],false],[0,"\\n                "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[20,["showBackButton"]]],null,{"statements":[[0,"                    "],[6,"button"],[9,"class","btn btn-default btn-back cli_backButton"],[9,"id","backButton"],[10,"data-bi-name",[18,"backButtonBiName"],null],[9,"data-bi-slot","1"],[3,"action",[[19,0,[]],"back"]],[7],[0,"\\n                        "],[1,[20,["strings","Shared_Button_Back"]],false],[0,"\\n                    "],[8],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}],[4,"if",[[20,["showNext"]]],null,{"statements":[[0,"                "],[6,"button"],[9,"class","btn btn-primary btn-xbox-submit cli_nextButton"],[9,"id","nextButton"],[9,"data-bi-slot","2"],[10,"data-bi-name",[18,"nextButtonBiName"],null],[3,"action",[[19,0,[]],"next"]],[7],[0,"\\n"],[4,"if",[[20,["showRecipientInfo"]]],null,{"statements":[[0,"                        "],[6,"span"],[9,"class","screen-reader"],[7],[1,[20,["strings","Purchase_Gift_Mercury_SendingTo"]],false],[8],[0,"\\n                        "],[6,"span"],[9,"class","screen-reader"],[7],[1,[18,"recipientGamertag"],false],[8],[0,"\\n                        "],[6,"span"],[9,"class","screen-reader"],[7],[1,[18,"recipientGamertagSuffix"],false],[8],[0,"\\n                        "],[6,"span"],[9,"class","screen-reader"],[7],[1,[20,["strings","Purchase_Gift_Mercury_From"]],false],[8],[0,"\\n                        "],[6,"span"],[9,"class","screen-reader"],[7],[1,[20,["giftInfo","senderInfo","value"]],false],[8],[0,"\\n"]],"parameters":[]},null],[0,"                    "],[1,[20,["strings","Shared_Button_Next"]],false],[0,"\\n                "],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[20,["showCancelMercury"]]],null,{"statements":[[0,"                "],[6,"button"],[9,"class","btn btn-default btn-back cli_cancelButton"],[9,"id","cancelButton"],[9,"data-bi-slot","1"],[9,"data-bi-name","GiftOptionCancel"],[3,"action",[[19,0,[]],"cancel"]],[7],[0,"\\n                    "],[1,[20,["strings","Shared_Button_Cancel"]],false],[0,"\\n                "],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[20,["isXboxOne"]]],null,{"statements":[[0,"                "],[6,"button"],[9,"id","viewTerms"],[9,"class","btn btn-legal cli_legalButton"],[9,"data-bi-slot","3"],[9,"data-bi-name","GiftViewTerms"],[3,"action",[[19,0,[]],"viewTerms"]],[7],[0,"\\n                    "],[1,[20,["strings","View_Terms_Button"]],false],[0,"\\n                "],[8],[0,"\\n"]],"parameters":[]},null],[0,"        "],[8],[0,"\\n\\n   "],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/purchase/gift.hbs"}})}),define("web-blends/templates/purchase/mobi-challenge",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"umP+HpcO",block:'{"symbols":[],"statements":[[6,"section"],[9,"id","PurchaseMobiChallenge"],[9,"role","main"],[9,"data-bi-area","PurchaseMobiChallenge"],[7],[0,"\\n    "],[6,"div"],[9,"class","content"],[7],[0,"\\n        "],[6,"h1"],[9,"class","header cli_purchaseMobiChallengeTitle"],[7],[1,[20,["strings","Purchase_NonSimMobiChallenge_Title"]],false],[8],[0,"\\n        "],[6,"div"],[9,"id","TextContainer"],[7],[0,"\\n            "],[6,"p"],[9,"class","cli_PurchaseMobiChallengeMainText"],[7],[1,[20,["strings","Purchase_NonSimMobiChallenge_MainText"]],false],[8],[0,"\\n            "],[6,"p"],[9,"id","SubText"],[9,"class","cli_PurchaseMobiChallengeSubText"],[7],[1,[20,["strings","Purchase_NonSimMobiChallenge_SubText"]],false],[8],[0,"\\n        "],[8],[0,"\\n    "],[8],[0,"\\n    "],[6,"div"],[9,"class","CTAContainer"],[7],[0,"\\n        "],[6,"button"],[9,"class","btn btn-default btn-back cli_purchaseMobiChallengeCancel"],[9,"id","purchaseMobiChallengeCancel"],[9,"data-bi-name","PurchaseMobiChallengeCancel"],[9,"data-bi-slot","1"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"cancel"]],[7],[0,"\\n            "],[1,[20,["strings","Shared_Button_Cancel"]],false],[0,"\\n        "],[8],[0,"\\n        "],[6,"button"],[9,"class","btn btn-primary btn-xbox-submit cli_purchaseMobiChallengeOk"],[9,"id","purchaseMobiChallengeOK"],[9,"data-bi-name","PurchaseMobiChallengeOK"],[9,"data-bi-slot","2"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"submit"]],[7],[0,"\\n            "],[1,[20,["strings","Shared_Button_OK"]],false],[0,"\\n        "],[8],[0,"\\n    "],[8],[0,"\\n"],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/purchase/mobi-challenge.hbs"}})}),define("web-blends/templates/purchase/redirect-confirm-async",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"u7DycJWR",block:'{"symbols":[],"statements":[[4,"if",[[20,["isModernXboxClient"]]],null,{"statements":[[0,"    "],[1,[18,"mercuryRedirect"],false],[0,"\\n"]],"parameters":[]},{"statements":[[6,"section"],[9,"id","PurchaseRedirectConfirm"],[9,"role","main"],[9,"data-bi-area","PurchaseRedirectConfirm"],[7],[0,"\\n    "],[6,"div"],[9,"class","content"],[7],[0,"\\n        "],[6,"img"],[9,"class","asyncLogo"],[10,"src",[26,[[18,"asyncPurchaseLogo"]]]],[9,"aria-hidden","true"],[7],[8],[0,"\\n        "],[6,"h1"],[9,"class","type-t2 cli_title"],[7],[0,"\\n"],[4,"if",[[20,["isWebClient"]]],null,{"statements":[[0,"                "],[1,[20,["strings","Purchase_Title_Turn_Off_Popup_Blocker"]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                "],[1,[18,"asyncPurchaseTitle"],false],[0,"\\n"]],"parameters":[]}],[0,"        "],[8],[0,"\\n        "],[6,"p"],[9,"class","cli_message"],[7],[1,[18,"asyncPurchaseMessage"],false],[8],[0,"\\n    "],[8],[0,"\\n    "],[6,"div"],[9,"class","CTAContainer"],[7],[0,"\\n        "],[6,"button"],[9,"class","btn btn-wide btn-primary cli_continueButton"],[9,"id","PurchaseRedirectConfirmContinue"],[9,"data-bi-name","PurchaseRedirectConfirmContinue"],[9,"data-bi-slot","2"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"purchaseRedirectConfirmContinue"]],[7],[0,"\\n            "],[1,[18,"asyncPurchaseRedirectText"],false],[0,"\\n        "],[8],[0,"\\n        "],[6,"button"],[9,"class","btn btn-wide btn-alternate btn-back cli_backButton"],[9,"id","PurchaseRedirectConfirmBack"],[9,"data-bi-name","PurchaseRedirectConfirmBack"],[9,"data-bi-slot","1"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"purchaseRedirectConfirmBack"]],[7],[0,"\\n            "],[1,[20,["strings","Purchase_Button_Pick_Another_Way_To_Pay"]],false],[0,"\\n        "],[8],[0,"\\n    "],[8],[0,"\\n"],[8],[0,"\\n"]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"web-blends/templates/purchase/redirect-confirm-async.hbs"}})}),define("web-blends/templates/purchase/redirect-confirm-risk",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"Cy2UjPXd",block:'{"symbols":[],"statements":[[6,"section"],[9,"id","PurchaseRedirectConfirm"],[9,"role","main"],[9,"data-bi-area","PurchaseRedirectConfirm"],[7],[0,"\\n    "],[6,"div"],[9,"class","content"],[7],[0,"\\n        "],[6,"h1"],[9,"class","type-t2 cli_title"],[7],[1,[20,["strings","Purchase_Title_RedirectConfirm"]],false],[8],[0,"\\n        "],[6,"p"],[9,"class","cli_message"],[7],[0,"\\n            "],[1,[25,"message-with-bolded-buttonNames",null,[["messageParts"],[[20,["riskRedirectTextParts"]]]]],false],[0," "],[1,[25,"message-with-bolded-buttonNames",null,[["messageParts"],[[20,["riskRedirectSubTextParts"]]]]],false],[0,"\\n        "],[8],[0,"\\n"],[4,"if",[[20,["isWebClient"]]],null,{"statements":[[0,"            "],[6,"p"],[9,"class","allowPopupText cli_allowPopup"],[7],[0,"\\n                "],[1,[20,["strings","Allow_Popups_Text"]],false],[0,"\\n            "],[8],[0,"\\n"]],"parameters":[]},null],[0,"    "],[8],[0,"\\n    "],[6,"div"],[9,"class","CTAContainer"],[7],[0,"\\n        "],[6,"button"],[9,"class","btn btn-default btn-back cli_backButton"],[9,"id","PurchaseRedirectConfirmBack"],[9,"data-bi-name","PurchaseRedirectConfirmBack"],[9,"data-bi-slot","1"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"purchaseRedirectConfirmBack"]],[7],[0,"\\n            "],[1,[20,["strings","Shared_Button_Back"]],false],[0,"\\n        "],[8],[0,"\\n        "],[6,"button"],[9,"class","btn btn-primary cli_continueButton"],[9,"id","PurchaseRedirectConfirmContinue"],[9,"data-bi-name","PurchaseRedirectConfirmContinue"],[9,"data-bi-slot","2"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"purchaseRedirectConfirmContinue"]],[7],[0,"\\n            "],[1,[20,["strings","Shared_Button_Continue"]],false],[0,"\\n        "],[8],[0,"\\n    "],[8],[0,"\\n"],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/purchase/redirect-confirm-risk.hbs"}})}),define("web-blends/templates/purchase/redirect-continue-async",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"1e6JOxyn",block:'{"symbols":[],"statements":[[6,"section"],[9,"id","PurchaseRedirectContinue"],[9,"role","main"],[9,"data-bi-area","PurchaseRedirectContinue"],[7],[0,"\\n    "],[6,"div"],[9,"class","content"],[7],[0,"\\n        "],[6,"img"],[9,"class","asyncLogo"],[10,"src",[26,[[18,"asyncPurchaseLogo"]]]],[9,"aria-hidden","true"],[7],[8],[0,"\\n        "],[6,"h1"],[9,"class","type-t2 cli_title"],[7],[1,[20,["strings","Purchase_Title_Done_Paying"]],false],[8],[0,"\\n        "],[6,"p"],[9,"class","cli_message"],[7],[1,[18,"asyncPurchaseRedirectContinueText"],false],[8],[0,"\\n    "],[8],[0,"\\n    "],[6,"div"],[9,"class","CTAContainer"],[7],[0,"\\n        "],[6,"button"],[9,"class","btn btn-wide btn-primary cli_buyButton"],[9,"id","purchaseRedirectContinue"],[9,"data-bi-name","PurchaseRedirectContinueTryPurchase"],[9,"data-bi-slot","1"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"purchaseRedirectContinueTryPurchase"]],[7],[0,"\\n            "],[1,[20,["strings","Purchase_Button_Get_My_Stuff"]],false],[0,"\\n        "],[8],[0,"\\n        "],[6,"button"],[9,"class","btn btn-wide btn-alternate btn-back cli_tryAgain"],[9,"id","purchaseTryAgain"],[9,"data-bi-name","PurchaseRedirectContinueTryRedirectAgain"],[9,"data-bi-slot","2"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"purchaseRedirectContinueTryRedirectAgain"]],[7],[0,"\\n            "],[1,[20,["strings","Purchase_Button_Try_Again"]],false],[0,"\\n        "],[8],[0,"\\n        "],[6,"button"],[9,"id","closeButton"],[9,"class","btn btn-wide btn-alternate btn-back cli_closeButton"],[9,"data-bi-name","RedirectContinueClose"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"close"]],[7],[0,"\\n            "],[1,[20,["strings","Button_Close"]],false],[0,"\\n        "],[8],[0,"\\n    "],[8],[0,"\\n"],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/purchase/redirect-continue-async.hbs"}})}),define("web-blends/templates/purchase/redirect-continue-risk",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"J2aA5GTV",block:'{"symbols":[],"statements":[[6,"section"],[9,"id","PurchaseRedirectContinue"],[9,"role","main"],[9,"data-bi-area","PurchaseRedirectContinue"],[7],[0,"\\n    "],[6,"div"],[9,"class","content"],[7],[0,"\\n        "],[6,"h1"],[9,"class","type-t2 cli_title"],[7],[1,[20,["strings","Purchase_RedirectContinue_Title"]],false],[8],[0,"\\n        "],[6,"p"],[9,"class","cli_message"],[7],[1,[20,["strings","Purchase_RedirectContinue_MainText"]],false],[8],[0,"\\n        "],[6,"p"],[9,"class","cli_subMessage"],[7],[1,[25,"message-with-bolded-buttonNames",null,[["messageParts"],[[20,["riskRedirectSubTextParts"]]]]],false],[8],[0,"\\n    "],[8],[0,"\\n    "],[1,[25,"call-to-action",null,[["order","confirm_bi_name","cancel_bi_name","selectedPi","selectedBackupPi","confirmButtonText","readyToTakeAction","showErrorPage","controller"],[[20,["model","order"]],"PurchaseRedirectContinueContinue","PurchaseRedirectContinueCancel",[20,["selectedPi"]],[20,["selectedBackupPi"]],[20,["strings","Shared_Button_Continue"]],[20,["readyToTakeAction"]],"showErrorPage",[19,0,[]]]]],false],[0,"\\n"],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/purchase/redirect-continue-risk.hbs"}})}),define("web-blends/templates/purchase/redirect-retry",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"+gsFOwWl",block:'{"symbols":[],"statements":[[6,"section"],[9,"class","PurchaseContainer content"],[9,"id","RedirectRetryContainer"],[9,"role","main"],[9,"data-bi-area","RedirectRetry"],[9,"data-bi-view","ItemsToPurchase"],[9,"data-bi-source","PurchaseCatalog"],[7],[0,"\\n    "],[1,[25,"redirect-retry-page",null,[["tryAgain","goToPDP","asyncPurchaseLogo","showFoundExistingPendingOrderMessage","displayName","waitTimeMinutes"],["tryAgain","goToPDP",[20,["model","asyncPurchaseLogo"]],[20,["model","showFoundExistingPendingOrderMessage"]],[20,["model","paymentProviderDisplayName"]],[20,["model","waitTimeMinutes"]]]]],false],[0,"\\n"],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/purchase/redirect-retry.hbs"}})}),define("web-blends/templates/purchase/rewards-reactive",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"NudTnHks",block:'{"symbols":[],"statements":[[6,"section"],[9,"class","rewards-reactive"],[9,"id","RewardsReactiveContainer"],[9,"role","main"],[9,"data-bi-area","RewardsThanks"],[9,"data-bi-name","RewardsThanksContainer"],[9,"data-bi-view","RewardsThanks"],[9,"data-bi-source","Rewards"],[7],[0,"\\n    "],[6,"div"],[9,"class","content"],[7],[0,"\\n        "],[6,"h1"],[9,"class","type-t2 cli_dialogTitle"],[7],[1,[20,["strings","Payment_Incentive_Reactive_Title"]],false],[8],[0,"\\n        "],[6,"div"],[7],[1,[20,["strings","Payment_Incentive_Reactive_Description"]],false],[8],[0,"\\n\\n        "],[6,"div"],[9,"class","reactive_legalese metaContainer"],[7],[0,"\\n            "],[1,[20,["strings","Payment_Incentive_Legal"]],false],[0,"\\n        "],[8],[0,"\\n    "],[8],[0,"\\n    "],[6,"div"],[9,"class","CTAContainer"],[7],[0,"\\n        "],[6,"button"],[9,"id","cancelButton"],[9,"class","btn btn-default btn-back cli_cancelButton"],[9,"data-bi-area","RewardsCancel"],[9,"data-bi-name","CancelButtonClicked"],[3,"action",[[19,0,[]],"cancel"]],[7],[0,"\\n            "],[1,[20,["strings","Shared_Button_Cancel"]],false],[0,"\\n        "],[8],[0,"\\n        "],[6,"button"],[9,"id","nextButton"],[9,"class","btn btn-primary cli_nextButton"],[9,"data-bi-area","RewardsNext"],[9,"data-bi-name","NextButtonClicked"],[3,"action",[[19,0,[]],"next"]],[7],[0,"\\n            "],[1,[20,["strings","Shared_Button_Next"]],false],[0,"\\n        "],[8],[0,"\\n    "],[8],[0,"\\n"],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/purchase/rewards-reactive.hbs"}})}),define("web-blends/templates/purchase/rewards-thanks",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"QF89ub3y",block:'{"symbols":[],"statements":[[6,"section"],[9,"class","rewards-thanks"],[9,"id","RewardsThanksContainer"],[9,"role","main"],[9,"data-bi-area","RewardsThanks"],[9,"data-bi-name","RewardsThanksContainer"],[9,"data-bi-view","RewardsThanks"],[9,"data-bi-source","Rewards"],[7],[0,"\\n    "],[6,"div"],[9,"class","content"],[7],[0,"\\n        "],[6,"h1"],[9,"class","type-t2 cli_dialogTitle"],[7],[1,[20,["strings","Rewards_ThankYou_Title"]],false],[8],[0,"\\n        "],[6,"div"],[7],[1,[20,["strings","Rewards_ThankYou_Description"]],false],[8],[0,"\\n    "],[8],[0,"\\n    "],[6,"div"],[9,"class","CTAContainer"],[7],[0,"\\n        "],[6,"button"],[9,"id","nextButton"],[9,"class","btn btn-primary cli_nextButton"],[9,"data-bi-area","RewardsNext"],[9,"data-bi-name","NextButtonClicked"],[3,"action",[[19,0,[]],"next"]],[7],[0,"\\n            "],[1,[20,["strings","Shared_Button_Next"]],false],[0,"\\n        "],[8],[0,"\\n    "],[8],[0,"\\n"],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/purchase/rewards-thanks.hbs"}})}),define("web-blends/templates/purchase/risk-challenge",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"QNsbBFcN",block:'{"symbols":[],"statements":[[1,[25,"risk-challenge",null,[["modelData","order","selectedPi","selectedBackupPi","paymentMethodType","handleError","handleSuccess","handleAsyncPiContinue","handleSmsAddPiSuccess","handleSmsRiskChallengeContinue"],[[20,["model","data"]],[20,["model","confirmPurchaseOrderModel","order"]],[20,["model","confirmPurchaseOrderModel","selectedPi"]],[20,["model","confirmPurchaseOrderModel","selectedBackupPi"]],[20,["paymentMethodType"]],"handleError","handleSuccess","handleAsyncPiContinue","handleSmsAddPiSuccess","handleSmsRiskChallengeContinue"]]],false]],"hasEval":false}',meta:{moduleName:"web-blends/templates/purchase/risk-challenge.hbs"}})}),define("web-blends/templates/purchase/save-to-cart",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"58pELIiX",block:'{"symbols":[],"statements":[[6,"section"],[9,"class","save-to-cart"],[9,"id","SaveToCartContainer"],[9,"role","main"],[9,"data-bi-area","SaveToCart"],[9,"data-bi-name","SaveToCartContainer"],[9,"data-bi-view","SaveToCart"],[9,"data-bi-source","SaveToCart"],[7],[0,"\\n    "],[6,"div"],[9,"class","content"],[7],[0,"\\n        "],[2,"h1 class=\\"header cli_purchaseSaveToCartTitle\\">{{strings.Purchase_Save_To_Cart_Title}}</h1\\n            TODO: Placeholder until strings are finalized. Task 17663021"],[0,"\\n        "],[6,"h1"],[9,"class","header cli_purchaseSaveToCartTitle"],[7],[0,"Add to your cart and get it later"],[8],[0,"\\n        "],[6,"div"],[9,"id","TextContainer"],[7],[0,"\\n            "],[2,"p class=\\"cli_PurchaseSaveToCartMainText\\">{{strings.Purchase_Save_To_Cart_MainText}}</p\\n            TODO: Placeholder until strings are finalized. Task 17663021"],[0,"\\n            "],[6,"p"],[9,"class","cli_PurchaseSaveToCartMainText"],[7],[0,"Still interested? Add this item to your cart and get it next time you\'re in Store."],[8],[0,"\\n        "],[8],[0,"\\n    "],[8],[0,"\\n    "],[6,"div"],[9,"class","CTAContainer"],[7],[0,"\\n        "],[6,"button"],[9,"class","btn btn-default btn-back cli_closeButton"],[9,"id","closeButton"],[9,"data-bi-slot","1"],[9,"data-bi-name","SaveToCartClose"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"close"]],[7],[0,"\\n            "],[1,[20,["strings","Button_Close"]],false],[0,"\\n        "],[8],[0,"\\n        "],[6,"button"],[9,"id","saveToCartButton"],[9,"class","btn btn-primary cli_addButton"],[9,"data-bi-slot","1"],[9,"data-bi-name","SaveToCartButton"],[3,"action",[[19,0,[]],"add"]],[7],[0,"\\n            Add to Cart "],[1,[20,["strings","Shared_Button_Add_To_Cart"]],false],[2," TODO: Placeholder until strings are finalized. Task 17663021"],[0,"\\n        "],[8],[0,"\\n    "],[8],[0,"\\n"],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/purchase/save-to-cart.hbs"}})}),define("web-blends/templates/purchase/select-address-action",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"1D8zyvvp",block:'{"symbols":[],"statements":[[6,"button"],[9,"tabindex","0"],[9,"id","selectAddressAction"],[9,"class","selectedPi cli_selectAddressAction"],[9,"data-bi-name","SelectDefaultAddress"],[9,"data-bi-slot","1"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"selectAddress"]],[7],[0,"\\n    "],[6,"div"],[9,"class","piDisplayData"],[7],[0,"\\n        "],[6,"div"],[9,"class","changeLink"],[7],[1,[18,"selectAddressString"],false],[8],[0,"\\n"],[4,"unless",[[20,["showConfirmLinkText"]]],null,{"statements":[[0,"            "],[6,"div"],[9,"class","changeText"],[7],[1,[20,["strings","Confirm_Button"]],false],[8],[0,"\\n"]],"parameters":[]},null],[0,"    "],[8],[0,"\\n"],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/purchase/select-address-action.hbs"}})}),define("web-blends/templates/purchase/select-address",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"s3PS0dhv",block:'{"symbols":["address"],"statements":[[6,"section"],[9,"id","AddressesContainer"],[9,"role","main"],[9,"data-bi-area","PurchaseSelectAddress"],[7],[0,"\\n    "],[6,"div"],[9,"class","content"],[9,"data-bi-area","Addresses"],[9,"data-bi-view","ListOfAddresses"],[9,"data-bi-source","PiCatalog"],[7],[0,"\\n"],[4,"if",[[20,["model","accountAddresses"]]],null,{"statements":[[0,"            "],[6,"h1"],[9,"class","type-t2"],[7],[1,[18,"selectAddressTitle"],false],[8],[0,"\\n            "],[6,"p"],[9,"id","AddressesTextContainer"],[9,"class","cli_addressesText"],[7],[1,[18,"addAddressText"],false],[8],[0,"\\n            "],[6,"div"],[10,"id",[26,[[18,"addressContainer"]]]],[7],[0,"\\n"],[4,"each",[[20,["model","accountAddresses"]]],null,{"statements":[[0,"                    "],[6,"button"],[9,"class","selectedAddress cli_selectedAddress"],[9,"data-bi-mto",""],[9,"data-bi-name","Address"],[9,"data-bi-slot","0"],[10,"data-bi-id",[19,1,["id"]],null],[3,"action",[[19,0,[]],"selectAddress",[19,1,[]]]],[7],[0,"\\n                        "],[1,[25,"address-display-data",null,[["address"],[[19,1,[]]]]],false],[0,"\\n                    "],[8],[0,"\\n"]],"parameters":[1]},null],[0,"            "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[6,"h2"],[9,"class","type-t3 cli_NoAddressesMessage"],[7],[0,"\\n                "],[1,[20,["strings","SelectAddress_Message_NoAddress"]],false],[0,"\\n            "],[8],[0,"\\n"]],"parameters":[]}],[0,"        "],[6,"button"],[9,"class","selectedPi addAddress"],[9,"id","addAddressInSelectAddress"],[9,"data-bi-name","addAddress"],[9,"data-bi-mto",""],[9,"role","button"],[3,"action",[[19,0,[]],"addAddress"]],[7],[0,"\\n                "],[6,"div"],[9,"class","piDisplayData"],[7],[0,"\\n                    "],[6,"div"],[9,"class","changeLink"],[7],[0,"\\n                        "],[6,"i"],[9,"class","icon icon-addto"],[9,"aria-hidden","true"],[7],[8],[1,[18,"addAddressButtonText"],false],[0,"\\n                    "],[8],[0,"\\n                "],[8],[0,"\\n        "],[8],[0,"\\n    "],[8],[0,"\\n    "],[6,"div"],[9,"class","CTAContainer"],[7],[0,"\\n        "],[6,"button"],[9,"class","addressesBack btn btn-default btn-back cli_backButton"],[9,"data-bi-name","Back"],[9,"data-bi-slot","1"],[3,"action",[[19,0,[]],"cancel"]],[7],[0,"\\n            "],[1,[20,["strings","Shared_Button_Back"]],false],[0,"\\n        "],[8],[0,"\\n    "],[8],[0,"\\n"],[8],[0,"\\n"],[1,[18,"outlet"],false]],"hasEval":false}',meta:{moduleName:"web-blends/templates/purchase/select-address.hbs"}})}),define("web-blends/templates/purchase/select-pi-action",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"hs74rMps",block:'{"symbols":[],"statements":[[6,"button"],[9,"tabindex","0"],[9,"id","addPiAction"],[9,"class","selectedPi cli_selectPiAction"],[9,"data-bi-name","SelectPi"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"selectPi"]],[7],[0,"\\n    "],[6,"div"],[9,"class","piDisplayData"],[7],[0,"\\n        "],[6,"div"],[9,"class","changeLink"],[7],[0,"\\n            "],[6,"i"],[9,"class","icon icon-addto"],[9,"aria-hidden","true"],[7],[8],[0," "],[1,[20,["strings","SelectPi_Label_HowPay"]],false],[0,"\\n        "],[8],[0,"\\n    "],[8],[0,"\\n"],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/purchase/select-pi-action.hbs"}})}),define("web-blends/templates/purchase/select-pi",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"LiAN7bWp",block:'{"symbols":["pi","index","pi","index"],"statements":[[4,"if",[[20,["showOobeExperience"]]],null,{"statements":[[6,"section"],[9,"id","PISOOBE"],[9,"role","main"],[9,"data-bi-area","PurchaseSelectPi"],[9,"data-bi-name","PurchaseSelectPi"],[7],[0,"\\n    "],[6,"div"],[9,"class","content"],[9,"data-bi-area","PIs"],[9,"data-bi-name","PIs"],[9,"data-bi-view","ListOfPIs"],[9,"data-bi-source","PiCatalog"],[7],[0,"\\n        "],[6,"div"],[9,"class","content_header"],[7],[0,"\\n            "],[6,"h1"],[9,"class","type-t2"],[7],[0,"\\n                "],[1,[18,"title"],false],[0,"\\n            "],[8],[0,"\\n        "],[8],[0,"\\n        "],[6,"div"],[9,"class","content_body"],[7],[0,"\\n"],[4,"if",[[20,["model","hasPi"]]],null,{"statements":[[0,"            "],[6,"div"],[9,"id","piContainer"],[7],[0,"\\n                "],[6,"div"],[9,"id","piOptions"],[7],[0,"\\n"],[4,"each",[[20,["model"]]],null,{"statements":[[0,"                    "],[1,[25,"payment-instrument",null,[["buttonId","selectedPi","canShowUpdateLabel","submit","updatePi","verifyPi","includePiInAction","class","cli_class","bi_slot","bi_source","bi_name","change_label","piContext","isOobe"],[[25,"concat",["PiOption",[19,4,[]]],null],[19,3,[]],true,"selectPi","updatePi","verifyPi","true","piOption","cli_piOption","0","pi","Pi","SelectPi_Label_Select","selectPi",true]]],false],[0,"\\n"]],"parameters":[3,4]},null],[4,"if",[[20,["model","showRedeemLink"]]],null,{"statements":[[0,"                    "],[1,[25,"redeem-gift-card",null,[["action","class"],["replaceWithRedeem","piOption"]]],false],[0,"\\n"]],"parameters":[]},null],[0,"                "],[8],[0,"\\n            "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[6,"p"],[9,"class","cli_noPiMessage"],[7],[0,"\\n                "],[1,[20,["model","noPaymentInstruments","noPisMessage"]],false],[0,"\\n            "],[8],[0,"\\n"]],"parameters":[]}],[0,"            "],[6,"div"],[9,"id","addPiContainer"],[7],[0,"\\n                "],[12,"purchase/add-pi-action",[]],[0,"\\n            "],[8],[0,"\\n        "],[8],[0,"\\n    "],[8],[0,"\\n    "],[6,"div"],[9,"class","CTAContainer"],[7],[0,"\\n        "],[6,"button"],[9,"id","back"],[9,"class","piBack btn btn-default btn-back cli_piBack"],[9,"data-bi-name","Back"],[9,"data-bi-slot","1"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"cancel"]],[7],[0,"\\n            "],[1,[20,["strings","Shared_Button_Cancel"]],false],[0,"\\n        "],[8],[0,"\\n    "],[8],[0,"\\n"],[8],[0,"\\n"]],"parameters":[]},{"statements":[[6,"section"],[9,"id","PIS"],[9,"role","main"],[9,"data-bi-area","PurchaseSelectPi"],[9,"data-bi-name","PurchaseSelectPi"],[7],[0,"\\n    "],[6,"div"],[9,"class","content"],[9,"data-bi-area","PIs"],[9,"data-bi-name","PIs"],[9,"data-bi-view","ListOfPIs"],[9,"data-bi-source","PiCatalog"],[7],[0,"\\n        "],[6,"h1"],[9,"class","type-t2"],[7],[0,"\\n            "],[1,[18,"title"],false],[0,"\\n        "],[8],[0,"\\n"],[4,"if",[[20,["model","hasPi"]]],null,{"statements":[[0,"            "],[6,"div"],[9,"id","piContainer"],[7],[0,"\\n                "],[6,"div"],[9,"id","piOptions"],[10,"aria-label",[18,"title"],null],[9,"role","list"],[10,"class",[26,[[25,"if",[[20,["isPaymentLuminosityContrastEnabled"]],"piOptions"],null]]]],[7],[0,"\\n"],[4,"each",[[20,["model"]]],null,{"statements":[[0,"                            "],[1,[25,"payment-instrument",null,[["buttonId","selectedPi","mercurySelectedPi","mercuryDunningScenario","canShowUpdateLabel","submit","updatePi","verifyPi","includePiInAction","class","cli_class","bi_slot","bi_source","bi_name","change_label","piContext","positionInSet","totalElementsInSet","useListAccessibility","accessibilityLabelTemplate","accessibilityLabelId"],[[25,"concat",["PiOption",[19,2,[]]],null],[19,1,[]],[20,["mercurySelectedPi"]],[20,["mercuryDunningScenario"]],true,"selectPi","updatePi","verifyPi","true","piOption","cli_piOption","0","pi","Pi","SelectPi_Label_Select","selectPi",[25,"sum",[[19,2,[]],1],null],[20,["totalElementsInSelection"]],false,[20,["strings","Pi_Option_AccessibilityLabel"]],[25,"concat",["listAccessibilityLabel",[25,"sum",[[19,2,[]],1],null]],null]]]],false],[0,"\\n"]],"parameters":[1,2]},null],[4,"if",[[20,["model","showRedeemLink"]]],null,{"statements":[[0,"                            "],[1,[25,"redeem-gift-card",null,[["action","class","positionInSet","totalElementsInSet","useListAccessibility","accessibilityLabelTemplate","accessibilityLabelId","isRoleRequired"],["replaceWithRedeem","piOption",[25,"sum",[[20,["model","length"]],1],null],[20,["totalElementsInSelection"]],false,[20,["strings","Pi_Option_AccessibilityLabel"]],[25,"concat",["listAccessibilityLabel",[25,"sum",[[20,["model","length"]],1],null]],null],true]]],false],[0,"\\n"]],"parameters":[]},null],[0,"                        "],[6,"div"],[9,"id","addPiContainer"],[10,"class",[26,["piOption ",[25,"if",[[20,["isPaymentLuminosityContrastEnabled"]],"addPiContainer"],null]]]],[10,"aria-label",[18,"getListAccessibilityLabelAddPi"],null],[7],[0,"\\n                            "],[12,"purchase/add-pi-action",[]],[0,"\\n                        "],[8],[0,"\\n                "],[8],[0,"\\n            "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[6,"p"],[9,"class","cli_noPiMessage"],[7],[0,"\\n                "],[1,[20,["model","noPaymentInstruments","noPisMessage"]],false],[0,"\\n            "],[8],[0,"\\n            "],[6,"div"],[9,"id","addPiContainer"],[10,"class",[26,["piOption ",[25,"if",[[20,["isPaymentLuminosityContrastEnabled"]],"addPiContainer"],null]]]],[10,"aria-label",[18,"getListAccessibilityLabelAddPi"],null],[9,"role","list"],[7],[0,"\\n                "],[12,"purchase/add-pi-action",[]],[0,"\\n            "],[8],[0,"\\n"]],"parameters":[]}],[0,"    "],[8],[0,"\\n    "],[6,"div"],[9,"class","CTAContainer"],[7],[0,"\\n        "],[6,"button"],[9,"id","back"],[9,"class","piBack btn btn-default btn-back cli_piBack"],[9,"data-bi-name","Back"],[9,"data-bi-slot","1"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"cancel"]],[7],[0,"\\n            "],[1,[20,["strings","Shared_Button_Back"]],false],[0,"\\n        "],[8],[0,"\\n    "],[8],[0,"\\n"],[8],[0,"\\n"]],"parameters":[]}],[1,[18,"outlet"],false]],"hasEval":true}',meta:{moduleName:"web-blends/templates/purchase/select-pi.hbs"}})}),define("web-blends/templates/purchase/subscription-downgrade",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"J7iZezfp",block:'{"symbols":[],"statements":[[6,"section"],[9,"class","SubscriptionDowngradeContainer"],[9,"role","main"],[9,"data-bi-area","SubscriptionDowngrade"],[7],[0,"\\n  "],[1,[25,"subs-downgrade",null,[["ownedBigId","convertBigId","ownedProduct","convertProduct","sharedType","expirationDate","keepCurrent","downgradeConfirm","cancel"],[[20,["ownedBigId"]],[20,["convertBigId"]],[20,["model","ownedProduct"]],[20,["model","convertProduct"]],[20,["model","sharedType"]],[20,["expirationDate"]],"keepCurrent","downgradeConfirm","cancel"]]],false],[0,"\\n"],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/purchase/subscription-downgrade.hbs"}})}),define("web-blends/templates/purchase/subscription-interstitial",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"4aEA4xeO",block:'{"symbols":[],"statements":[[1,[25,"subscription-interstitial",null,[["retailPrice","listPrice","currencyCode","lineItemTitle","posterImage","recurrencePrice","isTrial","localizedTrialDurationString","initialChargeFrequency","localizedChargeFrequency","promotionalCoreDurationUnitType","promotionalCoreDurationUnits","continue","cancel"],[[20,["model","retailPrice"]],[20,["model","listPrice"]],[20,["model","currencyCode"]],[20,["model","lineItemTitle"]],[20,["model","posterImage"]],[20,["model","recurrencePrice"]],[20,["model","isTrial"]],[20,["model","localizedTrialDurationString"]],[20,["model","initialChargeFrequency"]],[20,["model","localizedChargeFrequency"]],[20,["model","promotionalCoreDurationUnitType"]],[20,["model","promotionalCoreDurationUnits"]],"continue","cancel"]]],false]],"hasEval":false}',meta:{moduleName:"web-blends/templates/purchase/subscription-interstitial.hbs"}})}),define("web-blends/templates/purchase/subscription-upgrade",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"XHhp1pdc",block:'{"symbols":[],"statements":[[1,[25,"subscription-upgrade",null,[["newExpirationDate","posterImage","lineItemTitle","showModernConversion","conversionDetailsUrl","continue","cancel"],[[20,["model","newExpirationDate"]],[20,["model","posterImage"]],[20,["model","lineItemTitle"]],[20,["model","showModernConversion"]],[20,["model","conversionDetailsUrl"]],"continue","cancel"]]],false]],"hasEval":false}',meta:{moduleName:"web-blends/templates/purchase/subscription-upgrade.hbs"}})}),define("web-blends/templates/purchase/tvod-resume",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"Xfa7/3N4",block:'{"symbols":[],"statements":[[6,"section"],[9,"role","main"],[9,"ID","tvodResume"],[9,"data-bi-area","PurchaseTvodResume"],[7],[0,"\\n    "],[6,"div"],[9,"class","content"],[7],[0,"\\n        "],[6,"div"],[9,"id","besTvLogo"],[9,"class","besTvLogo"],[7],[0,"\\n            "],[6,"img"],[9,"src","/uniblends/REL20231025.1/assets/images/bestv.svg"],[10,"alt",[26,[[20,["strings","Tvod_BesTvLogoAltText"]]]]],[7],[8],[0,"\\n        "],[8],[0,"\\n"],[4,"if",[[20,["ismoderngamertagenabled"]]],null,{"statements":[[0,"        "],[6,"div"],[9,"id","GamertagContainer"],[7],[0,"\\n            "],[6,"div"],[9,"class","gamertagÂ cli_gamertag"],[7],[1,[18,"moderngamertag"],false],[8],[0,"\\n            "],[6,"div"],[9,"class","gamertagsuffixÂ cli_gamertagsuffix"],[7],[1,[18,"moderngamertagsuffix"],false],[8],[0,"\\n        "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[20,["gamertag"]]],null,{"statements":[[0,"                "],[6,"div"],[9,"id","GamertagContainer"],[7],[0,"\\n                    "],[6,"div"],[9,"class","gamertag cli_gamertag"],[9,"data-bi-name","gamerTag"],[7],[1,[18,"gamertag"],false],[8],[0,"\\n                "],[8],[0,"\\n"]],"parameters":[]},null],[0,"Â Â Â Â Â Â \\n"]],"parameters":[]}],[0,"        "],[6,"p"],[7],[1,[18,"message"],false],[8],[0,"\\n        "],[6,"div"],[9,"class","CTAContainer"],[7],[0,"\\n            "],[6,"button"],[9,"style","display:none;"],[9,"class","btn btn-primary cli_checkPurchaseState"],[9,"id","tryAgain"],[9,"data-bi-name","tryAgainbutton"],[9,"data-bi-slot","2"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"tryAgain"]],[7],[0,"\\n                "],[1,[20,["strings","Shared_Button_TryAgain"]],false],[0,"\\n            "],[8],[0,"\\n        "],[8],[0,"\\n    "],[8],[0,"\\n"],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/purchase/tvod-resume.hbs"}})}),define("web-blends/templates/redeem/enter-code",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"9iaOSaG9",block:'{"symbols":["link"],"statements":[[6,"section"],[9,"class","RedeemContainer"],[9,"role","main"],[9,"data-bi-area","RedeemEnterCode"],[9,"data-bi-name","RedeemEnterCode"],[7],[0,"\\n"],[4,"if",[[20,["shouldShowRedeemEnterCode"]]],null,{"statements":[[4,"if",[[20,["ismoderngamertagenabled"]]],null,{"statements":[[0,"    "],[6,"div"],[9,"id","GamertagContainer"],[9,"labelledby","gamertag gamertagsuffix"],[7],[0,"\\n        "],[6,"div"],[9,"class","gamertag cli_gamertag"],[7],[1,[18,"moderngamertag"],false],[8],[0,"\\n        "],[6,"div"],[9,"class","gamertagsuffix cli_gamertagsuffix"],[7],[1,[18,"moderngamertagsuffix"],false],[8],[0,"\\n"],[4,"if",[[25,"and",[[20,["isModernXboxClient"]],[20,["gamerpic"]]],null]],null,{"statements":[[0,"        "],[6,"img"],[9,"class","gamerpic cli_gamerpic"],[10,"src",[26,[[18,"gamerpic"]]]],[7],[8],[0,"\\n"]],"parameters":[]},null],[0,"    "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[20,["gamertag"]]],null,{"statements":[[0,"    "],[6,"div"],[9,"id","GamertagContainer"],[7],[0,"\\n        "],[6,"div"],[9,"class","gamertag cli_gamertag"],[7],[1,[18,"gamertag"],false],[8],[0,"\\n"],[4,"if",[[25,"and",[[20,["isModernXboxClient"]],[20,["gamerpic"]]],null]],null,{"statements":[[0,"        "],[6,"img"],[9,"class","gamerpic cli_gamerpic"],[10,"src",[26,[[18,"gamerpic"]]]],[7],[8],[0,"\\n"]],"parameters":[]},null],[0,"    "],[8],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}],[0,"    "],[6,"div"],[9,"class","content"],[9,"role","form"],[7],[0,"\\n        "],[6,"h1"],[9,"class","type-t2 cli_dialogTitle"],[7],[1,[18,"titleString"],false],[8],[0,"\\n"],[4,"if",[[20,["showNewRedeemText"]]],null,{"statements":[[0,"        "],[6,"div"],[9,"class","descriptionContainer"],[7],[0,"\\n            "],[6,"p"],[7],[1,[18,"redeemDescription"],false],[8],[0,"\\n        "],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[20,["model","emailAddress"]]],null,{"statements":[[0,"        "],[6,"div"],[9,"class","emailContainer"],[9,"data-bi-mto",""],[7],[0,"\\n            "],[6,"label"],[9,"class","redeemToEmailLabel cli_redeemToEmailLabel"],[9,"aria-live","polite"],[7],[1,[18,"redeemInfo"],false],[8],[0,"\\n        "],[8],[0,"\\n"]],"parameters":[]},null],[0,"        "],[1,[25,"input",[[25,"-input-type",[[20,["inputBoxType"]]],null]],[["type","class","name","id","value","enter","maxlength","aria-label","autofocus","autocomplete","autocorrect","autocapitalize","spellcheck","placeholder","focus-out"],[[20,["inputBoxType"]],"redeemTokenString","tokenString","tokenString",[20,["tokenString"]],"next","tokenLength",[25,"concat",[[20,["titleString"]],[20,["strings","Redeem_Enter25_Character"]]],null],true,"off","off","off","false",[20,["strings","Redeem_Enter25_Character"]],"incompleteToken"]]],false],[0,"\\n"],[4,"unless",[[20,["hideInputBoxHint"]]],null,{"statements":[[0,"        "],[6,"div"],[9,"class","tokenInputHint"],[7],[1,[18,"enterCodeHint"],false],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[20,["errorMessage"]]],null,{"statements":[[0,"        "],[6,"div"],[9,"class","redeem_code_error"],[7],[0,"\\n            "],[6,"p"],[9,"class","cli_inlineErrorMessage"],[10,"aria-label",[18,"errorMessage"],null],[7],[1,[18,"errorMessage"],true],[8],[0,"\\n            "],[6,"div"],[9,"class","screen-reader"],[9,"role","alert"],[7],[0,"\\n"],[4,"if",[[20,["screenReaderErrorMessage"]]],null,{"statements":[[0,"                "],[1,[18,"screenReaderErrorMessage"],true],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                "],[1,[18,"errorMessage"],true],[0,"\\n"]],"parameters":[]}],[0,"            "],[8],[0,"\\n"],[4,"if",[[20,["redirectLinks"]]],null,{"statements":[[0,"            "],[6,"p"],[9,"class","cli_redirectLinkHeader redirectLinkHeader"],[7],[1,[20,["strings","Redeem_TokenNotSupported_Redeem"]],false],[0,"\\n            "],[8],[0,"\\n"],[4,"each",[[20,["redirectLinks"]]],null,{"statements":[[0,"            "],[6,"p"],[9,"class","cli_redeemRedirectLinks redeemRedirectLinks"],[7],[0,"\\n                "],[6,"a"],[10,"href",[19,1,["url"]],null],[10,"id",[19,1,["id"]],null],[9,"class","redirectLink"],[10,"data-bi-name",[19,1,["biContentName"]],null],[10,"data-bi-id",[19,1,["id"]],null],[3,"action",[[19,0,[]],"openUrl",[19,1,["url"]],[19,1,["urlType"]]]],[7],[1,[19,1,["tokenText"]],false],[8],[0,"\\n            "],[8],[0,"\\n"]],"parameters":[1]},null],[4,"if",[[20,["showXboxRedeemErrorString"]]],null,{"statements":[[0,"            "],[6,"p"],[9,"class","cli_redeemRedirectLinks redeemRedirectText"],[7],[0,"\\n                "],[1,[20,["strings","Redeem_UseYourConcole2"]],false],[8],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[4,"if",[[20,["isCsvCurrencyMismatch"]]],null,{"statements":[[0,"            "],[6,"p"],[7],[0,"\\n                "],[6,"span"],[9,"class","changeRegionLink cli_changeRegionLink"],[9,"tabindex","0"],[3,"action",[[19,0,[]],"changeRegionClicked"]],[7],[1,[20,["strings","Redeem_CsvCurrencyMismatchLink"]],false],[8],[0,"\\n            "],[8],[0,"\\n"]],"parameters":[]},null],[0,"            "],[1,[25,"error-info",null,[["errorCode"],[[20,["errorCode"]]]]],false],[0,"\\n        "],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[20,["showRedirectMsg"]]],null,{"statements":[[0,"        "],[6,"div"],[9,"class","redirectMessageContainer"],[7],[0,"\\n            "],[6,"i"],[9,"class","icon  segoeFluentIcon-info-circle redirectIcon"],[9,"aria-hidden","false"],[7],[8],[0,"\\n            "],[1,[25,"message-with-links",null,[["messageParts","action","class","tagName"],[[20,["redirectMessage"]],"openUrl","redirectMessage","p"]]],false],[0,"\\n        "],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[20,["ocrScanLinkLabel"]]],null,{"statements":[[0,"        "],[6,"button"],[9,"id","scanButton"],[9,"class","btn btn-link btn-autoWidth"],[9,"data-bi-name","UseScanCode"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"openScanLink"]],[7],[0,"\\n            "],[1,[18,"ocrScanLinkLabel"],false],[0,"\\n        "],[8],[0,"\\n"]],"parameters":[]},null],[0,"    "],[8],[0,"\\n    "],[6,"div"],[9,"class","CTAContainer"],[7],[0,"\\n"],[4,"if",[[20,["isModernXboxClient"]]],null,{"statements":[[0,"        "],[6,"button"],[9,"id","nextButton"],[9,"class","btn btn-primary cli_buyButton"],[10,"disabled",[18,"isDisabled"],null],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"next"]],[7],[0,"\\n            "],[1,[18,"ctaButtonText"],false],[0,"\\n        "],[8],[0,"\\n        "],[6,"button"],[9,"id","cancelButton"],[9,"class","btn btn-default btn-back cli_cancelButton"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"cancel"]],[7],[0,"\\n            "],[1,[20,["strings","Shared_Button_Cancel"]],false],[0,"\\n        "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"        "],[6,"button"],[9,"id","cancelButton"],[9,"class","btn btn-default btn-back cli_cancelButton"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"cancel"]],[7],[0,"\\n            "],[1,[20,["strings","Shared_Button_Cancel"]],false],[0,"\\n        "],[8],[0,"\\n        "],[6,"button"],[9,"id","nextButton"],[9,"class","btn btn-primary cli_buyButton"],[10,"disabled",[18,"isDisabled"],null],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"next"]],[7],[0,"\\n            "],[1,[18,"ctaButtonText"],false],[0,"\\n        "],[8],[0,"\\n"]],"parameters":[]}],[4,"if",[[20,["isXboxOne"]]],null,{"statements":[[0,"        "],[6,"div"],[9,"class","redeemOptionsContainer"],[7],[0,"\\n            "],[6,"button"],[9,"id","viewTerms"],[9,"class","btn"],[9,"data-bi-slot","1"],[9,"data-bi-name","ViewTerms"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"viewTerms"]],[7],[0,"\\n                "],[1,[18,"viewTermsButtonText"],false],[0,"\\n            "],[8],[0,"\\n        "],[8],[0,"\\n"]],"parameters":[]},null],[0,"    "],[8],[0,"\\n"]],"parameters":[]},null],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/redeem/enter-code.hbs"}})}),define("web-blends/templates/redeem/prorate",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"mDQY6kcI",block:'{"symbols":[],"statements":[[1,[25,"redeem-prorate-page",null,[["model","keep","getLess","cancel","viewTerms"],[[20,["model"]],"keep","getLess","cancel","viewTerms"]]],false]],"hasEval":false}',meta:{moduleName:"web-blends/templates/redeem/prorate.hbs"}})}),define("web-blends/templates/redeem/redeem-confirm",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"TuUNHNfL",block:'{"symbols":[],"statements":[[6,"section"],[9,"class","RedeemContainer"],[9,"role","main"],[9,"data-bi-area","RedeemConfirm"],[9,"data-bi-name","RedeemContainer"],[7],[0,"\\n"],[4,"if",[[20,["ismoderngamertagenabled"]]],null,{"statements":[[0,"    "],[6,"div"],[9,"id","GamertagContainer"],[9,"labelledby","gamertag gamertagsuffix"],[7],[0,"\\n        "],[6,"div"],[9,"class","gamertag cli_gamertag"],[7],[1,[18,"moderngamertag"],false],[8],[0,"\\n        "],[6,"div"],[9,"class","gamertagsuffix cli_gamertagsuffix"],[7],[1,[18,"moderngamertagsuffix"],false],[8],[0,"\\n"],[4,"if",[[25,"and",[[20,["isModernXboxClient"]],[20,["gamerpic"]]],null]],null,{"statements":[[0,"        "],[6,"img"],[9,"class","gamerpic cli_gamerpic"],[10,"src",[26,[[18,"gamerpic"]]]],[7],[8],[0,"\\n"]],"parameters":[]},null],[0,"    "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[20,["gamertag"]]],null,{"statements":[[0,"    "],[6,"div"],[9,"id","GamertagContainer"],[7],[0,"\\n        "],[6,"div"],[9,"class","gamertag cli_gamertag"],[9,"data-bi-name","gamerTag"],[7],[1,[18,"gamertag"],false],[8],[0,"\\n"],[4,"if",[[25,"and",[[20,["isModernXboxClient"]],[20,["gamerpic"]]],null]],null,{"statements":[[0,"        "],[6,"img"],[9,"class","gamerpic cli_gamerpic"],[10,"src",[26,[[18,"gamerpic"]]]],[7],[8],[0,"\\n"]],"parameters":[]},null],[0,"    "],[8],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}],[0,"    "],[6,"div"],[10,"class",[26,["content ",[25,"if",[[20,["isNewLegalTextLayoutEnabled"]],"paddingBottom"],null]]]],[9,"role","form"],[9,"id","pageContent"],[7],[0,"\\n        "],[6,"h1"],[9,"class","type-t2 cli_dialogTitle"],[9,"data-bi-area","RedeemConfirm"],[9,"data-bi-name","title"],[9,"data-bi-id","title"],[7],[0,"\\n            "],[1,[20,["strings","Redeem_ConfirmPage_Title"]],false],[8],[0,"\\n"],[4,"if",[[20,["showProductInfo"]]],null,{"statements":[[0,"        "],[6,"div"],[9,"class","productRow"],[9,"data-bi-area","RedeemConfirm"],[9,"data-bi-name","productInfo"],[9,"data-bi-id","productInfo"],[7],[0,"\\n            "],[6,"div"],[9,"class","columnImage"],[7],[0,"\\n                "],[6,"img"],[9,"id","productImage"],[10,"src",[20,["model","imageUrl"]],null],[10,"alt",[18,"imageAltText"],null],[7],[8],[0,"\\n            "],[8],[0,"\\n            "],[6,"div"],[9,"class","columnProduct"],[7],[0,"\\n                "],[6,"h2"],[9,"class","type-t3 cli_productTitle"],[7],[1,[18,"productTitle"],false],[8],[0,"\\n"],[4,"if",[[20,["showAutoRenewOnXbox"]]],null,{"statements":[[0,"                "],[6,"div"],[9,"class","autoRenewRow"],[9,"aria-live","polite"],[7],[0,"\\n                    "],[6,"div"],[9,"class","autoRenewColumn"],[7],[0,"\\n                        "],[6,"h3"],[9,"class","type-t4"],[7],[1,[18,"autoRenewTitle"],false],[8],[0,"\\n                    "],[8],[0,"\\n                    "],[6,"div"],[9,"class","autoRenewColumn"],[7],[0,"\\n                        "],[1,[25,"auto-renew-switch",null,[["action"],["toggleAutoRenew"]]],false],[0,"\\n                    "],[8],[0,"\\n                    "],[6,"div"],[9,"class","autoRenewColumn"],[9,"aria-live","assertive"],[9,"data-bi-area","RedeemConfirm"],[10,"data-bi-name",[18,"biToggleAutoRenewContent"],null],[10,"data-bi-id",[18,"biToggleAutoRenewContent"],null],[7],[0,"\\n                        "],[6,"h3"],[9,"class","type-t4"],[7],[1,[18,"autoRenewOnOffIndicatorTitle"],false],[8],[0,"\\n                    "],[8],[0,"\\n                "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[20,["isBuddyPassScenario"]]],null,{"statements":[[0,"                        "],[6,"p"],[7],[1,[20,["strings","Subscribe_Auto_Renew_Discount_14Day"]],false],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                        "],[6,"h3"],[9,"class","type-t4"],[7],[1,[20,["model","product","PublisherName"]],false],[8],[0,"\\n"]],"parameters":[]}]],"parameters":[]}],[4,"if",[[20,["releaseDate"]]],null,{"statements":[[0,"                "],[6,"h3"],[9,"class","type-t4"],[7],[1,[18,"releaseDate"],false],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[20,["model","parentProducts"]]],null,{"statements":[[4,"collapsible-content",null,null,{"statements":[[0,"                "],[1,[18,"addOnForString"],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[4,"if",[[20,["consumableQuantity"]]],null,{"statements":[[0,"                "],[6,"div"],[7],[1,[18,"consumableQuantity"],false],[8],[0,"\\n"]],"parameters":[]},null],[0,"            "],[8],[0,"\\n        "],[8],[0,"\\n"],[4,"if",[[20,["model","redeemWithPi"]]],null,{"statements":[[0,"        "],[6,"div"],[9,"class","cli_redeemWithPi"],[7],[0,"\\n            "],[6,"p"],[7],[1,[20,["strings","Redeem_With_Pi_Text"]],false],[8],[0,"\\n        "],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[20,["showAutoRenewOnNonXboxClients"]]],null,{"statements":[[0,"        "],[6,"div"],[9,"class","autoRenewContainer"],[7],[0,"\\n            "],[6,"h3"],[9,"class","type-t4"],[7],[1,[18,"autoRenewTitle"],false],[8],[0,"\\n            "],[6,"div"],[9,"class","autoRenewRow"],[9,"aria-live","polite"],[7],[0,"\\n                "],[6,"div"],[9,"class","autoRenewColumn"],[7],[0,"\\n                    "],[1,[25,"auto-renew-switch",null,[["action"],["toggleAutoRenew"]]],false],[0,"\\n                "],[8],[0,"\\n                "],[6,"div"],[9,"class","autoRenewColumn"],[9,"aria-live","assertive"],[9,"data-bi-area","RedeemConfirm"],[10,"data-bi-name",[18,"biToggleAutoRenewContent"],null],[10,"data-bi-id",[18,"biToggleAutoRenewContent"],null],[7],[0,"\\n                    "],[1,[18,"autoRenewOnOffIndicatorTitle"],false],[0,"\\n                "],[8],[0,"\\n            "],[8],[0,"\\n        "],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[20,["model","allowAutoRenew"]]],null,{"statements":[[4,"if",[[20,["autoRenewOn"]]],null,{"statements":[[4,"unless",[[20,["isNewLegalTextLayoutEnabled"]]],null,{"statements":[[0,"        "],[1,[25,"legal-terms",null,[["order","orderLineItem","actionText","clickToRedirect","legalStrings"],[[20,["model","order"]],[20,["model","orderLineItemAutoRenewOn"]],[20,["strings","Confirm_Button"]],"viewTou",[20,["legalStrings"]]]]],false],[0,"\\n"],[4,"if",[[20,["isKoreanTransactionFeeEnabled"]]],null,{"statements":[[0,"            "],[6,"p"],[9,"class","transactionFeeLegal"],[7],[1,[25,"if",[[20,["isKoreaTransactionFeeV1Enabled"]],[20,["strings","Purchase_Korea_International_Transaction_Fee_V1"]],[20,["strings","Purchase_Korea_International_Transaction_Fee"]]],null],false],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[20,["isArgentinaTransactionFeeEnabled"]]],null,{"statements":[[4,"if",[[20,["isArgentinaTransactionFeeV1Enabled"]]],null,{"statements":[[0,"                "],[6,"p"],[9,"class","transactionFeeLegal"],[7],[1,[20,["strings","Purchase_Argentina_International_Transaction_Fee_V1"]],false],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                "],[6,"p"],[9,"class","transactionFeeLegal"],[7],[1,[20,["strings","Purchase_Argentina_International_Transaction_Fee"]],false],[8],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null]],"parameters":[]},null],[0,"        "],[6,"div"],[9,"id","PurchaseContainer"],[9,"class","cli_purchaseContainer"],[9,"data-bi-area","RedeemConfirm"],[9,"data-bi-name","selectPI"],[9,"data-bi-id","selectPI"],[7],[0,"\\n            "],[1,[25,"payment-instruments-subscription",null,[["model","handleTransition","allowedPaymentInstruments","hasAllowedPaymentInstruments","hasPiIfRequired","showAddAddressLink","showSelectAddressLink","showProfileLink"],[[20,["model"]],"handleTransition",[20,["allowedPaymentInstruments"]],[20,["hasAllowedPaymentInstruments"]],[20,["hasPiIfRequired"]],[20,["showAddAddressLink"]],[20,["showSelectAddressLink"]],[20,["showProfileLink"]]]]],false],[0,"\\n        "],[8],[0,"\\n"],[4,"if",[[20,["autoRenewalConsentRequired"]]],null,{"statements":[[4,"unless",[[20,["isNewLegalTextLayoutEnabled"]]],null,{"statements":[[0,"        "],[6,"div"],[9,"class","autoRenewalConsentContainer"],[7],[0,"\\n            "],[1,[25,"auto-renewal-consent",null,[["string","controller"],[[20,["strings"]],[19,0,[]]]]],false],[0,"\\n        "],[8],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null]],"parameters":[]},{"statements":[[4,"unless",[[20,["isNewLegalTextLayoutEnabled"]]],null,{"statements":[[0,"        "],[1,[25,"legal-terms",null,[["order","orderLineItem","actionText","clickToRedirect","legalStrings"],[[20,["model","order"]],[20,["model","orderLineItemAutoRenewOff"]],[20,["strings","Confirm_Button"]],"viewTou",[20,["legalStrings"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}]],"parameters":[]},{"statements":[[0,"        "],[6,"div"],[10,"class",[26,[[25,"if",[[20,["isNewLegalTextLayoutEnabled"]],"marginTop"],null]]]],[7],[0,"\\n            "],[1,[25,"message-with-links",null,[["messageParts","class","action","tagName"],[[20,["productLegal"]],"legalText","viewTou","p"]]],false],[0,"\\n        "],[8],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null],[4,"if",[[20,["showCsvInfo"]]],null,{"statements":[[0,"        "],[6,"div"],[9,"class","productRow"],[9,"data-bi-area","RedeemConfirm"],[9,"data-bi-name","csvInfo"],[9,"data-bi-id","csvInfo"],[7],[0,"\\n            "],[6,"div"],[9,"class","columnImage"],[7],[0,"\\n                "],[6,"img"],[9,"id","logoImage"],[10,"alt",[18,"imageAltText"],null],[9,"src","https://assets.onestore.ms/cdnfiles/webblend/images/logo_microsoft.png"],[7],[8],[0,"\\n            "],[8],[0,"\\n            "],[6,"div"],[9,"class","columnProduct"],[7],[0,"\\n                "],[6,"h2"],[9,"class","type-t3 cli_redeemAmountMessage"],[7],[1,[18,"csvPreRedeemMessage"],false],[8],[0,"\\n            "],[8],[0,"\\n        "],[8],[0,"\\n        "],[6,"div"],[10,"class",[26,[[25,"if",[[20,["isNewLegalTextLayoutEnabled"]],"marginTop"],null]]]],[7],[0,"\\n            "],[1,[25,"message-with-links",null,[["messageParts","class","action","tagName"],[[20,["productLegal"]],"legalText","viewTou","p"]]],false],[0,"\\n        "],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[20,["showXbox360Info"]]],null,{"statements":[[0,"        "],[6,"div"],[9,"class","productRow"],[9,"aria-live","polite"],[9,"data-bi-area","RedeemConfirm"],[9,"data-bi-name","xbo360ProductInfo"],[9,"data-bi-id","xbo360ProductInfo"],[7],[0,"\\n            "],[6,"div"],[7],[0,"\\n                "],[6,"h2"],[9,"class","type-t3"],[7],[1,[20,["model","tokenInfo","xbox360TokenDescription","reducedTitle"]],false],[8],[0,"\\n            "],[8],[0,"\\n        "],[8],[0,"\\n        "],[6,"div"],[10,"class",[26,[[25,"if",[[20,["isNewLegalTextLayoutEnabled"]],"marginTop"],null]]]],[7],[0,"\\n            "],[1,[25,"message-with-links",null,[["messageParts","class","action","tagName"],[[20,["productLegal"]],"legalText","viewTou","p"]]],false],[0,"\\n        "],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[20,["isNewLegalTextLayoutEnabled"]]],null,{"statements":[[4,"if",[[20,["model","allowAutoRenew"]]],null,{"statements":[[4,"if",[[20,["autoRenewOn"]]],null,{"statements":[[0,"        "],[1,[25,"legal-terms",null,[["order","orderLineItem","actionText","clickToRedirect","legalStrings"],[[20,["model","order"]],[20,["model","orderLineItemAutoRenewOn"]],[20,["strings","Confirm_Button"]],"viewTou",[20,["legalStrings"]]]]],false],[0,"\\n\\n"],[4,"if",[[20,["autoRenewalConsentRequired"]]],null,{"statements":[[0,"        "],[6,"div"],[9,"class","autoRenewalConsentContainer"],[7],[0,"\\n            "],[1,[25,"auto-renewal-consent",null,[["string","controller"],[[20,["strings"]],[19,0,[]]]]],false],[0,"\\n        "],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[20,["isKoreanTransactionFeeEnabled"]]],null,{"statements":[[0,"            "],[6,"p"],[9,"class","transactionFeeLegal"],[7],[1,[25,"if",[[20,["isKoreaTransactionFeeV1Enabled"]],[20,["strings","Purchase_Korea_International_Transaction_Fee_V1"]],[20,["strings","Purchase_Korea_International_Transaction_Fee"]]],null],false],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[20,["isArgentinaTransactionFeeEnabled"]]],null,{"statements":[[4,"if",[[20,["isArgentinaTransactionFeeV1Enabled"]]],null,{"statements":[[0,"                "],[6,"p"],[9,"class","transactionFeeLegal"],[7],[1,[20,["strings","Purchase_Argentina_International_Transaction_Fee_V1"]],false],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                "],[6,"p"],[9,"class","transactionFeeLegal"],[7],[1,[20,["strings","Purchase_Argentina_International_Transaction_Fee"]],false],[8],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null]],"parameters":[]},{"statements":[[0,"        "],[1,[25,"legal-terms",null,[["order","orderLineItem","actionText","clickToRedirect","legalStrings"],[[20,["model","order"]],[20,["model","orderLineItemAutoRenewOff"]],[20,["strings","Confirm_Button"]],"viewTou",[20,["legalStrings"]]]]],false],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null]],"parameters":[]},null],[0,"    "],[8],[0,"\\n    "],[6,"div"],[9,"class","CTAContainer"],[7],[0,"\\n        "],[6,"button"],[9,"id","cancelButton"],[9,"class","btn btn-default btn-back cli_cancelButton"],[9,"data-bi-area","RedeemConfirm"],[9,"data-bi-name","CancelButtonClicked"],[3,"action",[[19,0,[]],"cancel"]],[7],[0,"\\n            "],[1,[20,["strings","Shared_Button_Cancel"]],false],[0,"\\n        "],[8],[0,"\\n"],[4,"if",[[20,["showNextToAddPiButton"]]],null,{"statements":[[0,"        "],[6,"button"],[9,"id","nextButton"],[9,"class","btn btn-primary cli_nextButton"],[9,"data-bi-area","RedeemConfirm"],[9,"data-bi-name","NextButtonClicked"],[3,"action",[[19,0,[]],"addPi"]],[7],[0,"\\n            "],[1,[20,["strings","Shared_Button_Next"]],false],[0,"\\n        "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"        "],[6,"button"],[9,"id","confirmButton"],[9,"class","btn btn-primary cli_buyButton"],[10,"disabled",[18,"isConfirmButtonDisabled"],null],[9,"data-bi-area","RedeemConfirm"],[9,"data-bi-name","ConfirmButtonClicked"],[10,"data-bi-id",[18,"biConfirmButtonContent"],null],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"redeemToken"]],[7],[0,"\\n            "],[1,[20,["strings","Confirm_Button"]],false],[0,"\\n        "],[8],[0,"\\n"]],"parameters":[]}],[4,"if",[[20,["isXboxOne"]]],null,{"statements":[[0,"        "],[6,"button"],[9,"id","viewTerms"],[9,"class","btn btn-legal"],[9,"data-bi-slot","1"],[9,"data-bi-name","ViewTerms"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"viewTerms"]],[7],[0,"\\n            "],[1,[20,["strings","View_Terms_Button"]],false],[0,"\\n        "],[8],[0,"\\n"]],"parameters":[]},null],[0,"    "],[8],[0,"\\n"],[4,"if",[[20,["needsFingerprintTagging"]]],null,{"statements":[[0,"    "],[1,[25,"fingerprint-tagging",null,[["sessionId"],[[20,["greenId"]]]]],false],[0,"\\n"]],"parameters":[]},null],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/redeem/redeem-confirm.hbs"}})}),define("web-blends/templates/redeem/redirect-confirm",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"jcZ66q0s",block:'{"symbols":[],"statements":[[6,"section"],[9,"id","RedeemRedirectConfirm"],[9,"role","main"],[9,"data-bi-area","RedeemRedirectConfirm"],[7],[0,"\\n    "],[6,"div"],[9,"class","content"],[7],[0,"\\n        "],[6,"h1"],[9,"class","type-t2 cli_title"],[7],[1,[20,["strings","AVE_RedirectConfirm_Title"]],false],[8],[0,"\\n        "],[6,"p"],[9,"class","cli_message1"],[7],[1,[20,["strings","AVE_RedirectConfirm_Text_1"]],false],[8],[0,"\\n        "],[6,"p"],[9,"class","cli_message2"],[7],[1,[20,["strings","AVE_RedirectConfirm_Text_2"]],false],[8],[0,"\\n    "],[8],[0,"\\n    "],[6,"div"],[9,"class","CTAContainer"],[7],[0,"\\n        "],[6,"button"],[9,"class","btn btn-wide btn-primary cli_redirectButton"],[9,"id","Redirect"],[9,"data-bi-name","Redirect"],[9,"data-bi-slot","2"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"redirect"]],[7],[0,"\\n            "],[1,[20,["strings","AVE_RedirectConfirm_ConfirmButton"]],false],[0,"\\n        "],[8],[0,"\\n        "],[6,"button"],[9,"class","btn btn-wide btn-alternate btn-back cli_cancelButton"],[9,"id","Cancel"],[9,"data-bi-name","Cancel"],[9,"data-bi-slot","1"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"cancel"]],[7],[0,"\\n            "],[1,[20,["strings","Shared_Button_Cancel"]],false],[0,"\\n        "],[8],[0,"\\n    "],[8],[0,"\\n"],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/redeem/redirect-confirm.hbs"}})}),define("web-blends/templates/redeem/redirect-continue",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"lPJnbY0a",block:'{"symbols":[],"statements":[[6,"section"],[9,"id","RedeemRedirectContinue"],[9,"role","main"],[9,"data-bi-area","RedeemRedirectContinue"],[7],[0,"\\n    "],[6,"div"],[9,"class","content"],[7],[0,"\\n        "],[6,"h1"],[9,"class","type-t2 cli_title"],[7],[1,[20,["strings","AVE_RedirectContinue_Title"]],false],[8],[0,"\\n        "],[6,"p"],[9,"class","cli_message1"],[7],[1,[20,["strings","AVE_RedirectContinue_Text"]],false],[8],[0,"\\n    "],[8],[0,"\\n    "],[6,"div"],[9,"class","CTAContainer"],[7],[0,"\\n        "],[6,"button"],[9,"class","btn btn-wide btn-primary cli_confirmButton"],[9,"id","Confirm"],[9,"data-bi-name","Confirm"],[9,"data-bi-slot","3"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"confirm"]],[7],[0,"\\n            "],[1,[20,["strings","AVE_RedirectContinue_ConfirmButton"]],false],[0,"\\n        "],[8],[0,"\\n        "],[6,"button"],[9,"class","btn btn-wide btn-alternate  cli_tryAgainButton"],[9,"id","TryAgain"],[9,"data-bi-name","TryAgain"],[9,"data-bi-slot","2"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"tryAgain"]],[7],[0,"\\n            "],[1,[20,["strings","Shared_Button_No_Try_Again"]],false],[0,"\\n        "],[8],[0,"\\n        "],[6,"button"],[9,"class","btn btn-wide btn-alternate btn-back cli_cancelButton"],[9,"id","Cancel"],[9,"data-bi-name","Cancel"],[9,"data-bi-slot","1"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"cancel"]],[7],[0,"\\n            "],[1,[20,["strings","Shared_Button_Cancel"]],false],[0,"\\n        "],[8],[0,"\\n    "],[8],[0,"\\n"],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/redeem/redirect-continue.hbs"}})}),define("web-blends/templates/redeem/redirect-retry",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"mEO7n6z2",block:'{"symbols":[],"statements":[[6,"section"],[9,"id","RedeemContainer"],[9,"role","main"],[9,"data-bi-area","RedeemRedirectRetry"],[7],[0,"\\n    "],[6,"div"],[9,"class","content"],[7],[0,"\\n        "],[6,"h1"],[9,"class","type-t2 cli_dialogTitle"],[7],[1,[20,["strings","AVE_RedirectRetry_Title"]],false],[8],[0,"\\n        "],[6,"p"],[9,"class","cli_message1"],[7],[1,[20,["strings","AVE_RedirectRetry_Text_1"]],false],[8],[0,"\\n        "],[6,"p"],[9,"class","cli_message2"],[7],[1,[20,["strings","AVE_RedirectRetry_Text_2"]],false],[8],[0,"\\n    "],[8],[0,"\\n    "],[6,"div"],[9,"class","CTAContainer"],[7],[0,"\\n        "],[6,"button"],[9,"class","btn btn-alternate cli_cancelButton"],[9,"id","Cancel"],[9,"data-bi-name","Cancel"],[9,"data-bi-slot","1"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"cancel"]],[7],[0,"\\n            "],[1,[20,["strings","Shared_Button_Cancel"]],false],[0,"\\n        "],[8],[0,"\\n        "],[6,"button"],[9,"class","btn btn-primary cli_tryAgainButton"],[9,"id","TryAgain"],[9,"data-bi-name","TryAgain"],[9,"data-bi-slot","2"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"tryAgain"]],[7],[0,"\\n            "],[1,[20,["strings","Shared_Button_TryAgain"]],false],[0,"\\n        "],[8],[0,"\\n    "],[8],[0,"\\n"],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/redeem/redirect-retry.hbs"}})}),define("web-blends/templates/redeem/subscription-upgrade",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"vgZXuaD1",block:'{"symbols":[],"statements":[[1,[25,"subscription-upgrade",null,[["newExpirationDate","lineItemTitle","showModernConversion","conversionDetailsUrl","continue","cancel"],[[20,["model","newExpirationDate"]],[20,["model","lineItemTitle"]],[20,["model","showModernConversion"]],[20,["model","conversionDetailsUrl"]],"continue","cancel"]]],false]],"hasEval":false}',meta:{moduleName:"web-blends/templates/redeem/subscription-upgrade.hbs"}})}),define("web-blends/templates/redeem/success",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"monYlP4h",block:'{"symbols":["csvLink","csvBalance_info","csvTokenAmountInfo"],"statements":[[6,"section"],[9,"class","RedeemContainer"],[9,"role","main"],[9,"data-bi-area","RedeemSuccess"],[7],[0,"\\n    "],[6,"div"],[9,"class","content cli_confirmPurchaseContainer"],[7],[0,"\\n"],[4,"if",[[20,["model","hasCsv"]]],null,{"statements":[[4,"if",[[20,["showNewRedeemCSV"]]],null,{"statements":[[0,"                "],[6,"h1"],[9,"class","type-t2 cli_dialogTitle page-title"],[7],[1,[20,["strings","Redeem_ThankYou_Title"]],false],[8],[0,"\\n                "],[6,"div"],[9,"class","redeem-tokenAmount"],[7],[1,[25,"formatted-price",null,[["number","currencyCode","displayFormat"],[[20,["csvTokenAmount","price"]],[20,["csvTokenAmount","currencyCode"]],[20,["csvTokenAmount","priceFormat"]]]]],false],[8],[0,"\\n                "],[6,"div"],[9,"class","TextContainer csvBalance-new"],[7],[0,"\\n                    "],[6,"span"],[7],[1,[25,"formatted-price",null,[["number","currencyCode","displayFormat"],[[20,["csvBalance","price"]],[20,["csvBalance","currencyCode"]],[20,["csvBalance","priceFormat"]]]]],false],[8],[0,"\\n                "],[8],[0,"\\n                "],[6,"h2"],[9,"class","type-t1 cli_dialogTitle shop-title"],[7],[1,[20,["strings","Redeem_Shop_Microsoft"]],false],[8],[0,"\\n                "],[6,"div"],[9,"class","row redeem-row"],[9,"data-bi-area","RedeemShopForLinks"],[7],[0,"\\n                    "],[1,[25,"shop-link",null,[["name"],["xbox"]]],false],[0,"\\n                    "],[1,[25,"shop-link",null,[["name"],["online"]]],false],[0,"\\n                    "],[1,[25,"shop-link",null,[["name"],["windows"]]],false],[0,"\\n                "],[8],[0,"\\n                "],[6,"div"],[9,"class","helpful-links-container"],[7],[0,"\\n                    "],[6,"h3"],[9,"class","type-t2 cli_dialogTitle links-title"],[7],[1,[20,["strings","Redeem_ThankYouPage_LinksSubtitle"]],false],[8],[0,"\\n                    "],[6,"ul"],[9,"class","redeem-helpful-links-row"],[9,"data-bi-area","RedeemHelpfulLinks"],[7],[0,"\\n                        "],[6,"li"],[7],[0,"\\n                            "],[6,"button"],[9,"class","btn btn-link btn-autoWidth"],[9,"data-bi-name","Redeem-ThankYou-GiftCardFAQs"],[3,"action",[[19,0,[]],"helpfulLinksClicked",[20,["getGiftCardFaqUrl"]]]],[7],[0,"\\n                                "],[1,[20,["strings","Redeem_ThankYouPage_GiftCardFAQs"]],false],[0,"\\n                            "],[8],[0,"\\n                        "],[8],[0,"\\n                        "],[6,"li"],[7],[0,"\\n                            "],[6,"button"],[9,"class","btn btn-link btn-autoWidth"],[9,"data-bi-name","Redeem-ThankYou-RedeemAnother"],[3,"action",[[19,0,[]],"redeemAnother"]],[7],[0,"\\n                                "],[1,[20,["strings","Redeem_RedeemAnother"]],false],[0,"\\n                            "],[8],[0,"\\n                        "],[8],[0,"\\n                        "],[6,"li"],[7],[0,"\\n                            "],[6,"button"],[9,"class","btn btn-link btn-autoWidth"],[9,"data-bi-name","Redeem-ThankYou-CheckBalance"],[3,"action",[[19,0,[]],"helpfulLinksClicked",[20,["getCheckAccountBalanceUrl"]]]],[7],[0,"\\n                                "],[1,[20,["strings","Redeem_ThankYouPage_CheckBalance"]],false],[0,"\\n                            "],[8],[0,"\\n                        "],[8],[0,"\\n                        "],[6,"li"],[7],[0,"\\n                            "],[6,"button"],[9,"class","btn btn-link btn-autoWidth"],[9,"data-bi-name","Redeem-ThankYou-GiftTerms"],[3,"action",[[19,0,[]],"helpfulLinksClicked",[20,["getGiftTermsConditionsUrl"]]]],[7],[0,"\\n                                "],[1,[20,["strings","Redeem_ThankYouPage_GiftTerms"]],false],[0,"\\n                            "],[8],[0,"\\n                        "],[8],[0,"\\n                        "],[6,"li"],[7],[0,"\\n                            "],[6,"button"],[9,"class","btn btn-link btn-autoWidth"],[9,"data-bi-name","Redeem-ThankYou-Microsoft-Service-Agreement-Link"],[3,"action",[[19,0,[]],"helpfulLinksClicked",[20,["getMicrosoftServiceAgreementUrl"]]]],[7],[0,"\\n                                "],[1,[20,["strings","Microsoft_Service_Agreement_Link"]],false],[0,"\\n                            "],[8],[0,"\\n                        "],[8],[0,"\\n                    "],[8],[0,"\\n                    "],[6,"p"],[9,"class","redeem-thankyou-legal-string"],[9,"data-bi-area","RedeemHelpfulLinks"],[7],[0,"\\n                        "],[1,[20,["strings","Redeem_ThankYouPage_Terms"]],false],[0,"\\n                    "],[8],[0,"\\n                "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                "],[6,"h1"],[9,"class","type-t2 cli_dialogTitle"],[7],[1,[20,["strings","Redeem_Success_Message"]],false],[8],[0,"\\n"],[4,"with",[[20,["csvTokenAmount"]]],null,{"statements":[[0,"                    "],[6,"div"],[9,"id","tokenAmount"],[9,"class","cli_tokenAmount"],[7],[1,[25,"formatted-price",null,[["number","currencyCode","displayFormat"],[[19,3,["price"]],[19,3,["currencyCode"]],[19,3,["priceFormat"]]]]],false],[8],[0,"\\n"]],"parameters":[3]},null],[4,"with",[[20,["csvBalance"]]],null,{"statements":[[0,"                    "],[6,"div"],[9,"id","csvBalance"],[9,"class","TextContainer cli_csvBalance"],[7],[0,"\\n                        "],[1,[25,"formatted-price",null,[["number","currencyCode","displayFormat"],[[19,2,["price"]],[19,2,["currencyCode"]],[19,2,["priceFormat"]]]]],false],[0,"\\n                    "],[8],[0,"\\n"]],"parameters":[2]},null],[4,"if",[[20,["showShopCTALinks"]]],null,{"statements":[[4,"if",[[20,["showRedeemAnother"]]],null,{"statements":[[0,"                        "],[6,"button"],[9,"id","redeemAnotherButton"],[9,"class","btn btn-link btn-autoWidth btn-redeemAnotherButton"],[9,"data-bi-name","redeemAnother"],[3,"action",[[19,0,[]],"redeemAnother"]],[7],[0,"\\n                            "],[1,[20,["strings","Redeem_RedeemAnother"]],false],[0,"\\n                        "],[8],[0,"\\n"]],"parameters":[]},null],[0,"                    "],[6,"div"],[9,"class","row redeem-row"],[9,"data-bi-area","RedeemShopForLinks"],[7],[0,"\\n"],[4,"each",[[20,["csvLinks"]]],null,{"statements":[[0,"                            "],[1,[25,"csv-link",null,[["csvLink","csvLinksClass","customDataForBi"],[[19,1,[]],[20,["csvLinksClass"]],[20,["customDataForBi"]]]]],false],[0,"\\n"]],"parameters":[1]},null],[0,"                    "],[8],[0,"\\n"]],"parameters":[]},null],[0,"                "],[2," showShopCTALinks "],[0,"\\n"]],"parameters":[]}]],"parameters":[]},{"statements":[[4,"if",[[25,"or",[[20,["showRedeemSuccessImprovement"]],[20,["showRedeemSuccessImprovementGoldLive"]]],null]],null,{"statements":[[0,"                    "],[6,"h1"],[9,"class","type-t2 cli_dialogTitle success_header"],[7],[1,[20,["strings","Redeem_Success_GP_Title"]],false],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                    "],[6,"h1"],[9,"class","type-t2 cli_dialogTitle"],[7],[1,[20,["strings","Redeem_Success_Message"]],false],[8],[0,"\\n"]],"parameters":[]}],[4,"unless",[[20,["model","hasXbox360"]]],null,{"statements":[[0,"                "],[6,"div"],[9,"class","productRow"],[7],[0,"\\n"],[4,"if",[[25,"or",[[20,["showRedeemSuccessImprovement"]],[20,["showRedeemSuccessImprovementGoldLive"]]],null]],null,{"statements":[[0,"                        "],[6,"div"],[9,"class","columnImage game_pass_use_img"],[7],[0,"\\n                            "],[6,"img"],[9,"id","productImage"],[10,"src",[20,["model","imageUrl"]],null],[10,"alt",[20,["model","product","ProductTitle"]],null],[7],[8],[0,"\\n                        "],[8],[0,"\\n                        "],[6,"div"],[9,"class","columnProduct game_pass_use_headers"],[7],[0,"\\n                            "],[6,"h2"],[9,"class","type-t3"],[7],[1,[20,["model","product","ProductTitle"]],false],[8],[0,"\\n                            "],[6,"h3"],[9,"class","type-t4"],[7],[1,[20,["model","product","PublisherName"]],false],[8],[0,"\\n                        "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                        "],[6,"div"],[9,"class","columnImage"],[7],[0,"\\n                            "],[6,"img"],[9,"id","productImage"],[10,"src",[20,["model","imageUrl"]],null],[10,"alt",[20,["model","product","ProductTitle"]],null],[7],[8],[0,"\\n                        "],[8],[0,"\\n                        "],[6,"div"],[9,"class","columnProduct"],[7],[0,"\\n                            "],[6,"h2"],[9,"class","type-t3"],[7],[1,[20,["model","product","ProductTitle"]],false],[8],[0,"\\n                            "],[6,"h3"],[9,"class","type-t4"],[7],[1,[20,["model","product","PublisherName"]],false],[8],[0,"\\n                        "],[8],[0,"\\n"]],"parameters":[]}],[0,"                "],[8],[0,"\\n"]],"parameters":[]},null],[4,"unless",[[20,["showRedeemSuccessImprovement"]]],null,{"statements":[[4,"unless",[[20,["showRedeemSuccessImprovementV2"]]],null,{"statements":[[4,"unless",[[20,["showRedeemSuccessImprovementGoldLive"]]],null,{"statements":[[0,"                        "],[6,"p"],[9,"class","TextContainer cli_successMessage"],[7],[1,[18,"successMessageTitle"],false],[8],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null]],"parameters":[]},null],[4,"if",[[20,["showContactPreference"]]],null,{"statements":[[0,"                "],[1,[25,"contact-preference",null,[["product"],[[20,["model","product"]]]]],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[20,["xboxRedeemSucceedMessage"]]],null,{"statements":[[0,"                "],[6,"p"],[9,"class","TextContainer cli_xboxSuccessMessage"],[7],[1,[18,"xboxRedeemSucceedMessage"],false],[8],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[20,["model","product","IsMovie"]]],null,{"statements":[[4,"if",[[20,["model","product","AlternateZuneId"]]],null,{"statements":[[0,"                    "],[6,"a"],[9,"id","actionLink"],[9,"class","redeem_link cli_movieRedeemLink"],[10,"href",[18,"watchMovieUrl"],null],[3,"action",[[19,0,[]],"watchMovieClicked"]],[7],[1,[18,"watchMovieString"],false],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                    "],[1,[18,"watchMovieString"],true],[0,"\\n"]],"parameters":[]}]],"parameters":[]},{"statements":[[4,"unless",[[20,["isXboxOne"]]],null,{"statements":[[4,"if",[[25,"or",[[20,["showRedeemSuccessImprovement"]],[20,["showRedeemSuccessImprovementGoldLive"]]],null]],null,{"statements":[[4,"if",[[25,"or",[[20,["showRedeemSuccessImprovementV2"]],[20,["showRedeemSuccessImprovementGoldLive"]]],null]],null,{"statements":[[4,"if",[[20,["showCTALinksForUltimateV2"]]],null,{"statements":[[0,"                                "],[6,"h2"],[9,"class","game_pass_use_header"],[7],[1,[20,["strings","Redeem_Success_GP_Ultimate_Way_To_Get_Start_Title"]],false],[8],[0,"\\n                                "],[6,"div"],[9,"class","game_pass_use_containerv2"],[7],[0,"\\n                                    "],[6,"div"],[9,"class","game_pass_use"],[7],[0,"\\n                                        "],[6,"img"],[9,"src","/uniblends/REL20231025.1/assets/images/xbox-play-v2.png"],[10,"alt",[20,["strings","Redeem_Success_Image_Alt_Text_Xbox_Com"]],null],[7],[8],[0,"\\n                                        "],[6,"h2"],[7],[0,"Xbox.com/play"],[8],[0,"\\n                                        "],[6,"p"],[7],[1,[20,["strings","Redeem_Success_GP_Ultimate_Xbox_Com_Play_Description"]],false],[8],[0,"\\n                                        "],[6,"a"],[10,"href",[26,[[20,["showCTALinksForUltimateV2","xboxComPlayURL"]]]]],[9,"target","_blank"],[10,"aria-label",[20,["strings","Redeem_Success_GP_Ultimate_Way_To_Play_Xbox_Com_Play_CTA"]],null],[7],[0,"\\n                                            "],[6,"span"],[7],[1,[20,["strings","Redeem_Success_GP_Ultimate_Way_To_Play_Xbox_Com_Play_CTA"]],false],[8],[0,"\\n                                            "],[6,"i"],[9,"class","icon icon-chevron-left"],[7],[8],[0,"\\n                                        "],[8],[0,"\\n                                    "],[8],[0,"\\n                                    "],[6,"div"],[9,"class","game_pass_use"],[7],[0,"\\n                                        "],[6,"img"],[9,"src","/uniblends/REL20231025.1/assets/images/xbox-console-v2.png"],[10,"alt",[20,["strings","Redeem_Success_Image_Alt_Text_Xbox_Console"]],null],[7],[8],[0,"\\n                                        "],[6,"h2"],[7],[0,"Xbox consoles"],[8],[0,"\\n                                        "],[6,"p"],[7],[1,[20,["strings","Redeem_Success_GP_Ultimate_Way_To_Play_Xbox_Consoles_Description"]],false],[8],[0,"\\n                                        "],[6,"a"],[10,"href",[26,[[20,["showCTALinksForUltimateV2","xboxConsoleURL"]]]]],[9,"target","_blank"],[10,"aria-label",[20,["strings","Redeem_Success_GP_Ultimate_Way_To_Play_Xbox_Consoles_CTA"]],null],[7],[0,"\\n                                            "],[6,"span"],[7],[1,[20,["strings","Redeem_Success_GP_Ultimate_Way_To_Play_Xbox_Consoles_CTA"]],false],[8],[0,"\\n                                            "],[6,"i"],[9,"class","icon icon-chevron-left"],[7],[8],[0,"\\n                                        "],[8],[0,"\\n                                    "],[8],[0,"\\n                                    "],[6,"div"],[9,"class","game_pass_use"],[7],[0,"\\n                                        "],[6,"img"],[9,"src","/uniblends/REL20231025.1/assets/images/windows-pc-v2.png"],[10,"alt",[20,["strings","Redeem_Success_Image_Alt_Text_Windows_PC"]],null],[7],[8],[0,"\\n                                        "],[6,"h2"],[7],[0,"Xbox app for Windows PC"],[8],[0,"\\n                                        "],[6,"p"],[7],[1,[20,["strings","Redeem_Success_GP_Way_To_Play_Xbox_App_Win_PC_Description"]],false],[8],[0,"\\n                                        "],[6,"a"],[10,"href",[26,[[20,["showCTALinksForUltimateV2","xboxAppWinPCURL"]]]]],[9,"target","_blank"],[10,"aria-label",[20,["strings","Redeem_Success_GP_Way_To_Play_Xbox_App_Win_PC_CTA"]],null],[7],[0,"\\n                                            "],[6,"span"],[7],[1,[20,["strings","Redeem_Success_GP_Way_To_Play_Xbox_App_Win_PC_CTA"]],false],[8],[0,"\\n                                            "],[6,"i"],[9,"class","icon icon-chevron-left"],[7],[8],[0,"\\n                                        "],[8],[0,"\\n                                    "],[8],[0,"\\n                                    "],[6,"div"],[9,"class","game_pass_use"],[7],[0,"\\n                                        "],[6,"img"],[9,"src","/uniblends/REL20231025.1/assets/images/mobileapp-v2.png"],[10,"alt",[20,["strings","Redeem_Success_Image_Alt_Text_Mobile_App"]],null],[7],[8],[0,"\\n                                        "],[6,"h2"],[7],[0,"Xbox Game Pass mobile app"],[8],[0,"\\n                                        "],[6,"p"],[7],[1,[20,["strings","Redeem_Success_GP_Ultimate_Xbox_Mob_App_Description"]],false],[8],[0,"\\n                                        "],[6,"div"],[9,"class","game_pass_links"],[7],[0,"\\n                                            "],[6,"a"],[10,"href",[26,[[20,["showCTALinksForUltimateV2","xboxMobAppGooglePlayStoreURL"]]]]],[9,"target","_blank"],[10,"aria-label",[20,["strings","Google_Store_Logo_Alt_Text"]],null],[7],[0,"\\n                                                "],[6,"img"],[9,"src","/uniblends/REL20231025.1/assets/images/badge-google.png"],[10,"alt",[20,["strings","Google_Store_Logo_Alt_Text"]],null],[7],[8],[0,"\\n                                            "],[8],[0,"\\n                                            "],[6,"a"],[10,"href",[26,[[20,["showCTALinksForUltimateV2","xboxMobAppSamsungGalaxyStoreURL"]]]]],[9,"target","_blank"],[10,"aria-label",[20,["strings","Samsung_Store_Logo_Alt_Text"]],null],[7],[0,"\\n                                                "],[6,"img"],[9,"src","/uniblends/REL20231025.1/assets/images/badge-samsung-galaxy-store.png"],[10,"alt",[20,["strings","Samsung_Store_Logo_Alt_Text"]],null],[7],[8],[0,"\\n                                            "],[8],[0,"\\n                                            "],[6,"a"],[10,"href",[26,[[20,["showCTALinksForUltimateV2","xboxUltimateAppleStoreUrl"]]]]],[9,"target","_blank"],[10,"aria-label",[20,["strings","App_Store_LogoAltText"]],null],[7],[0,"\\n                                                "],[6,"img"],[9,"src","/uniblends/REL20231025.1/assets/images/badge-appStore.png"],[10,"alt",[20,["strings","App_Store_LogoAltText"]],null],[7],[8],[0,"\\n                                            "],[8],[0,"\\n                                        "],[8],[0,"\\n                                    "],[8],[0,"\\n                                    "],[6,"div"],[9,"class","game_pass_use"],[7],[0,"\\n                                        "],[6,"img"],[9,"src","/uniblends/REL20231025.1/assets/images/smart-tv-v2.png"],[10,"alt",[20,["strings","Redeem_Success_Image_Alt_Text_Mobile_App"]],null],[7],[8],[0,"\\n                                        "],[6,"h2"],[7],[0,"Xbox app for smart TVs"],[8],[0,"\\n                                        "],[6,"p"],[7],[1,[20,["strings","Redeem_Success_GP_Ultimate_Xbox_Smart_TV_Description"]],false],[8],[0,"\\n                                        "],[6,"a"],[10,"href",[26,[[20,["showCTALinksForUltimateV2","xboxUltimateSmartTV"]]]]],[9,"target","_blank"],[10,"aria-label",[20,["strings","Redeem_Success_GP_Ultimate_Xbox_Smart_TV_Description"]],null],[7],[0,"\\n                                            "],[6,"span"],[7],[1,[20,["strings","LearnMore_Text"]],false],[8],[0,"\\n                                            "],[6,"i"],[9,"class","icon icon-chevron-left"],[7],[8],[0,"\\n                                        "],[8],[0,"\\n                                    "],[8],[0,"\\n                                "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[20,["showCTALinksForPC"]]],null,{"statements":[[0,"                                "],[6,"h2"],[9,"class","game_pass_use_header"],[7],[1,[20,["strings","Redeem_Success_GP_PC_Ways_To_Play_Title"]],false],[8],[0,"\\n                                "],[6,"div"],[9,"class","game_pass_use_containerv2"],[7],[0,"\\n                                    "],[6,"div"],[9,"class","game_pass_use"],[7],[0,"\\n                                        "],[6,"img"],[9,"src","/uniblends/REL20231025.1/assets/images/windows-pc-v2.png"],[10,"alt",[20,["strings","Redeem_Success_Image_Alt_Text_Windows_PC"]],null],[7],[8],[0,"\\n                                        "],[6,"h2"],[7],[0,"Xbox app for Windows PC"],[8],[0,"\\n                                        "],[6,"p"],[7],[1,[20,["strings","Redeem_Success_GP_Way_To_Play_Xbox_App_Win_PC_Description"]],false],[8],[0,"\\n                                        "],[6,"a"],[10,"href",[26,[[20,["showCTALinksForPC","xboxAppWinPCURL"]]]]],[9,"target","_blank"],[10,"aria-label",[20,["strings","Redeem_Success_GP_Way_To_Play_Xbox_App_Win_PC_CTA"]],null],[7],[0,"\\n                                            "],[6,"span"],[7],[1,[20,["strings","Redeem_Success_GP_Way_To_Play_Xbox_App_Win_PC_CTA"]],false],[8],[0,"\\n                                            "],[6,"i"],[9,"class","icon icon-chevron-left"],[7],[8],[0,"\\n                                        "],[8],[0,"\\n                                    "],[8],[0,"\\n                                "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[20,["showCTALinksForConsole"]]],null,{"statements":[[0,"                                "],[6,"h2"],[9,"class","game_pass_use_header"],[7],[1,[20,["strings","Redeem_Success_GP_Console_Ways_To_Play_Title"]],false],[8],[0,"\\n                                "],[6,"div"],[9,"class","game_pass_use_containerv2 game_pass_console"],[7],[0,"\\n                                    "],[6,"div"],[9,"class","game_pass_use_row"],[7],[0,"\\n                                        "],[6,"div"],[9,"class","game_pass_use"],[7],[0,"\\n                                            "],[6,"img"],[9,"src","/uniblends/REL20231025.1/assets/images/xbox-play-v2.png"],[10,"alt",[20,["strings","Redeem_Success_Image_Alt_Text_Xbox_Com"]],null],[7],[8],[0,"\\n                                            "],[6,"h2"],[7],[0,"Xbox.com"],[8],[0,"\\n                                            "],[6,"p"],[7],[1,[20,["strings","Redeem_Success_GP_Console_Way_To_Play_Xbox_Com_Description"]],false],[8],[0,"\\n                                            "],[6,"a"],[10,"href",[26,[[20,["showCTALinksForConsole","xboxComURL"]]]]],[9,"target","_blank"],[10,"aria-label",[20,["strings","Redeem_Success_GP_Console_Way_To_Play_Xbox_Com_CTA"]],null],[7],[0,"\\n                                                "],[6,"span"],[7],[1,[20,["strings","Redeem_Success_GP_Console_Way_To_Play_Xbox_Com_CTA"]],false],[8],[0,"\\n                                                "],[6,"i"],[9,"class","icon icon-chevron-left"],[7],[8],[0,"\\n                                            "],[8],[0,"\\n                                        "],[8],[0,"\\n                                        "],[6,"div"],[9,"class","game_pass_use"],[7],[0,"\\n                                            "],[6,"img"],[9,"src","/uniblends/REL20231025.1/assets/images/mobileapp-v2.png"],[10,"alt",[20,["strings","Redeem_Success_Image_Alt_Text_Mobile_App"]],null],[7],[8],[0,"\\n                                            "],[6,"h2"],[7],[0,"Xbox Game Pass mobile app"],[8],[0,"\\n                                            "],[6,"p"],[7],[1,[20,["strings","Redeem_Success_GP_Ultimate_Xbox_Mob_App_Description"]],false],[8],[0,"\\n                                            "],[6,"div"],[9,"class","game_pass_links"],[7],[0,"\\n                                                "],[6,"a"],[10,"href",[26,[[20,["showCTALinksForConsole","xboxMobAppSamsungGalaxyStoreURL"]]]]],[9,"target","_blank"],[10,"aria-label",[20,["strings","Samsung_Store_Logo_Alt_Text"]],null],[7],[0,"\\n                                                    "],[6,"img"],[9,"src","/uniblends/REL20231025.1/assets/images/badge-samsung-galaxy-store.png"],[10,"alt",[20,["strings","Samsung_Store_Logo_Alt_Text"]],null],[7],[8],[0,"\\n                                                "],[8],[0,"\\n                                                "],[6,"a"],[10,"href",[26,[[20,["showCTALinksForConsole","xboxMobAppGooglePlayStoreURL"]]]]],[9,"target","_blank"],[10,"aria-label",[20,["strings","Google_Store_Logo_Alt_Text"]],null],[7],[0,"\\n                                                    "],[6,"img"],[9,"src","/uniblends/REL20231025.1/assets/images/badge-google.png"],[10,"alt",[20,["strings","Google_Store_Logo_Alt_Text"]],null],[7],[8],[0,"\\n                                                "],[8],[0,"\\n                                                "],[6,"a"],[10,"href",[26,[[20,["showCTALinksForConsole","xboxUltimateAppleStoreUrl"]]]]],[9,"target","_blank"],[10,"aria-label",[20,["strings","App_Store_LogoAltText"]],null],[7],[0,"\\n                                                    "],[6,"img"],[9,"src","/uniblends/REL20231025.1/assets/images/badge-appStore.png"],[10,"alt",[20,["strings","App_Store_LogoAltText"]],null],[7],[8],[0,"\\n                                                "],[8],[0,"\\n                                            "],[8],[0,"\\n                                        "],[8],[0,"\\n                                    "],[8],[0,"\\n                                "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[20,["showCTALinksForGoldLive"]]],null,{"statements":[[0,"                                "],[6,"h2"],[9,"class","game_pass_use_header"],[7],[1,[20,["strings","Redeem_Success_GP_Ultimate_Way_To_Get_Start_Title"]],false],[8],[0,"\\n                                "],[6,"div"],[9,"class","game_pass_use_containerv2"],[7],[0,"\\n                                    "],[6,"div"],[9,"class","game_pass_use"],[7],[0,"\\n                                        "],[6,"svg"],[9,"version","1.2"],[9,"xmlns","http://www.w3.org/2000/svg","http://www.w3.org/2000/xmlns/"],[9,"viewBox","0 0 530 940"],[9,"width","530"],[9,"height","940"],[7],[0,"\\n\\t                                        "],[6,"title"],[7],[0,"Xbox Play Core"],[8],[0,"\\n\\t                                        "],[6,"defs"],[7],[0,"\\n\\t\\t                                        "],[6,"image"],[9,"width","588"],[9,"height","940"],[9,"id","img1"],[9,"href","data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDU4OCA5NDAiIHdpZHRoPSI1ODgiIGhlaWdodD0iOTQwIj4KCTx0aXRsZT5OZXcgUHJvamVjdDwvdGl0bGU+Cgk8ZGVmcz4KCQk8aW1hZ2Ugd2lkdGg9IjIyMjAiIGhlaWdodD0iMTI1MSIgaWQ9ImltZzEiIGhyZWY9ImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5QjJaWEp6YVc5dVBTSXhMaklpSUhodGJHNXpQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh5TURBd0wzTjJaeUlnZG1sbGQwSnZlRDBpTUNBd0lEYzBNQ0EwTVRjaUlIZHBaSFJvUFNJM05EQWlJR2hsYVdkb2REMGlOREUzSWo0S0NUeDBhWFJzWlQ0Mk5qZGxaR00yWWkxbE1qZ3dMVFF6T0RZdE9Ea3hOaTB3WkdWbU5UbGlNRGhrTWprdGMzWm5QQzkwYVhSc1pUNEtDVHhrWldaelBnb0pDVHhqYkdsd1VHRjBhQ0JqYkdsd1VHRjBhRlZ1YVhSelBTSjFjMlZ5VTNCaFkyVlBibFZ6WlNJZ2FXUTlJbU53TVNJK0Nna0pDVHh3WVhSb0lHUTlJbTB5TnprZ01UVXhMamxvTVRneUxqRjJNVGd6TGpGb0xURTRNaTR4ZWlJdlBnb0pDVHd2WTJ4cGNGQmhkR2crQ2drOEwyUmxabk0rQ2drOGMzUjViR1UrQ2drSkxuTXdJSHNnWm1sc2JEb2dJekF3TURBd01DQjlJQW9KUEM5emRIbHNaVDRLQ1R4bklHbGtQU0pNWVhsbGNsOHlYekZmSWo0S0NUd3ZaejRLQ1R4bklHbGtQU0pwWTI5dWN5SStDZ2tKUEdjZ2FXUTlJa3hoZVdWeUlqNEtDUWtKUEdjZ2FXUTlJa3hoZVdWeUlqNEtDUWtKQ1R4bklHbGtQU0pEYkdsd0xWQmhkR2dpSUdOc2FYQXRjR0YwYUQwaWRYSnNLQ05qY0RFcElqNEtDUWtKQ1FrOFp5QnBaRDBpVEdGNVpYSWlQZ29KQ1FrSkNRazhjR0YwYUNCcFpEMGlUR0Y1WlhJaUlHWnBiR3d0Y25Wc1pUMGlaWFpsYm05a1pDSWdZMnhoYzNNOUluTXdJaUJrUFNKdE5ERXlMamtnTWpFMFl6RTNMalVnT0M0MElESTNMallnTWpjdU1pQXlOU0EwTmk0MExUSXVPUzB3TGpZdE5TNDVMVEF1T1MwNExqZ3RNQzQ1TFRBdU9DQXdMVEV1TnlBd0xUSXVOaUF3TGpFZ01DNHpMVEV1T0NBd0xqUXRNeTQySURBdU5DMDFMalF0TUM0eUxURTRMamN0TVRVdU5DMHpNeTQzTFRNMExqRXRNek11Tm1ndE1TNDBZeTB3TGpVZ01DMHhMakVnTUMweExqWWdNQzR4TFRBdU5TQXdMakV0TVM0eElEQXVNaTB4TGpZZ01DNHlMVEF1TlNBd0xURWdNQzR4TFRFdU5pQXdMakl0TUM0MklEQXVNUzB4TGpFZ01DNHlMVEV1TmlBd0xqTXRNQzQxSURBdU1TMHhJREF1TWkweExqVWdNQzQwTFRBdU5TQXdMakl0TVNBd0xqUXRNUzQxSURBdU5TMHdMalVnTUM0eExURWdNQzR6TFRFdU5TQXdMalV0TUM0MUlEQXVNaTB4SURBdU15MHhMalVnTUM0MkxUQXVOU0F3TGpNdE1DNDVJREF1TlMweExqUWdNQzQzTFRBdU5TQXdMakl0TUM0NUlEQXVOQzB4TGpRZ01DNDNMVEF1TlNBd0xqTXRNU0F3TGpZdE1TNDBJREF1T0Mwd0xqUWdNQzR5TFRBdU9TQXdMalV0TVM0eklEQXVPQzB3TGpRZ01DNHpMVEF1T0NBd0xqVXRNUzR5SURBdU9TMHdMalFnTUM0MExUQXVPQ0F3TGpjdE1TNHlJREV0TUM0MElEQXVNeTB3TGpnZ01DNDJMVEV1TWlBeExUQXVOQ0F3TGpRdE1DNDNJREF1T0MweExqRWdNUzR4TFRBdU5DQXdMak10TUM0NElEQXVOeTB4TGpFZ01TNHhMVEF1TXlBd0xqUXRNQzQySURBdU9DMHhJREV1TWkwd0xqUWdNQzQwTFRBdU55QXdMamd0TVNBeExqSnhMVEF1TkNBd0xqWXRNQzQ1SURFdU1tTXRNQzR6SURBdU5DMHdMallnTUM0NUxUQXVPU0F4TGpNdE1DNHpJREF1TkMwd0xqWWdNQzQ0TFRBdU9DQXhMak10TUM0eUlEQXVOUzB3TGpRZ01DNDVMVEF1TnlBeExqUXRNQzR6SURBdU5TMHdMalVnTVMwd0xqY2dNUzQwTFRBdU1pQXdMalF0TUM0MUlEQXVPUzB3TGpZZ01TNDBMVEF1TVNBd0xqVXRNQzR6SURFdE1DNDFJREV1TlMwd0xqSWdNQzQxTFRBdU5DQXhMVEF1TlNBeExqVXRNQzR4SURBdU5TMHdMak1nTVMwd0xqUWdNUzQxTFRBdU1TQXdMalV0TUM0eUlERXVNUzB3TGpNZ01TNDJMVEF1TVNBd0xqVXRNQzR5SURFdU1TMHdMak1nTVM0MkxUQXVNU0F3TGpVdE1DNHlJREV1TVMwd0xqSWdNUzQySURBZ01DNDFMVEF1TVNBeExUQXVNU0F4TGpZZ01DQXdMallnTUNBeElEQWdNUzQzSURBZ01DNDNJREF1TVNBeExqUWdNQ0F5TGpFdE1DNHhJREF1Tnkwd0xqRWdNUzR6TFRBdU1pQXlMVEF1TVNBd0xqY3RNQzR5SURFdU15MHdMak1nTWkwd0xqRWdNQzQzTFRBdU15QXhMalF0TUM0MElESXRNQzR4SURBdU5pMHdMak1nTVM0eUxUQXVOU0F4TGprdE1DNHlJREF1Tnkwd0xqUWdNUzR6TFRBdU5pQXhMamt0TUM0eUlEQXVOaTB3TGpVZ01TNHlMVEF1TnlBeExqZ3RNQzR5SURBdU5pMHdMalVnTVM0eUxUQXVPQ0F4TGpndE1DNHpJREF1Tmkwd0xqWWdNUzR5TFRBdU9TQXhMamN0TUM0eklEQXVOUzB3TGpZZ01TMHhJREV1Tmkwd0xqUWdNQzQyTFRBdU55QXhMakV0TVM0eElERXVOaTB5TGpFZ01pNDVMVFF1TnlBMUxqVXROeTQySURjdU5pQTNJRE11TlNBeE1pNDVJRGd1TmlBeE55NHpJREUwTGprdE1TNHpJRE11TlMweUxqTWdOeTR4TFRNZ01UQXVOeTB3TGpZZ01pNDVMVEF1T1NBMUxqZ3RNU0E0TGpjdE15NHhMVEUyTFRFM0xqSXRNamN1Tmkwek15NDFMVEkzTGpZdE1UZ3VPU0F3TFRNMExqRWdNVFV1TXkwek5DNHhJRE0wTGpFZ01DQXdMakVnTUNBd0xqRWdNQ0F3TGpKb0xURXhMalJqTUMwd0xqRWdNQzB3TGpFZ01DMHdMaklnTUMweE55NHpJRGt1T0Mwek15NHlJREkxTGpRdE5EQXVPQzB5TGprdE1pNHhMVFV1TkMwMExqWXROeTQxTFRjdU5DMHhNUzR5TFRFMUxqSXROeTQ1TFRNMkxqWWdOeTR6TFRRM0xqZ2dNVFV1TWkweE1TNHlJRE0yTGpZdE55NDVJRFEzTGpnZ055NHpJRFF1TlMwNUlERXhMamN0TVRZdU1pQXlNQzQzTFRJd0xqY3RNaTQ1TFRJdU1TMDFMalV0TkM0M0xUY3VOaTAzTGpZdE1URXVNUzB4TlM0eUxUY3VOaTB6Tmk0MklEY3VOaTAwTnk0M0lERTFMakl0TVRFdU1TQXpOaTQyTFRjdU55QTBOeTQzSURjdU5pQXhNUzR4SURFMUxqSWdOeTQzSURNMkxqWXROeTQySURRM0xqZHRMVFkxTGpVZ05EQXVPWFl0TUM0eFl6QXRNVEl1TnkweE1DNDBMVEl5TGprdE1qTXRNakl1T0MweE1pNDNJREF0TWpJdU9TQXhNQzQwTFRJeUxqZ2dNak1nTUNBeE1pNDNJREV3TGpRZ01qSXVPU0F5TXlBeU1pNDRJREV5TGpZZ01DQXlNaTQ0TFRFd0xqTWdNakl1T0MweU1pNDVlbTAyT0M0eUxUWTRMaloyTFRBdU1XTXdMVEV5TGpjdE1UQXVOQzB5TWk0NUxUSXpMVEl5TGpndE1USXVOeUF3TFRJeUxqa2dNVEF1TkMweU1pNDRJREl6SURBZ01USXVOeUF4TUM0MElESXlMamtnTWpNZ01qSXVPQ0F4TWk0MklEQWdNakl1T0MweE1DNHpJREl5TGpndE1qSXVPWG9pTHo0S0NRa0pDUWtKUEhCaGRHZ2dhV1E5SWt4aGVXVnlJaUJtYVd4c0xYSjFiR1U5SW1WMlpXNXZaR1FpSUdOc1lYTnpQU0p6TUNJZ1pEMGliVFExTnk0MElETXlPQzQ0WXkweUxqWWdOQzR4TFRjdU5DQTJMak10TVRBdU5TQTJMak10TXk0NElEQXROaTQzTFRJdU9TMHhNeTQwTFRFd0xqVXRNUzR5TFRFdU5TMHpMVE11TkMwekxqWXROR3d0TVMwd0xqZGpMVEF1TXkwd0xqTXRNQzQzTFRBdU5pMHhMakV0TUM0M0xURXVOaTB3TGpNdE15NHpMVEF1TlMwMUxUQXVOR2d0TVRZdU1XTXRNUzQzTFRBdU1TMHpMalFnTUM0eExUVWdNQzQwTFRBdU5DQXdMakV0TUM0NElEQXVNeTB4TGpFZ01DNDJMVEF1TXlBd0xqSXRNQzQySURBdU5TMHhJREF1Tnkwd0xqWWdNQzQyTFRJdU15QXlMall0TXk0MklEUXROaTQzSURjdU5pMDVMallnTVRBdU5TMHhNeTR6SURFd0xqVXRNeTR4SURBdE55NDRMVEl1TWkweE1DNDFMVFl1TXkweUxqa3ROQzQxTFRNdU5TMHhNQzR4TFRJdE1UZ3VOaUF4TGpjdE9TNDBJRGt1TkMweU5pNHhJREV3TGpVdE1qZ3VNeUF3TGpVdE1TNHhJREV1TXkweUxqRWdNaTR4TFRJdU9YWXRNQzR4WXpBdE1TNDVJREV0TXk0MklESXVOaTAwTGpZZ01pNDJMVEV1TWlBMUxqUXRNaTR4SURndU15MHlMamNnTWk0ekxUQXVOQ0EwTGpZdE1DNDNJRFl1T1Mwd0xqY2dNUzR6SURBZ01pNDNJREF1TWlBMElEQXVOeUF3TGpZZ01DNHpJREV1TXlBd0xqY2dNUzQ1SURFdU1TQXdMak1nTUM0eklEQXVPU0F3TGpZZ01TNDBJREF1T1dneE15NDRZekF1TkMwd0xqTWdNUzB3TGpjZ01TNDBMVEF1T1NBd0xqWXRNQzQwSURFdU1pMHdMamdnTVM0NUxURXVNU0F4TGpNdE1DNDFJREl1Tnkwd0xqZ2dOQzR4TFRBdU55QXlMak1nTUNBMExqWWdNQzR5SURZdU9TQXdMamNnTWk0NElEQXVOaUExTGpZZ01TNDFJRGd1TXlBeUxqY2dNUzQySURFZ01pNDJJREl1TnlBeUxqWWdOQzQyZGpBdU1XTXdMamdnTUM0NUlERXVOU0F4TGpnZ01pNHhJREl1T1NBeExqRWdNaTR5SURndU9DQXhPQzQ1SURFd0xqVWdNamd1TXlBeExqWWdPQzQySURFZ01UUXVNUzB5TGpFZ01UZ3VOM3B0TFRndU1pMHhOaTQzWXkweExqUXROeTR6TFRjdU9DMHlNaTA1TGpVdE1qVXVNeTB3TGpFdE1DNHlMVEF1TWkwd0xqUXRNQzQwTFRBdU5TMHhMalF0TUM0M0xUSXVOUzB5TGpFdE1pNDRMVE11Tmkwd0xqZ3RNQzR6TFRFdU55MHdMalV0TWk0MkxUQXVOeTB4TGpVdE1DNHpMVE11TVMwd0xqVXROQzQyTFRBdU5XZ3RNQzR4WXkwd0xqRWdNQzR4TFRBdU1pQXdMakV0TUM0eklEQXVNaTB5TGpRZ01TNDFMVE11TnlBeUxqSXROUzR6SURJdU5DMHdMalFnTUMwd0xqTWdNQzA0TGpZZ01DMDRMak1nTUMwNExqTWdNQzA0TGpZZ01DMHhMall0TUM0eUxUSXVPUzB4TFRVdU15MHlMalJzTFRBdU15MHdMakpvTFRBdU1XTXRNUzQySURBdE15NHhJREF1TWkwMExqWWdNQzQxTFRBdU9TQXdMakl0TVM0NElEQXVOUzB5TGpjZ01DNDNMVEF1TXlBeExqWXRNUzR6SURJdU9TMHlMamNnTXk0MkxUQXVNU0F3TGpJdE1DNHpJREF1TXkwd0xqUWdNQzQxTFRFdU55QXpMak10T0M0eUlERTRMVGt1TlNBeU5TNHpMVEV1TkNBM0xqa3RNQzR4SURFd0lEQXVOU0F4TUM0NUlEQXVNaUF3TGpNZ01DNDFJREF1TnlBd0xqa2dNQzQ1SURFdU55MHhMamNnTkM0MUxUUXVPU0ExTGprdE5pNDBJRE10TXk0MUlEUXVOUzAxSURVdU9TMDFMamxzTUM0MkxUQXVOR015TGpndE1pQTFMalF0TWk0NUlERXlMakl0TWk0NWFERTJMakpqTmk0NElEQWdPUzR6SURBdU9TQXhNaTR5SURJdU9Xd3dMallnTUM0MFl6RXVOQ0F3TGprZ01pNDRJREl1TkNBMUxqa2dOUzQ1SURFdU15QXhMallnTkM0eElEUXVPQ0ExTGprZ05pNDBJREF1TkMwd0xqSWdNQzQzTFRBdU5TQXhMVEF1T1NBd0xqY3RNQzQ1SURJdE1pNDVJREF1TmkweE1DNDVlaUl2UGdvSkNRa0pDUWs4Y0dGMGFDQnBaRDBpVEdGNVpYSWlJR05zWVhOelBTSnpNQ0lnWkQwaWJUUXhOQzQ0SURJNE9DNDFZeTB6TGpFZ01DMDFMamNnTWk0MUxUVXVOeUExTGpjZ01DQXpMaklnTWk0MUlEVXVOeUExTGpjZ05TNDNJRE11TVNBd0lEVXVOeTB5TGpVZ05TNDNMVFV1TnlBd0xUTXVNaTB5TGpZdE5TNDNMVFV1TnkwMUxqZDZJaTgrQ2drSkNRa0pQQzluUGdvSkNRa0pQQzluUGdvSkNRazhMMmMrQ2drSlBDOW5QZ29KUEM5blBnbzhMM04yWno0PSIvPgoJPC9kZWZzPgoJPHN0eWxlPgoJPC9zdHlsZT4KCTx1c2UgaWQ9ImdhbWUiIGhyZWY9IiNpbWcxIiB0cmFuc2Zvcm09Im1hdHJpeCguOTM3LDAsMCwuOTM3LC03NDUsLTIwNykiLz4KPC9zdmc+"],[7],[8],[0,"\\n\\t                                        "],[8],[0,"\\n\\t                                        "],[6,"style"],[7],[0,"\\n                                            "],[8],[0,"\\n\\t                                        "],[6,"use"],[9,"id","New Project"],[9,"href","#img1"],[9,"transform","matrix(1,0,0,1,-29,0)"],[7],[8],[0,"\\n                                        "],[8],[0,"\\n                                        "],[6,"h2"],[7],[1,[20,["strings","Redeem_Success_Xbox_Live_Gold_Core_Title"]],false],[8],[0,"\\n                                        "],[6,"p"],[7],[1,[20,["strings","Redeem_Success_Xbox_Live_Gold_Core_Description"]],false],[8],[0,"\\n                                        "],[6,"a"],[10,"href",[26,[[20,["showCTALinksForGoldLive","xboxGamePassCoreURL"]]]]],[9,"target","_blank"],[10,"aria-label",[20,["strings","Redeem_Success_Xbox_Live_Gold_Core_Description"]],null],[10,"data-bi-name",[20,["strings","Redeem_Success_Xbox_Live_Gold_Core_Title"]],null],[7],[0,"\\n                                            "],[6,"span"],[7],[1,[20,["strings","LearnMore_Text"]],false],[8],[0,"\\n                                            "],[6,"i"],[9,"class","icon icon-chevron-left"],[7],[8],[0,"\\n                                        "],[8],[0,"\\n                                    "],[8],[0,"\\n                                    "],[6,"div"],[9,"class","game_pass_use"],[7],[0,"\\n                                        "],[6,"svg"],[9,"version","1.2"],[9,"xmlns","http://www.w3.org/2000/svg","http://www.w3.org/2000/xmlns/"],[9,"viewBox","0 0 588 940"],[9,"width","588"],[9,"height","940"],[7],[0,"\\n\\t                                        "],[6,"title"],[7],[0,"Game Library"],[8],[0,"\\n\\t                                        "],[6,"defs"],[7],[0,"\\n\\t\\t                                        "],[6,"image"],[9,"width","2960"],[9,"height","1668"],[9,"id","img2"],[9,"href","data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDc0MCA0MTciIHdpZHRoPSI3NDAiIGhlaWdodD0iNDE3Ij4KCTx0aXRsZT5nYW1lbGlicmFyeS1zdmc8L3RpdGxlPgoJPHN0eWxlPgoJCS5zMCB7IGZpbGw6ICMwMDAwMDAgfSAKCTwvc3R5bGU+Cgk8ZyBpZD0iTGF5ZXJfMl8xXyI+Cgk8L2c+Cgk8ZyBpZD0iaWNvbnMiPgoJCTxwYXRoIGlkPSJMYXllciIgZmlsbC1ydWxlPSJldmVub2RkIiBjbGFzcz0iczAiIGQ9Im00MDIuNyAxNTIuMnYyNS45aDM5LjN2MTMuMWgyNS45djEwNC42aC0yNS45djEzLjFoLTM5LjN2MjUuOWgtMTMwLjV2LTE4Mi43em0wIDE0My43aDI2LjJ2LTEwNC43aC0yNi4yem0tMTE3LjcgMjYuMWgxMDQuNnYtMTU3aC0xMDQuNnptMTU3LTM5LjNoMTN2LTc4LjVoLTEzeiIvPgoJPC9nPgo8L3N2Zz4="],[7],[8],[0,"\\n\\t                                        "],[8],[0,"\\n\\t                                        "],[6,"style"],[7],[0,"\\n\\t                                        "],[8],[0,"\\n\\t                                        "],[6,"use"],[9,"id","gamelibrary-svg"],[9,"href","#img2"],[9,"transform","matrix(.717,0,0,.717,-772,-226)"],[7],[8],[0,"\\n                                        "],[8],[0,"\\n                                        "],[6,"h2"],[7],[1,[20,["strings","Redeem_Success_Xbox_Live_Gold_Library"]],false],[8],[0,"\\n                                        "],[6,"p"],[7],[1,[20,["strings","Redeem_Success_Xbox_Live_Gold_Library_Description"]],false],[8],[0,"\\n                                        "],[6,"a"],[10,"href",[26,[[20,["showCTALinksForGoldLive","xboxGamePassCoreURL"]]]]],[9,"target","_blank"],[10,"aria-label",[20,["strings","Redeem_Success_Xbox_Live_Gold_Library_Description"]],null],[10,"data-bi-name",[20,["strings","Redeem_Success_Xbox_Live_Gold_Library"]],null],[7],[0,"\\n                                            "],[6,"span"],[7],[1,[20,["strings","Redeem_Success_Xbox_Live_Gold_Explore_Games"]],false],[8],[0,"\\n                                            "],[6,"i"],[9,"class","icon icon-chevron-left"],[7],[8],[0,"\\n                                        "],[8],[0,"\\n                                    "],[8],[0,"\\n                                    "],[6,"div"],[9,"class","game_pass_use"],[7],[0,"\\n                                        "],[6,"img"],[9,"src","/uniblends/REL20231025.1/assets/images/xbox-console-v2.png"],[10,"alt",[20,["strings","Redeem_Success_Image_Alt_Text_Xbox_Console"]],null],[7],[8],[0,"\\n                                        "],[6,"h2"],[7],[1,[20,["strings","Redeem_Success_Xbox_Game_Pass_Consoles"]],false],[8],[0,"\\n                                        "],[6,"p"],[7],[1,[20,["strings","Redeem_Success_GP_Ultimate_Way_To_Play_Xbox_Consoles_Description"]],false],[8],[0,"\\n                                        "],[6,"a"],[10,"href",[26,[[20,["showCTALinksForGoldLive","xboxAllConsolesURL"]]]]],[9,"target","_blank"],[10,"aria-label",[20,["strings","Redeem_Success_GP_Ultimate_Way_To_Play_Xbox_Consoles_CTA"]],null],[10,"data-bi-name",[20,["strings","Redeem_Success_Xbox_Game_Pass_Consoles"]],null],[7],[0,"\\n                                            "],[6,"span"],[7],[1,[20,["strings","Redeem_Success_GP_Ultimate_Way_To_Play_Xbox_Consoles_CTA"]],false],[8],[0,"\\n                                            "],[6,"i"],[9,"class","icon icon-chevron-left"],[7],[8],[0,"\\n                                        "],[8],[0,"\\n                                    "],[8],[0,"\\n                                "],[8],[0,"\\n                            "]],"parameters":[]},null]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]},null],[4,"unless",[[20,["showRedeemSuccessImprovementV2"]]],null,{"statements":[[4,"if",[[20,["showCTALinksForUltimate"]]],null,{"statements":[[0,"                                "],[6,"div"],[9,"class","game_pass_use_container"],[7],[0,"\\n                                    "],[6,"div"],[9,"class","game_pass_use_row"],[7],[0,"\\n                                        "],[6,"div"],[9,"class","game_pass_use ultimate_use_card"],[7],[0,"\\n                                            "],[6,"img"],[9,"src","/uniblends/REL20231025.1/assets/images/xbox-play.png"],[10,"alt",[20,["strings","Redeem_Success_Image_Alt_Text_Xbox_Com"]],null],[7],[8],[0,"\\n                                            "],[6,"h1"],[7],[0,"Xbox.com/play"],[8],[0,"\\n                                            "],[6,"a"],[10,"href",[26,[[20,["showCTALinksForUltimate","xboxComPlayURL"]]]]],[9,"target","_blank"],[10,"aria-label",[20,["strings","Redeem_Success_GP_Ultimate_Way_To_Play_Xbox_Com_Play_CTA"]],null],[7],[0,"\\n                                                "],[6,"span"],[7],[1,[20,["strings","Redeem_Success_GP_Ultimate_Way_To_Play_Xbox_Com_Play_CTA"]],false],[8],[0,"\\n                                                "],[6,"i"],[9,"class","icon icon-chevron-left"],[7],[8],[0,"\\n                                            "],[8],[0,"\\n                                        "],[8],[0,"\\n                                        "],[6,"div"],[9,"class","game_pass_use ultimate_use_card"],[7],[0,"\\n                                            "],[6,"img"],[9,"src","/uniblends/REL20231025.1/assets/images/xbox-console.png"],[10,"alt",[20,["strings","Redeem_Success_Image_Alt_Text_Xbox_Console"]],null],[7],[8],[0,"\\n                                            "],[6,"h1"],[7],[0,"Xbox consoles"],[8],[0,"\\n                                            "],[6,"a"],[10,"href",[26,[[20,["showCTALinksForUltimate","xboxConsoleURL"]]]]],[9,"target","_blank"],[10,"aria-label",[20,["strings","Redeem_Success_GP_Ultimate_Way_To_Play_Xbox_Consoles_CTA"]],null],[7],[0,"\\n                                                "],[6,"span"],[7],[1,[20,["strings","Redeem_Success_GP_Ultimate_Way_To_Play_Xbox_Consoles_CTA"]],false],[8],[0,"\\n                                                "],[6,"i"],[9,"class","icon icon-chevron-left"],[7],[8],[0,"\\n                                            "],[8],[0,"\\n                                        "],[8],[0,"\\n                                    "],[8],[0,"\\n                                    "],[6,"div"],[9,"class","game_pass_use_row"],[7],[0,"\\n                                        "],[6,"div"],[9,"class","game_pass_use ultimate_use_card"],[7],[0,"\\n                                            "],[6,"img"],[9,"src","/uniblends/REL20231025.1/assets/images/windows-pc.png"],[10,"alt",[20,["strings","Redeem_Success_Image_Alt_Text_Windows_PC"]],null],[7],[8],[0,"\\n                                            "],[6,"h1"],[7],[0,"Xbox app for Windows PC"],[8],[0,"\\n                                            "],[6,"a"],[10,"href",[26,[[20,["showCTALinksForUltimate","xboxAppWinPCURL"]]]]],[9,"target","_blank"],[10,"aria-label",[20,["strings","Redeem_Success_GP_Way_To_Play_Xbox_App_Win_PC_CTA"]],null],[7],[0,"\\n                                                "],[6,"span"],[7],[1,[20,["strings","Redeem_Success_GP_Way_To_Play_Xbox_App_Win_PC_CTA"]],false],[8],[0,"\\n                                                "],[6,"i"],[9,"class","icon icon-chevron-left"],[7],[8],[0,"\\n                                            "],[8],[0,"\\n                                        "],[8],[0,"\\n                                        "],[6,"div"],[9,"class","game_pass_use ultimate_use_card"],[7],[0,"\\n                                            "],[6,"img"],[9,"src","/uniblends/REL20231025.1/assets/images/mobileapp.png"],[10,"alt",[20,["strings","Redeem_Success_Image_Alt_Text_Mobile_App"]],null],[7],[8],[0,"\\n                                            "],[6,"h1"],[7],[0,"Xbox Game Pass mobile app"],[8],[0,"\\n                                            "],[6,"div"],[9,"class","game_pass_links"],[7],[0,"\\n                                                "],[6,"a"],[10,"href",[26,[[20,["showCTALinksForUltimate","xboxMobAppGooglePlayStoreURL"]]]]],[9,"target","_blank"],[10,"aria-label",[20,["strings","Google_Store_Logo_Alt_Text"]],null],[7],[0,"\\n                                                    "],[6,"img"],[9,"src","/uniblends/REL20231025.1/assets/images/badge-google.png"],[10,"alt",[20,["strings","Google_Store_Logo_Alt_Text"]],null],[7],[8],[0,"\\n                                                "],[8],[0,"\\n                                                "],[6,"a"],[10,"href",[26,[[20,["showCTALinksForUltimate","xboxMobAppSamsungGalaxyStoreURL"]]]]],[9,"target","_blank"],[10,"aria-label",[20,["strings","Samsung_Store_Logo_Alt_Text"]],null],[7],[0,"\\n                                                    "],[6,"img"],[9,"src","/uniblends/REL20231025.1/assets/images/badge-samsung-galaxy-store.png"],[10,"alt",[20,["strings","Samsung_Store_Logo_Alt_Text"]],null],[7],[8],[0,"\\n                                                "],[8],[0,"\\n                                                "],[6,"a"],[10,"href",[26,[[20,["showCTALinksForUltimate","xboxUltimateAppleStoreUrl"]]]]],[9,"target","_blank"],[10,"aria-label",[20,["strings","App_Store_LogoAltText"]],null],[7],[0,"\\n                                                    "],[6,"img"],[9,"src","/uniblends/REL20231025.1/assets/images/badge-appStore.png"],[10,"alt",[20,["strings","App_Store_LogoAltText"]],null],[7],[8],[0,"\\n                                                "],[8],[0,"\\n                                            "],[8],[0,"\\n                                        "],[8],[0,"\\n                                    "],[8],[0,"\\n                                "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[20,["showCTALinksForPC"]]],null,{"statements":[[0,"                                "],[6,"h1"],[9,"class","game_pass_use_header"],[7],[1,[20,["strings","Redeem_Success_GP_PC_Ways_To_Play_Title"]],false],[8],[0,"\\n                                "],[6,"div"],[9,"class","game_pass_use_container"],[7],[0,"\\n                                    "],[6,"div"],[9,"class","game_pass_use"],[7],[0,"\\n                                        "],[6,"img"],[9,"src","/uniblends/REL20231025.1/assets/images/windows-pc.png"],[10,"alt",[20,["strings","Redeem_Success_Image_Alt_Text_Windows_PC"]],null],[7],[8],[0,"\\n                                        "],[6,"h1"],[7],[0,"Xbox app for Windows PC"],[8],[0,"\\n                                        "],[6,"p"],[7],[1,[20,["strings","Redeem_Success_GP_Way_To_Play_Xbox_App_Win_PC_Description"]],false],[8],[0,"\\n                                        "],[6,"a"],[10,"href",[26,[[20,["showCTALinksForPC","xboxAppWinPCURL"]]]]],[9,"target","_blank"],[10,"aria-label",[20,["strings","Redeem_Success_GP_Way_To_Play_Xbox_App_Win_PC_CTA"]],null],[7],[0,"\\n                                            "],[6,"span"],[7],[1,[20,["strings","Redeem_Success_GP_Way_To_Play_Xbox_App_Win_PC_CTA"]],false],[8],[0,"\\n                                            "],[6,"i"],[9,"class","icon icon-chevron-left"],[7],[8],[0,"\\n                                        "],[8],[0,"\\n                                    "],[8],[0,"\\n                                "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[20,["showCTALinksForConsole"]]],null,{"statements":[[0,"                                "],[6,"div"],[9,"class","game_pass_use_container"],[7],[0,"\\n                                    "],[6,"div"],[9,"class","game_pass_use_row"],[7],[0,"\\n                                        "],[6,"div"],[9,"class","game_pass_use"],[7],[0,"\\n                                            "],[6,"img"],[9,"src","/uniblends/REL20231025.1/assets/images/xbox-play.png"],[10,"alt",[20,["strings","Redeem_Success_Image_Alt_Text_Xbox_Com"]],null],[7],[8],[0,"\\n                                            "],[6,"h1"],[7],[0,"Xbox.com"],[8],[0,"\\n                                            "],[6,"a"],[10,"href",[26,[[20,["showCTALinksForConsole","xboxComURL"]]]]],[9,"target","_blank"],[10,"aria-label",[20,["strings","Redeem_Success_GP_Console_Way_To_Play_Xbox_Com_CTA"]],null],[7],[0,"\\n                                                "],[6,"span"],[7],[1,[20,["strings","Redeem_Success_GP_Console_Way_To_Play_Xbox_Com_CTA"]],false],[8],[0,"\\n                                                "],[6,"i"],[9,"class","icon icon-chevron-left"],[7],[8],[0,"\\n                                            "],[8],[0,"\\n                                        "],[8],[0,"\\n                                        "],[6,"div"],[9,"class","game_pass_use"],[7],[0,"\\n                                            "],[6,"img"],[9,"src","/uniblends/REL20231025.1/assets/images/mobileapp.png"],[10,"alt",[20,["strings","Redeem_Success_Image_Alt_Text_Mobile_App"]],null],[7],[8],[0,"\\n                                            "],[6,"h1"],[7],[0,"Xbox Game Pass mobile app"],[8],[0,"\\n                                            "],[6,"div"],[9,"class","game_pass_links"],[7],[0,"\\n                                                "],[6,"a"],[10,"href",[26,[[20,["showCTALinksForConsole","xboxMobAppSamsungGalaxyStoreURL"]]]]],[9,"target","_blank"],[10,"aria-label",[20,["strings","Samsung_Store_Logo_Alt_Text"]],null],[7],[0,"\\n                                                    "],[6,"img"],[9,"src","/uniblends/REL20231025.1/assets/images/badge-samsung-galaxy-store.png"],[10,"alt",[20,["strings","Samsung_Store_Logo_Alt_Text"]],null],[7],[8],[0,"\\n                                                "],[8],[0,"\\n                                                "],[6,"a"],[10,"href",[26,[[20,["showCTALinksForConsole","xboxMobAppGooglePlayStoreURL"]]]]],[9,"target","_blank"],[10,"aria-label",[20,["strings","Google_Store_Logo_Alt_Text"]],null],[7],[0,"\\n                                                    "],[6,"img"],[9,"src","/uniblends/REL20231025.1/assets/images/badge-google.png"],[10,"alt",[20,["strings","Google_Store_Logo_Alt_Text"]],null],[7],[8],[0,"\\n                                                "],[8],[0,"\\n                                                "],[6,"a"],[10,"href",[26,[[20,["showCTALinksForConsole","xboxUltimateAppleStoreUrl"]]]]],[9,"target","_blank"],[10,"aria-label",[20,["strings","App_Store_LogoAltText"]],null],[7],[0,"\\n                                                    "],[6,"img"],[9,"src","/uniblends/REL20231025.1/assets/images/badge-appStore.png"],[10,"alt",[20,["strings","App_Store_LogoAltText"]],null],[7],[8],[0,"\\n                                                "],[8],[0,"\\n                                            "],[8],[0,"\\n                                        "],[8],[0,"\\n                                    "],[8],[0,"\\n                                "],[8],[0,"\\n                            "]],"parameters":[]},null]],"parameters":[]}]],"parameters":[]}]],"parameters":[]},null]],"parameters":[]},{"statements":[[4,"if",[[20,["xboxUltimateApp"]]],null,{"statements":[[0,"                            "],[6,"div"],[9,"class","deep_link_container"],[7],[0,"\\n                                "],[6,"a"],[9,"class","deep_link"],[10,"href",[26,[[20,["xboxUltimateApp","windowsStoreURL"]]]]],[9,"target","_blank"],[10,"aria-label",[20,["strings","Windows_Store_Link_AriaLabel"]],null],[7],[0,"\\n                                    "],[6,"img"],[9,"src","/uniblends/REL20231025.1/assets/images/badge-microsoft.png"],[10,"alt",[26,[[20,["strings","Windows_Store_LogoAltText"]]]]],[7],[8],[0,"\\n                                "],[8],[0,"\\n                                "],[6,"a"],[9,"class","deep_link"],[10,"href",[26,[[20,["xboxUltimateApp","googleStoreURL"]]]]],[9,"target","_blank"],[10,"aria-label",[20,["strings","Google_Store_Link_AriaLabel"]],null],[7],[0,"\\n                                    "],[6,"img"],[9,"src","/uniblends/REL20231025.1/assets/images/badge-google.png"],[10,"alt",[26,[[20,["strings","Google_Store_LogoAltText"]]]]],[7],[8],[0,"\\n                                "],[8],[0,"\\n                                "],[6,"a"],[9,"class","deep_link"],[10,"href",[26,[[20,["xboxUltimateApp","appleStoreURL"]]]]],[9,"target","_blank"],[10,"aria-label",[20,["strings","App_Store_Link_AriaLabel"]],null],[7],[0,"\\n                                    "],[6,"img"],[9,"src","/uniblends/REL20231025.1/assets/images/badge-appStore.png"],[10,"alt",[26,[[20,["strings","App_Store_LogoAltText"]]]]],[7],[8],[0,"\\n                                "],[8],[0,"\\n                            "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[20,["getAppString"]]],null,{"statements":[[0,"                            "],[6,"a"],[9,"id","actionLink"],[9,"class","redeem_link cli_appRedeemLink"],[10,"href",[26,[[20,["model","targetUrlInfo","targetUrl"]]]]],[9,"data-bi-name","LinkToProductClicked"],[9,"data-bi-slot","0"],[3,"action",[[19,0,[]],"getAppClicked"]],[7],[0,"\\n                                "],[6,"i"],[9,"class","icon icon-newstorelogo16"],[9,"aria-hidden","true"],[7],[8],[1,[18,"getAppString"],false],[0,"\\n                            "],[8],[0,"\\n                        "]],"parameters":[]},null]],"parameters":[]}]],"parameters":[]}]],"parameters":[]},null],[0,"                "],[6,"p"],[9,"class","TextContainer cli_installBuyWarning"],[7],[1,[18,"redeemProductInstallBuyWarning"],false],[8],[0,"\\n            "]],"parameters":[]}]],"parameters":[]}],[4,"if",[[20,["showOfficeActivationMessage"]]],null,{"statements":[[0,"                "],[6,"p"],[9,"class","TextContainer cli_officeActivationMessage"],[7],[1,[18,"officeActivationMessage"],false],[8],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}],[0,"        "],[2," hasCsv "],[0,"\\n    "],[8],[0,"\\n\\n"],[4,"if",[[20,["showContactPreference"]]],null,{"statements":[[0,"        "],[6,"div"],[9,"class","CTAContainer"],[7],[0,"\\n            "],[6,"button"],[9,"class","btn btn-primary cli_closeButton"],[9,"id","closeButton"],[9,"data-bi-slot","1"],[9,"data-bi-name","Ok"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"close"]],[7],[1,[20,["strings","Shared_Button_OK"]],false],[8],[0,"\\n        "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[20,["showCloseCTA"]]],null,{"statements":[[0,"        "],[6,"div"],[9,"class","CTAContainer"],[7],[0,"\\n            "],[6,"button"],[9,"class","btn btn-default btn-back cli_closeButton"],[9,"id","closeButton"],[9,"data-bi-slot","1"],[9,"data-bi-name","Close"],[9,"data-bi-mto",""],[3,"action",[[19,0,[]],"close"]],[7],[1,[20,["strings","Button_Close"]],false],[8],[0,"\\n"],[4,"if",[[20,["showRedeemAnother"]]],null,{"statements":[[0,"                "],[6,"button"],[9,"class","btn btn-primary cli_redeemAnotherButton"],[9,"id","redeemAnotherButton"],[9,"data-bi-slot","2"],[9,"data-bi-name","redeemAnother"],[3,"action",[[19,0,[]],"redeemAnother"]],[7],[1,[20,["strings","Redeem_RedeemAnother"]],false],[8],[0,"\\n"]],"parameters":[]},null],[0,"        "],[8],[0,"\\n    "]],"parameters":[]},null]],"parameters":[]}],[0,"    "],[2," showCloseCTA "],[0,"\\n"],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/redeem/success.hbs"}})}),define("web-blends/templates/rewards/claim-incentive",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"MBdvMD1d",block:'{"symbols":[],"statements":[[6,"section"],[9,"class","RewardsDisplayContainer"],[9,"role","main"],[9,"data-bi-area","RewardsClaimOffer"],[9,"data-bi-name","RewardsClaimOffer"],[7],[0," \\n    "],[6,"div"],[9,"class","content"],[9,"role","form"],[7],[0,"\\n        "],[6,"h1"],[9,"class","type-t2 cli_dialogTitle"],[7],[1,[18,"offerTitle"],false],[8],[0,"\\n        "],[6,"div"],[9,"class","productRow"],[9,"data-bi-name","OfferInfo"],[9,"data-bi-id","offerInfo"],[7],[0,"\\n            "],[6,"div"],[9,"class","columnImage"],[7],[0,"\\n                 "],[6,"img"],[9,"id","logoImage"],[10,"alt",[20,["imageParts","altText"]],null],[10,"src",[20,["imageParts","link"]],null],[7],[8],[0,"\\n            "],[8],[0,"\\n            "],[6,"div"],[9,"class","columnProduct"],[7],[0,"\\n                "],[6,"h2"],[9,"class","type-t3 cli_redeemAmountMessage"],[7],[1,[20,["imageParts","description"]],false],[8],[0,"\\n            "],[8],[0,"\\n        "],[8],[0,"\\n        "],[6,"div"],[9,"data-bi-name","OfferDescription"],[7],[0,"\\n            "],[6,"p"],[9,"class","type-t3 cli_instruction"],[9,"id","Description"],[7],[0,"\\n                "],[6,"b"],[7],[1,[18,"offerDescription"],false],[8],[0,"\\n            "],[8],[0,"\\n        "],[8],[0,"\\n        "],[6,"div"],[9,"id","LegalContainer"],[9,"data-bi-name","LegalText"],[7],[0,"\\n            "],[1,[25,"message-with-links",null,[["messageParts","action","tagName"],[[20,["legalParts"]],"openLegalStatement","p"]]],false],[0,"\\n        "],[8],[0,"\\n"],[4,"unless",[[20,["model","isRewardsMember"]]],null,{"statements":[[0,"            "],[6,"br"],[7],[8],[0,"\\n            "],[6,"div"],[9,"class","xbox-checkbox c-checkbox"],[7],[0,"\\n                "],[6,"label"],[9,"class","c-label xbox-label"],[7],[0,"\\n                    "],[1,[25,"input",null,[["type","data-bi-name","class","id","checked","aria-checked"],["checkbox","BecomeRewardsMemberCheckbox","cli_checkbox","becomeRewardsMemberCheckbox",[20,["checkboxIsChecked"]],[20,["checkboxIsChecked"]]]]],false],[0,"\\n                    "],[6,"span"],[9,"class","cli_message"],[7],[0," "],[1,[18,"checkboxText"],false],[0," "],[8],[0,"\\n                "],[8],[0,"\\n            "],[8],[0,"\\n"]],"parameters":[]},null],[0,"    "],[8],[0,"\\n    "],[6,"div"],[9,"class","CTAContainer"],[7],[0,"\\n        "],[6,"button"],[9,"id","cancelButton"],[9,"data-bi-slot","1"],[9,"data-bi-name","CancelButton"],[9,"class","btn btn-default btn-back cli_cancelButton"],[3,"action",[[19,0,[]],"cancel"]],[7],[0,"\\n            "],[1,[20,["strings","Shared_Button_Cancel"]],false],[0,"\\n        "],[8],[0,"\\n        "],[6,"button"],[9,"id","claimButton"],[9,"data-bi-slot","2"],[9,"data-bi-name","ClaimButton"],[9,"class","btn btn-primary cli_claimButton"],[10,"disabled",[18,"claimButtonIsDisabled"],null],[3,"action",[[19,0,[]],"claim"]],[7],[0,"\\n            "],[1,[20,["strings","RewardsOffer_Claim_Button"]],false],[0,"\\n        "],[8],[0,"\\n"],[4,"if",[[20,["isXboxOne"]]],null,{"statements":[[0,"            "],[6,"div"],[9,"class","btn-legal"],[7],[0,"\\n                "],[6,"button"],[9,"id","viewTerms"],[9,"class","btn"],[9,"data-bi-slot","3"],[9,"data-bi-name","ViewTerms"],[3,"action",[[19,0,[]],"openLegalStatement",[20,["legalLink"]],"legalTerms"]],[7],[0,"\\n                    "],[1,[20,["strings","View_Terms_Button"]],false],[0,"\\n                "],[8],[0,"\\n                "],[6,"button"],[9,"id","viewPrivacy"],[9,"class","btn"],[9,"data-bi-slot","4"],[9,"data-bi-name","ViewPrivacy"],[3,"action",[[19,0,[]],"openLegalStatement",[20,["privacyLink"]],"privacyTerms"]],[7],[0,"\\n                    "],[1,[20,["strings","View_Privacy_Button"]],false],[0,"\\n                "],[8],[0,"\\n            "],[8],[0," \\n"]],"parameters":[]},null],[0,"    "],[8],[0,"\\n"],[8]],"hasEval":false}',meta:{moduleName:"web-blends/templates/rewards/claim-incentive.hbs"}})}),define("web-blends/utils/app-config",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default={getScriptSource:function(){return $("script#webBlendsScript")[0].src},getStringsScriptRoot:function(){var e=this.getScriptSource()||""
return e=e.substring(0,e.indexOf("assets"))},getBuildNumber:function(){var e=this.getScriptSource(),t=/(REL[^/]*)\/assets/.exec(e)
return t&&t.length>1?t[1]:"DEV"}}})
define("web-blends/utils/body-resize",["exports","sfw-messaging/utils/post-messages","sfw-messaging/utils/messages"],function(e,t,n){Object.defineProperty(e,"__esModule",{value:!0})
var a=0
e.default={init:function(){window.setInterval(this.detectSizeChange,200)},detectSizeChange:function(){var e=$("body").height()
e!==a&&(t.default.send(n.default.sizeChanged(e)),a=e)}}}),define("web-blends/utils/constants",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0})
e.default={askToBuy:{reasons:{noPi:"noPi",insufficientCsv:"insufficientCsv",askToBuyPolicy:"askToBuyPolicy",age:"age"}},dlcThankYouCategories:{iap:["durable","consumable","unmanagedconsumable"],other:["consumable","unmanagedconsumable"]},mercuryDunningScenarios:{none:0,updatePi:1,trueDunning:2},purchaseBlockErrors:{showLearnMoreInfoErrors:["PurchaseRejected"]},riskRejectedErrors:{webLink:'<a target="_blank" href="{0}">aka.ms/purchasesupport</a>',showSelectPiErrors:["RiskRejected-BankDeclineLimit_Reject","RiskRejected-PreorderPrepaid_Reject","RiskRejected-PrepaidBIN_Reject","RiskRejected-ExpiredCC_Reject"],showGetMoreInfoErrors:["RiskRejected-Reshipper_Reject","RiskRejected-PremiumSkuLimit_Reject","RiskRejected-MXIntCard_Reject","RiskRejected-CSVLimit_Reject","RiskRejected-GiroCSV_Reject","RiskRejected-HighLimit_Reject","RiskRejected-XboxDD_Reject","RiskRejected-XboxEnf_Reject","RiskRejected-XIN_Reject","RiskRejected-BOPIS_Reject","RiskRejected-ParentalControl_Reject","RiskRejected-MSCompleteSkuMismatch_Reject","RiskRejected-SubOnly_Reject","RiskRejected-Trials_Policy","RiskRejected-TrialsPolicy_Reject","RiskRejected-EmShutdown_Reject","RiskRejected"]},redeemErrors:{showGetMoreInfoErrors:["CsvCurrencyMismatch","UserAlreadyOwnsContent","XboxSubscriptionsMismatchedMarketAndLanguage","RenewalBlockedByFamilyPolicy","TokenNotInRedeemableState","TokenOfferExpired","CatalogSkuDataNotFound","TokenNotSupported","RiskRejected"]},amcLinks:{webLink:'<a target="_blank" class="c-hyperlink" href="{0}">{1}</a>',subscriptionsUrl:"https://account.microsoft.com/services"},backupFlights:"wb_allowelo,wb_allowmpesapi,wb_allowpaysafecard,wb_allowverve,wb_amexco,wb_capturepaint,wb_currformfallback,wb_donotdisablelogging,wb_enableccsmd,wb_enableclienthandleurlflag,wb_enabledunning,wb_enablekakaopay,wb_enablepidlspinner,wb_enablezipplusfour,wb_giftnodowngrade,wb_hipercard,wb_iframertlfix,wb_klarna-desktop,wb_klarnareturnurls,wb_loadingspinner,wb_newcurrencyformatting,wb_newoobeerrordesc,wb_nodoublecsvbackup,wb_nonsimforsub,wb_oobeaskforaddress,wb_oobepichange,wb_oobestyledpicontainer,wb_oobevalidatepionattach,wb_pidlsdkccedit,wb_pidlsdkcupedit,wb_pidlsdkplaceholder,wb_pidlsdkselectpi,wb_pidlsdksms,wb_psd2enable,wb_psd2oobepartner,wb_psd2xboxpartner,wb_purchasestatesessiontime,wb_qiwi,wb_qrcodepaypalxbox,wb_removebusystyle,wb_riskypi,wb_selectaddressoobe,wb_skippreview,wb_staticcommerceurl,wb_storeunloadfix,wb_subsinterstitial,wb_subsintrange,wb_subupgrade,wb_trimerrorcode,wb_updatecurrencyformat,wb_valenciaupgrade,wb_addresssdk,wb_askaparentmessage,wb_cleartokenizeddataonerror,wb_enumpilang,wb_epayredirect,wb_geoerror,wb_msacidcheck,wb_purchasecorrelationcontext,wb_redeemmany,wb_removeloadorderdetails,wb_renewalpriceformat,wb_resourceexistsretry,wb_riskreasoncode,wb_saveprofile,wb_sfdspriceoverride,wb_skipomexcheck,wb_ultimateupgrade,wb_xboxsunset,wb_addfailedstateinallerror,wb_addloadeventinerror,wb_newlegaltextlayout,wb_newsubscriptionlegalstrings,wb_previeweligibility,wb_profilesdk,wb_fingerprintdesktopconfirm,wb_updateimageurlprorate,wb_dainwinoobe,wb_fingerprintxcloud,wb_pidlsdkcvv,wb_mercurysubtime,wb_eaplayconvupdate,wb_clientosversionincontext,wb_pidlsdkallpis,wb_fingerprintconfirmall,wb_toomanyrequests,wb_buynowusagerules,wb_fingerprintredeemall-sg,wb_fingerprintredeemall-ca,wb_purchasedblocked,wb_purchasedblockedby,wb_fingerprintredeemall,wb_fixxboxcomurls,wb_updatedfamilystrings,wb_returnurl,wb_bankchallengexboxcom,wb_bankchallengenonxbox,wb_koreatransactionfee,wb_skipoobeprevieweligibility,wb_startdatalogging,wb_redeemshowaddpifirst,wb_proratedynamic,wb_daproratedynamic,wb_additionalmetadata,wb_updateresourcefix,wb_upgradetelemetry,wb_redeemperf,wb_updatetokennotsupportedstring,wb_partnernametelemetry,wb_conversionblockedxaa,wb_oobetrialtreatmentb,wb_getmoreinfourl,wb_redeemsuccessimprovement,wb_redeemsuccessfix,wb_redeemsuccessimprovementv2,wb_removependingpis,wb_xaaconversionexpirationdate,wb_redeemoffice365redirect,wb_redeemofficeredirect,wb_redeemperfv2,wb_proratedrefunds,wb_pitelemetry,wb_pitelemetrybeta,wb_parsepidlerror,wb_hidecreditcardexpiry,wb_modernconversion,wb_officeredirectinxbox,wb_conversionblockederror,wb_dahydratefix,wb_bankchallengeconsole,wb_showcanceldisclaimerdefaultv1,wb_argentinatransactionfee,wb_legalstringsjp,wb_koreatransactionfeev1,wb_ispurchasecontext,wb_maxstackingpolicy,wb_maxstackingpolicyv1,wb_mcrenewaldatev2,wb_orderinfoinredeem,wb_pricevariant,wb_removeresellerforstoreapp,wb_retrypifdazurefd,wb_allowvenmo,wb_captchanonxboxnonoobe,wb_redeemsuccessimprovementgoldlive",omexProductIds:{OfficeHomeProductId:"CFQ7TTC0K5DM",OfficePersonalProductId:"CFQ7TTC0K5BF",Microsoft365SoloProductId:"CFQ7TTC0K5BC",Microsoft365ServicesProductId:"CFQ7TTC0K5BD",OfficeHomeBusiness2019:"CFQ7TTC0K7CQ"},refundCancelDisclaimerTypes:{defaultCancelDisclaimer:"defaultCancelDisclaimer",nonRefundableSubscription:"nonRefundableSubscription",proratedRefundAvailableAnyTime:"proratedRefundAvailableAnyTime",proratedRefundAvailableAfterFirstYear:"proratedRefundAvailableAfterFirstYear"}}}),define("web-blends/utils/feature-enable",["exports","sfw-telemetry/utils/client","sfw-telemetry/utils/flight-config"],function(e,t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default={isIndia3DSFeatureEnabled:function(e){if(n.default.isEnabled("bankchallenge"))return!0
if(e){if(t.default.isXboxOneClient()&&n.default.isEnabled("bankchallengeconsole")&&n.default.isEnabled("bankchallengeredeem"))return!0
if(t.default.isXboxComClient()&&n.default.isEnabled("bankchallengexboxcom")&&n.default.isEnabled("bankchallengeredeem"))return!0
if(!t.default.isXboxComClient()&&!t.default.isXboxOneClient()&&n.default.isEnabled("bankchallengenonxbox")&&n.default.isEnabled("bankchallengeredeem"))return!0}else{if(t.default.isXboxOneClient()&&n.default.isEnabled("bankchallengeconsole"))return!0
if(t.default.isXboxComClient()&&n.default.isEnabled("bankchallengexboxcom"))return!0
if(!t.default.isXboxComClient()&&!t.default.isXboxOneClient()&&n.default.isEnabled("bankchallengenonxbox"))return!0}return!1},isCaptchaFlightHeaderEnabled:function(){return!!n.default.isEnabled("captchaforall")||(!(!t.default.isXboxOneClient()||!n.default.isEnabled("captchaconsole"))||(!(!t.default.isWindowsOobeClient()||!n.default.isEnabled("captchaoobe"))||!(t.default.isXboxOneClient()||t.default.isWindowsOobeClient()||!n.default.isEnabled("captchanonxboxnonoobe"))))}}}),define("web-blends/utils/format-token",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){if("string"!=typeof e)return""
var t
t="-"===e[e.length-1]
for(var n=(e=e.replace(/[^A-Za-z0-9]/g,"").toUpperCase()).substring(0,5),a=Math.min(5,Math.floor(e.length/5)+1),r=1;r<a;r++)n=n+"-"+e.substr(5*r,5)
return t||"-"!==n[n.length-1]?n:n.substr(0,n.length-1)}}),define("web-blends/utils/get-more-info-error",["exports","sfw-services/utils/constant-links","sfw-telemetry/utils/client","sfw-services/utils/strings","sfw-telemetry/utils/start-data","sfw-telemetry/utils/flight-config"],function(e,t,n,a,r,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default={updateRiskRejectedErrorString:function(e,r){var i=s.default.isEnabled("getmoreinfourl")?t.default.get().getMoreInfoRiskRejectedConsoleLinkNew:t.default.get().getMoreInfoRiskRejectedConsoleLink,l=""
return l=n.default.isXboxOneClient()?'<a target="_blank" href="'+i+'" data-bi-name="'+r+'">'+a.default.GetMoreInfo_Link+"</a>":'<a target="_blank" href="'+t.default.get().getMoreInfoRiskRejectedBrowserLink+'" data-bi-name="'+r+'">'+a.default.GetMoreInfo_Link+"</a>",e.concat(" ",l)},updateRedeemErrorString:function(e,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=s.default.isEnabled("getmoreinfourl")?t.default.get().getMoreInfoConsoleLinkNew:t.default.get().getMoreInfoConsoleLink,o=""
return o=n.default.isXboxOneClient()?'<a target="_blank" href="'+l+'" data-bi-name="'+r+'">'+a.default.GetMoreInfo_Link+"</a>":i?'<a target="_blank" href="'+t.default.get().getMoreInfoBrowserLink+'" data-bi-name="'+r+'" class="screen-reader-link" tabindex="-1">'+a.default.GetMoreInfo_Link+"</a>":'<a target="_blank" href="'+t.default.get().getMoreInfoBrowserLink+'" data-bi-name="'+r+'">'+a.default.GetMoreInfo_Link+"</a>",e.concat(" ",o)},updatePurchaseErrorString:function(e,s){var i=""
return"RU".equalsIgnoreCase(r.default.get().Market)&&!n.default.isXboxOneClient()&&(i='<a target="_blank" href="'+t.default.get().blockPurchaseLearnMoreLink+'" data-bi-name="'+s+'">'+a.default.LearnMore_Text+"</a>"),e.concat(" ",i)}}}),define("web-blends/utils/image-selector",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0})
e.default=function(e){var t=null,n=99999
if(e&&Array.isArray(e)){if(e.forEach(function(e){"tile"===e.ImagePurpose.toLowerCase()&&e.Height===e.Width&&e.Height>67&&e.Height<n&&(n=e.Height,t=0===e.Uri.indexOf("//")?"https:"+e.Uri:e.Uri)}),t)return t
if(e.forEach(function(e){"tile"===e.ImagePurpose.toLowerCase()&&(t=0===e.Uri.indexOf("//")?"https:"+e.Uri:e.Uri)}),t)return t
if(e.forEach(function(e){"logo"===e.ImagePurpose.toLowerCase()&&(t=0===e.Uri.indexOf("//")?"https:"+e.Uri:e.Uri)}),t)return t
if(e.forEach(function(e){"boxart"===e.ImagePurpose.toLowerCase()&&(t=0===e.Uri.indexOf("//")?"https:"+e.Uri:e.Uri)}),t)return t}return null}}),define("web-blends/utils/load-urls",["exports","web-blends/config/environment","sfw-telemetry/utils/flight-config","sfw-urls/prod/urls","sfw-urls/dev/urls","sfw-urls/int/urls","sfw-urls/mirage/urls","sfw-urls/mock/urls"],function(e,t,n,a,r,s,i,l){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){var o=void 0
if(n.default.isEnabled("mirage"))o=i.default
else if(n.default.isMockService())o=l.default
else switch(e=e||n.default.getFlightValue("env")||t.default.environment){case"development":case"dev":o=r.default
break
case"test":o=i.default
break
case"int":o=s.default
break
default:o=a.default}return"function"!=typeof o.load&&(o=a.default),o.load()}}),define("web-blends/utils/offer-parser",["exports","sfw-services/utils/base64"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default={parseTvodOffer:function(e){if(e){var n=t.default.decodeToString(e)
return this.decodeFromSamlToObj(n)}return null},decodeFromSamlToObj:function(e){var t={}
try{$("saml\\:Attribute",e).each(function(e,n){var a=n.getAttribute("attributename"),r=n.innerText
a&&(t[a]=r,"True"===r?t[a]=!0:"False"===r&&(t[a]=!1))})}catch(e){return null}return $.isEmptyObject(t)?null:Ember.Object.create(t)}}}),define("web-blends/utils/perf",["exports","sfw-telemetry/utils/instrumentation","sfw-telemetry/utils/start-data","sfw-telemetry/utils/flight-config","sfw-telemetry/utils/client"],function(e,t,n,a,r){Object.defineProperty(e,"__esModule",{value:!0})
var s={markerNames:{scripts:{jquery:"wb-script-jquery",ember:"wb-script-ember",vendor:"wb-script-vendor",webBlends:"wb-script-web-blends"},appInit:"wb-app-init",appStart:"wb-app-start",appReady:"wb-app-ready",buyButtonActive:"wb-bba",purchaseStart:"wb-purchase-start",purchaseComplete:"wb-purchase-complete",redeemInit:"wb-redeem-init",redeemLoad:"wb-redeem-load"},loadCaptured:!1,LoadRedeemCaptured:!1,purchaseCaptured:!1,paintCalculationRetries:0,markOnce:function(){},captureLoad:function(){},captureLoadRedeem:function(){},captureLoadRedeemPurchaseFlow:function(){},captureLoadRedeemNonPurchaseFlow:function(){},capturePaint:function(){},capturePurchase:function(){},reset:function(){}}
if(window.performance&&window.performance.mark&&window.performance.clearMarks&&window.performance.timing&&window.performance.getEntriesByName){var i=function(e){var t=window.performance.getEntriesByName(e)
if(t.length){var n=t[0]
return Math.floor(window.performance.timing.navigationStart+n.startTime)}return 0}
Ember.merge(s,{markOnce:function(e){window.performance.getEntriesByName(e).length||window.performance.mark(e)},capturePaint:function(e){var n=this,a=i("first-contentful-paint")
!a&&this.paintCalculationRetries<15?(this.paintCalculationRetries++,setTimeout(function(){n.capturePaint(e)},2e3)):((e=e||{}).perfData=Object.assign({},e.perfData,{firstContentfulPaint:a}),t.default.captureContentPageAction({name:"WebPurchase-Paint"},e))},captureLoad:function(e,r){if(!this.loadCaptured){var s={navigationStart:window.performance.timing.navigationStart,scripts:{jquery:i(this.markerNames.scripts.jquery),ember:i(this.markerNames.scripts.ember),vendor:i(this.markerNames.scripts.vendor),webBlends:i(this.markerNames.scripts.webBlends)},pageLoaded:window.performance.timing.loadEventStart,appInit:i(this.markerNames.appInit),appStart:i(this.markerNames.appStart),appReady:i(this.markerNames.appReady)}
n.default.get().preloadedOpenTime&&(s.preloadedOpenTime=n.default.get().preloadedOpenTime)
var l=i(this.markerNames.buyButtonActive)
l&&(s.buyButtonActive=l,a.default.isEnabled("ttbba")&&s.navigationStart&&(s.timeToBuyButtonActive=l-s.navigationStart)),(e=e||{}).perfData=s,t.default.captureContentPageAction({name:"WebPurchase-Load",scn:r,scnstp:"WebBlends-Load Funnel Load",stpnum:"1"},e,"STARTPROCESS"),this.loadCaptured=!0,a.default.isEnabled("capturepaint")&&this.capturePaint(e)}},captureRedeemInit:function(){s.markOnce(s.markerNames.redeemInit)},captureRedeemLoad:function(e){a.default.isEnabled("redeemperfv2")?(a.default.isEnabled("redeemperfv3")?e:r.default.getIsReactEmbeddedPurchaseFlow())?this.captureRedeemLoadNavigationStartToLoadFlow():r.default.getIsPurchaseFlow()?this.captureRedeemLoadInitToLoadFlow():this.captureRedeemLoadNavigationStartToLoadFlow():e?this.captureRedeemLoadInitToLoadFlow():this.captureRedeemLoadNavigationStartToLoadFlow()},captureRedeemLoadInitToLoadFlow:function(){s.markOnce(s.markerNames.redeemLoad)
var e=void 0
e=a.default.isEnabled("redeemperfv3")?{perfData:{redeemInit:i(this.markerNames.redeemInit),redeemLoad:i(this.markerNames.redeemLoad)}}:{isPurchaseFlow:!0,perfData:{redeemInit:i(this.markerNames.redeemInit),redeemLoad:i(this.markerNames.redeemLoad)}},t.default.captureContentPageAction({name:"Redeem-Load"},e)},captureRedeemLoadNavigationStartToLoadFlow:function(){if(!this.LoadRedeemCaptured){s.markOnce(s.markerNames.redeemLoad)
var e={navigationStart:window.performance.timing.navigationStart,scripts:{jquery:i(this.markerNames.scripts.jquery),ember:i(this.markerNames.scripts.ember),vendor:i(this.markerNames.scripts.vendor),webBlends:i(this.markerNames.scripts.webBlends)},pageLoaded:window.performance.timing.loadEventStart,appInit:i(this.markerNames.appInit),appStart:i(this.markerNames.appStart),appReady:i(this.markerNames.appReady),redeemInit:i(this.markerNames.redeemInit),redeemLoad:i(this.markerNames.redeemLoad)}
n.default.get().preloadedOpenTime&&(e.preloadedOpenTime=n.default.get().preloadedOpenTime)
var r=void 0
r=a.default.isEnabled("redeemperfv3")?{perfData:e}:{isPurchaseFlow:!1,perfData:e},t.default.captureContentPageAction({name:"Redeem-Load"},r),this.LoadRedeemCaptured=!0,a.default.isEnabled("capturepaint")&&this.capturePaint(r)}},capturePurchase:function(e){if(!this.purchaseCaptured){var n={purchaseStart:i(this.markerNames.purchaseStart),purchaseComplete:i(this.markerNames.purchaseComplete)};(e=e||{}).perfData=n,t.default.captureContentPageAction({name:"WebPurchase-Purchase"},e),this.purchaseCaptured=!0}},reset:function(){window.performance.clearMarks(),this.loadCaptured=!1,this.LoadRedeemCaptured=!1,this.purchaseCaptured=!1}})}e.default=s}),define("web-blends/utils/pidl-event-handler",["exports","sfw-telemetry/utils/blend-bi-tracker","sfw-components/utils/pidl-user-input-error","sfw-messaging/utils/open-url","sfw-telemetry/utils/client","sfw-messaging/utils/open-terms","sfw-telemetry/utils/start-data","sfw-telemetry/utils/app-globals","sfw-services/models/select-pi","sfw-services/utils/order-pi-context","sfw-services/models/session-ids","sfw-messaging/utils/post-messages","sfw-messaging/utils/messages","sfw-telemetry/utils/flight-config"],function(e,t,n,a,r,s,i,l,o,d,u,c,m,f){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,t){if(p&&p.hasOwnProperty(e))return t?p[e].apply(this,[t]):p[e].apply(this)
return null}
var p={error:function(e){e&&e.error&&"propertyValidationFailed"===e.error.name?n.default.logField(e):e&&e.error&&"formValidationFailed"===e.error.name?n.default.logFields(e.error.errors):t.default.captureContentPageAction({name:"PidlSdkValidationFailed"},{errorDetail:e})},propertySelected:function(){},propertyValidated:function(e){if((r.default.isXboxOneClient()||r.default.isModernXboxClient())&&"addressSuggestionPage"===e.pageId){var t=$(".pidlddc-inline-element-0"),n=1
1!==(n=g("entered",$(".pidlddc-inline-element-1"),n=g("suggested_2",t,n=g("suggested_1",t,n=g("suggested_0",t,n)))))&&($("#pidlddc-button-addressBackToEditButton").attr("tabIndex",n++),$("#pidlddc-button-addressUseButton").attr("tabIndex",n),$("#pidlddc-button-addressUseButton").trigger("click"))}},instanceDownloading:function(){},instanceDownloaded:function(){},pidlDownloading:function(){},pidlDownloaded:function(){},pageRendering:function(){},pageRendered:function(e){var n=e&&e.pageId||"noPageInfo"
if(t.default.capturePageView(n,e),r.default.isWindowsOobeClient()&&c.default.send(m.default.cortanaStringDescription(e&&e.currentPageDescription)),"IFramePage".equalsIgnoreCase(n)&&$(".pidlddc-iFrame")&&$(".pidlddc-iFrame").length&&$(".pidlddc-iFrame").focus(),(r.default.isXboxOneClient()||r.default.isModernXboxClient())&&"addressSuggestionPage"===e.currentPageId){var a=$(".pidlddc-inline-element-0"),s=1
if(1!==(s=g("entered",$(".pidlddc-inline-element-1"),s=g("suggested_2",a,s=g("suggested_1",a,s=g("suggested_0",a,s)))))){$("#pidlddc-button-addressBackToEditButton").attr("tabIndex",s++),$("#pidlddc-button-addressUseButton").attr("tabIndex",-1),$("#pidlddc-button-addressUseButton").hide()
var i=$("#blend_paymentInstrument_id_suggested_0_label")
0!==i.length&&i.on("click",function(){$("#pidlddc-button-addressUseButton").trigger("click")})}}},captchaRendered:function(e){var n=e&&e.currentPageId||"noPageInfo"
t.default.captureContentPageAction({name:"captchaRendered"},{pageName:n})},pageNavigated:function(e){var n=e&&e.currentPageId||"noPageInfo"
t.default.capturePageView(n,e),r.default.isOfficeDIMEClient&&window.setTimeout(function(){window.scrollTo({top:0})},100),(r.default.isXboxOneClient()||r.default.isModernXboxClient())&&"addressSuggestionEditPage"===e.currentPageId&&window.setTimeout(function(){$("#pidlddc-div-addressDetailsDataGroup").find(".pidlddc-div-textbox").each(function(){$(this).find("input").attr("placeholder",$(this).find("label").text())})},100)},inputReading:function(){},inputRead:function(){},inputValidating:function(){},inputValidated:function(){},inputTokenizing:function(){},inputTokenized:function(){},inputSubmitting:function(){},inputSubmitted:function(){},propertyCreating:function(e){if(e.displayDescription&&e.htmlAttributes){var t=e.displayDescription.maxLength
if(t){var n=r.default.isXboxOneClient()?180:40
e.htmlAttributes.style="width:"+t*n+"px"}}return e},click:function(e){t.default.captureContentPageAction({name:"clickAction",contentId:e&&e.id},{pageName:e&&e.pageId})},navigate:function(e){if(e.piRedirection){t.default.captureContentPageAction({name:"openUrl",contentId:"piRedirect"},{pageName:e.pageId})
var n=e.context&&e.context.successParams;(function(e,t){if(i.default.get().AddPiSuccessUrl&&i.default.get().AddPiFailureUrl){l.default._sessionIds||(l.default._sessionIds=u.default.create())
var n=l.default._sessionIds.getSessionId()
l.default._selectPiData||(l.default._selectPiData=o.default.create())
var r,s,f=l.default._selectPiData.selectedPis
l.default._selectPiData.selectBackupPi?(s=t,r=f.id):r=t,d.default.saveContext(i.default.get().OrderId,n,r,s,"payment-instrument-sdk"),c.default.send(m.default.openUrl(e,"piRedirect",!0))}else a.default.open(e,"piRedirect")})(e.url,n&&n.id)}else{var p=r.default.isXboxOneClient()&&(f.default.isEnabled("klarna-xbox")&&["klarnatou","klarnaconsent"].containsAnyIgnoreCase(e.dest)||["alipaylegal"].containsAnyIgnoreCase(e.dest)),g=p?e.dest:s.default.getTarget(e.displayId).touType
t.default.captureContentPageAction({name:"openTerms",contentId:g},{pageName:e.pageId}),r.default.isXboxOneClient()||r.default.isWindowsOobeClient()?p?s.default.open(e.dest,e.url,!1,!0):s.default.open(e.displayId,e.url):a.default.open(e.url,g)}return!0}}
function g(e,t,n){if(0===t.find($("."+e+"_container")).length){var a=$("<div></div>")
a.attr("class",e+"_container")
var r=$("#blend_paymentInstrument_id_"+e+"_label")
if(0!==r.length){var s=r.find("input")
a.append(s),s.hide(),a.append(r)
var i=$("<p></p>")
i.addClass(e+"_use-button-label"),i.append($("#pidlddc-button-addressUseButton").attr("value")),r.append(i),r.attr("tabIndex",n),t.append(a),n++}}return n}}),define("web-blends/utils/pidl-sdk",["exports","sfw-services/utils/app-services","sfw-telemetry/utils/flight-config","web-blends/config/environment","sfw-telemetry/utils/start-data","sfw-telemetry/utils/instrumentation","web-blends/utils/pidl-event-handler","sfw-services/utils/service-call-headers","sfw-telemetry/utils/client","web-blends/utils/feature-enable"],function(e,t,n,a,r,s,i,l,o,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default={init:function(){t.default.get("pidl").downloadAssets("",n.default.isEnabled("pidlsdkconvergence")?"convergence":n.default.isEnabled("pidlsdkupgrade")?"beta":"stable")},sdkEnvironment:function(){return"production"===a.default.environment||"ppe"===a.default.environment||"prod"===n.default.getFlightValue("env")?"prod":"ppe"},pidlSdkPartnerForChallenge:function(){return n.default.isEnabled("psd2xboxpartner")&&o.default.isXboxOneClient()?"webblendsxbox":n.default.isEnabled("psd2oobepartner")&&o.default.isWindowsOobeClient()?"officeoobe":"webblends"},challengeWindowSize:function(){var e=window&&window.innerWidth,t=window&&window.innerHeight,n="01"
if(e&&t){var a=[{value:"03",width:500,height:600},{value:"04",width:600,height:400},{value:"02",width:390,height:400},{value:"01",width:250,height:400}].find(function(n){return n.width<e&&n.height<t})
a&&(n=a.value)}return o.default.isOfficeDIMEClient()&&t&&t<400?"03":n},pidlSdkCreateSessionOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=l.default.get({omitAcceptLanguage:!0,omitMarket:!0,add3DSOne:d.default.isIndia3DSFeatureEnabled(e)})
return n.default.isEnabled("addpipidltestheader")?(t["x-ms-test"]='{ "scenarios": "px-service-psd2-e2e-emulator,BillDeskForceCreateToken,BillDeskUseTestEncryption,BillDeskTokenization,GenericPaymentsTestStore", "contact": "TestAMC" }',t["x-ms-flight"]?t["x-ms-flight"]=t["x-ms-flight"]+",EnableThreeDSOne":t["x-ms-flight"]="EnableThreeDSOne"):n.default.isEnabled("psd2pidltestheader")?t["x-ms-test"]='{ "scenarios": "px-service-psd2-e2e-emulator", "contact": "psd2test" }':n.default.isEnabled("psd2pidltestheaderalways")?t["x-ms-test"]='{ "scenarios": "px.payerauth.psd2.challenge.success,px.pims.3ds,acs.ui.singleselect", "contact": "psd2test" }':n.default.isEnabled("psd2pidltestheadercancel")?t["x-ms-test"]='{ "scenarios": "px.payerauth.psd2.challenge.cancelled, px.pims.3ds", "contact": "psd2test" }':n.default.isEnabled("psd2pidltestheaderfail")?t["x-ms-test"]='{ "scenarios": "px.payerauth.psd2.challenge.failed, px.pims.3ds", "contact": "psd2test" }':n.default.isEnabled("psd2pidltestheaderto")?t["x-ms-test"]='{ "scenarios": "px.payerauth.psd2.challenge.timedout, px.pims.3ds", "contact": "psd2test" }':n.default.isEnabled("psd2pidltestheaderfailtoattach")?t["x-ms-test"]='{ "scenarios": "px.pims.validate.failed", "contact": "psd2test" }':n.default.isEnabled("bankchallengeaddpi")?t["x-ms-test"]='{"scenarios":"px-service-psd2-e2e-emulator,BillDeskForceCreateToken,BillDeskUseTestEncryption,BillDeskTokenization,GenericPaymentsTestStore","contact":"test"}':n.default.isEnabled("bankchallengepurchase")?t["x-ms-test"]='{"scenarios": "px-service-billdesk-provider,px-service-psd2-e2e-emulator", contact: "test"}':n.default.isEnabled("venmoactive")?t["x-ms-test"]='{"scenarios": "px.pims.venmo.add.pending.get.active", contact: "test"}':n.default.isEnabled("venmopending")?t["x-ms-test"]='{"scenarios": "px.pims.venmo.add.pending.get.pending", contact: "test"}':n.default.isEnabled("venmoerror")&&(t["x-ms-test"]='{"scenarios": "px.pims.venmo.add.pending.get.error", contact: "test"}'),{clientContext:s.default.getContext(),disableLogging:"false".equalsIgnoreCase(r.default.get().IsTelemetryEnabled),userId:"me",additionalHeaders:t,displayOptions:{containerId:"dummyContainerId"},sdkEventHandler:i.default}}}}),define("web-blends/utils/post-messages",["exports","sfw-messaging/utils/post-messages"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("web-blends/utils/rewards",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default={findEligibleOffer:function(e,t){return e&&e.get("promotions")&&e.get("promotions").find(function(e){var n=e.attributes
return n&&n[t]&&"true"===n[t].toLowerCase()&&n.complete&&"false"===n.complete.toLowerCase()})}}}),define("web-blends/utils/selected-backup-pi",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,t,n){var a
if(n&&e&&e.length)for(a=0;a<e.length;a++)if(e[a].id===n)return e[a]
var r=t&&t.get&&t.get("selectedBackupPi")
if(r&&e&&e.length)for(a=0;a<e.length;a++)if(e[a].id===r)return e[a]
return null}}),define("web-blends/utils/selected-pi",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,t,n){var a=t?t.get&&t.get("selectedPi"):null,r=!1
if(Array.isArray(e)){n&&(r=e.find(function(e){return e.id===n})),!r&&a&&(r=e.find(function(e){return e.id===a})),r||(r=e.find(function(e){return e.get("payment_method_type")&&"stored_value"===e.get("payment_method_type").toLowerCase()}))
var s=function(e){return e.get("isAsyncPiWithWaitTime")}
r||(r=e.find(function(e){return!(e.get("payment_method_family")&&"mobile_carrier_billing"===e.get("payment_method_family").toLowerCase()&&!0===e.exceededMaxPrice||e.get("isExpired")||s(e))})),r||(r=e.find(function(e){return!s(e)}))}return r||!1}}),define("web-blends/utils/styles",["exports","sfw-telemetry/utils/start-data","sfw-telemetry/utils/flight-config"],function(e,t,n){Object.defineProperty(e,"__esModule",{value:!0})
var a,r={default:"/uniblends/REL20231025.1/assets/web-blends.css",defaultDark:"/uniblends/REL20231025.1/assets/web-blends-dark.css",fullscreen:{windowsoobe:"/uniblends/REL20231025.1/assets/web-blends-windows-oobe.css",windowsroobe:"/uniblends/REL20231025.1/assets/web-blends-windows-roobe.css"},inline:{default:"/uniblends/REL20231025.1/assets/web-blends-inline-default.css",dark:"/uniblends/REL20231025.1/assets/web-blends-inline-dark.css",office:"/uniblends/REL20231025.1/assets/web-blends-inline-office.css",officedime:"/uniblends/REL20231025.1/assets/web-blends-inline-officedime.css",officewin32:"/uniblends/REL20231025.1/assets/web-blends-inline-officewin32.css",amc:"/uniblends/REL20231025.1/assets/web-blends-inline-amc.css"},modal:{default:"/uniblends/REL20231025.1/assets/web-blends-modal-default.css",dark:"/uniblends/REL20231025.1/assets/web-blends-modal-dark.css",xbox:"/uniblends/REL20231025.1/assets/web-blends-modal-xbox-dark.css",xboxdark:"/uniblends/REL20231025.1/assets/web-blends-modal-xbox-dark.css",xboxlight:"/uniblends/REL20231025.1/assets/web-blends-modal-xbox-light.css",gamingapp:"/uniblends/REL20231025.1/assets/web-blends-modal-gamingapp-dark.css",gamingappdark:"/uniblends/REL20231025.1/assets/web-blends-modal-gamingapp-dark.css",xcloud:"/uniblends/REL20231025.1/assets/web-blends-modal-xcloud-dark.css",xclouddark:"/uniblends/REL20231025.1/assets/web-blends-modal-xcloud-dark.css",saturn:"/uniblends/REL20231025.1/assets/web-blends-modal-saturn-dark.css",saturndark:"/uniblends/REL20231025.1/assets/web-blends-modal-saturn-dark.css",saturnlight:"/uniblends/REL20231025.1/assets/web-blends-modal-saturn-light.css"},xbox:{default:"/uniblends/REL20231025.1/assets/web-blends-xbox-default.css",animated:"/uniblends/REL20231025.1/assets/web-blends-xbox-animated.css",dark:"/uniblends/REL20231025.1/assets/web-blends-xbox-dark.css",light:"/uniblends/REL20231025.1/assets/web-blends-xbox-light.css",mercury:"/uniblends/REL20231025.1/assets/web-blends-xbox-mercury.css",saturn:"/uniblends/REL20231025.1/assets/web-blends-xbox-saturn-dark.css",saturndark:"/uniblends/REL20231025.1/assets/web-blends-xbox-saturn-dark.css",saturnlight:"/uniblends/REL20231025.1/assets/web-blends-xbox-saturn-light.css"}}
e.default={init:function(){this.clear()
var e=t.default.get().Border,s=t.default.get().Layout&&t.default.get().Layout.toLowerCase?t.default.get().Layout.toLowerCase():null,i=t.default.get().CssOverride&&t.default.get().CssOverride.toLowerCase?t.default.get().CssOverride.toLowerCase():null,l=t.default.get().SystemColor?t.default.get().SystemColor:null,o=t.default.get().Brand&&t.default.get().Brand.toLowerCase?t.default.get().Brand.toLowerCase():null,d=void 0
"none".equalsIgnoreCase(e)&&$(".borderBox").removeClass("borderBox"),i&&o&&(i=o+i),d=r[s]?r[s][i]?r[s][i]:r[s].default:"dark"===i?r.defaultDark:r.default,"mercury"!==i&&"saturn"!==o||!l||document.documentElement.style.setProperty("--userColor",l),"windowsoobe"===i&&n.default.isEnabled("litewhite")&&(d=r.fullscreen.windowsroobe),(a=$("<link/>",{rel:"stylesheet",type:"text/css",href:d})).appendTo("head")},clear:function(){a&&a.remove(),a=null}}}),define("web-blends/utils/winjs",["exports","web-blends/modules/busy","sfw-services/services/request","sfw-telemetry/utils/client","sfw-messaging/utils/post-messages","sfw-messaging/utils/messages"],function(e,t,n,a,r,s){Object.defineProperty(e,"__esModule",{value:!0})
var i=!1
e.default={reset:function(){i=!1},init:function(){return i?Ember.RSVP.resolve():n.default.getScript({url:"/uniblends/external/winjs/4.1.0/base.min.js",cache:!0,serviceName:"WebBlends",operationName:"getWinJsBaseJs"}).then(function(){return n.default.getScript({url:"/uniblends/external/winjs/4.1.0/ui.min.js",cache:!0,serviceName:"WebBlends",operationName:"getWinJsUiJs"})}).then(function(){i=!0,$(document).ready(function(){if($(document.body).addClass("win-xbox"),"undefined"!=typeof WinJS&&WinJS.Utilities&&WinJS.UI&&WinJS.UI.XYFocus&&WinJS.UI.XYFocus.addEventListener&&WinJS.UI.processAll&&"undefined"!=typeof Windows&&Windows.Xbox&&Windows.Xbox.Audio&&Windows.Xbox.Audio.SoundClip&&Windows.Foundation&&Windows.Foundation.Uri){var e=new Windows.Xbox.Audio.SoundClip(new Windows.Foundation.Uri("ms-winsoundevent:///ElementFocus1"))
WinJS.UI.XYFocus.addEventListener("focuschanged",function(){e.play()},!1)}"undefined"!=typeof WinJS&&WinJS.UI&&WinJS.UI.processAll&&(document.onkeyup=function(e){t.default.isBusy()||(e.which===WinJS.Utilities.Key.GamepadB||e.which===WinJS.Utilities.Key.escape?(a.default.isModernXboxClient()&&r.default.send(s.default.action("gamepadbuttonb")),$(".btn-back").length?$(".btn-back").click():$(".pidlddc-back").length?$(".pidlddc-back").click():$(".cli_cancelButton").length&&$(".cli_cancelButton").click(),e.preventDefault(),e.stopImmediatePropagation()):!$(".btn-xbox-submit").length||e.which!==WinJS.Utilities.Key.GamepadMenu&&e.which!==WinJS.Utilities.Key.enter?$(".pidlddc-highlighted").length&&e.which===WinJS.Utilities.Key.GamepadMenu&&$(".pidlddc-highlighted").click():$(".btn-xbox-submit").click())},WinJS.UI.processAll())})},function(){})},isWinJsDefined:function(){return i}}}),define("web-blends/config/environment",[],function(){try{var e="web-blends/config/environment",t=document.querySelector('meta[name="'+e+'"]').getAttribute("content"),n={default:JSON.parse(unescape(t))}
return Object.defineProperty(n,"__esModule",{value:!0}),n}catch(t){throw new Error('Could not read config from meta tag with name "'+e+'".')}}),runningTests||require("web-blends/app").default.create({LOG_RESOLVER:!1,LOG_ACTIVE_GENERATION:!1,LOG_TRANSITIONS:!1,LOG_TRANSITIONS_INTERNAL:!1,LOG_VIEW_LOOKUPS:!1,name:"web-blends",version:"0.0.0+9d3b0a8d"})